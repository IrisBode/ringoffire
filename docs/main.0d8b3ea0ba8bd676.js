"use strict";(self.webpackChunkringoffire=self.webpackChunkringoffire||[]).push([[179],{2011:(gt,Oe,F)=>{F.d(Oe,{Dh:()=>ge,GT:()=>ye,cc:()=>Ve,hO:()=>Ge,on:()=>K,pX:()=>fe,xv:()=>Ce});var d=F(4650),H=F(127),N=F(5813);gt=F.hmd(gt);const ue=["ngOnDestroy"],fe=(_e,rt,et,Ue={})=>new Proxy(_e,{get:(Ne,Me)=>et.runOutsideAngular(()=>{var Ye;if(_e[Me])return!(null===(Ye=Ue?.spy)||void 0===Ye)&&Ye.get&&Ue.spy.get(Me,_e[Me]),_e[Me];if(ue.indexOf(Me)>-1)return()=>{};const ae=rt.toPromise().then(ve=>{const Te=ve&&ve[Me];return"function"==typeof Te?Te.bind(ve):Te&&Te.then?Te.then(te=>et.run(()=>te)):et.run(()=>Te)});return new Proxy(()=>{},{get:(ve,Te)=>ae[Te],apply:(ve,Te,te)=>ae.then(le=>{var de;const Ee=le&&le(...te);return!(null===(de=Ue?.spy)||void 0===de)&&de.apply&&Ue.spy.apply(Me,te,Ee),Ee})})})}),ye=(_e,rt)=>{rt.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(Ue=>{Object.defineProperty(_e.prototype,Ue,Object.getOwnPropertyDescriptor(et.prototype||et,Ue))})})};class ce{constructor(rt){return rt}}const ge=new d.OlP("angularfire2.app.options"),Ce=new d.OlP("angularfire2.app.name");function K(_e,rt,et){const Ne="object"==typeof et&&et||{};Ne.name=Ne.name||"string"==typeof et&&et||"[DEFAULT]";const Ye=H.Z.apps.filter(ae=>ae&&ae.name===Ne.name)[0]||rt.runOutsideAngular(()=>H.Z.initializeApp(_e,Ne));try{JSON.stringify(_e)!==JSON.stringify(Ye.options)&&W("error",`${Ye.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ce(Ye)}const W=(_e,...rt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...rt)},re={provide:ce,useFactory:K,deps:[ge,d.R0b,[new d.FiY,Ce]]};let Ge=(()=>{class _e{constructor(et){H.Z.registerVersion("angularfire",N.q4.full,"core"),H.Z.registerVersion("angularfire",N.q4.full,"app-compat"),H.Z.registerVersion("angular",d.q4F.full,et.toString())}static initializeApp(et,Ue){return{ngModule:_e,providers:[{provide:ge,useValue:et},{provide:Ce,useValue:Ue}]}}}return _e.\u0275fac=function(et){return new(et||_e)(d.LFG(d.Lbi))},_e.\u0275mod=d.oAB({type:_e}),_e.\u0275inj=d.cJS({providers:[re]}),_e})();function Ve(_e,rt,et,Ue,Ne){const[,Me,Ye]=globalThis.\u0275AngularfireInstanceCache.find(ae=>ae[0]===_e)||[];if(Me)return function Se(_e,rt){try{return _e.toString()===rt.toString()}catch{return _e===rt}}(Ne,Ye)||(De("error",`${rt} was already initialized on the ${et} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),De("warn",{is:Ne,was:Ye})),Me;{const ae=Ue();return globalThis.\u0275AngularfireInstanceCache.push([_e,ae,Ne]),ae}}const at=!!gt.hot,De=(_e,...rt)=>{(0,d.X6Q)()&&typeof console<"u"&&console[_e](...rt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(gt,Oe,F)=>{F.d(Oe,{q4:()=>Fo,iC:()=>Hn,HU:()=>ks,vb:()=>xs,JM:()=>Ph,u3:()=>_a});var d=F(4650),H=F(5867),N=F(5861),ue=F(9681),fe=F(2090),ye=F(4859),ce=F(1877),ge=F(8766);const Ce="@firebase/installations",K="0.5.12",re=`w:${K}`,Ge="FIS_v2",rt=new fe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function et(D){return D instanceof fe.ZR&&D.code.includes("request-failed")}function Ue({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Ne(D){return{token:D.token,requestStatus:2,expiresIn:le(D.expiresIn),creationTime:Date.now()}}function Me(D,S){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,N.Z)(function*(D,S){const U=(yield S.json()).error;return rt.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function ae({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ve(D,{refreshToken:S}){const k=ae(D);return k.append("Authorization",function de(D){return`${Ge} ${D}`}(S)),k}function Te(D){return te.apply(this,arguments)}function te(){return(te=(0,N.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function le(D){return Number(D.replace("s","000"))}function Ee(D,S){return pe.apply(this,arguments)}function pe(){return(pe=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:k}){const U=Ue(D),ee=ae(D),he=S.getImmediate({optional:!0});if(he){const Lt=yield he.getHeartbeatsHeader();Lt&&ee.append("x-firebase-client",Lt)}const qe={method:"POST",headers:ee,body:JSON.stringify({fid:k,authVersion:Ge,appId:D.appId,sdkVersion:re})},It=yield Te(()=>fetch(U,qe));if(It.ok){const Lt=yield It.json();return{fid:Lt.fid||k,registrationStatus:2,refreshToken:Lt.refreshToken,authToken:Ne(Lt.authToken)}}throw yield Me("Create Installation",It)})).apply(this,arguments)}function je(D){return new Promise(S=>{setTimeout(S,D)})}const tn=/^[cdef][\w-]{21}$/;function Ze(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const k=function mn(D){return function wt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return tn.test(k)?k:""}catch{return""}}function $n(D){return`${D.appName}!${D.appId}`}const _n=new Map;function rn(D,S){const k=$n(D);Mn(k,S),function Oi(D,S){const k=function Vn(){return!$r&&"BroadcastChannel"in self&&($r=new BroadcastChannel("[Firebase] FID Change"),$r.onmessage=D=>{Mn(D.data.key,D.data.fid)}),$r}();k&&k.postMessage({key:D,fid:S}),function gs(){0===_n.size&&$r&&($r.close(),$r=null)}()}(k,S)}function Mn(D,S){const k=_n.get(D);if(k)for(const U of k)U(S)}let $r=null;const zn="firebase-installations-store";let Qi=null;function yt(){return Qi||(Qi=(0,ge.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(zn)}})),Qi}function zr(D,S){return xn.apply(this,arguments)}function xn(){return(xn=(0,N.Z)(function*(D,S){const k=$n(D),ee=(yield yt()).transaction(zn,"readwrite"),he=ee.objectStore(zn),Le=yield he.get(k);return yield he.put(S,k),yield ee.done,(!Le||Le.fid!==S.fid)&&rn(D,S.fid),S})).apply(this,arguments)}function nn(D){return lr.apply(this,arguments)}function lr(){return(lr=(0,N.Z)(function*(D){const S=$n(D),U=(yield yt()).transaction(zn,"readwrite");yield U.objectStore(zn).delete(S),yield U.done})).apply(this,arguments)}function Yr(D,S){return cr.apply(this,arguments)}function cr(){return(cr=(0,N.Z)(function*(D,S){const k=$n(D),ee=(yield yt()).transaction(zn,"readwrite"),he=ee.objectStore(zn),Le=yield he.get(k),qe=S(Le);return void 0===qe?yield he.delete(k):yield he.put(qe,k),yield ee.done,qe&&(!Le||Le.fid!==qe.fid)&&rn(D,qe.fid),qe})).apply(this,arguments)}function Rn(D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,N.Z)(function*(D){let S;const k=yield Yr(D.appConfig,U=>{const ee=zs(U),he=Yt(D,ee);return S=he.registrationPromise,he.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function zs(D){return Gr(D||{fid:Ze(),registrationStatus:0})}function Yt(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(rt.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},U=function Qe(D,S){return dt.apply(this,arguments)}(D,k);return{installationEntry:k,registrationPromise:U}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Pi(D)}:{installationEntry:S}}function dt(){return(dt=(0,N.Z)(function*(D,S){try{const k=yield Ee(D,S);return zr(D.appConfig,k)}catch(k){throw et(k)&&409===k.customData.serverCode?yield nn(D.appConfig):yield zr(D.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Pi(D){return ur.apply(this,arguments)}function ur(){return(ur=(0,N.Z)(function*(D){let S=yield Ot(D.appConfig);for(;1===S.registrationStatus;)yield je(100),S=yield Ot(D.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:U}=yield Rn(D);return U||k}return S})).apply(this,arguments)}function Ot(D){return Yr(D,S=>{if(!S)throw rt.create("installation-not-found");return Gr(S)})}function Gr(D){return function kn(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function On(D,S){return hn.apply(this,arguments)}function hn(){return(hn=(0,N.Z)(function*({appConfig:D,heartbeatServiceProvider:S},k){const U=er(D,k),ee=ve(D,k),he=S.getImmediate({optional:!0});if(he){const Lt=yield he.getHeartbeatsHeader();Lt&&ee.append("x-firebase-client",Lt)}const qe={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:re,appId:D.appId}})},It=yield Te(()=>fetch(U,qe));if(It.ok)return Ne(yield It.json());throw yield Me("Generate Auth Token",It)})).apply(this,arguments)}function er(D,{fid:S}){return`${Ue(D)}/${S}/authTokens:generate`}function G(D){return q.apply(this,arguments)}function q(){return(q=(0,N.Z)(function*(D,S=!1){let k;const U=yield Yr(D.appConfig,he=>{if(!Dt(he))throw rt.create("not-registered");const Le=he.authToken;if(!S&&fn(Le))return he;if(1===Le.requestStatus)return k=j(D,S),he;{if(!navigator.onLine)throw rt.create("app-offline");const qe=dr(he);return k=Fe(D,qe),qe}});return k?yield k:U.authToken})).apply(this,arguments)}function j(D,S){return Y.apply(this,arguments)}function Y(){return(Y=(0,N.Z)(function*(D,S){let k=yield Q(D.appConfig);for(;1===k.authToken.requestStatus;)yield je(100),k=yield Q(D.appConfig);const U=k.authToken;return 0===U.requestStatus?G(D,S):U})).apply(this,arguments)}function Q(D){return Yr(D,S=>{if(!Dt(S))throw rt.create("not-registered");return function ie(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Fe(D,S){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,N.Z)(function*(D,S){try{const k=yield On(D,S),U=Object.assign(Object.assign({},S),{authToken:k});return yield zr(D.appConfig,U),k}catch(k){if(!et(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const U=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield zr(D.appConfig,U)}else yield nn(D.appConfig);throw k}})).apply(this,arguments)}function Dt(D){return void 0!==D&&2===D.registrationStatus}function fn(D){return 2===D.requestStatus&&!function on(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function dr(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function z(){return(z=(0,N.Z)(function*(D){const S=D,{installationEntry:k,registrationPromise:U}=yield Rn(S);return U?U.catch(console.error):G(S).catch(console.error),k.fid})).apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(D,S=!1){const k=D;return yield Et(k),(yield G(k,S)).token})).apply(this,arguments)}function Et(D){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,N.Z)(function*(D){const{registrationPromise:S}=yield Rn(D);S&&(yield S)})).apply(this,arguments)}function Xi(D){return rt.create("missing-app-config-values",{valueName:D})}const Ht="installations",mo=D=>{const S=D.getProvider("app").getImmediate(),k=function Xo(D){if(!D||!D.options)throw Xi("App Configuration");if(!D.name)throw Xi("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!D.options[k])throw Xi(k);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,ue._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},La=D=>{const S=D.getProvider("app").getImmediate(),k=(0,ue._getProvider)(S,Ht).getImmediate();return{getId:()=>function $(D){return z.apply(this,arguments)}(k),getToken:ee=>function Ie(D){return We.apply(this,arguments)}(k,ee)}};(function Gs(){(0,ue._registerComponent)(new ye.wA(Ht,mo,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("installations-internal",La,"PRIVATE"))})(),(0,ue.registerVersion)(Ce,K),(0,ue.registerVersion)(Ce,K,"esm2017");const fr="@firebase/remote-config",Dr=new fe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class xc{constructor(S,k,U,ee){this.client=S,this.storage=k,this.storageCache=U,this.logger=ee}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-k,ee=U<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var k=this;return(0,N.Z)(function*(){const[U,ee]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ee&&k.isCachedDataFresh(S.cacheMaxAgeMillis,U))return ee;S.eTag=ee&&ee.eTag;const he=yield k.client.fetch(S),Le=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===he.status&&Le.push(k.storage.setLastSuccessfulFetchResponse(he)),yield Promise.all(Le),he})()}}function Va(D=navigator){return D.languages&&D.languages[0]||D.language}class Ks{constructor(S,k,U,ee,he,Le){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=U,this.projectId=ee,this.apiKey=he,this.appId=Le}fetch(S){var k=this;return(0,N.Z)(function*(){var U,ee,he;const[Le,qe]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Lt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Ft={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},vt={sdk_version:k.sdkVersion,app_instance_id:Le,app_instance_id_token:qe,app_id:k.appId,language_code:Va()},yr={method:"POST",headers:Ft,body:JSON.stringify(vt)},Xr=fetch(Lt,yr),ol=new Promise((li,Os)=>{S.signal.addEventListener(()=>{const Lh=new Error("The operation was aborted.");Lh.name="AbortError",Os(Lh)})});let ss;try{yield Promise.race([Xr,ol]),ss=yield Xr}catch(li){let Os="fetch-client-network";throw"AbortError"===(null===(U=li)||void 0===U?void 0:U.name)&&(Os="fetch-timeout"),Dr.create(Os,{originalErrorMessage:null===(ee=li)||void 0===ee?void 0:ee.message})}let ji=ss.status;const al=ss.headers.get("ETag")||void 0;let ll,ya;if(200===ss.status){let li;try{li=yield ss.json()}catch(Os){throw Dr.create("fetch-client-parse",{originalErrorMessage:null===(he=Os)||void 0===he?void 0:he.message})}ll=li.entries,ya=li.state}if("INSTANCE_STATE_UNSPECIFIED"===ya?ji=500:"NO_CHANGE"===ya?ji=304:("NO_TEMPLATE"===ya||"EMPTY_CONFIG"===ya)&&(ll={}),304!==ji&&200!==ji)throw Dr.create("fetch-status",{httpStatus:ji});return{status:ji,eTag:al,config:ll}})()}}class ms{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,N.Z)(function*(){const U=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,U)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:U}){var ee=this;return(0,N.Z)(function*(){yield function wh(D,S){return new Promise((k,U)=>{const ee=Math.max(S-Date.now(),0),he=setTimeout(k,ee);D.addEventListener(()=>{clearTimeout(he),U(Dr.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const he=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),he}catch(he){if(!function ts(D){if(!(D instanceof fe.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(he))throw he;const Le={throttleEndTimeMillis:Date.now()+(0,fe.$s)(U),backoffCount:U+1};return yield ee.storage.setThrottleMetadata(Le),ee.attemptFetch(S,Le)}})()}}class Sp{constructor(S,k,U,ee,he){this.app=S,this._client=k,this._storageCache=U,this._storage=ee,this._logger=he,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ba(D,S){var k;const U=D.target.error||void 0;return Dr.create(S,{originalErrorMessage:U&&(null===(k=U)||void 0===k?void 0:k.message)})}const ta="app_namespace_store";class xu{constructor(S,k,U,ee=function Mp(){return new Promise((D,S)=>{var k;try{const U=indexedDB.open("firebase_remote_config",1);U.onerror=ee=>{S(Ba(ee,"storage-open"))},U.onsuccess=ee=>{D(ee.target.result)},U.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(ta,{keyPath:"compositeKey"})}}catch(U){S(Dr.create("storage-open",{originalErrorMessage:null===(k=U)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=U,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,N.Z)(function*(){const U=yield k.openDbPromise;return new Promise((ee,he)=>{var Le;const It=U.transaction([ta],"readonly").objectStore(ta),Lt=k.createCompositeKey(S);try{const Ft=It.get(Lt);Ft.onerror=vt=>{he(Ba(vt,"storage-get"))},Ft.onsuccess=vt=>{const yr=vt.target.result;ee(yr?yr.value:void 0)}}catch(Ft){he(Dr.create("storage-get",{originalErrorMessage:null===(Le=Ft)||void 0===Le?void 0:Le.message}))}})})()}set(S,k){var U=this;return(0,N.Z)(function*(){const ee=yield U.openDbPromise;return new Promise((he,Le)=>{var qe;const Lt=ee.transaction([ta],"readwrite").objectStore(ta),Ft=U.createCompositeKey(S);try{const vt=Lt.put({compositeKey:Ft,value:k});vt.onerror=yr=>{Le(Ba(yr,"storage-set"))},vt.onsuccess=()=>{he()}}catch(vt){Le(Dr.create("storage-set",{originalErrorMessage:null===(qe=vt)||void 0===qe?void 0:qe.message}))}})})()}delete(S){var k=this;return(0,N.Z)(function*(){const U=yield k.openDbPromise;return new Promise((ee,he)=>{var Le;const It=U.transaction([ta],"readwrite").objectStore(ta),Lt=k.createCompositeKey(S);try{const Ft=It.delete(Lt);Ft.onerror=vt=>{he(Ba(vt,"storage-delete"))},Ft.onsuccess=()=>{ee()}}catch(Ft){he(Dr.create("storage-delete",{originalErrorMessage:null===(Le=Ft)||void 0===Le?void 0:Le.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Ys{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,N.Z)(function*(){const k=S.storage.getLastFetchStatus(),U=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),he=yield k;he&&(S.lastFetchStatus=he);const Le=yield U;Le&&(S.lastSuccessfulFetchTimestampMillis=Le);const qe=yield ee;qe&&(S.activeConfig=qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function a_(){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,N.Z)(function*(){if(!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}!function Rc(){(0,ue._registerComponent)(new ye.wA("remote-config",function D(S,{instanceIdentifier:k}){const U=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Dr.create("registration-window");if(!(0,fe.hl)())throw Dr.create("indexed-db-unavailable");const{projectId:he,apiKey:Le,appId:qe}=U.options;if(!he)throw Dr.create("registration-project-id");if(!Le)throw Dr.create("registration-api-key");if(!qe)throw Dr.create("registration-app-id");const It=new xu(qe,U.name,k=k||"firebase"),Lt=new Ys(It),Ft=new ce.Yd(fr);Ft.logLevel=ce.in.ERROR;const vt=new Ks(ee,ue.SDK_VERSION,k,he,Le,qe),yr=new ms(vt,It),Xr=new xc(yr,It,Lt,Ft),ol=new Sp(U,Xr,Lt,It,Ft);return function Ac(D){const S=(0,fe.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(ol),ol},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(fr,"0.3.11"),(0,ue.registerVersion)(fr,"0.3.11","esm2017")}();const _s="/firebase-messaging-sw.js",ys="/firebase-cloud-messaging-push-scope",bo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ru="google.c.a.c_id",Ml="google.c.a.c_l",xl="google.c.a.ts",ra="google.c.a.e";var ns=(()=>{return(D=ns||(ns={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ns;var D})();function Gn(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Rl(D){const k=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(k),ee=new Uint8Array(U.length);for(let he=0;he<U.length;++he)ee[he]=U.charCodeAt(he);return ee}const Ua="fcm_token_details_db",kc="fcm_token_object_Store";function Ih(D){return Bn.apply(this,arguments)}function Bn(){return Bn=(0,N.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(he=>he.name).includes(Ua))return null;let S=null;return(yield(0,ge.X3)(Ua,5,{upgrade:(U=(0,N.Z)(function*(ee,he,Le,qe){var It;if(he<2||!ee.objectStoreNames.contains(kc))return;const Lt=qe.objectStore(kc),Ft=yield Lt.index("fcmSenderId").get(D);if(yield Lt.clear(),Ft)if(2===he){const vt=Ft;if(!vt.auth||!vt.p256dh||!vt.endpoint)return;S={token:vt.fcmToken,createTime:null!==(It=vt.createTime)&&void 0!==It?It:Date.now(),subscriptionOptions:{auth:vt.auth,p256dh:vt.p256dh,endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:"string"==typeof vt.vapidKey?vt.vapidKey:Gn(vt.vapidKey)}}}else if(3===he){const vt=Ft;S={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:Gn(vt.auth),p256dh:Gn(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:Gn(vt.vapidKey)}}}else if(4===he){const vt=Ft;S={token:vt.fcmToken,createTime:vt.createTime,subscriptionOptions:{auth:Gn(vt.auth),p256dh:Gn(vt.p256dh),endpoint:vt.endpoint,swScope:vt.swScope,vapidKey:Gn(vt.vapidKey)}}}}),function(he,Le,qe,It){return U.apply(this,arguments)})})).close(),yield(0,ge.Lj)(Ua),yield(0,ge.Lj)("fcm_vapid_details_db"),yield(0,ge.Lj)("undefined"),Oc(S)?S:null;var U}),Bn.apply(this,arguments)}function Oc(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const pr="firebase-messaging-store";let ia=null;function wo(){return ia||(ia=(0,ge.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(pr)}})),ia}function Zs(D){return gr.apply(this,arguments)}function gr(){return(gr=(0,N.Z)(function*(D){const S=vs(D),U=yield(yield wo()).transaction(pr).objectStore(pr).get(S);if(U)return U;{const ee=yield Ih(D.appConfig.senderId);if(ee)return yield sa(D,ee),ee}})).apply(this,arguments)}function sa(D,S){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,N.Z)(function*(D,S){const k=vs(D),ee=(yield wo()).transaction(pr,"readwrite");return yield ee.objectStore(pr).put(S,k),yield ee.done,S})).apply(this,arguments)}function Eo(D){return Li.apply(this,arguments)}function Li(){return(Li=(0,N.Z)(function*(D){const S=vs(D),U=(yield wo()).transaction(pr,"readwrite");yield U.objectStore(pr).delete(S),yield U.done})).apply(this,arguments)}function vs({appConfig:D}){return D.appId}const lt=new fe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Nc(D,S){return kl.apply(this,arguments)}function kl(){return(kl=(0,N.Z)(function*(D,S){var k;const U=yield aa(D),ee=Kt(S),he={method:"POST",headers:U,body:JSON.stringify(ee)};let Le;try{Le=yield(yield fetch(Ol(D.appConfig),he)).json()}catch(qe){throw lt.create("token-subscribe-failed",{errorInfo:null===(k=qe)||void 0===k?void 0:k.toString()})}if(Le.error)throw lt.create("token-subscribe-failed",{errorInfo:Le.error.message});if(!Le.token)throw lt.create("token-subscribe-no-token");return Le.token})).apply(this,arguments)}function ku(D,S){return ja.apply(this,arguments)}function ja(){return(ja=(0,N.Z)(function*(D,S){var k;const U=yield aa(D),ee=Kt(S.subscriptionOptions),he={method:"PATCH",headers:U,body:JSON.stringify(ee)};let Le;try{Le=yield(yield fetch(`${Ol(D.appConfig)}/${S.token}`,he)).json()}catch(qe){throw lt.create("token-update-failed",{errorInfo:null===(k=qe)||void 0===k?void 0:k.toString()})}if(Le.error)throw lt.create("token-update-failed",{errorInfo:Le.error.message});if(!Le.token)throw lt.create("token-update-no-token");return Le.token})).apply(this,arguments)}function $a(D,S){return bs.apply(this,arguments)}function bs(){return(bs=(0,N.Z)(function*(D,S){var k;const ee={method:"DELETE",headers:yield aa(D)};try{const Le=yield(yield fetch(`${Ol(D.appConfig)}/${S}`,ee)).json();if(Le.error)throw lt.create("token-unsubscribe-failed",{errorInfo:Le.error.message})}catch(he){throw lt.create("token-unsubscribe-failed",{errorInfo:null===(k=he)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function Ol({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function aa(D){return ke.apply(this,arguments)}function ke(){return(ke=(0,N.Z)(function*({appConfig:D,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Kt({p256dh:D,auth:S,endpoint:k,vapidKey:U}){const ee={web:{endpoint:k,auth:S,p256dh:D}};return U!==bo&&(ee.web.applicationPubKey=U),ee}const Co=6048e5;function Nl(D){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,N.Z)(function*(D){const S=yield Ou(D.swRegistration,D.vapidKey),k={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:Gn(S.getKey("auth")),p256dh:Gn(S.getKey("p256dh"))},U=yield Zs(D.firebaseDependencies);if(U){if(To(U.subscriptionOptions,k))return Date.now()>=U.createTime+Co?rs(D,{token:U.token,createTime:Date.now(),subscriptionOptions:k}):U.token;try{yield $a(D.firebaseDependencies,U.token)}catch(ee){console.warn(ee)}return za(D.firebaseDependencies,k)}return za(D.firebaseDependencies,k)})).apply(this,arguments)}function Pl(D){return ws.apply(this,arguments)}function ws(){return(ws=(0,N.Z)(function*(D){const S=yield Zs(D.firebaseDependencies);S&&(yield $a(D.firebaseDependencies,S.token),yield Eo(D.firebaseDependencies));const k=yield D.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function rs(D,S){return Io.apply(this,arguments)}function Io(){return(Io=(0,N.Z)(function*(D,S){try{const k=yield ku(D.firebaseDependencies,S),U=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield sa(D.firebaseDependencies,U),k}catch(k){throw yield Pl(D),k}})).apply(this,arguments)}function za(D,S){return Do.apply(this,arguments)}function Do(){return(Do=(0,N.Z)(function*(D,S){const U={token:yield Nc(D,S),createTime:Date.now(),subscriptionOptions:S};return yield sa(D,U),U.token})).apply(this,arguments)}function Ou(D,S){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,N.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rl(S)})})).apply(this,arguments)}function To(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function Yn(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Es(D,S){if(!S.notification)return;D.notification={};const k=S.notification.title;k&&(D.notification.title=k);const U=S.notification.body;U&&(D.notification.body=U);const ee=S.notification.image;ee&&(D.notification.image=ee)}(S,D),function Fc(D,S){!S.data||(D.data=S.data)}(S,D),function Cs(D,S){var k,U,ee,he,Le;if(!(S.fcmOptions||null!==(k=S.notification)&&void 0!==k&&k.click_action))return;D.fcmOptions={};const qe=null!==(ee=null===(U=S.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==ee?ee:null===(he=S.notification)||void 0===he?void 0:he.click_action;qe&&(D.fcmOptions.link=qe);const It=null===(Le=S.fcmOptions)||void 0===Le?void 0:Le.analytics_label;It&&(D.fcmOptions.analyticsLabel=It)}(S,D),S}function Is(D){return"object"==typeof D&&!!D&&Ru in D}function Nu(D,S){const k=[];for(let U=0;U<D.length;U++)k.push(D.charAt(U)),U<S.length&&k.push(S.charAt(U));return k.join("")}function Ll(D){return lt.create("missing-app-config-values",{valueName:D})}Nu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Nu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Lc{constructor(S,k,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function Fl(D){if(!D||!D.options)throw Ll("App Configuration Object");if(!D.name)throw Ll("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=D;for(const U of S)if(!k[U])throw Ll(U);return{appName:D.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:k,analyticsProvider:U}}_delete(){return Promise.resolve()}}function Vl(D){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,N.Z)(function*(D){var S;try{D.swRegistration=yield navigator.serviceWorker.register(_s,{scope:ys}),D.swRegistration.update().catch(()=>{})}catch(k){throw lt.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Pu(D,S){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Vl(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw lt.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Dh(D,S){return Js.apply(this,arguments)}function Js(){return(Js=(0,N.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=bo)})).apply(this,arguments)}function Ga(){return(Ga=(0,N.Z)(function*(D,S){if(!navigator)throw lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lt.create("permission-blocked");return yield Dh(D,S?.vapidKey),yield Pu(D,S?.serviceWorkerRegistration),Nl(D)})).apply(this,arguments)}function Fu(D,S,k){return la.apply(this,arguments)}function la(){return(la=(0,N.Z)(function*(D,S,k){const U=Lu(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:k[Ru],message_name:k[Ml],message_time:k[xl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Lu(D){switch(D){case ns.NOTIFICATION_CLICKED:return"notification_open";case ns.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ul(){return(Ul=(0,N.Z)(function*(D,S){const k=S.data;if(!k.isFirebaseMessaging)return;D.onMessageHandler&&k.messageType===ns.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Yn(k)):D.onMessageHandler.next(Yn(k)));const U=k.data;Is(U)&&"1"===U[ra]&&(yield Fu(D,k.messageType,U))})).apply(this,arguments)}const Wa="@firebase/messaging",Qr=D=>{const S=new Lc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Bl(D,S){return Ul.apply(this,arguments)}(S,k)),S},Pn=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:U=>function Vc(D,S){return Ga.apply(this,arguments)}(S,U)}};function Vu(){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,N.Z)(function*(){try{yield(0,fe.eu)()}catch{return!1}return typeof window<"u"&&(0,fe.hl)()&&(0,fe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Rp(){(0,ue._registerComponent)(new ye.wA("messaging",Qr,"PUBLIC")),(0,ue._registerComponent)(new ye.wA("messaging-internal",Pn,"PRIVATE")),(0,ue.registerVersion)(Wa,"0.9.16"),(0,ue.registerVersion)(Wa,"0.9.16","esm2017")}();const Bc="analytics",Mo="firebase_id",ju="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",qa="https://www.googletagmanager.com/gtag/js",mr=new ce.Yd("@firebase/analytics");function $u(D){return Promise.all(D.map(S=>S.catch(k=>k)))}function Op(D,S){const k=document.createElement("script");k.src=`${qa}?l=${D}&id=${S}`,k.async=!0,document.head.appendChild(k)}function Ah(D,S,k,U,ee,he){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,N.Z)(function*(D,S,k,U,ee,he){const Le=U[ee];try{if(Le)yield S[Le];else{const It=(yield $u(k)).find(Lt=>Lt.measurementId===ee);It&&(yield S[It.appId])}}catch(qe){mr.error(qe)}D("config",ee,he)})).apply(this,arguments)}function $l(D,S,k,U,ee){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,N.Z)(function*(D,S,k,U,ee){try{let he=[];if(ee&&ee.send_to){let Le=ee.send_to;Array.isArray(Le)||(Le=[Le]);const qe=yield $u(k);for(const It of Le){const Lt=qe.find(vt=>vt.measurementId===It),Ft=Lt&&S[Lt.appId];if(!Ft){he=[];break}he.push(Ft)}}0===he.length&&(he=Object.values(S)),yield Promise.all(he),D("event",U,ee||{})}catch(he){mr.error(he)}})).apply(this,arguments)}function xh(){const D=window.document.getElementsByTagName("script");for(const S of Object.values(D))if(S.src&&S.src.includes(qa))return S;return null}const oi=new fe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Gu=new class Wl{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function Za(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function En(D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,N.Z)(function*(D){var S;const{appId:k,apiKey:U}=D,ee={method:"GET",headers:Za(U)},he=ju.replace("{app-id}",k),Le=yield fetch(he,ee);if(200!==Le.status&&304!==Le.status){let qe="";try{const It=yield Le.json();null!==(S=It.error)&&void 0!==S&&S.message&&(qe=It.error.message)}catch{}throw oi.create("config-fetch-failed",{httpStatus:Le.status,responseMessage:qe})}return Le.json()})).apply(this,arguments)}function Je(D){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,N.Z)(function*(D,S=Gu,k){const{appId:U,apiKey:ee,measurementId:he}=D.options;if(!U)throw oi.create("no-app-id");if(!ee){if(he)return{measurementId:he,appId:U};throw oi.create("no-api-key")}const Le=S.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Qa;return setTimeout((0,N.Z)(function*(){qe.abort()}),void 0!==k?k:6e4),Sr({appId:U,apiKey:ee,measurementId:he},Le,qe,S)})).apply(this,arguments)}function Sr(D,S,k){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,N.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:k},U,ee=Gu){var he,Le;const{appId:qe,measurementId:It}=D;try{yield Hc(U,S)}catch(Lt){if(It)return mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${It} provided in the "measurementId" field in the local Firebase config. [${null===(he=Lt)||void 0===he?void 0:he.message}]`),{appId:qe,measurementId:It};throw Lt}try{const Lt=yield En(D);return ee.deleteThrottleMetadata(qe),Lt}catch(Lt){const Ft=Lt;if(!ql(Ft)){if(ee.deleteThrottleMetadata(qe),It)return mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${It} provided in the "measurementId" field in the local Firebase config. [${Ft?.message}]`),{appId:qe,measurementId:It};throw Lt}const vt=503===Number(null===(Le=Ft?.customData)||void 0===Le?void 0:Le.httpStatus)?(0,fe.$s)(k,ee.intervalMillis,30):(0,fe.$s)(k,ee.intervalMillis),yr={throttleEndTimeMillis:Date.now()+vt,backoffCount:k+1};return ee.setThrottleMetadata(qe,yr),mr.debug(`Calling attemptFetch again in ${vt} millis`),Sr(D,yr,U,ee)}})).apply(this,arguments)}function Hc(D,S){return new Promise((k,U)=>{const ee=Math.max(S-Date.now(),0),he=setTimeout(k,ee);D.addEventListener(()=>{clearTimeout(he),U(oi.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function ql(D){if(!(D instanceof fe.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Qa{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let jc,Vi;function Xa(){return(Xa=(0,N.Z)(function*(D,S,k,U,ee){if(ee&&ee.global)D("event",k,U);else{const he=yield S;D("event",k,Object.assign(Object.assign({},U),{send_to:he}))}})).apply(this,arguments)}function Wu(D){Vi=D}function Kl(D){jc=D}function ha(){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,N.Z)(function*(){var D;if(!(0,fe.hl)())return mr.warn(oi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,fe.eu)()}catch(S){return mr.warn(oi.create("indexeddb-unavailable",{errorInfo:null===(D=S)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function Bi(){return(Bi=(0,N.Z)(function*(D,S,k,U,ee,he,Le){var qe;const It=Je(D);It.then(Xr=>{k[Xr.measurementId]=Xr.appId,D.options.measurementId&&Xr.measurementId!==D.options.measurementId&&mr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Xr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Xr=>mr.error(Xr)),S.push(It);const Lt=ha().then(Xr=>{if(Xr)return U.getId()}),[Ft,vt]=yield Promise.all([It,Lt]);xh()||Op(he,Ft.measurementId),Vi&&(ee("consent","default",Vi),Wu(void 0)),ee("js",new Date);const yr=null!==(qe=Le?.config)&&void 0!==qe?qe:{};return yr.origin="firebase",yr.update=!0,null!=vt&&(yr[Mo]=vt),ee("config",Ft.measurementId,yr),jc&&(ee("set",jc),Kl(void 0)),Ft.measurementId})).apply(this,arguments)}class Ts{constructor(S){this.app=S}_delete(){return delete Fr[this.app.options.appId],Promise.resolve()}}let Fr={},Lr=[];const Ss={};let ro,Ar,Ro="dataLayer",Nt=!1;function ir(D,S,k){!function kh(){const D=[];if((0,fe.ru)()&&D.push("This is a browser extension environment."),(0,fe.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((U,ee)=>`(${ee+1}) ${U}`).join(" "),k=oi.create("invalid-analytics-context",{errorInfo:S});mr.warn(k.message)}}();const U=D.options.appId;if(!U)throw oi.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw oi.create("no-api-key");mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Fr[U])throw oi.create("already-exists",{id:U});if(!Nt){!function zu(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Ro);const{wrappedGtag:he,gtagCore:Le}=function Mh(D,S,k,U,ee){let he=function(...Le){window[U].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(he=window[ee]),window[ee]=function Uc(D,S,k,U){function he(){return(he=(0,N.Z)(function*(Le,qe,It){try{"event"===Le?yield $l(D,S,k,qe,It):"config"===Le?yield Ah(D,S,k,U,qe,It):"consent"===Le?D("consent","update",It):D("set",qe)}catch(Lt){mr.error(Lt)}})).apply(this,arguments)}return function ee(Le,qe,It){return he.apply(this,arguments)}}(he,D,S,k),{gtagCore:he,wrappedGtag:window[ee]}}(Fr,Lr,Ss,Ro,"gtag");Ar=he,ro=Le,Nt=!0}return Fr[U]=function Ja(D,S,k,U,ee,he,Le){return Bi.apply(this,arguments)}(D,Lr,Ss,S,ro,Ro,k),new Ts(D)}function Mr(){return xr.apply(this,arguments)}function xr(){return(xr=(0,N.Z)(function*(){if((0,fe.ru)()||!(0,fe.zI)()||!(0,fe.hl)())return!1;try{return yield(0,fe.eu)()}catch{return!1}})).apply(this,arguments)}const Zl="@firebase/analytics";!function ai(){(0,ue._registerComponent)(new ye.wA(Bc,(S,{options:k})=>ir(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,ue._registerComponent)(new ye.wA("analytics-internal",function D(S){try{const k=S.getProvider(Bc).getImmediate();return{logEvent:(U,ee,he)=>function An(D,S,k,U){D=(0,fe.m9)(D),function ca(D,S,k,U,ee){return Xa.apply(this,arguments)}(Ar,Fr[D.app.options.appId],S,k,U).catch(ee=>mr.error(ee))}(k,U,ee,he)}}catch(k){throw oi.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,ue.registerVersion)(Zl,"0.8.0"),(0,ue.registerVersion)(Zl,"0.8.0","esm2017")}();var $c=F(4408),io=F(7565);const $t=new class No extends io.v{}(class fa extends $c.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(S,k,U):S.flush(this)}});var el=F(4986),Po=F(9751),Ql=F(8505),Un=F(9468),tl=F(5363);const Fo=new d.GfV("7.4.1"),nl="__angularfire_symbol__analyticsIsSupportedValue",Xl="__angularfire_symbol__analyticsIsSupported",sr="__angularfire_symbol__remoteConfigIsSupportedValue",Hi="__angularfire_symbol__remoteConfigIsSupported",Lo="__angularfire_symbol__messagingIsSupportedValue",zc="__angularfire_symbol__messagingIsSupported";function Ph(D,S,k){if(S){if(1===S.length)return S[0];const he=S.filter(Le=>Le.app===k);if(1===he.length)return he[0]}return k.container.getProvider(D).getImmediate({optional:!0})}globalThis[Xl]||(globalThis[Xl]=Mr().then(D=>globalThis[nl]=D).catch(()=>globalThis[nl]=!1)),globalThis[zc]||(globalThis[zc]=Vu().then(D=>globalThis[Lo]=D).catch(()=>globalThis[Lo]=!1)),globalThis[Hi]||(globalThis[Hi]=a_().then(D=>globalThis[sr]=D).catch(()=>globalThis[sr]=!1));const xs=(D,S)=>{const k=S?[S]:(0,H.C6)(),U=[];return k.forEach(ee=>{ee.container.getProvider(D).instances.forEach(Le=>{U.includes(Le)||U.push(Le)})}),U};function Rs(){}class pa{constructor(S,k=$t){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,U){const ee=this.zone;return this.delegate.schedule(function(Le){ee.runGuarded(()=>{S.apply(this,[Le])})},k,U)}}class ga{constructor(S){this.zone=S,this.task=null}call(S,k){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),k.pipe((0,Ql.b)({next:U,complete:U,error:U})).subscribe(S).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ks=(()=>{class D{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new pa(Zone.current)),this.insideAngular=k.run(()=>new pa(Zone.current,el.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(k){return new(k||D)(d.LFG(d.R0b))},D.\u0275prov=d.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Pt(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ma(D){return Pt().ngZone.runOutsideAngular(()=>D())}function yi(D){return Pt().ngZone.run(()=>D())}function Hn(D){return Pt(),function Gc(D){return function(k){return(k=k.lift(new ga(D.ngZone))).pipe((0,Un.R)(D.outsideAngular),(0,tl.Q)(D.insideAngular))}}(Pt())(D)}const Jl=(D,S)=>function(){const U=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),yi(()=>D.apply(void 0,U))},_a=(D,S)=>function(){let k;const U=arguments;for(let he=0;he<arguments.length;he++)"function"==typeof U[he]&&(S&&(k||(k=yi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)))),U[he]=Jl(U[he],k));const ee=ma(()=>D.apply(this,U));if(!S){if(ee instanceof Po.y){const he=Pt();return ee.pipe((0,Un.R)(he.outsideAngular),(0,tl.Q)(he.insideAngular))}return yi(()=>ee)}return ee instanceof Po.y?ee.pipe(Hn):ee instanceof Promise?yi(()=>new Promise((he,Le)=>ee.then(qe=>yi(()=>he(qe)),qe=>yi(()=>Le(qe))))):"function"==typeof ee&&k?function(){return setTimeout(()=>{k&&"scheduled"===k.state&&k.invoke()},10),ee.apply(this,arguments)}:yi(()=>ee)}},6457:(gt,Oe,F)=>{F.d(Oe,{$:()=>Ol,A:()=>W,B:()=>Ve,G:()=>La,H:()=>nr,J:()=>ms,L:()=>fn,M:()=>Fi,N:()=>Eh,P:()=>el,Q:()=>Ru,R:()=>In,T:()=>Ml,U:()=>bo,V:()=>ns,W:()=>Gn,X:()=>Ih,Y:()=>oa,Z:()=>Nc,_:()=>ku,a:()=>xo,a0:()=>Nl,a1:()=>Pl,a2:()=>rs,a3:()=>za,a4:()=>Ou,a5:()=>To,a6:()=>Es,a7:()=>Fc,a8:()=>Is,a9:()=>Nu,aA:()=>yr,aB:()=>qe,aC:()=>yi,aD:()=>ma,aE:()=>tr,aI:()=>Za,aL:()=>ra,aa:()=>Vl,ab:()=>Pu,ac:()=>Dh,af:()=>Fu,ag:()=>Lu,ah:()=>Bl,ak:()=>pr,al:()=>Hl,an:()=>qa,ao:()=>Ka,ap:()=>pn,aq:()=>Te,ar:()=>At,as:()=>Et,at:()=>et,au:()=>ci,av:()=>ji,aw:()=>Ue,ax:()=>ae,ay:()=>le,az:()=>on,b:()=>oi,c:()=>Hi,d:()=>Nh,e:()=>zc,f:()=>Hn,g:()=>k,h:()=>_a,i:()=>Yl,j:()=>he,k:()=>Lp,l:()=>_r,m:()=>ec,n:()=>v_,o:()=>ge,r:()=>$c,s:()=>Oo,u:()=>$t});var d=F(5861),H=F(2090),N=F(9681),ue=F(655),fe=F(1877),ye=F(4859);const ge={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Ve=function re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Se=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},at=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_e=new fe.Yd("@firebase/auth");function rt(b,...m){_e.logLevel<=fe.in.ERROR&&_e.error(`Auth (${N.SDK_VERSION}): ${b}`,...m)}function et(b,...m){throw Ye(b,...m)}function Ue(b,...m){return Ye(b,...m)}function Ne(b,m,_){const C=Object.assign(Object.assign({},Se()),{[m]:_});return new H.LL("auth","Firebase",C).create(m,{appName:b.name})}function Me(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&et(b,"argument-error"),Ne(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ye(b,...m){if("string"!=typeof b){const _=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=b.name),b._errorFactory.create(_,...C)}return at.create(b,...m)}function ae(b,m,..._){if(!b)throw Ye(m,..._)}function ve(b){const m="INTERNAL ASSERTION FAILED: "+b;throw rt(m),new Error(m)}function Te(b,m){b||ve(m)}const te=new Map;function le(b){Te(b instanceof Function,"Expected a class definition");let m=te.get(b);return m?(Te(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,te.set(b,m),m)}function pe(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function je(){return"http:"===wt()||"https:"===wt()}function wt(){var b;return typeof self<"u"&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ze{constructor(m,_){this.shortDelay=m,this.longDelay=_,Te(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function tn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(je()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(b,m){Te(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class $n{static initialize(m,_,C){this.fetchImpl=m,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ve("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ve("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ve("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _n={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rn=new Ze(3e4,6e4);function qt(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function sn(b,m,_,C){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(b,m,_,C,x={}){return Oi(b,x,(0,d.Z)(function*(){let P={},se={};C&&("GET"===m?se=C:P={body:JSON.stringify(C)});const Re=(0,H.xO)(Object.assign({key:b.config.apiKey},se)).slice(1),st=yield b._getAdditionalHeaders();return st["Content-Type"]="application/json",b.languageCode&&(st["X-Firebase-Locale"]=b.languageCode),$n.fetch()(mi(b,b.config.apiHost,_,Re),Object.assign({method:m,headers:st,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Oi(b,m,_){return $r.apply(this,arguments)}function $r(){return($r=(0,d.Z)(function*(b,m,_){b._canInitEmulator=!1;const C=Object.assign(Object.assign({},_n),m);try{const x=new Ni(b),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const se=yield P.json();if("needConfirmation"in se)throw zn(b,"account-exists-with-different-credential",se);if(P.ok&&!("errorMessage"in se))return se;{const Re=P.ok?se.errorMessage:se.error.message,[st,ht]=Re.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw zn(b,"credential-already-in-use",se);if("EMAIL_EXISTS"===st)throw zn(b,"email-already-in-use",se);if("USER_DISABLED"===st)throw zn(b,"user-disabled",se);const Mt=C[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(ht)throw Ne(b,Mt,ht);et(b,Mt)}}catch(x){if(x instanceof H.ZR)throw x;et(b,"network-request-failed")}})).apply(this,arguments)}function Vn(b,m,_,C){return gs.apply(this,arguments)}function gs(){return(gs=(0,d.Z)(function*(b,m,_,C,x={}){const P=yield sn(b,m,_,C,x);return"mfaPendingCredential"in P&&et(b,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function mi(b,m,_,C){const x=`${m}${_}?${C}`;return b.config.emulator?mn(b.config,x):`${b.config.apiScheme}://${x}`}class Ni{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Ue(this.auth,"network-request-failed")),rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(b,m,_){const C={appName:b.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Ue(b,m,C);return x.customData._tokenResponse=_,x}function yt(){return(yt=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function zr(b,m){return xn.apply(this,arguments)}function xn(){return(xn=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function nn(b,m){return lr.apply(this,arguments)}function lr(){return(lr=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function Yr(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Cr(){return(Cr=(0,d.Z)(function*(b,m=!1){const _=(0,H.m9)(b),C=yield _.getIdToken(m),x=Yt(C);ae(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,se=P?.sign_in_provider;return{claims:x,token:C,authTime:Yr(zs(x.auth_time)),issuedAtTime:Yr(zs(x.iat)),expirationTime:Yr(zs(x.exp)),signInProvider:se||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function zs(b){return 1e3*Number(b)}function Yt(b){var m;const[_,C,x]=b.split(".");if(void 0===_||void 0===C||void 0===x)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,H.tV)(C);return P?JSON.parse(P):(rt("Failed to decode base64 JWT payload"),null)}catch(P){return rt("Caught error parsing JWT payload as JSON",null===(m=P)||void 0===m?void 0:m.toString()),null}}function dt(b,m){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(C){throw C instanceof H.ZR&&ur(C)&&b.auth.currentUser===b&&(yield b.auth.signOut()),C}})).apply(this,arguments)}function ur({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Ot{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),C)}iteration(){var m=this;return(0,d.Z)(function*(){var _;try{yield m.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(_=C)||void 0===_?void 0:_.code)&&m.schedule(!0))}m.schedule()})()}}class Gr{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yr(this.lastLoginAt),this.creationTime=Yr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function kn(b){return On.apply(this,arguments)}function On(){return(On=(0,d.Z)(function*(b){var m;const _=b.auth,C=yield b.getIdToken(),x=yield dt(b,nn(_,{idToken:C}));ae(x?.users.length,_,"internal-error");const P=x.users[0];b._notifyReloadListener(P);const se=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?q(P.providerUserInfo):[],Re=G(b.providerData,se),Mt=!!b.isAnonymous&&!(b.email&&P.passwordHash||Re?.length),Fn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Re,metadata:new Gr(P.createdAt,P.lastLoginAt),isAnonymous:Mt};Object.assign(b,Fn)})).apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(b){const m=(0,H.m9)(b);yield kn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function G(b,m){return[...b.filter(C=>!m.some(x=>x.providerId===C.providerId)),...m]}function q(b){return b.map(m=>{var{providerId:_}=m,C=(0,ue._T)(m,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Y(){return(Y=(0,d.Z)(function*(b,m){const _=yield Oi(b,{},(0,d.Z)(function*(){const C=(0,H.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:x,apiKey:P}=b.config,se=mi(b,x,"/v1/token",`key=${P}`),Re=yield b._getAdditionalHeaders();return Re["Content-Type"]="application/x-www-form-urlencoded",$n.fetch()(se,{method:"POST",headers:Re,body:C})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Q{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ae(m.idToken,"internal-error"),ae(typeof m.idToken<"u","internal-error"),ae(typeof m.refreshToken<"u","internal-error");const _="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function Qe(b){const m=Yt(b);return ae(m,"internal-error"),ae(typeof m.exp<"u","internal-error"),ae(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var C=this;return(0,d.Z)(function*(){return ae(!C.accessToken||C.refreshToken,m,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var C=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:se}=yield function j(b,m){return Y.apply(this,arguments)}(m,_);C.updateTokensAndExpiration(x,P,Number(se))})()}updateTokensAndExpiration(m,_,C){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,_){const{refreshToken:C,accessToken:x,expirationTime:P}=_,se=new Q;return C&&(ae("string"==typeof C,"internal-error",{appName:m}),se.refreshToken=C),x&&(ae("string"==typeof x,"internal-error",{appName:m}),se.accessToken=x),P&&(ae("number"==typeof P,"internal-error",{appName:m}),se.expirationTime=P),se}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Q,this.toJSON())}_performRefresh(){return ve("not implemented")}}function Fe(b,m){ae("string"==typeof b||typeof b>"u","internal-error",{appName:m})}class Ke{constructor(m){var{uid:_,auth:C,stsTokenManager:x}=m,P=(0,ue._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ot(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Gr(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,d.Z)(function*(){const C=yield dt(_,_.stsTokenManager.getToken(_.auth,m));return ae(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(m){return function Rn(b){return Cr.apply(this,arguments)}(this,m)}reload(){return function hn(b){return er.apply(this,arguments)}(this)}_assign(m){this!==m&&(ae(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new Ke(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var C=this;return(0,d.Z)(function*(){let x=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),x=!0),_&&(yield kn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,d.Z)(function*(){const _=yield m.getIdToken();return yield dt(m,function Qi(b,m){return yt.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var C,x,P,se,Re,st,ht,Mt;const Fn=null!==(C=_.displayName)&&void 0!==C?C:void 0,Ps=null!==(x=_.email)&&void 0!==x?x:void 0,os=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,ed=null!==(se=_.photoURL)&&void 0!==se?se:void 0,Hh=null!==(Re=_.tenantId)&&void 0!==Re?Re:void 0,jh=null!==(st=_._redirectEventId)&&void 0!==st?st:void 0,tc=null!==(ht=_.createdAt)&&void 0!==ht?ht:void 0,nc=null!==(Mt=_.lastLoginAt)&&void 0!==Mt?Mt:void 0,{uid:Yc,emailVerified:Zc,isAnonymous:b_,providerData:td,stsTokenManager:nd}=_;ae(Yc&&nd,m,"internal-error");const Up=Q.fromJSON(this.name,nd);ae("string"==typeof Yc,m,"internal-error"),Fe(Fn,m.name),Fe(Ps,m.name),ae("boolean"==typeof Zc,m,"internal-error"),ae("boolean"==typeof b_,m,"internal-error"),Fe(os,m.name),Fe(ed,m.name),Fe(Hh,m.name),Fe(jh,m.name),Fe(tc,m.name),Fe(nc,m.name);const rd=new Ke({uid:Yc,auth:m,email:Ps,emailVerified:Zc,displayName:Fn,isAnonymous:b_,photoURL:ed,phoneNumber:os,tenantId:Hh,stsTokenManager:Up,createdAt:tc,lastLoginAt:nc});return td&&Array.isArray(td)&&(rd.providerData=td.map(Hp=>Object.assign({},Hp))),jh&&(rd._redirectEventId=jh),rd}static _fromIdTokenResponse(m,_,C=!1){return(0,d.Z)(function*(){const x=new Q;x.updateFromServerResponse(_);const P=new Ke({uid:_.localId,auth:m,stsTokenManager:x,isAnonymous:C});return yield kn(P),P})()}}const fn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,d.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,d.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,d.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return b.type="NONE",b})();function on(b,m,_){return`firebase:${b}:${m}:${_}`}class dr{constructor(m,_,C){this.persistence=m,this.auth=_,this.userKey=C;const{config:x,name:P}=this.auth;this.fullUserKey=on(this.userKey,x.apiKey,P),this.fullPersistenceKey=on("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,d.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?Ke._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,d.Z)(function*(){if(_.persistence===m)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,C="authUser"){return(0,d.Z)(function*(){if(!_.length)return new dr(le(fn),m,C);const x=(yield Promise.all(_.map(function(){var ht=(0,d.Z)(function*(Mt){if(yield Mt._isAvailable())return Mt});return function(Mt){return ht.apply(this,arguments)}}()))).filter(ht=>ht);let P=x[0]||le(fn);const se=on(C,m.config.apiKey,m.name);let Re=null;for(const ht of _)try{const Mt=yield ht._get(se);if(Mt){const Fn=Ke._fromJSON(m,Mt);ht!==P&&(Re=Fn),P=ht;break}}catch{}const st=x.filter(ht=>ht._shouldAllowMigration);return P._shouldAllowMigration&&st.length?(P=st[0],Re&&(yield P._set(se,Re.toJSON())),yield Promise.all(_.map(function(){var ht=(0,d.Z)(function*(Mt){if(Mt!==P)try{yield Mt._remove(se)}catch{}});return function(Mt){return ht.apply(this,arguments)}}())),new dr(P,m,C)):new dr(P,m,C)})()}}function ie(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(We(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if($(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(Pe(m))return"Blackberry";if(it(m))return"Webos";if(z(m))return"Safari";if((m.includes("chrome/")||Ie(m))&&!m.includes("edge/"))return"Chrome";if(Et(m))return"Android";{const C=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function $(b=(0,H.z$)()){return/firefox\//i.test(b)}function z(b=(0,H.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Ie(b=(0,H.z$)()){return/crios\//i.test(b)}function We(b=(0,H.z$)()){return/iemobile/i.test(b)}function Et(b=(0,H.z$)()){return/android/i.test(b)}function Pe(b=(0,H.z$)()){return/blackberry/i.test(b)}function it(b=(0,H.z$)()){return/webos/i.test(b)}function At(b=(0,H.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function pn(b=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function hr(b=(0,H.z$)()){return At(b)||Et(b)||it(b)||Pe(b)||/windows phone/i.test(b)||We(b)}function Xo(b,m=[]){let _;switch(b){case"Browser":_=ie((0,H.z$)());break;case"Worker":_=`${ie((0,H.z$)())}-${b}`;break;default:_=b}const C=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${C}`}class Xi{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,_){const C=P=>new Promise((se,Re)=>{try{se(m(P))}catch(st){Re(st)}});C.onAbort=_,this.queue.push(C);const x=this.queue.length-1;return()=>{this.queue[x]=()=>Promise.resolve()}}runMiddleware(m){var _=this;return(0,d.Z)(function*(){var C;if(_.auth.currentUser===m)return;const x=[];try{for(const P of _.queue)yield P(m),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const se of x)try{se()}catch{}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=P)||void 0===C?void 0:C.message})}})()}}class Ht{constructor(m,_,C){this.app=m,this.heartbeatServiceProvider=_,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mo(this),this.idTokenSubscription=new mo(this),this.beforeStateQueue=new Xi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=at,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,_){var C=this;return _&&(this._popupRedirectResolver=le(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,P;if(!C._deleted&&(C.persistenceManager=yield dr.create(C,m),!C._deleted)){if(null!==(x=C._popupRedirectResolver)&&void 0!==x&&x._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,d.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_,!0)}})()}initializeCurrentUser(m){var _=this;return(0,d.Z)(function*(){var C;const x=yield _.assertedPersistence.getCurrentUser();let P=x,se=!1;if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Re=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,st=P?._redirectEventId,ht=yield _.tryRedirectSignIn(m);(!Re||Re===st)&&ht?.user&&(P=ht.user,se=!0)}if(!P)return _.directlySetCurrentUser(null);if(!P._redirectEventId){if(se)try{yield _.beforeStateQueue.runMiddleware(P)}catch(Re){P=x,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Re))}return P?_.reloadAndSetCurrentUserOrClear(P):_.directlySetCurrentUser(null)}return ae(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===P._redirectEventId?_.directlySetCurrentUser(P):_.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var _=this;return(0,d.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch{yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,d.Z)(function*(){var C;try{yield kn(m)}catch(x){if("auth/network-request-failed"!==(null===(C=x)||void 0===C?void 0:C.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Wt(){if(typeof navigator>"u")return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,d.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,d.Z)(function*(){const C=m?(0,H.m9)(m):null;return C&&ae(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(m,_=!1){var C=this;return(0,d.Z)(function*(){if(!C._deleted)return m&&ae(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),_||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,d.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,d.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence(le(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new H.LL("auth","Firebase",m())}onAuthStateChanged(m,_,C){return this.registerStateListener(this.authStateSubscription,m,_,C)}beforeAuthStateChanged(m,_){return this.beforeStateQueue.pushCallback(m,_)}onIdTokenChanged(m,_,C){return this.registerStateListener(this.idTokenSubscription,m,_,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var C=this;return(0,d.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===m?x.removeCurrentUser():x.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const C=m&&le(m)||_._popupRedirectResolver;ae(C,_,"argument-error"),_.redirectPersistenceManager=yield dr.create(_,[le(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,d.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===m?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,d.Z)(function*(){if(m===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,C,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),se=this._isInitialized?Promise.resolve():this._initializationPromise;return ae(se,this,"internal-error"),se.then(()=>P(this.currentUser)),"function"==typeof _?m.addObserver(_,C,x):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=Xo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,d.Z)(function*(){var _;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const x=yield null===(_=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return x&&(C["X-Firebase-Client"]=x),C})()}}function tr(b){return(0,H.m9)(b)}class mo{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,H.ne)(_=>this.observer=_)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function La(b,m,_){const C=tr(b);ae(C._canInitEmulator,C,"emulator-config-failed"),ae(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const x=!!_?.disableWarnings,P=Gs(m),{host:se,port:Re}=function fr(b){const m=Gs(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const P=x[1];return{host:P,port:_o(C.substr(P.length+1))}}{const[P,se]=C.split(":");return{host:P,port:_o(se)}}}(m);C.config.emulator={url:`${P}//${se}${null===Re?"":`:${Re}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:se,port:Re,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function Ws(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Gs(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function _o(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class nr{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return ve("not implemented")}_getIdTokenResponse(m){return ve("not implemented")}_linkToIdToken(m,_){return ve("not implemented")}_getReauthenticationResolver(m){return ve("not implemented")}}function qs(b,m){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:resetPassword",qt(b,m))})).apply(this,arguments)}function wn(b,m){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function bh(b,m){return yo.apply(this,arguments)}function yo(){return(yo=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:update",qt(b,m))})).apply(this,arguments)}function Ji(){return(Ji=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithPassword",qt(b,m))})).apply(this,arguments)}function Jo(b,m){return es.apply(this,arguments)}function es(){return(es=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:sendOobCode",qt(b,m))})).apply(this,arguments)}function rr(b,m){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,d.Z)(function*(b,m){return Jo(b,m)})).apply(this,arguments)}function Pr(b,m){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,d.Z)(function*(b,m){return Jo(b,m)})).apply(this,arguments)}function Mc(b,m){return vo.apply(this,arguments)}function vo(){return(vo=(0,d.Z)(function*(b,m){return Jo(b,m)})).apply(this,arguments)}function ea(b,m){return si.apply(this,arguments)}function si(){return(si=(0,d.Z)(function*(b,m){return Jo(b,m)})).apply(this,arguments)}function Dp(){return(Dp=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithEmailLink",qt(b,m))})).apply(this,arguments)}function xc(){return(xc=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithEmailLink",qt(b,m))})).apply(this,arguments)}class Va extends nr{constructor(m,_,C,x=null){super("password",C),this._email=m,this._password=_,this._tenantId=x}static _fromEmailAndPassword(m,_){return new Va(m,_,"password")}static _fromEmailAndCode(m,_,C=null){return new Va(m,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if(_?.email&&_?.password){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function Sl(b,m){return Ji.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Al(b,m){return Dp.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:et(m,"internal-error")}})()}_linkToIdToken(m,_){var C=this;return(0,d.Z)(function*(){switch(C.signInMethod){case"password":return wn(m,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Su(b,m){return xc.apply(this,arguments)}(m,{idToken:_,email:C._email,oobCode:C._password});default:et(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function Ks(b,m){return wh.apply(this,arguments)}function wh(){return(wh=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithIdp",qt(b,m))})).apply(this,arguments)}class ms extends nr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new ms(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):et("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:x}=_,P=(0,ue._T)(_,["providerId","signInMethod"]);if(!C||!x)return null;const se=new ms(C,x);return se.idToken=P.idToken||void 0,se.accessToken=P.accessToken||void 0,se.secret=P.secret,se.nonce=P.nonce,se.pendingToken=P.pendingToken||null,se}_getIdTokenResponse(m){return Ks(m,this.buildRequest())}_linkToIdToken(m,_){const C=this.buildRequest();return C.idToken=_,Ks(m,C)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Ks(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,H.xO)(_)}return m}}function Tp(b,m){return Au.apply(this,arguments)}function Au(){return(Au=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:sendVerificationCode",qt(b,m))})).apply(this,arguments)}function Ba(){return(Ba=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithPhoneNumber",qt(b,m))})).apply(this,arguments)}function Mu(){return(Mu=(0,d.Z)(function*(b,m){const _=yield Vn(b,"POST","/v1/accounts:signInWithPhoneNumber",qt(b,m));if(_.temporaryProof)throw zn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Ap={USER_NOT_FOUND:"user-not-found"};function xu(){return(xu=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithPhoneNumber",qt(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),Ap)})).apply(this,arguments)}class Ys extends nr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new Ys({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new Ys({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function Sp(b,m){return Ba.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function ta(b,m){return Mu.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function Mp(b,m){return xu.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}=m;return C||_||x||P?new Ys({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}):null}}class na{constructor(m){var _,C,x,P,se,Re;const st=(0,H.zd)((0,H.pd)(m)),ht=null!==(_=st.apiKey)&&void 0!==_?_:null,Mt=null!==(C=st.oobCode)&&void 0!==C?C:null,Fn=function Rc(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=st.mode)&&void 0!==x?x:null);ae(ht&&Mt&&Fn,"argument-error"),this.apiKey=ht,this.operation=Fn,this.code=Mt,this.continueUrl=null!==(P=st.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(se=st.languageCode)&&void 0!==se?se:null,this.tenantId=null!==(Re=st.tenantId)&&void 0!==Re?Re:null}static parseLink(m){const _=function o_(b){const m=(0,H.zd)((0,H.pd)(b)).link,_=m?(0,H.zd)((0,H.pd)(m)).deep_link_id:null,C=(0,H.zd)((0,H.pd)(b)).deep_link_id;return(C?(0,H.zd)((0,H.pd)(C)).link:null)||C||_||m||b}(m);try{return new na(_)}catch{return null}}}let Fi=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,C){return Va._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=na.parseLink(C);return ae(x,"argument-error"),Va._fromEmailAndCode(_,x.code,x.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class _s{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class ys extends _s{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class bo extends ys{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return ae("providerId"in _&&"signInMethod"in _,"argument-error"),ms._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ae(m.idToken||m.accessToken,"argument-error"),ms._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return bo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return bo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:P,nonce:se,providerId:Re}=m;if(!C&&!x&&!_&&!P||!Re)return null;try{return new bo(Re)._credential({idToken:_,accessToken:C,nonce:se,pendingToken:P})}catch{return null}}}let Eh=(()=>{class b extends ys{constructor(){super("facebook.com")}static credential(_){return ms._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Ru=(()=>{class b extends ys{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return ms._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return b.credential(C,x)}catch{return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Ml=(()=>{class b extends ys{constructor(){super("github.com")}static credential(_){return ms._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch{return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class ra extends nr{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return Ks(m,this.buildRequest())}_linkToIdToken(m,_){const C=this.buildRequest();return C.idToken=_,Ks(m,C)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,Ks(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:x,pendingToken:P}=_;return C&&x&&P&&C===x?new ra(C,P):null}static _create(m,_){return new ra(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ns extends _s{constructor(m){ae(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return ns.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return ns.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=ra.fromJSON(m);return ae(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:C}=m;if(!_||!C)return null;try{return ra._create(C,_)}catch{return null}}}let Gn=(()=>{class b extends ys{constructor(){super("twitter.com")}static credential(_,C){return ms._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return b.credential(C,x)}catch{return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Rl(b,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signUp",qt(b,m))})).apply(this,arguments)}class Zr{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,C,x=!1){return(0,d.Z)(function*(){const P=yield Ke._fromIdTokenResponse(m,C,x),se=kc(C);return new Zr({user:P,providerId:se,_tokenResponse:C,operationType:_})})()}static _forOperation(m,_,C){return(0,d.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const x=kc(C);return new Zr({user:m,providerId:x,_tokenResponse:C,operationType:_})})()}}function kc(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Ih(b){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,d.Z)(function*(b){var m;const _=tr(b);if(yield _._initializationPromise,null!==(m=_.currentUser)&&void 0!==m&&m.isAnonymous)return new Zr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield Rl(_,{returnSecureToken:!0}),x=yield Zr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class Oc extends H.ZR{constructor(m,_,C,x){var P;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,_,C,x){return new Oc(m,_,C,x)}}function xp(b,m,_,C){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Oc._fromErrorAndOperation(b,P,m,C):P})}function Ha(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function pr(b,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,d.Z)(function*(b,m){const _=(0,H.m9)(b);yield gr(!0,_,m);const{providerUserInfo:C}=yield zr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),x=Ha(C||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function wo(b,m){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,d.Z)(function*(b,m,_=!1){const C=yield dt(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return Zr._forOperation(b,"link",C)})).apply(this,arguments)}function gr(b,m,_){return sa.apply(this,arguments)}function sa(){return(sa=(0,d.Z)(function*(b,m,_){yield kn(m);const x=!1===b?"provider-already-linked":"no-such-provider";ae(Ha(m.providerData).has(_)===b,m.auth,x)})).apply(this,arguments)}function Qs(b,m){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,d.Z)(function*(b,m,_=!1){var C;const{auth:x}=b,P="reauthenticate";try{const se=yield dt(b,xp(x,P,m,b),_);ae(se.idToken,x,"internal-error");const Re=Yt(se.idToken);ae(Re,x,"internal-error");const{sub:st}=Re;return ae(b.uid===st,x,"user-mismatch"),Zr._forOperation(b,P,se)}catch(se){throw"auth/user-not-found"===(null===(C=se)||void 0===C?void 0:C.code)&&et(x,"user-mismatch"),se}})).apply(this,arguments)}function Li(b,m){return vs.apply(this,arguments)}function vs(){return(vs=(0,d.Z)(function*(b,m,_=!1){const C="signIn",x=yield xp(b,C,m),P=yield Zr._fromIdTokenResponse(b,C,x);return _||(yield b._updateCurrentUser(P.user)),P})).apply(this,arguments)}function oa(b,m){return lt.apply(this,arguments)}function lt(){return(lt=(0,d.Z)(function*(b,m){return Li(tr(b),m)})).apply(this,arguments)}function Nc(b,m){return kl.apply(this,arguments)}function kl(){return(kl=(0,d.Z)(function*(b,m){const _=(0,H.m9)(b);return yield gr(!1,_,m.providerId),wo(_,m)})).apply(this,arguments)}function ku(b,m){return ja.apply(this,arguments)}function ja(){return(ja=(0,d.Z)(function*(b,m){return Qs((0,H.m9)(b),m)})).apply(this,arguments)}function $a(b,m){return bs.apply(this,arguments)}function bs(){return(bs=(0,d.Z)(function*(b,m){return Vn(b,"POST","/v1/accounts:signInWithCustomToken",qt(b,m))})).apply(this,arguments)}function Ol(b,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,d.Z)(function*(b,m){const _=tr(b),C=yield $a(_,{token:m,returnSecureToken:!0}),x=yield Zr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class ke{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?Kt._fromServerResponse(m,_):et(m,"internal-error")}}class Kt extends ke{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new Kt(_)}}function Co(b,m,_){var C;ae((null===(C=_.url)||void 0===C?void 0:C.length)>0,b,"invalid-continue-uri"),ae(typeof _.dynamicLinkDomain>"u"||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ae(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(ae(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function Nl(b,m,_){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b),x={requestType:"PASSWORD_RESET",email:m};_&&Co(C,x,_),yield Pr(C,x)})).apply(this,arguments)}function Pl(b,m,_){return ws.apply(this,arguments)}function ws(){return(ws=(0,d.Z)(function*(b,m,_){yield qs((0,H.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function rs(b,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,d.Z)(function*(b,m){yield bh((0,H.m9)(b),{oobCode:m})})).apply(this,arguments)}function za(b,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,d.Z)(function*(b,m){const _=(0,H.m9)(b),C=yield qs(_,{oobCode:m}),x=C.requestType;switch(ae(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ae(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ae(C.mfaInfo,_,"internal-error");default:ae(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=ke._fromServerResponse(tr(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function Ou(b,m){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,d.Z)(function*(b,m){const{data:_}=yield za((0,H.m9)(b),m);return _.email})).apply(this,arguments)}function To(b,m,_){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,d.Z)(function*(b,m,_){const C=tr(b),x=yield Rl(C,{returnSecureToken:!0,email:m,password:_}),P=yield Zr._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function Es(b,m,_){return oa((0,H.m9)(b),Fi.credential(m,_))}function Fc(b,m,_){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b),x={requestType:"EMAIL_SIGNIN",email:m};ae(_.handleCodeInApp,C,"argument-error"),_&&Co(C,x,_),yield Mc(C,x)})).apply(this,arguments)}function Is(b,m){return"EMAIL_SIGNIN"===na.parseLink(m)?.operation}function Nu(b,m,_){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b),x=Fi.credentialWithLink(m,_||pe());return ae(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),oa(C,x)})).apply(this,arguments)}function Ll(b,m){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:createAuthUri",qt(b,m))})).apply(this,arguments)}function Vl(b,m){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,d.Z)(function*(b,m){const C={identifier:m,continueUri:je()?pe():"http://localhost"},{signinMethods:x}=yield Ll((0,H.m9)(b),C);return x||[]})).apply(this,arguments)}function Pu(b,m){return So.apply(this,arguments)}function So(){return(So=(0,d.Z)(function*(b,m){const _=(0,H.m9)(b),x={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&Co(_.auth,x,m);const{email:P}=yield rr(_.auth,x);P!==b.email&&(yield b.reload())})).apply(this,arguments)}function Dh(b,m,_){return Js.apply(this,arguments)}function Js(){return(Js=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&Co(C.auth,P,_);const{email:se}=yield ea(C.auth,P);se!==b.email&&(yield b.reload())})).apply(this,arguments)}function Vc(b,m){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,d.Z)(function*(b,m){return sn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Fu(b,m){return la.apply(this,arguments)}function la(){return(la=(0,d.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const C=(0,H.m9)(b),P={idToken:yield C.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},se=yield dt(C,Vc(C.auth,P));C.displayName=se.displayName||null,C.photoURL=se.photoUrl||null;const Re=C.providerData.find(({providerId:st})=>"password"===st);Re&&(Re.displayName=C.displayName,Re.photoURL=C.photoURL),yield C._updateTokensIfNecessary(se)})).apply(this,arguments)}function Lu(b,m){return Ul((0,H.m9)(b),m,null)}function Bl(b,m){return Ul((0,H.m9)(b),null,m)}function Ul(b,m,_){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,d.Z)(function*(b,m,_){const{auth:C}=b,P={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(P.email=m),_&&(P.password=_);const se=yield dt(b,wn(C,P));yield b._updateTokensIfNecessary(se,!0)})).apply(this,arguments)}class Qr{constructor(m,_,C={}){this.isNewUser=m,this.providerId=_,this.profile=C}}class Pn extends Qr{constructor(m,_,C,x){super(m,_,C),this.username=x}}class Rp extends Qr{constructor(m,_){super(m,"facebook.com",_)}}class Vu extends Pn{constructor(m,_){super(m,"github.com",_,"string"==typeof _?.login?_?.login:null)}}class Bu extends Qr{constructor(m,_){super(m,"google.com",_)}}class Th extends Pn{constructor(m,_,C){super(m,"twitter.com",_,C)}}function Hl(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Tr(b){var m,_;if(!b)return null;const{providerId:C}=b,x=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},P=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!C&&b?.idToken){const se=null===(_=null===(m=Yt(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(se)return new Qr(P,"anonymous"!==se&&"custom"!==se?se:null)}if(!C)return null;switch(C){case"facebook.com":return new Rp(P,x);case"github.com":return new Vu(P,x);case"google.com":return new Bu(P,x);case"twitter.com":return new Th(P,x,b.screenName||null);case"custom":case"anonymous":return new Qr(P,null);default:return new Qr(P,C,x)}}(_)}class eo{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new eo("enroll",m)}static _fromMfaPendingCredential(m){return new eo("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,C;if(m?.multiFactorSession){if(null!==(_=m.multiFactorSession)&&void 0!==_&&_.pendingCredential)return eo._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(C=m.multiFactorSession)&&void 0!==C&&C.idToken)return eo._fromIdtoken(m.multiFactorSession.idToken)}return null}}class ju{constructor(m,_,C){this.session=m,this.hints=_,this.signInResolver=C}static _fromError(m,_){const C=tr(m),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(Re=>ke._fromServerResponse(C,Re));ae(x.mfaPendingCredential,C,"internal-error");const se=eo._fromMfaPendingCredential(x.mfaPendingCredential);return new ju(se,P,function(){var Re=(0,d.Z)(function*(st){const ht=yield st._process(C,se);delete x.mfaInfo,delete x.mfaPendingCredential;const Mt=Object.assign(Object.assign({},x),{idToken:ht.idToken,refreshToken:ht.refreshToken});switch(_.operationType){case"signIn":const Fn=yield Zr._fromIdTokenResponse(C,_.operationType,Mt);return yield C._updateCurrentUser(Fn.user),Fn;case"reauthenticate":return ae(_.user,C,"internal-error"),Zr._forOperation(_.user,_.operationType,Mt);default:et(C,"internal-error")}});return function(st){return Re.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,d.Z)(function*(){return _.signInResolver(m)})()}}function qa(b,m){var _;const C=(0,H.m9)(b),x=m;return ae(m.customData.operationType,C,"argument-error"),ae(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),ju._fromError(C,x)}function mr(b,m){return sn(b,"POST","/v2/accounts/mfaEnrollment:start",qt(b,m))}class zu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>ke._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new zu(m)}getSession(){var m=this;return(0,d.Z)(function*(){return eo._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var C=this;return(0,d.Z)(function*(){const x=m,P=yield C.getSession(),se=yield dt(C.user,x._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(se),C.user.reload()})()}unenroll(m){var _=this;return(0,d.Z)(function*(){var C;const x="string"==typeof m?m:m.uid,P=yield _.user.getIdToken(),se=yield dt(_.user,function Op(b,m){return sn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(b,m))}(_.user.auth,{idToken:P,mfaEnrollmentId:x}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Re})=>Re!==x),yield _.user._updateTokensIfNecessary(se);try{yield _.user.reload()}catch(Re){if("auth/user-token-expired"!==(null===(C=Re)||void 0===C?void 0:C.code))throw Re}})()}}const Ah=new WeakMap;function Ka(b){const m=(0,H.m9)(b);return Ah.has(m)||Ah.set(m,zu._fromUser(m)),Ah.get(m)}const $l="__sak";class Ya{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem($l,"1"),this.storage.removeItem($l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const oi=(()=>{class b extends Ya{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Uc(){const b=(0,H.z$)();return z(b)||At(b)}()&&function Sn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=hr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),P=this.localCache[C];x!==P&&_(C,P,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((Re,st,ht)=>{this.notifyListeners(Re,ht)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Re=this.storage.getItem(x);if(_.newValue!==Re)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const P=()=>{const Re=this.storage.getItem(x);!C&&this.localCache[x]===Re||this.notifyListeners(x,Re)},se=this.storage.getItem(x);!function St(){return(0,H.w1)()&&10===document.documentMode}()||se===_.newValue||_.newValue===_.oldValue?P():setTimeout(P,10)}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,P=this;return(0,d.Z)(function*(){yield x().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,d.Z)(function*(){const P=yield C().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,x=this;return(0,d.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return b.type="LOCAL",b})(),xo=(()=>{class b extends Ya{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return b.type="SESSION",b})();let Gu=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const x=new b(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,d.Z)(function*(){const x=_,{eventId:P,eventType:se,data:Re}=x.data,st=C.handlersMap[se];if(!st?.size)return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:se});const ht=Array.from(st).map(function(){var Fn=(0,d.Z)(function*(Ps){return Ps(x.origin,Re)});return function(Ps){return Fn.apply(this,arguments)}}()),Mt=yield function Wl(b){return Promise.all(b.map(function(){var m=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return m.apply(this,arguments)}}()))}(ht);x.ports[0].postMessage({status:"done",eventId:P,eventType:se,response:Mt})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Za(b="",m=10){let _="";for(let C=0;C<m;C++)_+=Math.floor(10*Math.random());return b+_}class En{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,C=50){var x=this;return(0,d.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let se,Re;return new Promise((st,ht)=>{const Mt=Za("",20);P.port1.start();const Fn=setTimeout(()=>{ht(new Error("unsupported_event"))},C);Re={messageChannel:P,onMessage(Ps){const os=Ps;if(os.data.eventId===Mt)switch(os.data.status){case"ack":clearTimeout(Fn),se=setTimeout(()=>{ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(se),st(os.data.response);break;default:clearTimeout(Fn),clearTimeout(se),ht(new Error("invalid_response"))}}},x.handlers.add(Re),P.port1.addEventListener("message",Re.onMessage),x.target.postMessage({eventType:m,eventId:Mt,data:_},[P.port2])}).finally(()=>{Re&&x.removeMessageHandler(Re)})})()}}function Cn(){return window}function Qt(){return typeof Cn().WorkerGlobalScope<"u"&&"function"==typeof Cn().importScripts}function Zn(){return(Zn=(0,d.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Qa="firebaseLocalStorageDb",ca="firebaseLocalStorage",Xa="fbase_key";class is{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function ft(b,m){return b.transaction([ca],m?"readwrite":"readonly").objectStore(ca)}function to(){const b=indexedDB.open(Qa,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const C=b.result;try{C.createObjectStore(ca,{keyPath:Xa})}catch(x){_(x)}}),b.addEventListener("success",(0,d.Z)(function*(){const C=b.result;C.objectStoreNames.contains(ca)?m(C):(C.close(),yield function Rh(){const b=indexedDB.deleteDatabase(Qa);return new is(b).toPromise()}(),m(yield to()))}))})}function no(b,m,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,d.Z)(function*(b,m,_){const C=ft(b,!0).put({[Xa]:m,value:_});return new is(C).toPromise()})).apply(this,arguments)}function da(){return(da=(0,d.Z)(function*(b,m){const _=ft(b,!1).get(m),C=yield new is(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function Vi(b,m){const _=ft(b,!0).delete(m);return new is(_).toPromise()}const Yl=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield to()),_.db})()}_withRetries(_){var C=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(x++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return Qt()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=Gu._getInstance(function ql(){return Qt()?self:null}()),_.receiver._subscribe("keyChanged",function(){var C=(0,d.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,d.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function Sr(){return Zn.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new En(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(C=P[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=P[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,d.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function Hc(){var b;return(null===(b=navigator?.serviceWorker)||void 0===b?void 0:b.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield to();return yield no(_,$l,"1"),yield Vi(_,$l),!0}catch{}return!1})()}_withPendingWrite(_){var C=this;return(0,d.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(P=>no(P,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,d.Z)(function*(){const x=yield C._withRetries(P=>function Wn(b,m){return da.apply(this,arguments)}(P,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,d.Z)(function*(){return C._withPendingWrite((0,d.Z)(function*(){return yield C._withRetries(x=>Vi(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const C=yield _._withRetries(se=>{const Re=ft(se,!1).getAll();return new is(Re).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:se,value:Re}of C)P.add(se),JSON.stringify(_.localCache[se])!==JSON.stringify(Re)&&(_.notifyListeners(se,Re),x.push(se));for(const se of Object.keys(_.localCache))_.localCache[se]&&!P.has(se)&&(_.notifyListeners(se,null),x.push(se));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function Ja(b,m){return sn(b,"POST","/v2/accounts/mfaSignIn:start",qt(b,m))}function Fr(){return(Fr=(0,d.Z)(function*(b){return(yield sn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ss(b){return new Promise((m,_)=>{const C=document.createElement("script");C.setAttribute("src",b),C.onload=m,C.onerror=x=>{const P=Ue("internal-error");P.customData=x,_(P)},C.type="text/javascript",C.charset="UTF-8",function Lr(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(C)})}function Ro(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Ar=1e12;class Nt{constructor(m){this.auth=m,this.counter=Ar,this._widgets=new Map}render(m,_){const C=this.counter;return this._widgets.set(C,new qu(m,this.auth.name,_||{})),this.counter++,C}reset(m){var _;const C=m||Ar;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(m){var _;return(null===(_=this._widgets.get(m||Ar))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,d.Z)(function*(){var C;return null===(C=_._widgets.get(m||Ar))||void 0===C||C.execute(),""})()}}class qu{constructor(m,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof m?document.getElementById(m):m;ae(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function kh(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<b;C++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ir=Ro("rcb"),Ui=new Ze(3e4,6e4);class Mr{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Cn().grecaptcha)||void 0===m||!m.render)}load(m,_=""){return ae(function xr(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Cn().grecaptcha):new Promise((C,x)=>{const P=Cn().setTimeout(()=>{x(Ue(m,"network-request-failed"))},Ui.get());Cn()[ir]=()=>{Cn().clearTimeout(P),delete Cn()[ir];const Re=Cn().grecaptcha;if(!Re)return void x(Ue(m,"internal-error"));const st=Re.render;Re.render=(ht,Mt)=>{const Fn=st(ht,Mt);return this.counter++,Fn},this.hostLanguage=_,C(Re)},Ss(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:ir,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Ue(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var _;return!(null===(_=Cn().grecaptcha)||void 0===_||!_.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ko{load(m){return(0,d.Z)(function*(){return new Nt(m)})()}clearedOneInstance(){}}const Oh="recaptcha",l_={theme:"light",type:"image"};class In{constructor(m,_=Object.assign({},l_),C){this.parameters=_,this.type=Oh,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tr(C),this.isInvisible="invisible"===this.parameters.size,ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof m?document.getElementById(m):m;ae(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ko:new Mr,this.validateStartingState()}verify(){var m=this;return(0,d.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const se=Re=>{!Re||(m.tokenChangeListeners.delete(se),P(Re))};m.tokenChangeListeners.add(se),m.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ae(!this.parameters.sitekey,this.auth,"argument-error"),ae(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ae(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof m)m(_);else if("string"==typeof m){const C=Cn()[m];"function"==typeof C&&C(_)}}}assertNotDestroyed(){ae(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,d.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,d.Z)(function*(){ae(je()&&!Qt(),m.auth,"internal-error"),yield function Ms(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function Ts(b){return Fr.apply(this,arguments)}(m.auth);ae(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return ae(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class An{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=Ys._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function Oo(b,m,_){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,d.Z)(function*(b,m,_){const C=tr(b),x=yield io(C,m,(0,H.m9)(_));return new An(x,P=>oa(C,P))})).apply(this,arguments)}function _r(b,m,_){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b);yield gr(!1,C,"phone");const x=yield io(C.auth,m,(0,H.m9)(_));return new An(x,P=>Nc(C,P))})).apply(this,arguments)}function $c(b,m,_){return fa.apply(this,arguments)}function fa(){return(fa=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b),x=yield io(C.auth,m,(0,H.m9)(_));return new An(x,P=>ku(C,P))})).apply(this,arguments)}function io(b,m,_){return No.apply(this,arguments)}function No(){return(No=(0,d.Z)(function*(b,m,_){var C;const x=yield _.verify();try{let P;if(ae("string"==typeof x,b,"argument-error"),ae(_.type===Oh,b,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const se=P.session;if("phoneNumber"in P)return ae("enroll"===se.type,b,"internal-error"),(yield mr(b,{idToken:se.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{ae("signin"===se.type,b,"internal-error");const Re=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return ae(Re,b,"missing-multi-factor-info"),(yield Ja(b,{mfaPendingCredential:se.credential,mfaEnrollmentId:Re,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:se}=yield Tp(b,{phoneNumber:P.phoneNumber,recaptchaToken:x});return se}}finally{_._reset()}})).apply(this,arguments)}function $t(b,m){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,d.Z)(function*(b,m){yield wo((0,H.m9)(b),m)})).apply(this,arguments)}let el=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=tr(_)}verifyPhoneNumber(_,C){return io(this.auth,_,(0,H.m9)(C))}static credential(_,C){return Ys._fromVerification(_,C)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?Ys._fromTokenResponse(C,x):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Po(b,m){return m?le(m):(ae(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Ql extends nr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return Ks(m,this._buildIdpRequest())}_linkToIdToken(m,_){return Ks(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return Ks(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function Un(b){return Li(b.auth,new Ql(b),b.bypassAuthState)}function tl(b){const{auth:m,user:_}=b;return ae(_,m,"internal-error"),Qs(_,new Ql(b),b.bypassAuthState)}function Fo(b){return nl.apply(this,arguments)}function nl(){return(nl=(0,d.Z)(function*(b){const{auth:m,user:_}=b;return ae(_,m,"internal-error"),wo(_,new Ql(b),b.bypassAuthState)})).apply(this,arguments)}class Xl{constructor(m,_,C,x,P=!1){this.auth=m,this.resolver=C,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,d.Z)(function*(C,x){m.pendingPromise={resolve:C,reject:x};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,d.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:P,tenantId:se,error:Re,type:st}=m;if(Re)return void _.reject(Re);const ht={auth:_.auth,requestUri:C,sessionId:x,tenantId:se||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(st)(ht))}catch(Mt){_.reject(Mt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return Fo;case"reauthViaPopup":case"reauthViaRedirect":return tl;default:et(this.auth,"internal-error")}}resolve(m){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const sr=new Ze(2e3,1e4);function Hi(b,m,_){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(b,m,_){const C=tr(b);Me(b,m,_s);const x=Po(C,_);return new sl(C,"signInViaPopup",m,x).executeNotNull()})).apply(this,arguments)}function zc(b,m,_){return rl.apply(this,arguments)}function rl(){return(rl=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b);Me(C.auth,m,_s);const x=Po(C.auth,_);return new sl(C.auth,"reauthViaPopup",m,x,C).executeNotNull()})).apply(this,arguments)}function Nh(b,m,_){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b);Me(C.auth,m,_s);const x=Po(C.auth,_);return new sl(C.auth,"linkViaPopup",m,x,C).executeNotNull()})).apply(this,arguments)}let sl=(()=>{class b extends Xl{constructor(_,C,x,P,se){super(_,C,P,se),this.provider=x,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const C=yield _.execute();return ae(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,d.Z)(function*(){Te(1===_.filter.length,"Popup operations only handle one event");const C=Za();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Ue(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Ue(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=null!==(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==x&&x.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ue(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,sr.get())};_()}}return b.currentPopupAction=null,b})();const xs=new Map;class Rs extends Xl{constructor(m,_,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,d.Z)(function*(){let C=xs.get(_.auth._key());if(!C){try{const P=(yield function pa(b,m){return ga.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;C=()=>Promise.resolve(P)}catch(x){C=()=>Promise.reject(x)}xs.set(_.auth._key(),C)}return _.bypassAuthState||xs.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,C=this;return(0,d.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(C,m);if("unknown"!==m.type){if(m.eventId){const x=yield C.auth._redirectUserForId(m.eventId);if(x)return C.user=x,_().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function ga(){return(ga=(0,d.Z)(function*(b,m){const _=Fh(m),C=vi(b);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function ks(b,m){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,d.Z)(function*(b,m){return vi(b)._set(Fh(m),"true")})).apply(this,arguments)}function ma(){xs.clear()}function yi(b,m){xs.set(b._key(),m)}function vi(b){return le(b._redirectPersistence)}function Fh(b){return on("pendingRedirect",b.config.apiKey,b.name)}function Hn(b,m,_){return function Gc(b,m,_){return Jl.apply(this,arguments)}(b,m,_)}function Jl(){return(Jl=(0,d.Z)(function*(b,m,_){const C=tr(b);Me(b,m,_s);const x=Po(C,_);return yield ks(x,C),x._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function _a(b,m,_){return function D(b,m,_){return S.apply(this,arguments)}(b,m,_)}function S(){return(S=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b);Me(C.auth,m,_s);const x=Po(C.auth,_);yield ks(x,C.auth);const P=yield Lt(C);return x._openRedirect(C.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function k(b,m,_){return function U(b,m,_){return ee.apply(this,arguments)}(b,m,_)}function ee(){return(ee=(0,d.Z)(function*(b,m,_){const C=(0,H.m9)(b);Me(C.auth,m,_s);const x=Po(C.auth,_);yield gr(!1,C,m.providerId),yield ks(x,C.auth);const P=yield Lt(C);return x._openRedirect(C.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function he(b,m){return Le.apply(this,arguments)}function Le(){return(Le=(0,d.Z)(function*(b,m){return yield tr(b)._initializationPromise,qe(b,m,!1)})).apply(this,arguments)}function qe(b,m){return It.apply(this,arguments)}function It(){return(It=(0,d.Z)(function*(b,m,_=!1){const C=tr(b),x=Po(C,m),se=yield new Rs(C,x,_).execute();return se&&!_&&(delete se.user._redirectEventId,yield C._persistUserIfCurrent(se.user),yield C._setRedirectUser(null,m)),se})).apply(this,arguments)}function Lt(b){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,d.Z)(function*(b){const m=Za(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class yr{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(_=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function ss(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ol(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var C;if(m.error&&!ol(m)){const x=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Ue(this.auth,x))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const C=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xr(m))}saveEventToCache(m){this.cachedEventUids.add(Xr(m)),this.lastProcessedEventTime=Date.now()}}function Xr(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function ol({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===m?.code}function ji(b){return al.apply(this,arguments)}function al(){return(al=(0,d.Z)(function*(b,m={}){return sn(b,"GET","/v1/projects",m)})).apply(this,arguments)}const ll=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ya=/^https?/;function Os(){return(Os=(0,d.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield ji(b);for(const _ of m)try{if(Lh(_))return}catch{}et(b,"unauthorized-domain")})).apply(this,arguments)}function Lh(b){const m=pe(),{protocol:_,hostname:C}=new URL(m);if(b.startsWith("chrome-extension://")){const se=new URL(b);return""===se.hostname&&""===C?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&se.hostname===C}if(!ya.test(_))return!1;if(ll.test(b))return C===b;const x=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const c_=new Ze(3e4,6e4);function Np(){const b=Cn().___jsl;if(b?.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Vo=null;function Wc(b){return Vo=Vo||function Yu(b){return new Promise((m,_)=>{var C,x,P;function se(){Np(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Np(),_(Ue(b,"network-request-failed"))},timeout:c_.get()})}if(null!==(x=null===(C=Cn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==x&&x.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Cn().gapi)||void 0===P||!P.load){const Re=Ro("iframefcb");return Cn()[Re]=()=>{gapi.load?se():_(Ue(b,"network-request-failed"))},Ss(`https://apis.google.com/js/api.js?onload=${Re}`).catch(st=>_(st))}se()}}).catch(m=>{throw Vo=null,m})}(b),Vo}const cl=new Ze(5e3,15e3),d_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},va=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function h_(b){const m=b.config;ae(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?mn(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:b.name,v:N.SDK_VERSION},x=va.get(b.config.apiHost);x&&(C.eid=x);const P=b._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,H.xO)(C).slice(1)}`}function ul(){return ul=(0,d.Z)(function*(b){const m=yield Wc(b),_=Cn().gapi;return ae(_,b,"internal-error"),m.open({where:document.body,url:h_(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:d_,dontclear:!0},C=>new Promise(function(){var x=(0,d.Z)(function*(P,se){yield C.restyle({setHideOnLeave:!1});const Re=Ue(b,"network-request-failed"),st=Cn().setTimeout(()=>{se(Re)},cl.get());function ht(){Cn().clearTimeout(st),P(C)}C.ping(ht).then(ht,()=>{se(Re)})});return function(P,se){return x.apply(this,arguments)}}()))}),ul.apply(this,arguments)}const Bh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kc{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ci(b,m,_,C,x,P){ae(b.config.authDomain,b,"auth-domain-config-required"),ae(b.config.apiKey,b,"invalid-api-key");const se={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:C,v:N.SDK_VERSION,eventId:x};if(m instanceof _s){m.setDefaultLanguage(b.languageCode),se.providerId=m.providerId||"",(0,H.xb)(m.getCustomParameters())||(se.customParameters=JSON.stringify(m.getCustomParameters()));for(const[st,ht]of Object.entries(P||{}))se[st]=ht}if(m instanceof ys){const st=m.getScopes().filter(ht=>""!==ht);st.length>0&&(se.scopes=st.join(","))}b.tenantId&&(se.tid=b.tenantId);const Re=se;for(const st of Object.keys(Re))void 0===Re[st]&&delete Re[st];return`${function Xu({config:b}){return b.emulator?mn(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,H.xO)(Re).slice(1)}`}const Ju="webStorageSupport",Lp=class p_{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xo,this._completeRedirectFn=qe,this._overrideRedirectResult=yi}_openPopup(m,_,C,x){var P=this;return(0,d.Z)(function*(){var se;Te(null===(se=P.eventManagers[m._key()])||void 0===se?void 0:se.manager,"_initialize() not called before _openPopup()");const Re=ci(m,_,C,pe(),x);return function Zu(b,m,_,C=500,x=600){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),se=Math.max((window.screen.availWidth-C)/2,0).toString();let Re="";const st=Object.assign(Object.assign({},Bh),{width:C.toString(),height:x.toString(),top:P,left:se}),ht=(0,H.z$)().toLowerCase();_&&(Re=Ie(ht)?"_blank":_),$(ht)&&(m=m||"http://localhost",st.scrollbars="yes");const Mt=Object.entries(st).reduce((Ps,[os,ed])=>`${Ps}${os}=${ed},`,"");if(function Ir(b=(0,H.z$)()){var m;return At(b)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(ht)&&"_self"!==Re)return function Uh(b,m){const _=document.createElement("a");_.href=b,_.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(m||"",Re),new Kc(null);const Fn=window.open(m||"",Re,Mt);ae(Fn,b,"popup-blocked");try{Fn.focus()}catch{}return new Kc(Fn)}(m,Re,Za())})()}_openRedirect(m,_,C,x){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(m),function Je(b){Cn().location.href=b}(ci(m,_,C,pe(),x)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(Te(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(m);return this.eventManagers[_]={promise:C},C.catch(()=>{delete this.eventManagers[_]}),C}initAndGetManager(m){var _=this;return(0,d.Z)(function*(){const C=yield function Pp(b){return ul.apply(this,arguments)}(m),x=new yr(m);return C.register("authEvent",P=>(ae(P?.authEvent,m,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:x},_.iframes[m._key()]=C,x})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Ju,{type:Ju},x=>{var P;const se=null===(P=x?.[0])||void 0===P?void 0:P[Ju];void 0!==se&&_(!!se),et(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function li(b){return Os.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return hr()||z()||At()}};class Ns extends class g_{constructor(m){this.factorId=m}_process(m,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,C);case"signin":return this._finalizeSignIn(m,_.credential);default:return ve("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Ns(m)}_finalizeEnroll(m,_,C){return function $u(b,m){return sn(b,"POST","/v2/accounts/mfaEnrollment:finalize",qt(b,m))}(m,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Bi(b,m){return sn(b,"POST","/v2/accounts/mfaSignIn:finalize",qt(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ec=(()=>{class b{constructor(){}static assertion(_){return Ns._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var Vp="@firebase/auth";class m_{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(C=>{var x;m((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function v_(b=(0,N.getApp)()){const m=(0,N._getProvider)(b,"auth");return m.isInitialized()?m.getImmediate():function de(b,m){const _=(0,N._getProvider)(b,"auth");if(_.isInitialized()){const x=_.getImmediate(),P=_.getOptions();if((0,H.vZ)(P,m??{}))return x;et(x,"already-initialized")}return _.initialize({options:m})}(b,{popupRedirectResolver:Lp,persistence:[Yl,oi,xo]})}!function y_(b){(0,N._registerComponent)(new ye.wA("auth",(m,{options:_})=>{const C=m.getProvider("app").getImmediate(),x=m.getProvider("heartbeat"),{apiKey:P,authDomain:se}=C.options;return((Re,st)=>{ae(P&&!P.includes(":"),"invalid-api-key",{appName:Re.name}),ae(!se?.includes(":"),"argument-error",{appName:Re.name});const ht={apiKey:P,authDomain:se,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xo(b)},Mt=new Ht(Re,st,ht);return function Ee(b,m){const _=m?.persistence||[],C=(Array.isArray(_)?_:[_]).map(le);m?.errorMap&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(C,m?.popupRedirectResolver)}(Mt,_),Mt})(C,x)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,C)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new ye.wA("auth-internal",m=>{const _=tr(m.getProvider("auth").getImmediate());return new m_(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(Vp,"0.20.5",function __(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,N.registerVersion)(Vp,"0.20.5","esm2017")}("Browser")},2090:(gt,Oe,F)=>{F.d(Oe,{$s:()=>kn,BH:()=>Ge,DV:()=>sn,G6:()=>ae,GJ:()=>rn,L:()=>ge,LL:()=>pe,Mn:()=>Me,Pz:()=>Wt,Sg:()=>Ve,UG:()=>De,UI:()=>Oi,US:()=>ye,Yr:()=>Ye,ZB:()=>W,ZR:()=>Ee,b$:()=>et,cI:()=>tn,d:()=>Ue,dS:()=>Yt,eu:()=>Te,g5:()=>N,gK:()=>cr,gQ:()=>Qi,h$:()=>ce,hl:()=>ve,hu:()=>H,jU:()=>_e,m9:()=>er,ne:()=>yt,p$:()=>K,pd:()=>zn,r3:()=>qt,ru:()=>rt,tV:()=>Ce,uI:()=>at,ug:()=>Qe,vZ:()=>$r,w1:()=>Ne,w9:()=>_n,xO:()=>mi,xb:()=>Mn,z$:()=>Se,zI:()=>te,zd:()=>Ni});const H=function(G,q){if(!G)throw N(q)},N=function(G){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+G)},ue=function(G){const q=[];let j=0;for(let Y=0;Y<G.length;Y++){let Q=G.charCodeAt(Y);Q<128?q[j++]=Q:Q<2048?(q[j++]=Q>>6|192,q[j++]=63&Q|128):55296==(64512&Q)&&Y+1<G.length&&56320==(64512&G.charCodeAt(Y+1))?(Q=65536+((1023&Q)<<10)+(1023&G.charCodeAt(++Y)),q[j++]=Q>>18|240,q[j++]=Q>>12&63|128,q[j++]=Q>>6&63|128,q[j++]=63&Q|128):(q[j++]=Q>>12|224,q[j++]=Q>>6&63|128,q[j++]=63&Q|128)}return q},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(G,q){if(!Array.isArray(G))throw Error("encodeByteArray takes an array as a parameter");this.init_();const j=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,Y=[];for(let Q=0;Q<G.length;Q+=3){const Fe=G[Q],Ke=Q+1<G.length,Dt=Ke?G[Q+1]:0,fn=Q+2<G.length,on=fn?G[Q+2]:0;let $=(15&Dt)<<2|on>>6,z=63&on;fn||(z=64,Ke||($=64)),Y.push(j[Fe>>2],j[(3&Fe)<<4|Dt>>4],j[$],j[z])}return Y.join("")},encodeString(G,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(G):this.encodeByteArray(ue(G),q)},decodeString(G,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(G):function(G){const q=[];let j=0,Y=0;for(;j<G.length;){const Q=G[j++];if(Q<128)q[Y++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const Fe=G[j++];q[Y++]=String.fromCharCode((31&Q)<<6|63&Fe)}else if(Q>239&&Q<365){const fn=((7&Q)<<18|(63&G[j++])<<12|(63&G[j++])<<6|63&G[j++])-65536;q[Y++]=String.fromCharCode(55296+(fn>>10)),q[Y++]=String.fromCharCode(56320+(1023&fn))}else{const Fe=G[j++],Ke=G[j++];q[Y++]=String.fromCharCode((15&Q)<<12|(63&Fe)<<6|63&Ke)}}return q.join("")}(this.decodeStringToByteArray(G,q))},decodeStringToByteArray(G,q){this.init_();const j=q?this.charToByteMapWebSafe_:this.charToByteMap_,Y=[];for(let Q=0;Q<G.length;){const Fe=j[G.charAt(Q++)],Dt=Q<G.length?j[G.charAt(Q)]:0;++Q;const on=Q<G.length?j[G.charAt(Q)]:64;++Q;const ie=Q<G.length?j[G.charAt(Q)]:64;if(++Q,null==Fe||null==Dt||null==on||null==ie)throw Error();Y.push(Fe<<2|Dt>>4),64!==on&&(Y.push(Dt<<4&240|on>>2),64!==ie&&Y.push(on<<6&192|ie))}return Y},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let G=0;G<this.ENCODED_VALS.length;G++)this.byteToCharMap_[G]=this.ENCODED_VALS.charAt(G),this.charToByteMap_[this.byteToCharMap_[G]]=G,this.byteToCharMapWebSafe_[G]=this.ENCODED_VALS_WEBSAFE.charAt(G),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[G]]=G,G>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(G)]=G,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(G)]=G)}}},ce=function(G){const q=ue(G);return ye.encodeByteArray(q,!0)},ge=function(G){return ce(G).replace(/\./g,"")},Ce=function(G){try{return ye.decodeString(G,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function K(G){return W(void 0,G)}function W(G,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===G&&(G={});break;case Array:G=[];break;default:return q}for(const j in q)!q.hasOwnProperty(j)||!re(j)||(G[j]=W(G[j],q[j]));return G}function re(G){return"__proto__"!==G}class Ge{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,j)=>{this.resolve=q,this.reject=j})}wrapCallback(q){return(j,Y)=>{j?this.reject(j):this.resolve(Y),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(j):q(j,Y))}}}function Ve(G,q){if(G.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Y=q||"demo-project",Q=G.iat||0,Fe=G.sub||G.user_id;if(!Fe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ke=Object.assign({iss:`https://securetoken.google.com/${Y}`,aud:Y,iat:Q,exp:Q+3600,auth_time:Q,sub:Fe,user_id:Fe,firebase:{sign_in_provider:"custom",identities:{}}},G);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ke)),""].join(".")}function Se(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function at(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Se())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _e(){return"object"==typeof self&&self.self===self}function rt(){const G="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof G&&void 0!==G.id}function et(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ue(){return Se().indexOf("Electron/")>=0}function Ne(){const G=Se();return G.indexOf("MSIE ")>=0||G.indexOf("Trident/")>=0}function Me(){return Se().indexOf("MSAppHost/")>=0}function Ye(){return!1}function ae(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ve(){return"object"==typeof indexedDB}function Te(){return new Promise((G,q)=>{try{let j=!0;const Y="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(Y);Q.onsuccess=()=>{Q.result.close(),j||self.indexedDB.deleteDatabase(Y),G(!0)},Q.onupgradeneeded=()=>{j=!1},Q.onerror=()=>{var Fe;q((null===(Fe=Q.error)||void 0===Fe?void 0:Fe.message)||"")}}catch(j){q(j)}})}function te(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ee extends Error{constructor(q,j,Y){super(j),this.code=q,this.customData=Y,this.name="FirebaseError",Object.setPrototypeOf(this,Ee.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pe.prototype.create)}}class pe{constructor(q,j,Y){this.service=q,this.serviceName=j,this.errors=Y}create(q,...j){const Y=j[0]||{},Q=`${this.service}/${q}`,Fe=this.errors[q],Ke=Fe?function je(G,q){return G.replace(wt,(j,Y)=>{const Q=q[Y];return null!=Q?String(Q):`<${Y}?>`})}(Fe,Y):"Error";return new Ee(Q,`${this.serviceName}: ${Ke} (${Q}).`,Y)}}const wt=/\{\$([^}]+)}/g;function tn(G){return JSON.parse(G)}function Wt(G){return JSON.stringify(G)}const Ze=function(G){let q={},j={},Y={},Q="";try{const Fe=G.split(".");q=tn(Ce(Fe[0])||""),j=tn(Ce(Fe[1])||""),Q=Fe[2],Y=j.d||{},delete j.d}catch{}return{header:q,claims:j,data:Y,signature:Q}},_n=function(G){const j=Ze(G).claims;return!!j&&"object"==typeof j&&j.hasOwnProperty("iat")},rn=function(G){const q=Ze(G).claims;return"object"==typeof q&&!0===q.admin};function qt(G,q){return Object.prototype.hasOwnProperty.call(G,q)}function sn(G,q){if(Object.prototype.hasOwnProperty.call(G,q))return G[q]}function Mn(G){for(const q in G)if(Object.prototype.hasOwnProperty.call(G,q))return!1;return!0}function Oi(G,q,j){const Y={};for(const Q in G)Object.prototype.hasOwnProperty.call(G,Q)&&(Y[Q]=q.call(j,G[Q],Q,G));return Y}function $r(G,q){if(G===q)return!0;const j=Object.keys(G),Y=Object.keys(q);for(const Q of j){if(!Y.includes(Q))return!1;const Fe=G[Q],Ke=q[Q];if(Vn(Fe)&&Vn(Ke)){if(!$r(Fe,Ke))return!1}else if(Fe!==Ke)return!1}for(const Q of Y)if(!j.includes(Q))return!1;return!0}function Vn(G){return null!==G&&"object"==typeof G}function mi(G){const q=[];for(const[j,Y]of Object.entries(G))Array.isArray(Y)?Y.forEach(Q=>{q.push(encodeURIComponent(j)+"="+encodeURIComponent(Q))}):q.push(encodeURIComponent(j)+"="+encodeURIComponent(Y));return q.length?"&"+q.join("&"):""}function Ni(G){const q={};return G.replace(/^\?/,"").split("&").forEach(Y=>{if(Y){const[Q,Fe]=Y.split("=");q[decodeURIComponent(Q)]=decodeURIComponent(Fe)}}),q}function zn(G){const q=G.indexOf("?");if(!q)return"";const j=G.indexOf("#",q);return G.substring(q,j>0?j:void 0)}class Qi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,j){j||(j=0);const Y=this.W_;if("string"==typeof q)for(let ie=0;ie<16;ie++)Y[ie]=q.charCodeAt(j)<<24|q.charCodeAt(j+1)<<16|q.charCodeAt(j+2)<<8|q.charCodeAt(j+3),j+=4;else for(let ie=0;ie<16;ie++)Y[ie]=q[j]<<24|q[j+1]<<16|q[j+2]<<8|q[j+3],j+=4;for(let ie=16;ie<80;ie++){const $=Y[ie-3]^Y[ie-8]^Y[ie-14]^Y[ie-16];Y[ie]=4294967295&($<<1|$>>>31)}let on,dr,Q=this.chain_[0],Fe=this.chain_[1],Ke=this.chain_[2],Dt=this.chain_[3],fn=this.chain_[4];for(let ie=0;ie<80;ie++){ie<40?ie<20?(on=Dt^Fe&(Ke^Dt),dr=1518500249):(on=Fe^Ke^Dt,dr=1859775393):ie<60?(on=Fe&Ke|Dt&(Fe|Ke),dr=2400959708):(on=Fe^Ke^Dt,dr=3395469782);const $=(Q<<5|Q>>>27)+on+fn+dr+Y[ie]&4294967295;fn=Dt,Dt=Ke,Ke=4294967295&(Fe<<30|Fe>>>2),Fe=Q,Q=$}this.chain_[0]=this.chain_[0]+Q&4294967295,this.chain_[1]=this.chain_[1]+Fe&4294967295,this.chain_[2]=this.chain_[2]+Ke&4294967295,this.chain_[3]=this.chain_[3]+Dt&4294967295,this.chain_[4]=this.chain_[4]+fn&4294967295}update(q,j){if(null==q)return;void 0===j&&(j=q.length);const Y=j-this.blockSize;let Q=0;const Fe=this.buf_;let Ke=this.inbuf_;for(;Q<j;){if(0===Ke)for(;Q<=Y;)this.compress_(q,Q),Q+=this.blockSize;if("string"==typeof q){for(;Q<j;)if(Fe[Ke]=q.charCodeAt(Q),++Ke,++Q,Ke===this.blockSize){this.compress_(Fe),Ke=0;break}}else for(;Q<j;)if(Fe[Ke]=q[Q],++Ke,++Q,Ke===this.blockSize){this.compress_(Fe),Ke=0;break}}this.inbuf_=Ke,this.total_+=j}digest(){const q=[];let j=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Q=this.blockSize-1;Q>=56;Q--)this.buf_[Q]=255&j,j/=256;this.compress_(this.buf_);let Y=0;for(let Q=0;Q<5;Q++)for(let Fe=24;Fe>=0;Fe-=8)q[Y]=this.chain_[Q]>>Fe&255,++Y;return q}}function yt(G,q){const j=new zr(G,q);return j.subscribe.bind(j)}class zr{constructor(q,j){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=j,this.task.then(()=>{q(this)}).catch(Y=>{this.error(Y)})}next(q){this.forEachObserver(j=>{j.next(q)})}error(q){this.forEachObserver(j=>{j.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,j,Y){let Q;if(void 0===q&&void 0===j&&void 0===Y)throw new Error("Missing Observer.");Q=function nn(G,q){if("object"!=typeof G||null===G)return!1;for(const j of q)if(j in G&&"function"==typeof G[j])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:j,complete:Y},void 0===Q.next&&(Q.next=lr),void 0===Q.error&&(Q.error=lr),void 0===Q.complete&&(Q.complete=lr);const Fe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),Fe}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let j=0;j<this.observers.length;j++)this.sendOne(j,q)}sendOne(q,j){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{j(this.observers[q])}catch(Y){typeof console<"u"&&console.error&&console.error(Y)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lr(){}function cr(G,q){return`${G} failed: ${q} argument `}const Yt=function(G){const q=[];let j=0;for(let Y=0;Y<G.length;Y++){let Q=G.charCodeAt(Y);if(Q>=55296&&Q<=56319){const Fe=Q-55296;Y++,H(Y<G.length,"Surrogate pair missing trail surrogate."),Q=65536+(Fe<<10)+(G.charCodeAt(Y)-56320)}Q<128?q[j++]=Q:Q<2048?(q[j++]=Q>>6|192,q[j++]=63&Q|128):Q<65536?(q[j++]=Q>>12|224,q[j++]=Q>>6&63|128,q[j++]=63&Q|128):(q[j++]=Q>>18|240,q[j++]=Q>>12&63|128,q[j++]=Q>>6&63|128,q[j++]=63&Q|128)}return q},Qe=function(G){let q=0;for(let j=0;j<G.length;j++){const Y=G.charCodeAt(j);Y<128?q++:Y<2048?q+=2:Y>=55296&&Y<=56319?(q+=4,j++):q+=3}return q};function kn(G,q=1e3,j=2){const Y=q*Math.pow(j,G),Q=Math.round(.5*Y*(Math.random()-.5)*2);return Math.min(144e5,Y+Q)}function er(G){return G&&G._delegate?G._delegate:G}},3009:(gt,Oe,F)=>{var d=F(4650);let H=null;function N(){return H}const ce=new d.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ce(){return(0,d.LFG)(W)}()},providedIn:"platform"}),n})();const K=new d.OlP("Location Initialized");let W=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){re()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){re()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Ge(){return new W((0,d.LFG)(ce))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Ve(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Se(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function at(n){return n&&"?"!==n[0]?"?"+n:n}let De=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return function _e(){const n=(0,d.LFG)(ce).location;return new et((0,d.LFG)(ge),n&&n.origin||"")}()},providedIn:"root"}),n})();const rt=new d.OlP("appBaseHref");let et=(()=>{class n extends De{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ve(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+at(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){const c=this.prepareExternalUrl(i+at(o));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){const c=this.prepareExternalUrl(i+at(o));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge),d.LFG(rt,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ue=(()=>{class n extends De{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ve(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let c=this.prepareExternalUrl(i+at(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,o){let c=this.prepareExternalUrl(i+at(o));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ge),d.LFG(rt,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ne=(()=>{class n{constructor(t){this._subject=new d.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Se(ae(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+at(r))}normalize(t){return n.stripTrailingSlash(function Ye(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ae(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+at(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=at,n.joinWithSlash=Ve,n.stripTrailingSlash=Se,n.\u0275fac=function(t){return new(t||n)(d.LFG(De))},n.\u0275prov=d.Yz7({token:n,factory:function(){return function Me(){return new Ne((0,d.LFG)(De))}()},providedIn:"root"}),n})();function ae(n){return n.replace(/\/index.html$/,"")}class Jo{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let es=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,o,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Jo(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===o?void 0:o);else if(null!==o){const h=r.get(o);r.move(h,c),rr(h,i)}});for(let i=0,o=r.length;i<o;i++){const h=r.get(i).context;h.index=i,h.count=o,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{rr(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function rr(n,e){n.context.$implicit=e.item}let Pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Wr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Mc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Mc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Wr{constructor(){this.$implicit=null,this.ngIf=null}}function Mc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}class vo{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let ea=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),si=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new vo(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(ea,9))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),Va=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,o]=t.split("."),c=-1===i.indexOf("-")?void 0:d.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,c):this._renderer.removeStyle(this._ngEl.nativeElement,i,c)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.aQg),d.Y36(d.Qsj))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),ns=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Gn="browser";function Ih(n){return"server"===n}let Ha=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new pr((0,d.LFG)(ce),window)}),n})();class pr{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function wo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const c=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ia(this.window.history)||ia(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ia(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Qs extends class sa extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function fe(n){H||(H=n)}(new Qs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Li(){return Eo=Eo||document.querySelector("base"),Eo?Eo.getAttribute("href"):null}();return null==t?null:function oa(n){vs=vs||document.createElement("a"),vs.setAttribute("href",n);const e=vs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Sc(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,o]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}(document.cookie,e)}}let vs,Eo=null;const lt=new d.OlP("TRANSITION_ID"),kl=[{provide:d.ip1,useFactory:function Nc(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let o=0;o<i.length;o++)r.remove(i[o])})}},deps:[lt,ce,d.zs3],multi:!0}];let ja=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const $a=new d.OlP("EventManagerPlugins");let bs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let o=0;o<i.length;o++){const c=i[o];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG($a),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Ol{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let aa=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n extends aa{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(o=>{const c=this._doc.createElement("style");c.textContent=o,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Kt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Kt))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Kt(n){N().remove(n)}const Co={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nl=/%COMP%/g;function Do(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Do(n,i,t):(i=i.replace(Nl,n),t.push(i))}return t}function Ou(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let To=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Yn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Is(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case d.ifc.ShadowDom:return new Nu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Do(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(bs),d.LFG(ke),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Yn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Co[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Cs(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Cs(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const o=Co[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Co[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,i&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ou(r)):this.eventManager.addEventListener(e,t,Ou(r))}}function Cs(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Is extends Yn{constructor(e,t,r,i){super(e),this.component=r;const o=Do(i+"-"+r.id,r.styles,[]);t.addStyles(o),this.contentAttr=function Io(n){return"_ngcontent-%COMP%".replace(Nl,n)}(i+"-"+r.id),this.hostAttr=function za(n){return"_nghost-%COMP%".replace(Nl,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Nu extends Yn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const o=Do(i.id,i.styles,[]);for(let c=0;c<o.length;c++){const h=document.createElement("style");h.textContent=o[c],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Fl=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ll=["alt","control","meta","shift"],Vl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xs={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Pu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let So=(()=>{class n extends Ol{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const o=n.parseEventName(r),c=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,o.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=n._normalizeKey(r.pop());let c="";if(Ll.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),c+=p+".")}),c+=o,0!=r.length||0===o.length)return null;const h={};return h.domEventName=i,h.fullKey=c,h}static getEventFullKey(t){let r="",i=function Dh(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Xs.hasOwnProperty(e)&&(e=Xs[e]))}return Vl[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ll.forEach(o=>{o!=i&&(0,Pu[o])(t)&&(r+=o+".")}),r+=i,r}static eventCallback(t,r,i){return o=>{n.getEventFullKey(o)===t&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ul=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:Gn},{provide:d.g9A,useValue:function Fu(){Qs.makeCurrent()},multi:!0},{provide:ce,useFactory:function Lu(){return(0,d.RDi)(document),document},deps:[]}]),Wa=new d.OlP(""),Tr=[{provide:d.rWj,useClass:class ku{addToWindow(e){d.dqk.getAngularTestability=(r,i=!0)=>{const o=e.findTestabilityInTree(r,i);if(null==o)throw new Error("Could not find testability for element.");return o},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const i=d.dqk.getAllAngularTestabilities();let o=i.length,c=!1;const h=function(p){c=c||p,o--,0==o&&r(c)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:d.lri,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b,d.eoX,d.rWj]}],Qr=[{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function la(){return new d.qLn},deps:[]},{provide:$a,useClass:Fl,multi:!0,deps:[ce,d.R0b,d.Lbi]},{provide:$a,useClass:So,multi:!0,deps:[ce]},{provide:To,useClass:To,deps:[bs,ke,d.AFp]},{provide:d.FYo,useExisting:To},{provide:aa,useExisting:ke},{provide:ke,useClass:ke,deps:[ce]},{provide:bs,useClass:bs,deps:[$a,d.R0b]},{provide:class gr{},useClass:ja,deps:[]},[]];let Pn=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:lt,useExisting:d.AFp},kl]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Wa,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[...Qr,...Tr],imports:[ns,d.hGG]}),n})(),Hl=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Th(){return new Hl((0,d.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let xo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):d.LFG(Gu),r},providedIn:"root"}),n})(),Gu=(()=>{class n extends xo{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case d.q3G.NONE:return r;case d.q3G.HTML:return(0,d.qzn)(r,"HTML")?(0,d.z3N)(r):(0,d.EiD)(this._doc,String(r)).toString();case d.q3G.STYLE:return(0,d.qzn)(r,"Style")?(0,d.z3N)(r):r;case d.q3G.SCRIPT:if((0,d.qzn)(r,"Script"))return(0,d.z3N)(r);throw new Error("unsafe value used in a script context");case d.q3G.URL:return(0,d.qzn)(r,"URL")?(0,d.z3N)(r):(0,d.mCW)(String(r));case d.q3G.RESOURCE_URL:if((0,d.qzn)(r,"ResourceURL"))return(0,d.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,d.JVY)(t)}bypassSecurityTrustStyle(t){return(0,d.L6k)(t)}bypassSecurityTrustScript(t){return(0,d.eBb)(t)}bypassSecurityTrustUrl(t){return(0,d.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,d.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Wl(n){return new Gu(n.get(ce))}(d.LFG(d.zs3)),r},providedIn:"root"}),n})();var En=F(8996),Cn=F(3269);function Je(...n){const e=(0,Cn.yG)(n);return(0,En.D)(n,e)}var Qt=F(7579);class Sr extends Qt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Zn=F(9751);const{isArray:Hc}=Array,{getPrototypeOf:ql,prototype:Qa,keys:jc}=Object;function ca(n){if(1===n.length){const e=n[0];if(Hc(e))return{args:e,keys:null};if(function Xa(n){return n&&"object"==typeof n&&ql(n)===Qa}(e)){const t=jc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var is=F(4671),ft=F(4004);const{isArray:Rh}=Array;function no(n){return(0,ft.U)(e=>function to(n,e){return Rh(e)?n(...e):n(e)}(n,e))}function ua(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Wn=F(5403),da=F(9672);function Vi(...n){const e=(0,Cn.yG)(n),t=(0,Cn.jO)(n),{args:r,keys:i}=ca(n);if(0===r.length)return(0,En.D)([],e);const o=new Zn.y(function Wu(n,e,t=is.y){return r=>{Kl(e,()=>{const{length:i}=n,o=new Array(i);let c=i,h=i;for(let p=0;p<i;p++)Kl(e,()=>{const y=(0,En.D)(n[p],e);let E=!1;y.subscribe((0,Wn.x)(r,T=>{o[p]=T,E||(E=!0,h--),h||r.next(t(o.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>ua(i,c):is.y));return t?o.pipe(no(t)):o}function Kl(n,e,t){n?(0,da.f)(t,n,e):e()}var ha=F(8189);function Ja(...n){return function Yl(){return(0,ha.J)(1)}()((0,En.D)(n,(0,Cn.yG)(n)))}var Bi=F(8421);function Ts(n){return new Zn.y(e=>{(0,Bi.Xf)(n()).subscribe(e)})}var Fr=F(9635),Lr=F(576);function Ss(n,e){const t=(0,Lr.m)(n)?n:()=>n,r=i=>i.error(t());return new Zn.y(e?i=>e.schedule(r,0,i):r)}const _i=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ro=F(515),Ar=F(727),Nt=F(4482);function qu(){return(0,Nt.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Wn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kh extends Zn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Nt.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ar.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Wn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ar.w0.EMPTY)}return e}refCount(){return qu()(this)}}function ir(n,e){return(0,Nt.e)((t,r)=>{let i=null,o=0,c=!1;const h=()=>c&&!i&&r.complete();t.subscribe((0,Wn.x)(r,p=>{i?.unsubscribe();let y=0;const E=o++;(0,Bi.Xf)(n(p,E)).subscribe(i=(0,Wn.x)(r,T=>r.next(e?e(p,T,E,y++):T),()=>{i=null,h()}))},()=>{c=!0,h()}))})}function Ui(n){return n<=0?()=>ro.E:(0,Nt.e)((e,t)=>{let r=0;e.subscribe((0,Wn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function As(...n){const e=(0,Cn.yG)(n);return(0,Nt.e)((t,r)=>{(e?Ja(n,t,e):Ja(n,t)).subscribe(r)})}function Mr(n,e){return(0,Nt.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,o=>n.call(e,o,i++)&&r.next(o)))})}var xr=F(5577);function ko(n){return(0,Nt.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Oh(n=l_){return(0,Nt.e)((e,t)=>{let r=!1;e.subscribe((0,Wn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function l_(){return new _i}function In(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mr((i,o)=>n(i,o,r)):is.y,Ui(1),t?ko(e):Oh(()=>new _i))}function Ms(n,e){return(0,Lr.m)(e)?(0,xr.z)(n,e,1):(0,xr.z)(n,1)}var An=F(8505);function Oo(n){return(0,Nt.e)((e,t)=>{let o,r=null,i=!1;r=e.subscribe((0,Wn.x)(t,void 0,void 0,c=>{o=(0,Bi.Xf)(n(c,Oo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Zl(n,e,t,r,i){return(o,c)=>{let h=t,p=e,y=0;o.subscribe((0,Wn.x)(c,E=>{const T=y++;p=h?n(p,E,T):(h=!0,E),r&&c.next(p)},i&&(()=>{h&&c.next(p),c.complete()})))}}function _r(n,e){return(0,Nt.e)(Zl(n,e,arguments.length>=2,!0))}function ai(n){return n<=0?()=>ro.E:(0,Nt.e)((e,t)=>{let r=[];e.subscribe((0,Wn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function $c(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Mr((i,o)=>n(i,o,r)):is.y,ai(1),t?ko(e):Oh(()=>new _i))}function No(n){return(0,Nt.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const $t="primary";class Ku{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function el(n){return new Ku(n)}function Po(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let o=0;o<r.length;o++){const c=r[o],h=n[o];if(c.startsWith(":"))i[c.substring(1)]=h;else if(c!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Un(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!tl(n[i],e[i]))return!1;return!0}function tl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}return n===e}function Fo(n){return Array.prototype.concat.apply([],n)}function nl(n){return n.length>0?n[n.length-1]:null}function sr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Hi(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,En.D)(Promise.resolve(n)):Je(n)}const rl={exact:function Ph(n,e,t){if(!vi(n.segments,e.segments)||!ga(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ph(n.children[r],e.children[r],t))return!1;return!0},subset:Rs},Nh={exact:function sl(n,e){return Un(n,e)},subset:function xs(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>tl(n[t],e[t]))},ignored:()=>!0};function il(n,e,t){return rl[t.paths](n.root,e.root,t.matrixParams)&&Nh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Rs(n,e,t){return pa(n,e,e.segments,t)}function pa(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!vi(i,t)||e.hasChildren()||!ga(i,t,r))}if(n.segments.length===t.length){if(!vi(n.segments,t)||!ga(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Rs(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!!(vi(n.segments,i)&&ga(n.segments,i,r)&&n.children[$t])&&pa(n.children[$t],e,o,r)}}function ga(n,e,t){return e.every((r,i)=>Nh[t](n[i].parameters,r.parameters))}class ks{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=el(this.queryParams)),this._queryParamMap}toString(){return Jl.serialize(this)}}class Pt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,sr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _a(this)}}class ma{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=el(this.parameters)),this._parameterMap}toString(){return qe(this)}}function vi(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Hn{}class Gc{parse(e){const t=new ji(e);return new ks(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${D(e.root,!0)}`,r=function Lt(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${k(t)}=${k(i)}`).join("&"):`${k(t)}=${k(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function U(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Jl=new Gc;function _a(n){return n.segments.map(e=>qe(e)).join("/")}function D(n,e){if(!n.hasChildren())return _a(n);if(e){const t=n.children[$t]?D(n.children[$t],!1):"",r=[];return sr(n.children,(i,o)=>{o!==$t&&r.push(`${o}:${D(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Fh(n,e){let t=[];return sr(n.children,(r,i)=>{i===$t&&(t=t.concat(e(r,i)))}),sr(n.children,(r,i)=>{i!==$t&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===$t?[D(n.children[$t],!1)]:[`${i}:${D(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${_a(n)}/${t[0]}`:`${_a(n)}/(${t.join("//")})`}}function S(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function k(n){return S(n).replace(/%3B/gi,";")}function ee(n){return S(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function he(n){return decodeURIComponent(n)}function Le(n){return he(n.replace(/\+/g,"%20"))}function qe(n){return`${ee(n.path)}${function It(n){return Object.keys(n).map(e=>`;${ee(e)}=${ee(n[e])}`).join("")}(n.parameters)}`}const Ft=/^[^\/()?;=#]+/;function vt(n){const e=n.match(Ft);return e?e[0]:""}const yr=/^[^=?&#]+/,ol=/^[^&#]+/;class ji{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pt([],{}):new Pt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new Pt(e,t)),r}parseSegment(){const e=vt(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new d.vHH(4009,!1);return this.capture(e),new ma(he(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vt(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=vt(this.remaining);i&&(r=i,this.capture(r))}e[he(t)]=he(r)}parseQueryParam(e){const t=function Xr(n){const e=n.match(yr);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function ss(n){const e=n.match(ol);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Le(t),o=Le(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(o)}else e[i]=o}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vt(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new d.vHH(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=$t);const c=this.parseChildren();t[o]=1===Object.keys(c).length?c[$t]:new Pt([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new d.vHH(4011,!1)}}function al(n){return n.segments.length>0?new Pt([],{[$t]:n}):n}function ll(n){const e={};for(const r of Object.keys(n.children)){const o=ll(n.children[r]);(o.segments.length>0||o.hasChildren())&&(e[r]=o)}return function ya(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new Pt(n.segments.concat(e.segments),e.children)}return n}(new Pt(n.segments,e))}function li(n){return n instanceof ks}function Yu(n,e,t,r,i){if(0===t.length)return cl(e.root,e.root,e.root,r,i);const o=function d_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vh(!0,0,n);let e=0,t=!1;const r=n.reduce((i,o,c)=>{if("object"==typeof o&&null!=o){if(o.outlets){const h={};return sr(o.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===c?(o.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,o]},[]);return new Vh(t,e,r)}(t);return o.toRoot()?cl(e.root,e.root,new Pt([],{}),r,i):function c(p){const y=function Pp(n,e,t,r){if(n.isAbsolute)return new va(e.root,!0,0);if(-1===r)return new va(t,t===e.root,0);return function ul(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new d.vHH(4005,!1);i=r.segments.length}return new va(r,!1,i-o)}(t,r+(Vo(n.commands[0])?0:1),n.numberOfDoubleDots)}(o,e,n.snapshot?._urlSegment,p),E=y.processChildren?qc(y.segmentGroup,y.index,o.commands):ba(y.segmentGroup,y.index,o.commands);return cl(e.root,y.segmentGroup,E,r,i)}(n.snapshot?._lastPathIndex)}function Vo(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Wc(n){return"object"==typeof n&&null!=n&&n.outlets}function cl(n,e,t,r,i){let c,o={};r&&sr(r,(p,y)=>{o[y]=Array.isArray(p)?p.map(E=>`${E}`):`${p}`}),c=n===e?t:u_(n,e,t);const h=al(ll(c));return new ks(h,o,i)}function u_(n,e,t){const r={};return sr(n.children,(i,o)=>{r[o]=i===e?t:u_(i,e,t)}),new Pt(n.segments,r)}class Vh{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vo(r[0]))throw new d.vHH(4003,!1);const i=r.find(Wc);if(i&&i!==nl(r))throw new d.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class va{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ba(n,e,t){if(n||(n=new Pt([],{})),0===n.segments.length&&n.hasChildren())return qc(n,e,t);const r=function f_(n,e,t){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;const c=n.segments[i],h=t[r];if(Wc(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!Uh(p,y,c))return o;r+=2}else{if(!Uh(p,{},c))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const o=new Pt(n.segments.slice(0,r.pathIndex),{});return o.children[$t]=new Pt(n.segments.slice(r.pathIndex),n.children),qc(o,0,i)}return r.match&&0===i.length?new Pt(n.segments,{}):r.match&&!n.hasChildren()?Fp(n,e,t):r.match?qc(n,0,i):Fp(n,e,t)}function qc(n,e,t){if(0===t.length)return new Pt(n.segments,{});{const r=function Bh(n){return Wc(n[0])?n[0].outlets:{[$t]:n}}(t),i={};return sr(r,(o,c)=>{"string"==typeof o&&(o=[o]),null!==o&&(i[c]=ba(n.children[c],e,o))}),sr(n.children,(o,c)=>{void 0===r[c]&&(i[c]=o)}),new Pt(n.segments,i)}}function Fp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const o=t[i];if(Wc(o)){const p=Kc(o.outlets);return new Pt(r,p)}if(0===i&&Vo(t[0])){r.push(new ma(n.segments[e].path,Zu(t[0]))),i++;continue}const c=Wc(o)?o.outlets[$t]:`${o}`,h=i<t.length-1?t[i+1]:null;c&&h&&Vo(h)?(r.push(new ma(c,Zu(h))),i+=2):(r.push(new ma(c,{})),i++)}return new Pt(r,{})}function Kc(n){const e={};return sr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Fp(new Pt([],{}),0,t))}),e}function Zu(n){const e={};return sr(n,(t,r)=>e[r]=`${t}`),e}function Uh(n,e,t){return n==t.path&&Un(e,t.parameters)}class so{constructor(e,t){this.id=e,this.url=t}}class Qu extends so{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ci extends so{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xu extends so{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ju extends so{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class p_ extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Lp extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class g_ extends so{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ns extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ec extends so{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vp{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Bp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class m_{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class __{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class y_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=C(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=C(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=x(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return x(e,this._root).map(t=>t.value)}}function C(n,e){if(n===e.value)return e;for(const t of e.children){const r=C(n,t);if(r)return r}return null}function x(n,e){if(n===e.value)return[e];for(const t of e.children){const r=x(n,t);if(r.length)return r.unshift(e),r}return[]}class P{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function se(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Re extends _{constructor(e,t){super(e),this.snapshot=t,Hh(this,e)}toString(){return this.snapshot.toString()}}function st(n,e){const t=function ht(n,e){const c=new os([],{},{},"",{},$t,e,null,n.root,-1,{});return new ed("",new P(c,[]))}(n,e),r=new Sr([new ma("",{})]),i=new Sr({}),o=new Sr({}),c=new Sr({}),h=new Sr(""),p=new Mt(r,i,c,h,o,$t,e,t.root);return p.snapshot=t.root,new Re(new P(p,[]),t)}class Mt{constructor(e,t,r,i,o,c,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>el(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>el(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Fn(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],o=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Ps(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class os{constructor(e,t,r,i,o,c,h,p,y,E,T,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=c,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=E,this._correctedLastPathIndex=R??E,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=el(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=el(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ed extends _{constructor(e,t){super(t),this.url=e,Hh(this,t)}toString(){return jh(this._root)}}function Hh(n,e){e.value._routerState=n,e.children.forEach(t=>Hh(n,t))}function jh(n){const e=n.children.length>0?` { ${n.children.map(jh).join(", ")} } `:"";return`${n.value}${e}`}function tc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Un(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Un(e.params,t.params)||n.params.next(t.params),function Ql(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Un(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Un(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function nc(n,e){const t=Un(n.params,e.params)&&function yi(n,e){return vi(n,e)&&n.every((t,r)=>Un(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||nc(n.parent,e.parent))}function Zc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function b_(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Zc(n,r,i);return Zc(n,r)})}(n,e,t);return new P(r,i)}{if(n.shouldAttach(e.value)){const o=n.retrieve(e.value);if(null!==o){const c=o.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(h=>Zc(n,h)),c}}const r=function td(n){return new Mt(new Sr(n.url),new Sr(n.params),new Sr(n.queryParams),new Sr(n.fragment),new Sr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(o=>Zc(n,o));return new P(r,i)}}const nd="ngNavigationCancelingError";function Up(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=li(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rd(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function rd(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[nd]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Hp(n){return w_(n)&&li(n.url)}function w_(n){return n&&n[nd]}class jp{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new id,this.attachRef=null}}class id{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jp,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}const sd=!1;let E_=(()=>{class n{constructor(t,r,i,o,c){this.parentContexts=t,this.location=r,this.changeDetector=o,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.attachEvents=new d.vpe,this.detachEvents=new d.vpe,this.name=i||$t,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new d.vHH(4012,sd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new d.vHH(4012,sd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new d.vHH(4012,sd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new d.vHH(4013,sd);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new Rr(t,h,i.injector);if(r&&function jT(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(c);this.activated=i.createComponent(y,i.length,p)}else this.activated=i.createComponent(c,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(id),d.Y36(d.s_b),d.$8M("name"),d.Y36(d.sBO),d.Y36(d.lqb))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Rr{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Mt?this.route:e===id?this.childContexts:this.parent.get(e,t)}}let Aw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[E_],encapsulation:2}),n})();function $p(n,e){return n.providers&&!n._injector&&(n._injector=(0,d.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Qc(n){const e=n.children&&n.children.map(Qc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=Aw),t}function as(n){return n.outlet||$t}function I_(n,e){const t=n.filter(r=>as(r)===e);return t.push(...n.filter(r=>as(r)!==e)),t}function D_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class GT{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),tc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=se(t);e.children.forEach(o=>{const c=o.value.outlet;this.deactivateRoutes(o,i[c],r),delete i[c]}),sr(i,(o,c)=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(i===o)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=se(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);if(r&&r.outlet){const c=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=se(e);for(const c of Object.keys(o))this.deactivateRouteAndItsChildren(o[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=se(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new v_(o.value.snapshot))}),e.children.length&&this.forwardEvent(new __(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,o=t?t.value:null;if(tc(i),i===o)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(h.contexts),c.attachRef=h.componentRef,c.route=h.route.value,c.outlet&&c.outlet.attach(h.componentRef,h.route.value),tc(h.route.value),this.activateChildRoutes(e,null,c.children)}else{const h=D_(i.snapshot),p=h?.get(d._Vd)??null;c.attachRef=null,c.route=i,c.resolver=p,c.injector=h,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class T_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $h{constructor(e,t){this.component=e,this.route=t}}function S_(n,e,t){const r=n._root;return Xc(r,e?e._root:null,t,[r.value])}function zp(n,e,t){return(D_(e)??t).get(n)}function Xc(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=se(e);return n.children.forEach(c=>{(function xw(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=n.value,c=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(c&&o.routeConfig===c.routeConfig){const p=function Rw(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!vi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!vi(n.url,e.url)||!Un(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nc(n,e)||!Un(n.queryParams,e.queryParams);default:return!nc(n,e)}}(c,o,o.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new T_(r)):(o.data=c.data,o._resolvedData=c._resolvedData),Xc(n,e,o.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new $h(h.outlet.component,c))}else c&&Bo(e,h,i),i.canActivateChecks.push(new T_(r)),Xc(n,null,o.component?h?h.children:null:t,r,i)})(c,o[c.value.outlet],t,r.concat([c.value]),i),delete o[c.value.outlet]}),sr(o,(c,h)=>Bo(c,t.getContext(h),i)),i}function Bo(n,e,t){const r=se(n),i=n.value;sr(r,(o,c)=>{Bo(o,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new $h(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function zh(n){return"function"==typeof n}const qp=Symbol("INITIAL_VALUE");function od(){return ir(n=>Vi(n.map(e=>e.pipe(Ui(1),As(qp)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===qp)return qp;if(!1===t||t instanceof ks)return t}return!0}),Mr(e=>e!==qp),Ui(1)))}function Nw(n){return(0,Fr.z)((0,An.b)(e=>{if(li(e))throw Up(0,e)}),(0,ft.U)(e=>!0===e))}const Fw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lw(n,e,t,r,i){const o=eu(n,e,t);return o.matched?function Pw(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?Je(i.map(c=>{const h=n.get(c),p=function Jc(n){return n&&zh(n.canMatch)}(h)?h.canMatch(e,t):h(e,t);return Hi(p)})).pipe(od(),Nw()):Je(!0)}(r=$p(e,r),e,t).pipe((0,ft.U)(c=>!0===c?o:{...Fw})):Je(o)}function eu(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Fw}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Po)(t,n,e);if(!i)return{...Fw};const o={};sr(i.posParams,(h,p)=>{o[p]=h.path});const c=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Kp(n,e,t,r,i="corrected"){if(t.length>0&&function JT(n,e,t){return t.some(r=>Wh(n,e,r)&&as(r)!==$t)}(n,t,r)){const c=new Pt(e,function Gh(n,e,t,r){const i={};i[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const o of t)if(""===o.path&&as(o)!==$t){const c=new Pt([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[as(o)]=c}return i}(n,e,r,new Pt(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function pP(n,e,t){return t.some(r=>Wh(n,e,r))}(n,t,r)){const c=new Pt(n.segments,function ld(n,e,t,r,i,o){const c={};for(const h of r)if(Wh(n,t,h)&&!i[as(h)]){const p=new Pt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===o?n.segments.length:e.length,c[as(h)]=p}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const o=new Pt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Wh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Vw(n,e,t,r){return!!(as(n)===r||r!==$t&&Wh(e,t,n))&&("**"===n.path||eu(e,n,t).matched)}function Bw(n,e,t){return 0===e.length&&!n.children[t]}const Yp=!1;class qh{constructor(e){this.segmentGroup=e||null}}class k_{constructor(e){this.urlTree=e}}function tu(n){return Ss(new qh(n))}function Uw(n){return Ss(new k_(n))}class mP{constructor(e,t,r,i,o){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0}apply(){const e=Kp(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,$t).pipe((0,ft.U)(o=>this.createUrlTree(ll(o),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oo(o=>{if(o instanceof k_)return this.allowRedirects=!1,this.match(o.urlTree);throw o instanceof qh?this.noMatchError(o):o}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,$t).pipe((0,ft.U)(i=>this.createUrlTree(ll(i),e.queryParams,e.fragment))).pipe(Oo(i=>{throw i instanceof qh?this.noMatchError(i):i}))}noMatchError(e){return new d.vHH(4002,Yp)}createUrlTree(e,t,r){const i=al(e);return new ks(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(o=>new Pt([],o))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return(0,En.D)(i).pipe(Ms(o=>{const c=r.children[o],h=I_(t,o);return this.expandSegmentGroup(e,h,c,o).pipe((0,ft.U)(p=>({segment:p,outlet:o})))}),_r((o,c)=>(o[c.outlet]=c.segment,o),{}),$c())}expandSegment(e,t,r,i,o,c){return(0,En.D)(r).pipe(Ms(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,o,c).pipe(Oo(y=>{if(y instanceof qh)return Je(null);throw y}))),In(h=>!!h),Oo((h,p)=>{if(h instanceof _i||"EmptyError"===h.name)return Bw(t,i,o)?Je(new Pt([],{})):tu(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,o,c,h){return Vw(i,t,o,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,o,c):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c):tu(t):tu(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const o=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Uw(o):this.lineralizeSegments(r,o).pipe((0,xr.z)(c=>{const h=new Pt(c,{});return this.expandSegment(e,h,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,o,c){const{matched:h,consumedSegments:p,remainingSegments:y,positionalParamSegments:E}=eu(t,i,o);if(!h)return tu(t);const T=this.applyRedirectCommands(p,i.redirectTo,E);return i.redirectTo.startsWith("/")?Uw(T):this.lineralizeSegments(i,T).pipe((0,xr.z)(R=>this.expandSegment(e,t,r,R.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,o){return"**"===r.path?(e=$p(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Pt(i,{})))):Je(new Pt(i,{}))):Lw(t,r,i,e).pipe(ir(({matched:c,consumedSegments:h,remainingSegments:p})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,xr.z)(E=>{const T=E.injector??e,R=E.routes,{segmentGroup:L,slicedSegments:B}=Kp(t,h,p,R),J=new Pt(L.segments,L.children);if(0===B.length&&J.hasChildren())return this.expandChildren(T,R,J).pipe((0,ft.U)(Tt=>new Pt(h,Tt)));if(0===R.length&&0===B.length)return Je(new Pt(h,{}));const we=as(r)===o;return this.expandSegment(T,J,R,B,we?$t:o,!0).pipe((0,ft.U)(ut=>new Pt(h.concat(ut.segments),ut.children)))})):tu(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function Ow(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?Je(!0):Je(i.map(c=>{const h=n.get(c),p=function Gp(n){return n&&zh(n.canLoad)}(h)?h.canLoad(e,t):h(e,t);return Hi(p)})).pipe(od(),Nw())}(e,t,r).pipe((0,xr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,An.b)(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):function O_(n){return Ss(rd(Yp,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Je(r);if(i.numberOfChildren>1||!i.children[$t])return Ss(new d.vHH(4e3,Yp));i=i.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const o=this.createSegmentGroup(e,t.root,r,i);return new ks(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return sr(e,(i,o)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[o]=t[h]}else r[o]=i}),r}createSegmentGroup(e,t,r,i){const o=this.createSegments(e,t.segments,r,i);let c={};return sr(t.children,(h,p)=>{c[p]=this.createSegmentGroup(e,h,r,i)}),new Pt(o,c)}createSegments(e,t,r,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new d.vHH(4001,Yp);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class _P{}class bP{constructor(e,t,r,i,o,c,h,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=o,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=h,this.urlSerializer=p}recognize(){const e=Kp(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,$t).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new os([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new P(r,t),o=new ed(this.url,i);return this.inheritParamsAndData(o._root),o}))}inheritParamsAndData(e){const t=e.value,r=Fn(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,En.D)(Object.keys(r.children)).pipe(Ms(i=>{const o=r.children[i],c=I_(t,i);return this.processSegmentGroup(e,c,o,i)}),_r((i,o)=>i&&o?(i.push(...o),i):null),function fa(n,e=!1){return(0,Nt.e)((t,r)=>{let i=0;t.subscribe((0,Wn.x)(r,o=>{const c=n(o,i++);(c||e)&&r.next(o),!c&&r.complete()}))})}(i=>null!==i),ko(null),$c(),(0,ft.U)(i=>{if(null===i)return null;const o=L_(i);return function tS(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}))}processSegment(e,t,r,i,o){return(0,En.D)(t).pipe(Ms(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,o)),In(c=>!!c),Oo(c=>{if(c instanceof _i)return Bw(r,i,o)?Je([]):Je(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,o){if(t.redirectTo||!Vw(t,r,i,o))return Je(null);let c;if("**"===t.path){const h=i.length>0?nl(i).parameters:{},p=Zp(r)+i.length;c=Je({snapshot:new os(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qp(t),as(t),t.component??t._loadedComponent??null,t,V_(r),p,cd(t),p),consumedSegments:[],remainingSegments:[]})}else c=Lw(r,t,i,e).pipe((0,ft.U)(({matched:h,consumedSegments:p,remainingSegments:y,parameters:E})=>{if(!h)return null;const T=Zp(r)+p.length;return{snapshot:new os(p,E,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Qp(t),as(t),t.component??t._loadedComponent??null,t,V_(r),T,cd(t),T),consumedSegments:p,remainingSegments:y}}));return c.pipe(ir(h=>{if(null===h)return Je(null);const{snapshot:p,consumedSegments:y,remainingSegments:E}=h;e=t._injector??e;const T=t._loadedInjector??e,R=function Hw(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:L,slicedSegments:B}=Kp(r,y,E,R.filter(we=>void 0===we.redirectTo),this.relativeLinkResolution);if(0===B.length&&L.hasChildren())return this.processChildren(T,R,L).pipe((0,ft.U)(we=>null===we?null:[new P(p,we)]));if(0===R.length&&0===B.length)return Je([new P(p,[])]);const J=as(t)===o;return this.processSegment(T,R,L,B,J?$t:o).pipe((0,ft.U)(we=>null===we?null:[new P(p,we)]))}))}}function F_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function L_(n){const e=[],t=new Set;for(const r of n){if(!F_(r)){e.push(r);continue}const i=e.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=L_(r.children);e.push(new P(r.value,i))}return e.filter(r=>!t.has(r))}function V_(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zp(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Qp(n){return n.data||{}}function cd(n){return n.resolve||{}}const B_=Symbol("RouteTitle");function zw(n){return"string"==typeof n.title||null===n.title}function Kh(n){return ir(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,ft.U)(()=>e)):Je(e)})}class uS extends class cS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const H_=new d.OlP("ROUTES");let j_=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Hi(t.loadComponent()).pipe((0,An.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),No(()=>{this.componentLoaders.delete(t)})),i=new kh(r,()=>new Qt.x).pipe(qu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,y,E=!1;Array.isArray(h)?y=h:(p=h.create(t).injector,y=Fo(p.get(H_,[],d.XFs.Self|d.XFs.Optional)));return{routes:y.map(Qc),injector:p}}),No(()=>{this.childrenLoaders.delete(r)})),c=new kh(o,()=>new Qt.x).pipe(qu());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return Hi(t()).pipe((0,xr.z)(r=>r instanceof d.YKP||Array.isArray(r)?Je(r):(0,En.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3),d.LFG(d.Sil))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class $_{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function z_(n){throw n}function bi(n,e,t){return e.parse("/")}const Zh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ui=(()=>{class n{constructor(t,r,i,o,c,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=o,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Qt.x,this.errorHandler=z_,this.malformedUriErrorHandler=bi,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new $_,this.routeReuseStrategy=new uS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(j_),this.configLoader.onLoadEndListener=R=>this.triggerEvent(new Bp(R)),this.configLoader.onLoadStartListener=R=>this.triggerEvent(new Vp(R)),this.ngModule=c.get(d.h0i),this.console=c.get(d.c2e);const T=c.get(d.R0b);this.isNgZoneEnabled=T instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function zc(){return new ks(new Pt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=st(this.currentUrlTree,this.rootComponentType),this.transitions=new Sr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Mr(i=>0!==i.id),(0,ft.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ir(i=>{let o=!1,c=!1;return Je(i).pipe((0,An.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ir(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return W_(h.source)&&(this.browserUrlTree=h.extractedUrl),Je(h).pipe(ir(T=>{const R=this.transitions.getValue();return r.next(new Qu(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),R!==this.transitions.getValue()?ro.E:Promise.resolve(T)}),function N_(n,e,t,r){return ir(i=>function gP(n,e,t,r,i){return new mP(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ft.U)(o=>({...i,urlAfterRedirects:o}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,An.b)(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function rS(n,e,t,r,i,o){return(0,xr.z)(c=>function vP(n,e,t,r,i,o,c="emptyOnly",h="legacy"){return new bP(n,e,t,r,i,c,h,o).recognize().pipe(ir(p=>null===p?function yP(n){return new Zn.y(e=>e.error(n))}(new _P):Je(p)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,o).pipe((0,ft.U)(h=>({...c,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,An.b)(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(L,T)}this.browserUrlTree=T.urlAfterRedirects}const R=new p_(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(R)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:L,source:B,restoredState:J,extras:we}=h,nt=new Qu(R,this.serializeUrl(L),B,J);r.next(nt);const ut=st(L,this.rootComponentType).snapshot;return Je(i={...h,targetSnapshot:ut,urlAfterRedirects:L,extras:{...we,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),ro.E}),(0,An.b)(h=>{const p=new Lp(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ft.U)(h=>i={...h,guards:S_(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function kw(n,e){return(0,xr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:c}}=t;return 0===c.length&&0===o.length?Je({...t,guardsResult:!0}):function ad(n,e,t,r){return(0,En.D)(n).pipe((0,xr.z)(i=>function XT(n,e,t,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Je(o.map(h=>{const p=zp(h,e,i);return Hi(function Wp(n){return n&&zh(n.canDeactivate)}(p)?p.canDeactivate(n,e,t,r):p(n,e,t,r)).pipe(In())})).pipe(od()):Je(!0)}(i.component,i.route,t,e,r)),In(i=>!0!==i,!0))}(c,r,i,n).pipe((0,xr.z)(h=>h&&function A_(n){return"boolean"==typeof n}(h)?function KT(n,e,t,r){return(0,En.D)(e).pipe(Ms(i=>Ja(function ZT(n,e){return null!==n&&e&&e(new m_(n)),Je(!0)}(i.route.parent,r),function YT(n,e){return null!==n&&e&&e(new y_(n)),Je(!0)}(i.route,r),function R_(n,e,t){const r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(c=>function fP(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Ts(()=>Je(c.guards.map(p=>{const y=zp(p,c.node,t);return Hi(function M_(n){return n&&zh(n.canActivateChild)}(y)?y.canActivateChild(r,n):y(r,n)).pipe(In())})).pipe(od())));return Je(o).pipe(od())}(n,i.path,t),function QT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const i=r.map(o=>Ts(()=>{const c=zp(o,e,t);return Hi(function WT(n){return n&&zh(n.canActivate)}(c)?c.canActivate(e,n):c(e,n)).pipe(In())}));return Je(i).pipe(od())}(n,i.route,t))),In(i=>!0!==i,!0))}(r,o,n,e):Je(h)),(0,ft.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,An.b)(h=>{if(i.guardsResult=h.guardsResult,li(h.guardsResult))throw Up(0,h.guardsResult);const p=new g_(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Mr(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),Kh(h=>{if(h.guards.canActivateChecks.length)return Je(h).pipe((0,An.b)(p=>{const y=new Ns(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),ir(p=>{let y=!1;return Je(p).pipe(function iS(n,e){return(0,xr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Je(t);let o=0;return(0,En.D)(i).pipe(Ms(c=>function $w(n,e,t,r){const i=n.routeConfig,o=n._resolve;return void 0!==i?.title&&!zw(i)&&(o[B_]=i.title),function sS(n,e,t,r){const i=function oS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return Je({});const o={};return(0,En.D)(i).pipe((0,xr.z)(c=>function aS(n,e,t,r){const i=zp(n,e,r);return Hi(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe(In(),(0,An.b)(h=>{o[c]=h}))),ai(1),function io(n){return(0,ft.U)(()=>n)}(o),Oo(c=>c instanceof _i?ro.E:Ss(c)))}(o,n,e,r).pipe((0,ft.U)(c=>(n._resolvedData=c,n.data=Fn(n,t).resolve,i&&zw(i)&&(n.data[B_]=i.title),null)))}(c.route,r,n,e)),(0,An.b)(()=>o++),ai(1),(0,xr.z)(c=>o===i.length?Je(t):ro.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,An.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),(0,An.b)(p=>{const y=new ec(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),Kh(h=>{const p=y=>{const E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe((0,An.b)(T=>{y.component=T}),(0,ft.U)(()=>{})));for(const T of y.children)E.push(...p(T));return E};return Vi(p(h.targetSnapshot.root)).pipe(ko(),Ui(1))}),Kh(()=>this.afterPreactivation()),(0,ft.U)(h=>{const p=function Yc(n,e,t){const r=Zc(n,e._root,t?t._root:void 0);return new Re(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:p}}),(0,An.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new GT(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,An.b)({next(){o=!0},complete(){o=!0}}),No(()=>{o||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Oo(h=>{if(c=!0,w_(h)){Hp(h)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new Xu(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(p),Hp(h)){const y=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),E={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||W_(i.source)};this.scheduleNavigation(y,"imperative",null,E,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Ju(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return ro.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},o=t.state?.navigationId?t.state:null;if(o){const h={...o};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,o,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Qc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:o,fragment:c,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,E=p?this.currentUrlTree.fragment:c;let T=null;switch(h){case"merge":T={...this.currentUrlTree.queryParams,...o};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=o||null}return null!==T&&(T=this.removeEmptyProps(T)),Yu(y,this.currentUrlTree,t,T,E??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=li(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function dS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new d.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Zh}:!1===r?{...G_}:r,li(t))return il(this.currentUrlTree,t,i);const o=this.parseUrl(t);return il(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const o=t[i];return null!=o&&(r[i]=o),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ci(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,o,c){if(this.disposed)return Promise.resolve(!1);let h,p,y;c?(h=c.resolve,p=c.reject,y=c.promise):y=new Promise((R,L)=>{h=R,p=L});const E=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:o.replaceUrl||o.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:E,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:o,resolve:h,reject:p,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(R=>Promise.reject(R))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),o={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",o):this.location.go(i,"",o)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const o=new Xu(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function W_(n){return"imperative"!==n}let Ww=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===$t);return r}getResolvedTitleForRoute(t){return t.data[B_]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:function(){return(0,d.f3M)(fS)},providedIn:"root"}),n})(),fS=(()=>{class n extends Ww{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Hl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class qw{}let Kw=(()=>{class n{constructor(t,r,i,o,c){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(Mr(t=>t instanceof ci),Ms(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,d.MMx)(o.providers,t,`Route: ${o.path}`));const c=o._injector??t,h=o._loadedInjector??c;o.loadChildren&&!o._loadedRoutes||o.loadComponent&&!o._loadedComponent?i.push(this.preloadConfig(c,o)):(o.children||o._loadedRoutes)&&i.push(this.processRoutes(h,o.children??o._loadedRoutes))}return(0,En.D)(i).pipe((0,ha.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const o=i.pipe((0,xr.z)(c=>null===c?Je(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,En.D)([o,c]).pipe((0,ha.J)())}return o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ui),d.LFG(d.Sil),d.LFG(d.lqb),d.LFG(qw),d.LFG(j_))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const nu=new d.OlP("");let dl=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ci&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof b&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new b(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Yw=new d.OlP("ROUTER_CONFIGURATION",{providedIn:"root",factory:()=>({})}),pS=new d.OlP("ROUTER_FORROOT_GUARD"),K_=new d.OlP(""),IP=[Ne,{provide:Hn,useClass:Gc},{provide:ui,useFactory:function _S(n,e,t,r,i,o,c,h={},p,y){const E=new ui(null,n,e,t,r,i,Fo(o));return p&&(E.urlHandlingStrategy=p),y&&(E.routeReuseStrategy=y),E.titleStrategy=c,function Qw(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(h,E),E},deps:[Hn,id,Ne,d.zs3,d.Sil,H_,Ww,Yw,[class $i{},new d.FiY],[class lS{},new d.FiY]]},id,{provide:Mt,useFactory:function Z_(n){return n.routerState.root},deps:[ui]},j_];function wa(){return new d.PXZ("Router",ui)}let Jp=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[IP,[],ud(t),{provide:pS,useFactory:mS,deps:[[ui,new d.FiY,new d.tp0]]},{provide:Yw,useValue:r||{}},r?.useHash?{provide:De,useClass:Ue}:{provide:De,useClass:et},{provide:nu,useFactory:()=>{const n=(0,d.f3M)(ui),e=(0,d.f3M)(Ha),t=(0,d.f3M)(Yw);return t.scrollOffset&&e.setOffset(t.scrollOffset),new dl(n,e,t)}},r?.preloadingStrategy?vS(r.preloadingStrategy):[],{provide:d.PXZ,multi:!0,useFactory:wa},r?.initialNavigation?DP(r):[],[{provide:X_,useFactory:Q_},{provide:d.tb,multi:!0,useExisting:X_}]]}}static forChild(t){return{ngModule:n,providers:[ud(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pS,8),d.LFG(ui,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function mS(n){return"guarded"}function ud(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:H_,multi:!0,useValue:n}]}function Q_(){const n=(0,d.f3M)(d.zs3);return e=>{const t=n.get(d.z2F);if(e!==t.components[0])return;const r=n.get(ui),i=n.get(eg);null===n.get(J_,null,d.XFs.Optional)&&r.initialNavigation(),n.get(K_,null,d.XFs.Optional)?.setUpPreloading(),n.get(nu,null,d.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const X_=new d.OlP("");function DP(n){return["disabled"===n.initialNavigation?[{provide:d.ip1,multi:!0,useFactory:()=>{const n=(0,d.f3M)(ui);return()=>{n.setUpLocationChangeListener()}}},{provide:J_,useValue:"disabled"}]:[],"enabledBlocking"===n.initialNavigation?[{provide:J_,useValue:"enabledBlocking"},{provide:d.ip1,multi:!0,deps:[d.zs3],useFactory:n=>{const e=n.get(K,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(i=>{const o=n.get(ui),c=n.get(eg);(function r(i){n.get(ui).events.pipe(Mr(c=>c instanceof ci||c instanceof Xu||c instanceof Ju),(0,ft.U)(c=>c instanceof ci||c instanceof Xu&&(0===c.code||1===c.code)&&null),Mr(c=>null!==c),Ui(1)).subscribe(()=>{i()})})(()=>{i(!0),t=!0}),o.afterPreactivation=()=>(i(!0),t||c.closed?Je(void 0):c),o.initialNavigation()}))}}]:[]]}const eg=new d.OlP("",{factory:()=>new Qt.x}),J_=new d.OlP("");function vS(n){return[Kw,{provide:K_,useExisting:Kw},{provide:qw,useExisting:n}]}class Jw{constructor(){this.players=[],this.stack=[],this.playedCards=[],this.currentPlayer=0,this.pickCardAnimation=!1,this.currentCard="";for(let e=1;e<14;e++)this.stack.push("ace_"+e),this.stack.push("hearts_"+e),this.stack.push("clubs_"+e),this.stack.push("diamonds_"+e);!function bS(n){let t,e=n.length;for(;0!=e;)t=Math.floor(Math.random()*e),e--,[n[e],n[t]]=[n[t],n[e]]}(this.stack)}toJson(){return{players:this.players,stack:this.stack,playedCards:this.playedCards,currentPlayer:this.currentPlayer,pickCardAnimation:this.pickCardAnimation,currentCard:this.currentCard}}}let ty;try{ty=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ty=!1}let ru,zi=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function kc(n){return n===Gn}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ty)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tg=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function t0(){if(ru)return ru;if("object"!=typeof document||!document)return ru=new Set(tg),ru;let n=document.createElement("input");return ru=new Set(tg.filter(e=>(n.setAttribute("type",e),n.type===e))),ru}let Qh,rc,s0;function Xh(n){return function n0(){if(null==Qh&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Qh=!0}))}finally{Qh=Qh||!1}return Qh}()?n:!!n.capture}function r0(){if(null==rc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return rc=!1,rc;if("scrollBehavior"in document.documentElement.style)rc=!0;else{const n=Element.prototype.scrollTo;rc=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return rc}function rg(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function ic(n){return n.composedPath?n.composedPath()[0]:n.target}function ig(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ZS(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function QS(n){return Mr((e,t)=>n<=t)}function XS(n,e=is.y){return n=n??oc,(0,Nt.e)((t,r)=>{let i,o=!0;t.subscribe((0,Wn.x)(r,c=>{const h=e(c);(o||!n(i,h))&&(o=!1,i=h,r.next(c))}))})}function oc(n,e){return n===e}var dy=F(5032);function fd(n){return(0,Nt.e)((e,t)=>{(0,Bi.Xf)(n).subscribe((0,Wn.x)(t,()=>t.complete(),dy.Z)),!t.closed&&e.subscribe(t)})}function fl(n){return null!=n&&"false"!=`${n}`}function pd(n){return Array.isArray(n)?n:[n]}function Vr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function wi(n){return n instanceof d.SBq?n.nativeElement:n}var og=F(4986);function ag(n,e=og.z){return(0,Nt.e)((t,r)=>{let i=null,o=null,c=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=o;o=null,r.next(y)}};function p(){const y=c+n,E=e.now();if(E<y)return i=this.schedule(void 0,y-E),void r.add(i);h()}t.subscribe((0,Wn.x)(r,y=>{o=y,c=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{o=i=null}))})}let E0=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C0=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=wi(t);return new Zn.y(i=>{const c=this._observeElement(r).subscribe(i);return()=>{c.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Qt.x,i=this._mutationObserverFactory.create(o=>r.next(o));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(E0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eA=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new d.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=fl(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function hy(n,e=0){return function w0(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(ag(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(C0),d.Y36(d.SBq),d.Y36(d.R0b))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),I0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[E0]}),n})();const iu=new Set;let ac,gd=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):tf}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function lg(n){if(!iu.has(n))try{ac||(ac=document.createElement("style"),ac.setAttribute("type","text/css"),document.head.appendChild(ac)),ac.sheet&&(ac.sheet.insertRule(`@media ${n} {body{ }}`,0),iu.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tf(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let tA=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Qt.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return py(pd(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let o=Vi(py(pd(t)).map(c=>this._registerQuery(c).observable));return o=Ja(o.pipe(Ui(1)),o.pipe(QS(1),ag(0))),o.pipe((0,ft.U)(c=>{const h={matches:!1,breakpoints:{}};return c.forEach(({matches:p,query:y})=>{h.matches=h.matches||p,h.breakpoints[y]=p}),h}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new Zn.y(c=>{const h=p=>this._zone.run(()=>c.next(p));return r.addListener(h),()=>{r.removeListener(h)}}).pipe(As(r),(0,ft.U)(({matches:c})=>({query:t,matches:c})),fd(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gd),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function py(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}let gy=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function my(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function aA(n){try{return n.frameElement}catch{return null}}(function x0(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(r&&(-1===_y(r)||!this.isVisible(r)))return!1;let i=t.nodeName.toLowerCase(),o=_y(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===i||"object"===i||this._platform.WEBKIT&&this._platform.IOS&&!function dA(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==o:"video"===i?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function hA(n){return!function lA(n){return function uA(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function S0(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function cA(n){return function A0(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||M0(n))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function M0(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function _y(n){if(!M0(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class R0{constructor(e,t,r,i,o=!1){this._element=e,this._checker=t,this._ngZone=r,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,o||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const r=this._getFirstTabbableElement(t);return r?.focus(e),!!r}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=0;r<t.length;r++){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[r]):null;if(i)return i}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let r=t.length-1;r>=0;r--){const i=t[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[r]):null;if(i)return i}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Ui(1)).subscribe(e)}}let yy=(()=>{class n{constructor(t,r,i){this._checker=t,this._ngZone=r,this._document=i}create(t,r=!1){return new R0(t,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(gy),d.LFG(d.R0b),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O0(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function N0(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const pA=new d.OlP("cdk-input-modality-detector-options"),vy={ignoreKeys:[18,17,224,91,16]},md=Xh({passive:!0,capture:!0});let dg=(()=>{class n{constructor(t,r,i,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Sr(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(h=>h===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ic(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(O0(c)?"keyboard":"mouse"),this._mostRecentTarget=ic(c))},this._onTouchstart=c=>{N0(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ic(c))},this._options={...vy,...o},this.modalityDetected=this._modality.pipe(QS(1)),this.modalityChanged=this.modalityDetected.pipe(XS()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,md),i.addEventListener("mousedown",this._onMousedown,md),i.addEventListener("touchstart",this._onTouchstart,md)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,md),document.removeEventListener("mousedown",this._onMousedown,md),document.removeEventListener("touchstart",this._onTouchstart,md))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi),d.LFG(d.R0b),d.LFG(ce),d.LFG(pA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const EF=new d.OlP("cdk-focus-monitor-default-options"),by=Xh({passive:!0,capture:!0});let _d=(()=>{class n{constructor(t,r,i,o,c){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Qt.x,this._rootNodeFocusAndBlurListener=h=>{for(let y=ic(h);y;y=y.parentElement)"focus"===h.type?this._onFocus(h,y):this._onBlur(h,y)},this._document=o,this._detectionMode=c?.detectionMode||0}monitor(t,r=!1){const i=wi(t);if(!this._platform.isBrowser||1!==i.nodeType)return Je(null);const o=function wS(n){if(function ng(){if(null==s0){const n=typeof document<"u"?document.head:null;s0=!(!n||!n.createShadowRoot&&!n.attachShadow)}return s0}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),c=this._elementInfo.get(i);if(c)return r&&(c.checkChildren=!0),c.subject;const h={checkChildren:r,subject:new Qt.x,rootNode:o};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=wi(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const o=wi(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),o=ic(t);!i||!i.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,by),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,by)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(fd(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,by),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,by),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,o)=>{(o===t||i.checkChildren&&o.contains(t))&&r.push([o,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(zi),d.LFG(dg),d.LFG(ce,8),d.LFG(EF,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V0="cdk-high-contrast-black-on-white",wy="cdk-high-contrast-white-on-black",hg="cdk-high-contrast-active";let Ey=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,d.f3M)(tA).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(hg,V0,wy),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(hg,V0):2===r&&t.add(hg,wy)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),B0=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ey))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[I0]}),n})();var Cy=F(1144);const gl=["addListener","removeListener"],fg=["addEventListener","removeEventListener"],pg=["on","off"];function lc(n,e,t,r){if((0,Lr.m)(t)&&(r=t,t=void 0),r)return lc(n,e,t).pipe(no(r));const[i,o]=function yA(n){return(0,Lr.m)(n.addEventListener)&&(0,Lr.m)(n.removeEventListener)}(n)?fg.map(c=>h=>n[c](e,h,t)):function Iy(n){return(0,Lr.m)(n.addListener)&&(0,Lr.m)(n.removeListener)}(n)?gl.map(U0(n,e)):function H0(n){return(0,Lr.m)(n.on)&&(0,Lr.m)(n.off)}(n)?pg.map(U0(n,e)):[];if(!i&&(0,Cy.z)(n))return(0,xr.z)(c=>lc(c,e,t))((0,Bi.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Zn.y(c=>{const h=(...p)=>c.next(1<p.length?p:p[0]);return i(h),()=>o(h)})}function U0(n,e){return t=>r=>n[t](e,r)}var j0=F(4408);const ml={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=ml;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(o=>{t=void 0,n(o)});return new Ar.w0(()=>t?.(i))},requestAnimationFrame(...n){const{delegate:e}=ml;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=ml;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var bA=F(7565);new class wA extends bA.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class vA extends j0.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=ml.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(ml.cancelAnimationFrame(t),e._scheduled=void 0)}});let Dy,EA=1;const gg={};function CA(n){return n in gg&&(delete gg[n],!0)}const $0={setImmediate(n){const e=EA++;return gg[e]=!0,Dy||(Dy=Promise.resolve()),Dy.then(()=>CA(e)&&n()),e},clearImmediate(n){CA(n)}},{setImmediate:IA,clearImmediate:Ty}=$0,mg={setImmediate(...n){const{delegate:e}=mg;return(e?.setImmediate||IA)(...n)},clearImmediate(n){const{delegate:e}=mg;return(e?.clearImmediate||Ty)(n)},delegate:void 0};new class TA extends bA.v{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let i;e=e||r.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}}(class DA extends j0.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=mg.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);e.actions.some(i=>i.id===t)||(mg.clearImmediate(t),e._scheduled=void 0)}});var _g=F(3532);function yd(n,e=og.z){return function AA(n){return(0,Nt.e)((e,t)=>{let r=!1,i=null,o=null,c=!1;const h=()=>{if(o?.unsubscribe(),o=null,r){r=!1;const y=i;i=null,t.next(y)}c&&t.complete()},p=()=>{o=null,c&&t.complete()};e.subscribe((0,Wn.x)(t,y=>{r=!0,i=y,o||(0,Bi.Xf)(n(y)).subscribe(o=(0,Wn.x)(t,h,p))},()=>{c=!0,(!r||!o||o.closed)&&t.complete()}))})}(()=>function TF(n=0,e,t=og.P){let r=-1;return null!=e&&((0,_g.K)(e)?t=e:r=e),new Zn.y(i=>{let o=function su(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;o<0&&(o=0);let c=0;return t.schedule(function(){i.closed||(i.next(c++),0<=r?this.schedule(void 0,r):i.complete())},o)})}(n,e))}const MA=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function xA(){return(0,d.f3M)(ce)}}),Sy=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Fs=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new d.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function RA(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Sy.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(MA,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Br=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),wd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Qt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Zn.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(yd(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Je()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Mr(o=>!o||i.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=wi(r),o=t.getElementRef().nativeElement;do{if(i==o)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>lc(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.R0b),d.LFG(zi),d.LFG(ce,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ou=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Qt.x,this._changeListener=o=>{this._change.next(o)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,o=i.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(yd(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi),d.LFG(d.R0b),d.LFG(ce,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),My=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),xy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Br,My,Br,My]}),n})();class cf{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class uf extends cf{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class W0 extends cf{constructor(e,t,r,i){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=i}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class vg extends cf{constructor(e){super(),this.element=e instanceof d.SBq?e.nativeElement:e}}class Cd{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof uf?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof W0?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof vg?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class UA extends Cd{constructor(e,t,r,i,o){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=c=>{const h=c.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=o}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector||d.zs3.NULL),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let bg=(()=>{class n extends Cd{constructor(t,r,i){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new d.vpe,this.attachDomPortal=o=>{const c=o.element,h=this._document.createComment("dom-portal");o.setAttachedHost(this),c.parentNode.insertBefore(h,c),this._getRootNode().appendChild(c),this._attachedPortal=o,super.setDisposeFn(()=>{h.parentNode&&h.parentNode.replaceChild(c,h)})},this._document=i}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),c=r.createComponent(o,r.length,t.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=t,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d._Vd),d.Y36(d.s_b),d.Y36(ce))},n.\u0275dir=d.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[d.qOj]}),n})(),df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var Id=F(6451);const wg=r0();class $A{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Vr(-this._previousScrollPosition.left),e.style.top=Vr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,o=r.scrollBehavior||"",c=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),wg&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),wg&&(r.scrollBehavior=o,i.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class Y0{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Oy{enable(){}disable(){}attach(){}}function Eg(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function Z0(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class Q0{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();Eg(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let X0=(()=>{class n{constructor(t,r,i,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new Oy,this.close=c=>new Y0(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new $A(this._viewportRuler,this._document),this.reposition=c=>new Q0(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=o}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(wd),d.LFG(ou),d.LFG(d.R0b),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ny{constructor(e){if(this.scrollStrategy=new Oy,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class J0{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Fy=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eE=(()=>{class n extends Fy{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const o=this._attachedOverlays;for(let c=o.length-1;c>-1;c--)if(o[c]._keydownEvents.observers.length>0){const h=o[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tE=(()=>{class n extends Fy{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=ic(o)},this._clickListener=o=>{const c=ic(o),h="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const E=p[y];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(c)||E.overlayElement.contains(h))break;const T=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>T.next(o)):T.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(zi),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hf=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ig()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<i.length;o++)i[o].remove()}const r=this._document.createElement("div");r.classList.add(t),ig()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(zi))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Cg{constructor(e,t,r,i,o,c,h,p,y,E=!1){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=o,this._keyboardDispatcher=c,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._animationsDisabled=E,this._backdropElement=null,this._backdropClick=new Qt.x,this._attachments=new Qt.x,this._detachments=new Qt.x,this._locationChanges=Ar.w0.EMPTY,this._backdropClickHandler=T=>this._backdropClick.next(T),this._backdropTransitionendHandler=T=>{this._disposeBackdrop(T.target)},this._keydownEvents=new Qt.x,this._outsidePointerEvents=new Qt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Ui(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Vr(this._config.width),e.height=Vr(this._config.height),e.minWidth=Vr(this._config.minWidth),e.minHeight=Vr(this._config.minHeight),e.maxWidth=Vr(this._config.maxWidth),e.maxHeight=Vr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const i=pd(t||[]).filter(o=>!!o);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(fd((0,Id.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const nE="cdk-overlay-connected-position-bounding-box",KA=/([A-Za-z%]+)$/;class rE{constructor(e,t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Qt.x,this._resizeSubscription=Ar.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(nE),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,o=[];let c;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),E=this._getOverlayFit(y,t,r,h);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(E,y,r)?o.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!c||c.overlayFit.visibleArea<E.visibleArea)&&(c={overlayFit:E,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(o.length){let h=null,p=-1;for(const y of o){const E=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);E>p&&(p=E,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&au(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(nE),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,o;if("center"==r.originX)i=e.left+e.width/2;else{const c=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?c:h}return t.left<0&&(i-=t.left),o="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(o-=t.top),{x:i,y:o}}_getOverlayPoint(e,t,r){let i,o;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,o="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+o}}_getOverlayFit(e,t,r,i){const o=Ly(t);let{x:c,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(c+=p),y&&(h+=y);let R=0-h,L=h+o.height-r.height,B=this._subtractOverflows(o.width,0-c,c+o.width-r.width),J=this._subtractOverflows(o.height,R,L),we=B*J;return{visibleArea:we,isCompletelyWithinViewport:o.width*o.height===we,fitsInViewportVertically:J===o.height,fitsInViewportHorizontally:B==o.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,o=r.right-t.x,c=Ur(this._overlayRef.getConfig().minHeight),h=Ur(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=o;return(e.fitsInViewportVertically||null!=c&&c<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=Ly(t),o=this._viewportRect,c=Math.max(e.x+i.width-o.width,0),h=Math.max(e.y+i.height-o.height,0),p=Math.max(o.top-r.top-e.y,0),y=Math.max(o.left-r.left-e.x,0);let E=0,T=0;return E=i.width<=o.width?y||-c:e.x<this._viewportMargin?o.left-r.left-e.x:0,T=i.height<=o.height?p||-h:e.y<this._viewportMargin?o.top-r.top-e.y:0,this._previousPushAmount={x:E,y:T},{x:e.x+E,y:e.y+T}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new J0(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let o=0;o<t.length;o++)t[o].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let o,c,h,E,T,R;if("top"===t.overlayY)c=e.y,o=r.height-c+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,o=r.height-h+this._viewportMargin;else{const L=Math.min(r.bottom-e.y+r.top,e.y),B=this._lastBoundingBoxSize.height;o=2*L,c=e.y-L,o>B&&!this._isInitialRender&&!this._growAfterOpen&&(c=e.y-B/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)R=r.width-e.x+this._viewportMargin,E=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)T=e.x,E=r.right-e.x;else{const L=Math.min(r.right-e.x+r.left,e.x),B=this._lastBoundingBoxSize.width;E=2*L,T=e.x-L,E>B&&!this._isInitialRender&&!this._growAfterOpen&&(T=e.x-B/2)}return{top:c,left:T,bottom:h,right:R,width:E,height:o}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;i.height=Vr(r.height),i.top=Vr(r.top),i.bottom=Vr(r.bottom),i.width=Vr(r.width),i.left=Vr(r.left),i.right=Vr(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",o&&(i.maxHeight=Vr(o)),c&&(i.maxWidth=Vr(c))}this._lastBoundingBoxSize=r,au(this._boundingBox.style,i)}_resetBoundingBoxStyles(){au(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){au(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),o=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(i){const E=this._viewportRuler.getViewportScrollPosition();au(r,this._getExactOverlayY(t,e,E)),au(r,this._getExactOverlayX(t,e,E))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),c.maxHeight&&(i?r.maxHeight=Vr(c.maxHeight):o&&(r.maxHeight="")),c.maxWidth&&(i?r.maxWidth=Vr(c.maxWidth):o&&(r.maxWidth="")),au(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":i.top=Vr(o.y),i}_getExactOverlayX(e,t,r){let c,i={left:"",right:""},o=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,r)),c=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===c?i.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":i.left=Vr(o.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Z0(e,r),isOriginOutsideView:Eg(e,r),isOverlayClipped:Z0(t,r),isOverlayOutsideView:Eg(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&pd(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof d.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function au(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ur(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(KA);return t&&"px"!==t?null:parseFloat(e)}return n||null}function Ly(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const Vy="cdk-global-overlay-wrapper";class YA{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Vy),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:o,maxWidth:c,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||c&&"100%"!==c&&"100vw"!==c),y=!("100%"!==o&&"100vh"!==o||h&&"100%"!==h&&"100vh"!==h),E=this._xPosition,T=this._xOffset,R="rtl"===this._overlayRef.getConfig().direction;let L="",B="",J="";p?J="flex-start":"center"===E?(J="center",R?B=T:L=T):R?"left"===E||"end"===E?(J="flex-end",L=T):("right"===E||"start"===E)&&(J="flex-start",B=T):"left"===E||"start"===E?(J="flex-start",L=T):("right"===E||"end"===E)&&(J="flex-end",B=T),e.position=this._cssPosition,e.marginLeft=p?"0":L,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=p?"0":B,t.justifyContent=J,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(Vy),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let iE=(()=>{class n{constructor(t,r,i,o){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=o}global(){return new YA}flexibleConnectedTo(t){return new rE(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ou),d.LFG(ce),d.LFG(zi),d.LFG(hf))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sE=0,Ho=(()=>{class n{constructor(t,r,i,o,c,h,p,y,E,T,R,L){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=o,this._keyboardDispatcher=c,this._injector=h,this._ngZone=p,this._document=y,this._directionality=E,this._location=T,this._outsideClickDispatcher=R,this._animationsModuleType=L}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),o=this._createPortalOutlet(i),c=new Ny(t);return c.direction=c.direction||this._directionality.value,new Cg(o,r,i,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+sE++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(d.z2F)),new UA(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(X0),d.LFG(hf),d.LFG(d._Vd),d.LFG(iE),d.LFG(eE),d.LFG(d.zs3),d.LFG(d.R0b),d.LFG(ce),d.LFG(Fs),d.LFG(Ne),d.LFG(tE),d.LFG(d.QbO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const FF={provide:new d.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Ho],useFactory:function oE(n){return()=>n.scrollStrategies.reposition()}};let By=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ho,FF],imports:[Br,df,xy,xy]}),n})();function Da(n,e){}class Ig{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let jo=(()=>{class n extends Cd{constructor(t,r,i,o,c,h,p,y){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=c,this._ngZone=h,this._overlayRef=p,this._focusMonitor=y,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>{this._portalOutlet.hasAttached();const T=this._portalOutlet.attachDomPortal(E);return this._contentAttached(),T},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=i}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const i=()=>{t.removeEventListener("blur",i),t.removeEventListener("mousedown",i),t.removeAttribute("tabindex")};t.addEventListener("blur",i),t.addEventListener("mousedown",i)})),t.focus(r)}_focusByCssSelector(t,r){let i=this._elementRef.nativeElement.querySelector(t);i&&this._forceFocus(i,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const i=rg(),o=this._elementRef.nativeElement;(!i||i===this._document.body||i===o||o.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=rg();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=rg())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(yy),d.Y36(ce,8),d.Y36(Ig),d.Y36(gy),d.Y36(d.R0b),d.Y36(Cg),d.Y36(_d))},n.\u0275cmp=d.Xpm({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&d.Gf(bg,7),2&t){let i;d.iGM(i=d.CRH())&&(r._portalOutlet=i.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&d.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[d.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&d.YNc(0,Da,0,0,"ng-template",0)},dependencies:[bg],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class Ls{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Qt.x,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(r=>{27===r.keyCode&&!this.disableClose&&!ZS(r)&&(r.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const r=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),r.next(e),r.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const ao=new d.OlP("DialogScrollStrategy"),lE=new d.OlP("DialogData"),cE=new d.OlP("DefaultDialogConfig"),JA={provide:ao,deps:[Ho],useFactory:function XA(n){return()=>n.scrollStrategies.block()}};let eM=0,uE=(()=>{class n{constructor(t,r,i,o,c,h){this._overlay=t,this._injector=r,this._defaultOptions=i,this._parentDialog=o,this._overlayContainer=c,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Qt.x,this._afterOpenedAtThisLevel=new Qt.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Ts(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(As(void 0))),this._scrollStrategy=h}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,r){(r={...this._defaultOptions||new Ig,...r}).id=r.id||"cdk-dialog-"+eM++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),c=this._overlay.create(o),h=new Ls(c,r),p=this._attachContainer(c,h,r);return h.containerInstance=p,this._attachDialogContent(t,h,p,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(h),h.closed.subscribe(()=>this._removeOpenDialog(h,!0)),this.afterOpened.next(h),h}closeAll(){ff(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){ff(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),ff(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new Ny({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,i){const o=i.injector??i.viewContainerRef?.injector,c=[{provide:Ig,useValue:i},{provide:Ls,useValue:r},{provide:Cg,useValue:t}];let h;i.container?"function"==typeof i.container?h=i.container:(h=i.container.type,c.push(...i.container.providers(i))):h=jo;const p=new uf(h,i.viewContainerRef,d.zs3.create({parent:o||this._injector,providers:c}),i.componentFactoryResolver);return t.attach(p).instance}_attachDialogContent(t,r,i,o){const c=this._createInjector(o,r,i);if(t instanceof d.Rgc){let h={$implicit:o.data,dialogRef:r};o.templateContext&&(h={...h,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),i.attachTemplatePortal(new W0(t,null,h,c))}else{const h=i.attachComponentPortal(new uf(t,o.viewContainerRef,c,o.componentFactoryResolver));r.componentInstance=h.instance}}_createInjector(t,r,i){const o=t&&t.viewContainerRef&&t.viewContainerRef.injector,c=[{provide:lE,useValue:t.data},{provide:Ls,useValue:r}];return t.providers&&("function"==typeof t.providers?c.push(...t.providers(r,t,i)):c.push(...t.providers)),t.direction&&(!o||!o.get(Fs,null,d.XFs.Optional))&&c.push({provide:Fs,useValue:{value:t.direction,change:Je()}}),d.zs3.create({parent:o||this._injector,providers:c})}_removeOpenDialog(t,r){const i=this.openDialogs.indexOf(t);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,c)=>{o?c.setAttribute("aria-hidden",o):c.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let i=r.length-1;i>-1;i--){const o=r[i];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ho),d.LFG(d.zs3),d.LFG(cE,8),d.LFG(n,12),d.LFG(hf),d.LFG(ao))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function ff(n,e){let t=n.length;for(;t--;)e(n[t])}let pf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[uE,JA],imports:[By,df,B0,df]}),n})();const Dg=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function Hy(){return!0}});let ls=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ig()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ey),d.LFG(Dg,8),d.LFG(ce))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Br,Br]}),n})();function fE(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=fl(e)}}}function Tg(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function pE(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fl(e)}}}function uM(n){return class extends n{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,o=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);o!==e&&(this.errorState=o,this.stateChanges.next())}}}let gE=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mE{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const jy={enterDuration:225,exitDuration:150},Sg=Xh({passive:!0}),$y=["mousedown","touchstart"],zy=["mouseup","mouseleave","touchend","touchcancel"];class yE{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=wi(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o={...jy,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const c=r.radius||function vE(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=o.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=h-c+"px",E.style.top=p-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=r.color&&(E.style.backgroundColor=r.color),E.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(E);const T=window.getComputedStyle(E),L=T.transitionDuration,B="none"===T.transitionProperty||"0s"===L||"0s, 0s"===L,J=new mE(this,E,r,B);E.style.transform="scale3d(1, 1, 1)",J.state=0,r.persistent||(this._mostRecentTransientRipple=J);let we=null;return!B&&(y||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const nt=()=>this._finishRippleTransition(J),ut=()=>this._destroyRipple(J);E.addEventListener("transitionend",nt),E.addEventListener("transitioncancel",ut),we={onTransitionEnd:nt,onTransitionCancel:ut}}),this._activeRipples.set(J,we),(B||!y)&&this._finishRippleTransition(J),J}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...jy,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=wi(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents($y))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zy),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=O0(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!N0(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Sg)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&($y.forEach(e=>{this._triggerElement.removeEventListener(e,this,Sg)}),this._pointerUpEventsRegistered&&zy.forEach(e=>{this._triggerElement.removeEventListener(e,this,Sg)}))}}const bE=new d.OlP("mat-ripple-global-options");let Ag=(()=>{class n{constructor(t,r,i,o,c){this._elementRef=t,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new yE(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.R0b),d.Y36(zi),d.Y36(bE,8),d.Y36(d.QbO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),Gy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ls,ls]}),n})();class EE{}const lo="*";function or(n,e){return{type:7,name:n,definitions:e,options:{}}}function CE(n,e=null){return{type:4,styles:e,timings:n}}function Wy(n,e=null){return{type:3,steps:n,options:e}}function qy(n,e=null){return{type:2,steps:n,options:e}}function cc(n){return{type:6,styles:n,offset:null}}function xg(n,e,t){return{type:0,name:n,styles:e,options:t}}function Rg(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function IE(n=null){return{type:9,options:n}}function DE(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function TE(n){Promise.resolve(null).then(n)}class yf{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){TE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class SE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const o=this.players.length;0==o?TE(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==o&&this._onFinish()}),c.onDestroy(()=>{++r==o&&this._onDestroy()}),c.onStart(()=>{++i==o&&this._onStart()})}),this.totalTime=this.players.reduce((c,h)=>Math.max(c,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function AE(n,e){}const lu={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},ME={dialogContainer:or("dialogContainer",[xg("void, exit",cc({opacity:0,transform:"scale(0.7)"})),xg("enter",cc({transform:"none"})),Rg("* => enter",Wy([CE("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",cc({transform:"none",opacity:1})),DE("@*",IE(),{optional:!0})]),lu),Rg("* => void, * => exit",Wy([CE("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",cc({opacity:0})),DE("@*",IE(),{optional:!0})]),lu)])};class Og{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=lu.params.enterAnimationDuration,this.exitAnimationDuration=lu.params.exitAnimationDuration}}let vf=(()=>{class n extends jo{constructor(t,r,i,o,c,h,p,y){super(t,r,i,o,c,h,p,y),this._animationStateChanged=new d.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(yy),d.Y36(ce,8),d.Y36(Og),d.Y36(gy),d.Y36(d.R0b),d.Y36(Cg),d.Y36(_d))},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],features:[d.qOj],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})(),bf=(()=>{class n extends vf{constructor(t,r,i,o,c,h,p,y,E){super(t,r,i,o,c,h,p,E),this._changeDetectorRef=y,this._state="enter"}_onAnimationDone({toState:t,totalTime:r}){"enter"===t?this._openAnimationDone(r):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:r})}_onAnimationStart({toState:t,totalTime:r}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||lu.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||lu.params.exitAnimationDuration}}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(yy),d.Y36(ce,8),d.Y36(Og),d.Y36(gy),d.Y36(d.R0b),d.Y36(Cg),d.Y36(d.sBO),d.Y36(_d))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,r){1&t&&d.WFA("@dialogContainer.start",function(o){return r._onAnimationStart(o)})("@dialogContainer.done",function(o){return r._onAnimationDone(o)}),2&t&&(d.Ikx("id",r._config.id),d.uIk("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),d.d8E("@dialogContainer",r._getAnimationState()))},features:[d.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&d.YNc(0,AE,0,0,"ng-template",0)},dependencies:[bg],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[ME.dialogContainer]}}),n})();class Ng{constructor(e,t,r){this._ref=e,this._containerInstance=r,this._afterOpened=new Qt.x,this._beforeClosed=new Qt.x,this._state=0,this.disableClose=t.disableClose,this.id=e.id,r._animationStateChanged.pipe(Mr(i=>"opened"===i.state),Ui(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),r._animationStateChanged.pipe(Mr(i=>"closed"===i.state),Ui(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,Id.T)(this.backdropClick(),this.keydownEvents().pipe(Mr(i=>27===i.keyCode&&!this.disableClose&&!ZS(i)))).subscribe(i=>{this.disableClose||(i.preventDefault(),xE(this,"keydown"===i.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Mr(t=>"closing"===t.state),Ui(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function xE(n,e,t){return n._closeInteractionType=e,n.close(t)}const mM=new d.OlP("MatDialogData"),RE=new d.OlP("mat-dialog-default-options"),Ky=new d.OlP("mat-dialog-scroll-strategy"),kE={provide:Ky,deps:[Ho],useFactory:function yM(n){return()=>n.scrollStrategies.block()}};let vM=0,bM=(()=>{class n{constructor(t,r,i,o,c,h,p,y,E,T){this._overlay=t,this._defaultOptions=i,this._parentDialog=o,this._dialogRefConstructor=p,this._dialogContainerType=y,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Qt.x,this._afterOpenedAtThisLevel=new Qt.x,this._idPrefix="mat-dialog-",this.afterAllClosed=Ts(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(As(void 0))),this._scrollStrategy=h,this._dialog=r.get(uE)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,r){let i;(r={...this._defaultOptions||new Og,...r}).id=r.id||`${this._idPrefix}${vM++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Og,useValue:r},{provide:Ig,useValue:r}]},templateContext:()=>({dialogRef:i}),providers:(c,h,p)=>(i=new this._dialogRefConstructor(c,r,p),i.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:p},{provide:this._dialogDataToken,useValue:h.data},{provide:this._dialogRefConstructor,useValue:i}])});return i.componentInstance=o.componentInstance,this.openDialogs.push(i),this.afterOpened.next(i),i.afterClosed().subscribe(()=>{const c=this.openDialogs.indexOf(i);c>-1&&(this.openDialogs.splice(c,1),this.openDialogs.length||this._getAfterAllClosed().next())}),i}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return n.\u0275fac=function(t){d.$Z()},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Yy=(()=>{class n extends bM{constructor(t,r,i,o,c,h,p,y){super(t,r,o,h,p,c,Ng,bf,mM,y)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Ho),d.LFG(d.zs3),d.LFG(Ne,8),d.LFG(RE,8),d.LFG(Ky),d.LFG(n,12),d.LFG(hf),d.LFG(d.QbO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),o1=0,a1=(()=>{class n{constructor(t,r,i){this.dialogRef=t,this._elementRef=r,this._dialog=i,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=NE(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const r=t._matDialogClose||t._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(t){xE(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ng,8),d.Y36(d.SBq),d.Y36(Yy))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(o){return r._onButtonClick(o)}),2&t&&d.uIk("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[d.TTD]}),n})(),l1=(()=>{class n{constructor(t,r,i){this._dialogRef=t,this._elementRef=r,this._dialog=i,this.id="mat-dialog-title-"+o1++}ngOnInit(){this._dialogRef||(this._dialogRef=NE(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ng,8),d.Y36(d.SBq),d.Y36(Yy))},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,r){2&t&&d.Ikx("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),OE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})(),Pg=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,r){2&t&&d.ekj("mat-dialog-actions-align-center","center"===r.align)("mat-dialog-actions-align-end","end"===r.align)},inputs:{align:"align"}}),n})();function NE(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(r=>r.id===t.id):null}let wM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Yy,kE],imports:[pf,By,df,ls,ls]}),n})();function Zy(...n){const e=(0,Cn.jO)(n),{args:t,keys:r}=ca(n),i=new Zn.y(o=>{const{length:c}=t;if(!c)return void o.complete();const h=new Array(c);let p=c,y=c;for(let E=0;E<c;E++){let T=!1;(0,Bi.Xf)(t[E]).subscribe((0,Wn.x)(o,R=>{T||(T=!0,y--),h[E]=R},()=>p--,void 0,()=>{(!p||!T)&&(y||o.next(r?ua(r,h):h),o.complete())}))}});return e?i.pipe(no(e)):i}let Sd=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),cu=(()=>{class n extends Sd{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const Ta=new d.OlP("NgValueAccessor"),CM={provide:Ta,useExisting:(0,d.Gpc)(()=>Fg),multi:!0},IM=new d.OlP("CompositionEventMode");let Fg=(()=>{class n extends Sd{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function FE(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(IM,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[d._Bn([CM]),d.qOj]}),n})();function uc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Qy(n){return null!=n&&"number"==typeof n.length}const Ei=new d.OlP("NgValidators"),_l=new d.OlP("NgAsyncValidators"),DM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class LE{static min(e){return function VE(n){return e=>{if(uc(e.value)||uc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Lg(n){return e=>{if(uc(e.value)||uc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function BE(n){return uc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Xy(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Jy(n){return uc(n.value)||DM.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function UE(n){return e=>uc(e.value)||!Qy(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function HE(n){return e=>Qy(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function jE(n){if(!n)return Md;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(uc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return qE(e)}static composeAsync(e){return KE(e)}}function Md(n){return null}function $E(n){return null!=n}function ev(n){return(0,d.QGY)(n)?(0,En.D)(n):n}function zE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function GE(n,e){return e.map(t=>t(n))}function WE(n){return n.map(e=>function TM(n){return!n.validate}(e)?e:t=>e.validate(t))}function qE(n){if(!n)return null;const e=n.filter($E);return 0==e.length?null:function(t){return zE(GE(t,e))}}function tv(n){return null!=n?qE(WE(n)):null}function KE(n){if(!n)return null;const e=n.filter($E);return 0==e.length?null:function(t){return Zy(GE(t,e).map(ev)).pipe((0,ft.U)(zE))}}function nv(n){return null!=n?KE(WE(n)):null}function rv(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function iv(n){return n._rawValidators}function YE(n){return n._rawAsyncValidators}function sv(n){return n?Array.isArray(n)?n:[n]:[]}function wf(n,e){return Array.isArray(n)?n.includes(e):n===e}function ZE(n,e){const t=sv(e);return sv(n).forEach(i=>{wf(t,i)||t.push(i)}),t}function QE(n,e){return sv(e).filter(t=>!wf(n,t))}class XE{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=nv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class di extends XE{get formDirective(){return null}get path(){return null}}class $o extends XE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let eC=(()=>{class n extends class ov{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36($o,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[d.qOj]}),n})();const Cf="VALID",Bg="INVALID",Rd="PENDING",kd="DISABLED";function oC(n){return(pv(n)?n.validators:n)||null}function hv(n){return Array.isArray(n)?tv(n):n||null}function fv(n,e){return(pv(e)?e.asyncValidators:n)||null}function aC(n){return Array.isArray(n)?nv(n):n||null}function pv(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class cC{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=hv(this._rawValidators),this._composedAsyncValidatorFn=aC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cf}get invalid(){return this.status===Bg}get pending(){return this.status==Rd}get disabled(){return this.status===kd}get enabled(){return this.status!==kd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=hv(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=aC(e)}addValidators(e){this.setValidators(ZE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ZE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(QE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(QE(e,this._rawAsyncValidators))}hasValidator(e){return wf(this._rawValidators,e)}hasAsyncValidator(e){return wf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Rd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cf||this.status===Rd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kd:Cf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Rd,this._hasOwnPendingAsyncValidator=!0;const t=ev(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?kd:this.errors?Bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rd)?Rd:this._anyControlsHaveStatus(Bg)?Bg:Cf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pv(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Ug extends cC{constructor(e,t,r){super(oC(t),fv(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function lC(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new d.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function MM(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new d.vHH(1e3,"");if(!r[t])throw new d.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function If(n,e){uu(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function uC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&gv(n,e)})}(n,e),function hC(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&gv(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function kM(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function jg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Df(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function $g(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uu(n,e){const t=iv(n);null!==e.validator?n.setValidators(rv(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=YE(n);null!==e.asyncValidator?n.setAsyncValidators(rv(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();$g(e._rawValidators,i),$g(e._rawAsyncValidators,i)}function Df(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=iv(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(null!==e.asyncValidator){const i=YE(n);if(Array.isArray(i)&&i.length>0){const o=i.filter(c=>c!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}const r=()=>{};return $g(e._rawValidators,r),$g(e._rawAsyncValidators,r),t}function gv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fC(n,e){uu(n,e)}function Od(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const FM={provide:di,useExisting:(0,d.Gpc)(()=>dc)},du=(()=>Promise.resolve(null))();let dc=(()=>{class n extends di{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new d.vpe,this.form=new Ug({},tv(t),nv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){du.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),If(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){du.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){du.then(()=>{const r=this._findContainer(t.path),i=new Ug({});fC(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){du.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){du.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Od(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ei,10),d.Y36(_l,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([FM]),d.qOj]}),n})();function gC(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function mC(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const _C=class extends cC{constructor(e=null,t,r){super(oC(t),fv(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=mC(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},BM={provide:$o,useExisting:(0,d.Gpc)(()=>Tf)},UM=(()=>Promise.resolve(null))();let Tf=(()=>{class n extends $o{constructor(t,r,i,o,c){super(),this._changeDetectorRef=c,this.control=new _C,this._registered=!1,this.update=new d.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function _v(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(o=>{o.constructor===Fg?t=o:function PM(n){return Object.getPrototypeOf(n.constructor)===cu}(o)?r=o:i=o}),i||r||t||null}(0,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function mv(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){If(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){UM.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,d.D6c)(r);UM.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Hg(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(di,9),d.Y36(Ei,10),d.Y36(_l,10),d.Y36(Ta,10),d.Y36(d.sBO,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[d._Bn([BM]),d.qOj,d.TTD]}),n})(),CC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const SC={provide:di,useExisting:(0,d.Gpc)(()=>qg)};let qg=(()=>{class n extends di{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Df(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return If(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){jg(t.control||null,t,!1),function yv(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Od(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(jg(r||null,t),(n=>n instanceof _C)(i)&&(If(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);fC(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function OM(n,e){return Df(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){uu(this.form,this),this._oldForm&&Df(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ei,10),d.Y36(_l,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([SC]),d.qOj,d.TTD]}),n})(),qM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[CC]}),n})(),$C=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[qM]}),n})();const zC=["mat-button",""],GC=["*"],nx=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],D1=Tg(fE(pE(class{constructor(n){this._elementRef=n}})));let Mv=(()=>{class n extends D1{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const o of nx)this._hasHostAttributes(o)&&this._getHostElement().classList.add(o);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(_d),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&d.Gf(Ag,5),2&t){let i;d.iGM(i=d.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(d.uIk("disabled",r.disabled||null),d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[d.qOj],attrs:zC,ngContentSelectors:GC,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(d.F$t(),d.TgZ(0,"span",0),d.Hsn(1),d.qZA(),d._UZ(2,"span",1)(3,"span",2)),2&t&&(d.xp6(2),d.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),d.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},dependencies:[Ag],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),T1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Gy,ls,ls]}),n})();const S1=["connectionContainer"],A1=["inputContainer"],M1=["label"];function x1(n,e){1&n&&(d.ynx(0),d.TgZ(1,"div",14),d._UZ(2,"div",15)(3,"div",16)(4,"div",17),d.qZA(),d.TgZ(5,"div",18),d._UZ(6,"div",15)(7,"div",16)(8,"div",17),d.qZA(),d.BQk())}function R1(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"div",19),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.Hsn(1,1),d.qZA()}if(2&n){const t=d.oxw();d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function k1(n,e){if(1&n&&(d.ynx(0),d.Hsn(1,2),d.TgZ(2,"span"),d._uU(3),d.qZA(),d.BQk()),2&n){const t=d.oxw(2);d.xp6(3),d.Oqu(t._control.placeholder)}}function Jg(n,e){1&n&&d.Hsn(0,3,["*ngSwitchCase","true"])}function O1(n,e){1&n&&(d.TgZ(0,"span",23),d._uU(1," *"),d.qZA())}function WC(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"label",20,21),d.NdJ("cdkObserveContent",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.updateOutlineGap())}),d.YNc(2,k1,4,1,"ng-container",12),d.YNc(3,Jg,1,0,"ng-content",12),d.YNc(4,O1,2,0,"span",22),d.qZA()}if(2&n){const t=d.oxw();d.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),d.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),d.uIk("for",t._control.id)("aria-owns",t._control.id),d.xp6(2),d.Q6J("ngSwitchCase",!1),d.xp6(1),d.Q6J("ngSwitchCase",!0),d.xp6(1),d.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function em(n,e){1&n&&(d.TgZ(0,"div",24),d.Hsn(1,4),d.qZA())}function qC(n,e){if(1&n&&(d.TgZ(0,"div",25),d._UZ(1,"span",26),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function KC(n,e){if(1&n&&(d.TgZ(0,"div"),d.Hsn(1,5),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState)}}function N1(n,e){if(1&n&&(d.TgZ(0,"div",30),d._uU(1),d.qZA()),2&n){const t=d.oxw(2);d.Q6J("id",t._hintLabelId),d.xp6(1),d.Oqu(t.hintLabel)}}function xv(n,e){if(1&n&&(d.TgZ(0,"div",27),d.YNc(1,N1,2,2,"div",28),d.Hsn(2,6),d._UZ(3,"div",29),d.Hsn(4,7),d.qZA()),2&n){const t=d.oxw();d.Q6J("@transitionMessages",t._subscriptAnimationState),d.xp6(1),d.Q6J("ngIf",t.hintLabel)}}const YC=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],rx=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],P1=new d.OlP("MatError"),sx={transitionMessages:or("transitionMessages",[xg("enter",cc({opacity:1,transform:"translateY(0%)"})),Rg("void => enter",[cc({opacity:0,transform:"translateY(-5px)"}),CE("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Rv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})();const V1=new d.OlP("MatHint");let Ov=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-label"]]}),n})(),ox=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const U1=new d.OlP("MatPrefix"),ZC=new d.OlP("MatSuffix");let lx=0;const Nv=Tg(class{constructor(n){this._elementRef=n}},"primary"),cx=new d.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),cs=new d.OlP("MatFormField");let ux=(()=>{class n extends Nv{constructor(t,r,i,o,c,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=o,this._platform=c,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Qt.x,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+lx++,this._labelId="mat-form-field-label-"+lx++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=o?.appearance||"legacy",o&&(this._hideRequiredMarker=Boolean(o.hideRequiredMarker),o.color&&(this.color=this.defaultColor=o.color))}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fl(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(As(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(fd(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(fd(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Id.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(As(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(As(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(fd(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,lc(this._label.nativeElement,"transitionend").pipe(Ui(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,i=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",o=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const E=r.querySelectorAll(`${i}, ${o}`);for(let T=0;T<E.length;T++)E[T].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let c=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(o);if(this._label&&this._label.nativeElement.children.length){const E=r.getBoundingClientRect();if(0===E.width&&0===E.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const T=this._getStartEnd(E),R=t.children,L=this._getStartEnd(R[0].getBoundingClientRect());let B=0;for(let J=0;J<R.length;J++)B+=R[J].offsetWidth;c=Math.abs(L-T)-5,h=B>0?.75*B+10:0}for(let E=0;E<p.length;E++)p[E].style.width=`${c}px`;for(let E=0;E<y.length;E++)y[E].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.sBO),d.Y36(Fs,8),d.Y36(cx,8),d.Y36(zi),d.Y36(d.R0b),d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(d.Suo(i,Rv,5),d.Suo(i,Rv,7),d.Suo(i,Ov,5),d.Suo(i,Ov,7),d.Suo(i,ox,5),d.Suo(i,P1,5),d.Suo(i,V1,5),d.Suo(i,U1,5),d.Suo(i,ZC,5)),2&t){let o;d.iGM(o=d.CRH())&&(r._controlNonStatic=o.first),d.iGM(o=d.CRH())&&(r._controlStatic=o.first),d.iGM(o=d.CRH())&&(r._labelChildNonStatic=o.first),d.iGM(o=d.CRH())&&(r._labelChildStatic=o.first),d.iGM(o=d.CRH())&&(r._placeholderChild=o.first),d.iGM(o=d.CRH())&&(r._errorChildren=o),d.iGM(o=d.CRH())&&(r._hintChildren=o),d.iGM(o=d.CRH())&&(r._prefixChildren=o),d.iGM(o=d.CRH())&&(r._suffixChildren=o)}},viewQuery:function(t,r){if(1&t&&(d.Gf(S1,7),d.Gf(A1,5),d.Gf(M1,5)),2&t){let i;d.iGM(i=d.CRH())&&(r._connectionContainerRef=i.first),d.iGM(i=d.CRH())&&(r._inputContainerRef=i.first),d.iGM(i=d.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&d.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[d._Bn([{provide:cs,useExisting:n}]),d.qOj],ngContentSelectors:rx,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(d.F$t(YC),d.TgZ(0,"div",0)(1,"div",1,2),d.NdJ("click",function(o){return r._control.onContainerClick&&r._control.onContainerClick(o)}),d.YNc(3,x1,9,0,"ng-container",3),d.YNc(4,R1,2,1,"div",4),d.TgZ(5,"div",5,6),d.Hsn(7),d.TgZ(8,"span",7),d.YNc(9,WC,5,16,"label",8),d.qZA()(),d.YNc(10,em,2,0,"div",9),d.qZA(),d.YNc(11,qC,2,4,"div",10),d.TgZ(12,"div",11),d.YNc(13,KC,2,1,"div",12),d.YNc(14,xv,5,2,"div",13),d.qZA()()),2&t&&(d.xp6(3),d.Q6J("ngIf","outline"==r.appearance),d.xp6(1),d.Q6J("ngIf",r._prefixChildren.length),d.xp6(5),d.Q6J("ngIf",r._hasFloatingLabel()),d.xp6(1),d.Q6J("ngIf",r._suffixChildren.length),d.xp6(1),d.Q6J("ngIf","outline"!=r.appearance),d.xp6(1),d.Q6J("ngSwitch",r._getDisplayedMessages()),d.xp6(1),d.Q6J("ngSwitchCase","error"),d.xp6(1),d.Q6J("ngSwitchCase","hint"))},dependencies:[Pr,ea,si,eA],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[sx.transitionMessages]},changeDetection:0}),n})(),tm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ns,ls,I0,ls]}),n})();const XC=Xh({passive:!0});let dx=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return ro.E;const r=wi(t),i=this._monitoredElements.get(r);if(i)return i.subject;const o=new Qt.x,c="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(c)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(c)&&(r.classList.remove(c),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!1}))):(r.classList.add(c),this._ngZone.run(()=>o.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,XC),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",h,XC)}}),o}stopMonitoring(t){const r=wi(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(zi),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Pv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const eI=new d.OlP("MAT_INPUT_VALUE_ACCESSOR"),tI=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let fx=0;const nI=uM(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new Qt.x}});let px=(()=>{class n extends nI{constructor(t,r,i,o,c,h,p,y,E,T){super(h,o,c,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=T,this._uid="mat-input-"+fx++,this.focused=!1,this.stateChanges=new Qt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(B=>t0().has(B)),this._iOSKeyupListener=B=>{const J=B.target;!J.value&&0===J.selectionStart&&0===J.selectionEnd&&(J.setSelectionRange(1,1),J.setSelectionRange(0,0))};const R=this._elementRef.nativeElement,L=R.nodeName.toLowerCase();this._inputValueAccessor=p||R,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&E.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===L,this._isTextarea="textarea"===L,this._isInFormField=!!T,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=fl(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(LE.required)??!1}set required(t){this._required=fl(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&t0().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fl(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,r=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(r!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=r,r?i.setAttribute("placeholder",r):i.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){tI.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(zi),d.Y36($o,10),d.Y36(dc,8),d.Y36(qg,8),d.Y36(gE),d.Y36(eI,10),d.Y36(dx),d.Y36(d.R0b),d.Y36(cs,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&d.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(d.Ikx("disabled",r.disabled)("required",r.required),d.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),d.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[d._Bn([{provide:Rv,useExisting:n}]),d.qOj,d.TTD]}),n})(),Fv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[gE],imports:[Pv,tm,ls,Pv,tm]}),n})(),hc=(()=>{class n{constructor(t){this.dialogRef=t,this.name=""}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ng))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-dialog-add-player"]],decls:14,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["matInput","",3,"ngModel","ngModelChange"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,r){1&t&&(d.TgZ(0,"h1",0),d._uU(1,"Add new player"),d.qZA(),d.TgZ(2,"div",1)(3,"p"),d._uU(4,"Please enter your name"),d.qZA(),d.TgZ(5,"mat-form-field")(6,"mat-label"),d._uU(7,"Name"),d.qZA(),d.TgZ(8,"input",2),d.NdJ("ngModelChange",function(o){return r.name=o}),d.qZA()()(),d.TgZ(9,"div",3)(10,"button",4),d.NdJ("click",function(){return r.onNoClick()}),d._uU(11,"No Thanks"),d.qZA(),d.TgZ(12,"button",5),d._uU(13,"Ok"),d.qZA()()),2&t&&(d.xp6(8),d.Q6J("ngModel",r.name),d.xp6(4),d.Q6J("disabled",0==r.name.length)("mat-dialog-close",r.name))},dependencies:[Fg,eC,Tf,Mv,ux,Ov,px,a1,l1,OE,Pg]}),n})();var cn=F(5813);function Sf(){return(0,Nt.e)((n,e)=>{let t,r=!1;n.subscribe((0,Wn.x)(e,i=>{const o=t;t=i,r&&e.next([o,i]),r=!0}))})}var pt,qr=F(2011),z1=(F(5881),F(3942)),Ae=F(5861),Wi=F(9681),Af=F(4859),Sa=F(1877),ne=F(2090),G1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Aa={},nm=nm||{},jt=G1||self;function Fd(){}function rm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Ld(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var im="closure_uid_"+(1e9*Math.random()>>>0),rI=0;function sm(n,e,t){return n.call.apply(n.bind,arguments)}function om(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Jr(n,e,t){return(Jr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?sm:om).apply(null,arguments)}function am(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ei(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var c=Array(arguments.length-2),h=2;h<arguments.length;h++)c[h-2]=arguments[h];return e.prototype[i].apply(r,c)}}function vl(){this.s=this.s,this.o=this.o}var _x={};vl.prototype.s=!1,vl.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function gx(n){return Object.prototype.hasOwnProperty.call(n,im)&&n[im]||(n[im]=++rI)}(this);delete _x[n]}},vl.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const yx=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},vx=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let o=0;o<r;o++)o in i&&e.call(t,i[o],o,n)};function sI(n){return Array.prototype.concat.apply([],arguments)}function Lv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function lm(n){return/^[\s\xa0]*$/.test(n)}var ds,bx=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function us(n,e){return-1!=n.indexOf(e)}function oI(n,e){return n<e?-1:n>e?1:0}e:{var wx=jt.navigator;if(wx){var aI=wx.userAgent;if(aI){ds=aI;break e}}ds=""}function Vd(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function lI(n){const e={};for(const t in n)e[t]=n[t];return e}var cI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Vv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let o=0;o<cI.length;o++)t=cI[o],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function bl(n){return bl[" "](n),n}bl[" "]=Fd;var Uv,n,Bv=us(ds,"Opera"),fc=us(ds,"Trident")||us(ds,"MSIE"),dI=us(ds,"Edge"),Mf=dI||fc,cm=us(ds,"Gecko")&&!(us(ds.toLowerCase(),"webkit")&&!us(ds,"Edge"))&&!(us(ds,"Trident")||us(ds,"MSIE"))&&!us(ds,"Edge"),um=us(ds.toLowerCase(),"webkit")&&!us(ds,"Edge");function Ex(){var n=jt.document;return n?n.documentMode:void 0}e:{var hI="",fI=(n=ds,cm?/rv:([^\);]+)(\)|;)/.exec(n):dI?/Edge\/([\d\.]+)/.exec(n):fc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):um?/WebKit\/(\S+)/.exec(n):Bv?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fI&&(hI=fI?fI[1]:""),fc){var dm=Ex();if(null!=dm&&dm>parseFloat(hI)){Uv=String(dm);break e}}Uv=hI}var Cx={};var gI=jt.document&&fc&&(Ex()||parseInt(Uv,10))||void 0,mI=function(){if(!jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{jt.addEventListener("test",Fd,e),jt.removeEventListener("test",Fd,e)}catch{}return n}();function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function xf(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cm){e:{try{bl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Dx[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xf.Z.h.call(this)}}hi.prototype.h=function(){this.defaultPrevented=!0},ei(xf,hi);var Dx={2:"touch",3:"pen",4:"mouse"};xf.prototype.h=function(){xf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Bd="closure_listenable_"+(1e6*Math.random()|0),jv=0;function W1(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++jv,this.ca=this.fa=!1}function Rf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ud(n){this.src=n,this.g={},this.h=0}function $v(n,e){var t=e.type;if(t in n.g){var o,r=n.g[t],i=yx(r,e);(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Rf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function zv(n,e,t,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==e&&o.capture==!!t&&o.ia==r)return i}return-1}Ud.prototype.add=function(n,e,t,r,i){var o=n.toString();(n=this.g[o])||(n=this.g[o]=[],this.h++);var c=zv(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new W1(e,this.src,o,!!r,i)).fa=t,n.push(e)),e};var _I="closure_lm_"+(1e6*Math.random()|0),yI={};function vI(n,e,t,r,i){if(r&&r.once)return Sx(n,e,t,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vI(n,e[o],t,r,i);return null}return t=CI(t),n&&n[Bd]?n.N(e,t,Ld(r)?!!r.capture:!!r,i):bI(n,e,t,!1,r,i)}function bI(n,e,t,r,i,o){if(!e)throw Error("Invalid event type");var c=Ld(i)?!!i.capture:!!i,h=Gv(n);if(h||(n[_I]=h=new Ud(n)),(t=h.add(e,t,r,c,o)).proxy)return t;if(r=function Tx(){var e=q1;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)mI||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Mx(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Sx(n,e,t,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Sx(n,e[o],t,r,i);return null}return t=CI(t),n&&n[Bd]?n.O(e,t,Ld(r)?!!r.capture:!!r,i):bI(n,e,t,!0,r,i)}function Ax(n,e,t,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ax(n,e[o],t,r,i);else r=Ld(r)?!!r.capture:!!r,t=CI(t),n&&n[Bd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=zv(o=n.g[e],t,r,i))&&(Rf(o[t]),Array.prototype.splice.call(o,t,1),0==o.length&&(delete n.g[e],n.h--))):n&&(n=Gv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=zv(e,t,r,i)),(t=-1<n?e[n]:null)&&wI(t))}function wI(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Bd])$v(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Mx(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gv(e))?($v(t,n),0==t.h&&(t.src=null,e[_I]=null)):Rf(n)}}}function Mx(n){return n in yI?yI[n]:yI[n]="on"+n}function q1(n,e){if(n.ca)n=!0;else{e=new xf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&wI(n),n=t.call(r,e)}return n}function Gv(n){return(n=n[_I])instanceof Ud?n:null}var EI="__closure_events_fn_"+(1e9*Math.random()>>>0);function CI(n){return"function"==typeof n?n:(n[EI]||(n[EI]=function(e){return n.handleEvent(e)}),n[EI])}function fi(){vl.call(this),this.i=new Ud(this),this.P=this,this.I=null}function Ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var i=e;Vv(e=new hi(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var c=e.g=t[o];i=Wv(c,r,!0,e)&&i}if(i=Wv(c=e.g=n,r,!0,e)&&i,i=Wv(c,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Wv(c=e.g=t[o],r,!1,e)&&i}function Wv(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var c=e[o];if(c&&!c.ca&&c.capture==t){var h=c.listener,p=c.ia||c.src;c.fa&&$v(n.i,c),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}ei(fi,vl),fi.prototype[Bd]=!0,fi.prototype.removeEventListener=function(n,e,t,r){Ax(this,n,e,t,r)},fi.prototype.M=function(){if(fi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Rf(t[r]);delete n.g[e],n.h--}}this.I=null},fi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},fi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var II=jt.JSON.stringify;function s(){var n=M;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var v,l=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new u,n=>n.reset());class u{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function f(n){jt.setTimeout(()=>{throw n},0)}function g(n,e){v||function w(){var n=jt.Promise.resolve(void 0);v=function(){n.then(O)}}(),I||(v(),I=!0),M.add(n,e)}var I=!1,M=new class a{constructor(){this.h=this.g=null}add(e,t){const r=l.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function O(){for(var n;n=s();){try{n.h.call(n.g)}catch(t){f(t)}var e=l;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}I=!1}function V(n,e){fi.call(this),this.h=n||1,this.g=e||jt,this.j=Jr(this.kb,this),this.l=Date.now()}function X(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function oe(n,e,t){if("function"==typeof n)t&&(n=Jr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Jr(n.handleEvent,n)}return 2147483647<Number(e)?-1:jt.setTimeout(n,e||0)}function xe(n){n.g=oe(()=>{n.g=null,n.i&&(n.i=!1,xe(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}ei(V,fi),(pt=V.prototype).da=!1,pt.S=null,pt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ci(this,"tick"),this.da&&(X(this),this.start()))}},pt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){V.Z.M.call(this),X(this),delete this.g};class $e extends vl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:xe(this)}M(){super.M(),this.g&&(jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(n){vl.call(this),this.h=n,this.g={}}ei(Xe,vl);var ct=[];function xt(n,e,t,r){Array.isArray(t)||(t&&(ct[0]=t.toString()),t=ct);for(var i=0;i<t.length;i++){var o=vI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Be(n){Vd(n.g,function(e,t){this.g.hasOwnProperty(t)&&wI(e)},n),n.g={}}function Ct(){this.g=!0}function uo(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Kv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var c=1;c<i.length;c++)i[c]=""}}}return II(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Xe.prototype.M=function(){Xe.Z.M.call(this),Be(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ct.prototype.Aa=function(){this.g=!1},Ct.prototype.info=function(){};var wl={},hm=null;function Hd(){return hm=hm||new fi}function fm(n){hi.call(this,wl.Ma,n)}function fu(n){const e=Hd();Ci(e,new fm(e,n))}function pm(n,e){hi.call(this,wl.STAT_EVENT,n),this.stat=e}function pi(n){const e=Hd();Ci(e,new pm(e,n))}function K1(n,e){hi.call(this,wl.Na,n),this.size=e}function Yv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return jt.setTimeout(function(){n()},e)}wl.Ma="serverreachability",ei(fm,hi),wl.STAT_EVENT="statevent",ei(pm,hi),wl.Na="timingevent",ei(K1,hi);var DI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Y1={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xx(){}function Q1(){}xx.prototype.h=null;var Ox,Zv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Rx(){hi.call(this,"d")}function kx(){hi.call(this,"c")}function TI(){}function Qv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Xe(this),this.P=yz,this.W=new V(n=Mf?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new X1}function X1(){this.i=null,this.g="",this.h=!1}ei(Rx,hi),ei(kx,hi),ei(TI,xx),TI.prototype.g=function(){return new XMLHttpRequest},TI.prototype.i=function(){return{}},Ox=new TI;var yz=45e3,Nx={},SI={};function Px(n,e,t){n.K=1,n.v=kI(pu(e)),n.s=t,n.U=!0,J1(n,null)}function J1(n,e){n.F=Date.now(),Xv(n),n.A=pu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),lL(t.h,"t",r),n.C=0,t=n.l.H,n.h=new X1,n.g=RL(n.l,t?e:null,!n.s),0<n.O&&(n.L=new $e(Jr(n.Ia,n,n.g),n.O)),xt(n.V,n.g,"readystatechange",n.gb),e=n.H?lI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),fu(1),function un(n,e,t,r,i,o){n.info(function(){if(n.g)if(o)for(var c="",h=o.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var E=y[0];y=y[1];var T=E.split("_");c=2<=T.length&&"type"==T[1]?c+(E+"=")+y+"&":c+(E+"=redacted&")}}else c=null;else c=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function eL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function tL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=vz(n,t),i==SI){4==e&&(n.o=4,pi(14),r=!1),uo(n.j,n.m,null,"[Incomplete Response]");break}if(i==Nx){n.o=4,pi(15),uo(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}uo(n.j,n.m,i,null),Fx(n,i)}eL(n)&&i!=SI&&i!=Nx&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),qx(e),e.L=!0,pi(11))):(uo(n.j,n.m,t,"[Invalid Chunked Response]"),kf(n),Jv(n))}function vz(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?SI:(t=Number(e.substring(t,r)),isNaN(t)?Nx:(r+=1)+t>e.length?SI:(e=e.substr(r,t),n.C=r+t,e))}function Xv(n){n.Y=Date.now()+n.P,nL(n,n.P)}function nL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Yv(Jr(n.eb,n),e)}function AI(n){n.B&&(jt.clearTimeout(n.B),n.B=null)}function Jv(n){0==n.l.G||n.I||SL(n.l,n)}function kf(n){AI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,X(n.W),Be(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fx(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Bx(t.i,n)))if(t.I=n.N,!n.J&&Bx(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;VI(t),FI(t)}Wx(t),pi(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Yv(Jr(t.ab,t),6e3));if(1>=dL(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else Pf(t,11)}else if((n.J||t.g==n)&&VI(t),!lm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const E=y[3];null!=E&&(t.ma=E,t.h.info("VER="+t.ma));const T=y[4];null!=T&&(t.za=T,t.h.info("SVER="+t.za));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const B=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(B){var o=r.i;!o.g&&(us(B,"spdy")||us(B,"quic")||us(B,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(Ux(o,o.h),o.h=null))}if(r.D){const J=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(r.sa=J,vr(r.F,r.D,J))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=xL(r,r.H?r.la:null,r.W),c.J){hL(r.i,c);var h=c,p=r.K;p&&h.setTimeout(p),h.B&&(AI(h),Xv(h)),r.g=c}else DL(r);0<t.l.length&&LI(t)}else"stop"!=y[0]&&"close"!=y[0]||Pf(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Pf(t,7):zx(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}fu(4)}catch{}}function Lx(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(rm(n)||"string"==typeof n)vx(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(rm(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function bz(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(rm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],t&&t[o],n)}}function gm(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof gm)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Vx(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Of(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Of(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Of(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(pt=Qv.prototype).setTimeout=function(n){this.P=n},pt.gb=function(n){n=n.target;const e=this.L;e&&3==gu(n)?e.l():this.Ia(n)},pt.Ia=function(n){try{if(n==this.g)e:{const E=gu(this.g);var e=this.g.Da();const T=this.g.ba();if(!(3>E)&&(3!=E||Mf||this.g&&(this.h.h||this.g.ga()||bL(this.g)))){this.I||4!=E||7==e||fu(8==e||0>=T?3:2),AI(this);var t=this.g.ba();this.N=t;t:if(eL(this)){var r=bL(this.g);n="";var i=r.length,o=4==gu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){kf(this),Jv(this);var c="";break t}this.h.i=new jt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function qn(n,e,t,r,i,o,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+o+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lm(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,pi(12),kf(this),Jv(this);break e}uo(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fx(this,t)}this.U?(tL(this,E,c),Mf&&this.i&&3==E&&(xt(this.V,this.W,"tick",this.fb),this.W.start())):(uo(this.j,this.m,c,null),Fx(this,c)),4==E&&kf(this),this.i&&!this.I&&(4==E?SL(this.l,this):(this.i=!1,Xv(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,pi(12)):(this.o=0,pi(13)),kf(this),Jv(this)}}}catch{}},pt.fb=function(){if(this.g){var n=gu(this.g),e=this.g.ga();this.C<e.length&&(AI(this),tL(this,n,e),this.i&&4!=n&&Xv(this))}},pt.cancel=function(){this.I=!0,kf(this)},pt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function qv(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(fu(3),pi(17)),kf(this),this.o=2,Jv(this)):nL(this,this.Y-n)},(pt=gm.prototype).R=function(){Vx(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},pt.T=function(){return Vx(this),this.g.concat()},pt.get=function(n,e){return Of(this.h,n)?this.h[n]:e},pt.set=function(n,e){Of(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},pt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],o=this.get(i);n.call(e,o,i,this)}};var rL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Nf){this.g=void 0!==e?e:n.g,MI(this,n.j),this.s=n.s,xI(this,n.i),RI(this,n.m),this.l=n.l,e=n.h;var t=new nb;t.i=e.i,e.g&&(t.g=new gm(e.g),t.h=e.h),iL(this,t),this.o=n.o}else n&&(t=String(n).match(rL))?(this.g=!!e,MI(this,t[1]||"",!0),this.s=eb(t[2]||""),xI(this,t[3]||"",!0),RI(this,t[4]),this.l=eb(t[5]||"",!0),iL(this,t[6]||"",!0),this.o=eb(t[7]||"")):(this.g=!!e,this.h=new nb(null,this.g))}function pu(n){return new Nf(n)}function MI(n,e,t){n.j=t?eb(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function xI(n,e,t){n.i=t?eb(e,!0):e}function RI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function iL(n,e,t){e instanceof nb?(n.h=e,function Mz(n,e){e&&!n.j&&(jd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(oL(this,r),lL(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=tb(e,Sz)),n.h=new nb(e,n.g))}function vr(n,e,t){n.h.set(e,t)}function kI(n){return vr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function eb(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function tb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Iz),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Iz(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Nf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(tb(e,sL,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(tb(e,sL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(tb(t,"/"==t.charAt(0)?Tz:Dz,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",tb(t,Az)),n.join("")};var sL=/[#\/\?@]/g,Dz=/[#\?:]/g,Tz=/[#\?]/g,Sz=/[#\?@]/g,Az=/#/g;function nb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function jd(n){n.g||(n.g=new gm,n.h=0,n.i&&function wz(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var o=n[t].substring(0,r);i=n[t].substring(r+1)}else o=n[t];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function oL(n,e){jd(n),e=mm(n,e),Of(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Of((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Vx(n)))}function aL(n,e){return jd(n),e=mm(n,e),Of(n.g.h,e)}function lL(n,e,t){oL(n,e),0<t.length&&(n.i=null,n.g.set(mm(n,e),Lv(t)),n.h+=t.length)}function mm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function cL(n){this.l=n||Rz,n=jt.PerformanceNavigationTiming?0<(n=jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(jt.g&&jt.g.Ea&&jt.g.Ea()&&jt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=nb.prototype).add=function(n,e){jd(this),this.i=null,n=mm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){jd(this),this.g.forEach(function(t,r){vx(t,function(i){n.call(e,i,r,this)},this)},this)},pt.T=function(){jd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],o=0;o<i.length;o++)t.push(e[r]);return t},pt.R=function(n){jd(this);var e=[];if("string"==typeof n)aL(this,n)&&(e=sI(e,this.g.get(mm(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=sI(e,n[t])}return e},pt.set=function(n,e){return jd(this),this.i=null,aL(this,n=mm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var c=i;""!==r[o]&&(c+="="+encodeURIComponent(String(r[o]))),n.push(c)}}return this.i=n.join("&")};var Rz=10;function uL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function dL(n){return n.h?1:n.g?n.g.size:0}function Bx(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Ux(n,e){n.g?n.g.add(e):n.h=e}function hL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function fL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Lv(n.i)}function Hx(){}function kz(){this.g=new Hx}function Oz(n,e,t){const r=t||"";try{Lx(n,function(i,o){let c=i;Ld(i)&&(c=II(i)),e.push(r+o+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function OI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function rb(n){this.l=n.$b||null,this.j=n.ib||!1}function NI(n,e){fi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=jx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cL.prototype.cancel=function(){if(this.i=fL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Hx.prototype.stringify=function(n){return jt.JSON.stringify(n,void 0)},Hx.prototype.parse=function(n){return jt.JSON.parse(n,void 0)},ei(rb,xx),rb.prototype.g=function(){return new NI(this.l,this.j)},rb.prototype.i=function(n){return function(){return n}}({}),ei(NI,fi);var jx=0;function pL(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function ib(n){n.readyState=4,n.l=null,n.j=null,n.A=null,sb(n)}function sb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=NI.prototype).open=function(n,e){if(this.readyState!=jx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,sb(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||jt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ib(this)),this.readyState=jx},pt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,sb(this)),this.g&&(this.readyState=3,sb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;pL(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},pt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ib(this):sb(this),3==this.readyState&&pL(this)}},pt.Ua=function(n){this.g&&(this.response=this.responseText=n,ib(this))},pt.Ta=function(n){this.g&&(this.response=n,ib(this))},pt.ha=function(){this.g&&ib(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(NI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Pz=jt.JSON.parse;function ti(n){fi.call(this),this.headers=new gm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=gL,this.K=this.L=!1}ei(ti,fi);var gL="",Fz=/^https?$/i,Lz=["POST","PUT"];function Bz(n){return"content-type"==n.toLowerCase()}function mL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,_L(n),PI(n)}function _L(n){n.D||(n.D=!0,Ci(n,"complete"),Ci(n,"error"))}function yL(n){if(n.h&&typeof nm<"u"&&(!n.C[1]||4!=gu(n)||2!=n.ba()))if(n.v&&4==gu(n))oe(n.Fa,0,n);else if(Ci(n,"readystatechange"),4==gu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(rL)[1]||null;if(!i&&jt.self&&jt.self.location){var o=jt.self.location.protocol;i=o.substr(0,o.length-1)}r=!Fz.test(i?i.toLowerCase():"")}t=r}if(t)Ci(n,"complete"),Ci(n,"success");else{n.m=6;try{var c=2<gu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",_L(n)}}finally{PI(n)}}}function PI(n,e){if(n.g){vL(n);const t=n.g,r=n.C[0]?Fd:null;n.g=null,n.C=null,e||Ci(n,"ready");try{t.onreadystatechange=r}catch{}}}function vL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(jt.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function bL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case gL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $x(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function Uz(n){let e="";return Vd(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):vr(n,e,t))}function ob(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function wL(n){this.za=0,this.l=[],this.h=new Ct,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ob("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ob("baseRetryDelayMs",5e3,n),this.$a=ob("retryDelaySeedMs",1e4,n),this.Ya=ob("forwardChannelMaxRetries",2,n),this.ra=ob("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new cL(n&&n.concurrentRequestLimit),this.Ca=new kz,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function zx(n){if(EL(n),3==n.G){var e=n.V++,t=pu(n.F);vr(t,"SID",n.J),vr(t,"RID",e),vr(t,"TYPE","terminate"),ab(n,t),(e=new Qv(n,n.h,e,void 0)).K=2,e.v=kI(pu(t)),t=!1,jt.navigator&&jt.navigator.sendBeacon&&(t=jt.navigator.sendBeacon(e.v.toString(),"")),!t&&jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=RL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Xv(e)}ML(n)}function FI(n){n.g&&(qx(n),n.g.cancel(),n.g=null)}function EL(n){FI(n),n.u&&(jt.clearTimeout(n.u),n.u=null),VI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&jt.clearTimeout(n.m),n.m=null)}function Gx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&LI(n)}function LI(n){uL(n.i)||n.m||(n.m=!0,g(n.Ha,n),n.C=0)}function CL(n,e){var t;t=e?e.m:n.V++;const r=pu(n.F);vr(r,"SID",n.J),vr(r,"RID",t),vr(r,"AID",n.U),ab(n,r),n.o&&n.s&&$x(r,n.o,n.s),t=new Qv(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=IL(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Ux(n.i,t),Px(t,r,e)}function ab(n,e){n.j&&Lx({},function(t,r){vr(e,r,t)})}function IL(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Jr(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const c=["count="+t];-1==o?0<t?(o=i[0].h,c.push("ofs="+o)):o=0:c.push("ofs="+o);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const E=i[p].g;if(y-=o,0>y)o=Math.max(0,i[p].h-100),h=!1;else try{Oz(E,c,"req"+y+"_")}catch{r&&r(E)}}if(h){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function DL(n){n.g||n.u||(n.Y=1,g(n.Ga,n),n.A=0)}function Wx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Yv(Jr(n.Ga,n),AL(n,n.A)),n.A++,0))}function qx(n){null!=n.B&&(jt.clearTimeout(n.B),n.B=null)}function TL(n){n.g=new Qv(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=pu(n.oa);vr(e,"RID","rpc"),vr(e,"SID",n.J),vr(e,"CI",n.N?"0":"1"),vr(e,"AID",n.U),ab(n,e),vr(e,"TYPE","xmlhttp"),n.o&&n.s&&$x(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=kI(pu(e)),t.s=null,t.U=!0,J1(t,n)}function VI(n){null!=n.v&&(jt.clearTimeout(n.v),n.v=null)}function SL(n,e){var t=null;if(n.g==e){VI(n),qx(n),n.g=null;var r=2}else{if(!Bx(n.i,e))return;t=e.D,hL(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Ci(r=Hd(),new K1(r,t,e,i)),LI(n)}else DL(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function Hz(n,e){return!(dL(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Yv(Jr(n.Ha,n,e),AL(n,n.C)),n.C++,0)))}(n,e)||2==r&&Wx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Pf(n,5);break;case 4:Pf(n,10);break;case 3:Pf(n,6);break;default:Pf(n,2)}}function AL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Pf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Jr(n.jb,n);t||(t=new Nf("//www.google.com/images/cleardot.gif"),jt.location&&"http"==jt.location.protocol||MI(t,"https"),kI(t)),function Nz(n,e){const t=new Ct;if(jt.Image){const r=new Image;r.onload=am(OI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=am(OI,t,r,"TestLoadImage: error",!1,e),r.onabort=am(OI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=am(OI,t,r,"TestLoadImage: timeout",!1,e),jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else pi(2);n.G=0,n.j&&n.j.va(e),ML(n),EL(n)}function ML(n){n.G=0,n.I=-1,n.j&&((0!=fL(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Lv(n.l),n.l.length=0),n.j.ua())}function xL(n,e,t){let r=function Ez(n){return n instanceof Nf?pu(n):new Nf(n,void 0)}(t);if(""!=r.i)e&&xI(r,e+"."+r.i),RI(r,r.m);else{const i=jt.location;r=function Cz(n,e,t,r){var i=new Nf(null,void 0);return n&&MI(i,n),e&&xI(i,e),t&&RI(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Vd(n.aa,function(i,o){vr(r,o,i)}),t=n.sa,(e=n.D)&&t&&vr(r,e,t),vr(r,"VER",n.ma),ab(n,r),r}function RL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ti(t&&n.Ba&&!n.qa?new rb({ib:!0}):n.qa)).L=n.H,e}function kL(){}function BI(){if(fc&&!(10<=Number(gI)))throw Error("Environmental error: no available transport.")}function Go(n,e){fi.call(this),this.g=new wL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!lm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!lm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new _m(this)}function OL(n){Rx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function NL(){kx.call(this),this.status=1}function _m(n){this.g=n}(pt=ti.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ox.g(),this.C=function Z1(n){return n.h||(n.h=n.i())}(this.u?this.u:Ox),this.g.onreadystatechange=Jr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(o){return void mL(this,o)}n=t||"";const i=new gm(this.headers);r&&Lx(r,function(o,c){i.set(c,o)}),r=function iI(n){e:{var e=Bz;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=jt.FormData&&n instanceof jt.FormData,!(0<=yx(Lz,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,c){this.g.setRequestHeader(c,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vL(this),0<this.B&&((this.K=function Vz(n){return fc&&function Ix(){return function uI(n){var e=Cx;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=bx(String(Uv)).split("."),t=bx("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",o=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==i[0].length&&0==o[0].length)break;n=oI(0==i[1].length?0:parseInt(i[1],10),0==o[1].length?0:parseInt(o[1],10))||oI(0==i[2].length,0==o[2].length)||oI(i[2],o[2]),i=i[3],o=o[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jr(this.pa,this)):this.A=oe(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){mL(this,o)}},pt.pa=function(){typeof nm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ci(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Ci(this,"complete"),Ci(this,"abort"),PI(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),PI(this,!0)),ti.Z.M.call(this)},pt.Fa=function(){this.s||(this.F||this.v||this.l?yL(this):this.cb())},pt.cb=function(){yL(this)},pt.ba=function(){try{return 2<gu(this)?this.g.status:-1}catch{return-1}},pt.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},pt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Pz(e)}},pt.Da=function(){return this.m},pt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=wL.prototype).ma=8,pt.G=1,pt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},pt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Qv(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=lI(o),Vv(o,this.P)):o=this.P),null===this.o&&(i.H=o),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=IL(this,i,e),vr(t=pu(this.F),"RID",n),vr(t,"CVER",22),this.D&&vr(t,"X-HTTP-Session-Id",this.D),ab(this,t),this.o&&o&&$x(t,this.o,o),Ux(this.i,i),this.Ra&&vr(t,"TYPE","init"),this.ja?(vr(t,"$req",e),vr(t,"SID","null"),i.$=!0,Px(i,t,null)):Px(i,t,e),this.G=2}}else 3==this.G&&(n?CL(this,n):0==this.l.length||uL(this.i)||CL(this))},pt.Ga=function(){if(this.u=null,TL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Yv(Jr(this.bb,this),n)}},pt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,pi(10),FI(this),TL(this))},pt.ab=function(){null!=this.v&&(this.v=null,FI(this),Wx(this),pi(19))},pt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),pi(2)):(this.h.info("Failed to ping google.com"),pi(1))},(pt=kL.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Oa=function(){},BI.prototype.g=function(n,e){return new Go(n,e)},ei(Go,fi),Go.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),g(Jr(n.hb,n,e))),pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=xL(n,null,n.W),LI(n)},Go.prototype.close=function(){zx(this.g)},Go.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Gx(this.g,e)}else this.v?((e={}).__data__=II(n),Gx(this.g,e)):Gx(this.g,n)},Go.prototype.M=function(){this.g.j=null,delete this.j,zx(this.g),delete this.g,Go.Z.M.call(this)},ei(OL,Rx),ei(NL,kx),ei(_m,kL),_m.prototype.xa=function(){Ci(this.g,"a")},_m.prototype.wa=function(n){Ci(this.g,new OL(n))},_m.prototype.va=function(n){Ci(this.g,new NL(n))},_m.prototype.ua=function(){Ci(this.g,"b")},BI.prototype.createWebChannel=BI.prototype.g,Go.prototype.send=Go.prototype.u,Go.prototype.open=Go.prototype.m,Go.prototype.close=Go.prototype.close,DI.NO_ERROR=0,DI.TIMEOUT=8,DI.HTTP_ERROR=6,Y1.COMPLETE="complete",Q1.EventType=Zv,Zv.OPEN="a",Zv.CLOSE="b",Zv.ERROR="c",Zv.MESSAGE="d",fi.prototype.listen=fi.prototype.N,ti.prototype.listenOnce=ti.prototype.O,ti.prototype.getLastError=ti.prototype.La,ti.prototype.getLastErrorCode=ti.prototype.Da,ti.prototype.getStatus=ti.prototype.ba,ti.prototype.getResponseJson=ti.prototype.Qa,ti.prototype.getResponseText=ti.prototype.ga,ti.prototype.send=ti.prototype.ea;var jz=Aa.createWebChannelTransport=function(){return new BI},$z=Aa.getStatEventTarget=function(){return Hd()},Kx=Aa.ErrorCode=DI,zz=Aa.EventType=Y1,Gz=Aa.Event=wl,PL=Aa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Wz=Aa.FetchXmlHttpFactory=rb,UI=Aa.WebChannel=Q1,qz=Aa.XhrIo=ti;const FL="@firebase/firestore";class Ii{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ii.UNAUTHENTICATED=new Ii(null),Ii.GOOGLE_CREDENTIALS=new Ii("google-credentials-uid"),Ii.FIRST_PARTY=new Ii("first-party-uid"),Ii.MOCK_USER=new Ii("mock-user");let ym="9.9.1";const $d=new Sa.Yd("@firebase/firestore");function Yx(){return $d.logLevel}function ze(n,...e){if($d.logLevel<=Sa.in.DEBUG){const t=e.map(Zx);$d.debug(`Firestore (${ym}): ${n}`,...t)}}function ni(n,...e){if($d.logLevel<=Sa.in.ERROR){const t=e.map(Zx);$d.error(`Firestore (${ym}): ${n}`,...t)}}function lb(n,...e){if($d.logLevel<=Sa.in.WARN){const t=e.map(Zx);$d.warn(`Firestore (${ym}): ${n}`,...t)}}function Zx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function mt(n="Unexpected state"){const e=`FIRESTORE (${ym}) INTERNAL ASSERTION FAILED: `+n;throw ni(e),new Error(e)}function Ut(n,e){n||mt()}function ot(n,e){return n}const be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class He extends ne.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Di{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class LL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zz{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ii.UNAUTHENTICATED))}shutdown(){}}class Qz{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xz{constructor(e){this.t=e,this.currentUser=Ii.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const o=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let c=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Di,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const y=c;e.enqueueRetryable((0,Ae.Z)(function*(){yield y.promise,yield o(r.currentUser)}))},p=y=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Di)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ut("string"==typeof r.accessToken),new LL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ut(null===e||"string"==typeof e),new Ii(e)}}class Jz{constructor(e,t,r){this.type="FirstParty",this.user=Ii.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class eG{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Jz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ii.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class VL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tG{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=o=>{null!=o.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.p;return this.p=o.token,ze("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ut("string"==typeof t.token),this.p=t.token,new VL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nG(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class BL{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=nG(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Xt(n,e){return n<e?-1:n>e?1:0}function vm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function UL(n){return n+"\0"}class br{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new He(be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new He(be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return br.fromMillis(Date.now())}static fromDate(e){return br.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new br(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Xt(this.nanoseconds,e.nanoseconds):Xt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Vt(e)}static min(){return new Vt(new br(0,0))}static max(){return new Vt(new br(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class cb{constructor(e,t,r){void 0===t?t=0:t>e.length&&mt(),void 0===r?r=e.length-t:r>e.length-t&&mt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===cb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yn extends cb{construct(e,t,r){return new yn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yn(t)}static emptyPath(){return new yn([])}}const rG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kr extends cb{construct(e,t,r){return new Kr(e,t,r)}static isValidIdentifier(e){return rG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Kr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(0===r.length)throw new He(be.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new He(be.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new He(be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(c=!c,i++):"."!==h||c?(r+=h,i++):(o(),i++)}if(o(),c)throw new He(be.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kr(t)}static emptyPath(){return new Kr([])}}class tt{constructor(e){this.path=e}static fromPath(e){return new tt(yn.fromString(e))}static fromName(e){return new tt(yn.fromString(e).popFirst(5))}static empty(){return new tt(yn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===yn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return yn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new yn(e.slice()))}}class HI{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Qx(n){return n.fields.find(e=>2===e.kind)}function Ff(n){return n.fields.filter(e=>2!==e.kind)}HI.UNKNOWN_ID=-1;class jI{constructor(e,t){this.fieldPath=e,this.kind=t}}class ub{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ub(0,Wo.min())}}function HL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Vt.fromTimestamp(1e9===r?new br(t+1,0):new br(t,r));return new Wo(i,tt.empty(),e)}function jL(n){return new Wo(n.readTime,n.key,-1)}class Wo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Wo(Vt.min(),tt.empty(),-1)}static max(){return new Wo(Vt.max(),tt.empty(),-1)}}function Xx(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=tt.comparator(n.documentKey,e.documentKey),0!==t?t:Xt(n.largestBatchId,e.largestBatchId))}const $L="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zd(n){return Jx.apply(this,arguments)}function Jx(){return Jx=(0,Ae.Z)(function*(n){if(n.code!==be.FAILED_PRECONDITION||n.message!==$L)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),Jx.apply(this,arguments)}class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&mt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new me((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof me?t:me.resolve(t)}catch(t){return me.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):me.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):me.reject(t)}static resolve(e){return new me((t,r)=>{t(e)})}static reject(e){return new me((t,r)=>{r(e)})}static waitFor(e){return new me((t,r)=>{let i=0,o=0,c=!1;e.forEach(h=>{++i,h.next(()=>{++o,c&&o===i&&t()},p=>r(p))}),c=!0,o===i&&t()})}static or(e){let t=me.resolve(!1);for(const r of e)t=t.next(i=>i?me.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new me((r,i)=>{const o=e.length,c=new Array(o);let h=0;for(let p=0;p<o;p++){const y=p;t(e[y]).next(E=>{c[y]=E,++h,h===o&&r(c)},E=>i(E))}})}static doWhile(e,t){return new me((r,i)=>{const o=()=>{!0===e()?t().next(()=>{o()},i):r()};o()})}}class $I{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new Di,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new db(e,t.error)):this.T.resolve()},this.transaction.onerror=r=>{const i=eR(r.target.error);this.T.reject(new db(e,i))}}static open(e,t,r,i){try{return new $I(t,e.transaction(i,r))}catch(o){throw new db(t,o)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sG(t)}}class El{constructor(e,t,r){this.name=e,this.version=t,this.P=r,12.2===El.v((0,ne.z$)())&&ni("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),Lf(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,ne.hl)())return!1;if(El.S())return!0;const e=(0,ne.z$)(),t=El.v(e),r=0<t&&t<10,i=El.D(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static S(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static D(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}k(e){var t=this;return(0,Ae.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const o=indexedDB.open(t.name,t.version);o.onsuccess=c=>{r(c.target.result)},o.onblocked=()=>{i(new db(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=c=>{const h=c.target.error;i("VersionError"===h.name?new He(be.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new He(be.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new db(e,h))},o.onupgradeneeded=c=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.P.O(c.target.result,o.transaction,c.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=r=>t.M(r)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var o=this;return(0,Ae.Z)(function*(){const c="readonly"===t;let h=0;for(;;){++h;try{o.db=yield o.k(e);const p=$I.open(o.db,e,c?"readonly":"readwrite",r),y=i(p).next(E=>(p.R(),E)).catch(E=>(p.abort(E),me.reject(E))).toPromise();return y.catch(()=>{}),yield p.A,y}catch(p){const y=p,E="FirebaseError"!==y.name&&h<3;if(ze("SimpleDb","Transaction failed with error:",y.message,"Retrying:",E),o.close(),!E)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class iG{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return Lf(this.$.delete())}}class db extends He{constructor(e,t){super(be.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gd(n){return"IndexedDbTransactionError"===n.name}class sG{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Lf(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),Lf(this.store.add(e))}get(e){return Lf(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),Lf(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),Lf(this.store.count())}K(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),o=[];return this.G(i,(c,h)=>{o.push(h)}).next(()=>o)}{const i=this.store.getAll(r.range);return new me((o,c)=>{i.onerror=h=>{c(h.target.error)},i.onsuccess=h=>{o(h.target.result)}})}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new me((i,o)=>{r.onerror=c=>{o(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}W(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.G(i,(o,c,h)=>h.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Y(e){const t=this.cursor({});return new me((r,i)=>{t.onerror=o=>{const c=eR(o.target.error);i(c)},t.onsuccess=o=>{const c=o.target.result;c?e(c.primaryKey,c.value).next(h=>{h?c.continue():r()}):r()}})}G(e,t){const r=[];return new me((i,o)=>{e.onerror=c=>{o(c.target.error)},e.onsuccess=c=>{const h=c.target.result;if(!h)return void i();const p=new iG(h),y=t(h.primaryKey,h.value,p);if(y instanceof me){const E=y.catch(T=>(p.done(),me.reject(T)));r.push(E)}p.isDone?i():null===p.U?h.continue():h.continue(p.U)}}).next(()=>me.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Lf(n){return new me((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=eR(r.target.error);t(i)}})}let GL=!1;function eR(n){const e=El.v((0,ne.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new He("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GL||(GL=!0,setTimeout(()=>{throw r},0)),r}}return n}class oG{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;ze("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ae.Z)(function*(){t.task=null;try{ze("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(r){Gd(r)?ze("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield zd(r)}yield t.Z(1)}))}}class aG{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ae.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.et(r,e))})()}et(e,t){const r=new Set;let i=t,o=!0;return me.doWhile(()=>!0===o&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ze("IndexBackiller",`Processing collection: ${c}`),this.nt(e,c,i).next(h=>{i-=h,r.add(c)});o=!1})).next(()=>t-i)}nt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{const c=o.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.st(i,o)).next(h=>(ze("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>c.size)}))}st(e,t){let r=e;return t.changes.forEach((i,o)=>{const c=jL(o);Xx(c,r)>0&&(r=c)}),new Wo(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ho{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.it(r),this.rt=r=>t.writeSequenceNumber(r))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function WL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Vf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function qL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ho.ot=-1;class Hr{constructor(e,t){this.comparator=e,this.root=t||qi.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zI(this.root,e,this.comparator,!1)}getReverseIterator(){return new zI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zI(this.root,e,this.comparator,!0)}}class zI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(0===o){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qi{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??qi.RED,this.left=i??qi.EMPTY,this.right=o??qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new qi(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===o?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return qi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw mt();const e=this.left.check();if(e!==this.right.check())throw mt();return e+(this.isRed()?0:1)}}qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1,qi.EMPTY=new class{constructor(){this.size=0}get key(){throw mt()}get value(){throw mt()}get color(){throw mt()}get left(){throw mt()}get right(){throw mt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new qi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jn{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new KL(this.data.getIterator())}getIteratorFrom(e){return new KL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof jn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jn(this.comparator);return t.data=e,t}}class KL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function bm(n){return n.hasNext()?n.getNext():void 0}class qo{constructor(e){this.fields=e,e.sort(Kr.comparator)}static empty(){return new qo([])}unionWith(e){let t=new jn(Kr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new qo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class gi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new gi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(e);return new gi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gi.EMPTY_BYTE_STRING=new gi("");const cG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wd(n){if(Ut(!!n),"string"==typeof n){let e=0;const t=cG.exec(n);if(Ut(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jr(n.seconds),nanos:jr(n.nanos)}}function jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Bf(n){return"string"==typeof n?gi.fromBase64String(n):gi.fromUint8Array(n)}function tR(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function YL(n){const e=n.mapValue.fields.__previous_value__;return tR(e)?YL(e):e}function hb(n){const e=Wd(n.mapValue.fields.__local_write_time__.timestampValue);return new br(e.seconds,e.nanos)}class uG{constructor(e,t,r,i,o,c,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class mu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new mu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}function fb(n){return null==n}function pb(n){return 0===n&&1/n==-1/0}function ZL(n){return"number"==typeof n&&Number.isInteger(n)&&!pb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const qd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},GI={nullValue:"NULL_VALUE"};function Uf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tR(n)?4:eV(n)?9007199254740991:10:mt()}function pc(n,e){if(n===e)return!0;const t=Uf(n);if(t!==Uf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hb(n).isEqual(hb(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=Wd(r.timestampValue),c=Wd(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Bf(n.bytesValue).isEqual(Bf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return jr(r.geoPointValue.latitude)===jr(i.geoPointValue.latitude)&&jr(r.geoPointValue.longitude)===jr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return jr(r.integerValue)===jr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=jr(r.doubleValue),c=jr(i.doubleValue);return o===c?pb(o)===pb(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return vm(n.arrayValue.values||[],e.arrayValue.values||[],pc);case 10:return function(r,i){const o=r.mapValue.fields||{},c=i.mapValue.fields||{};if(WL(o)!==WL(c))return!1;for(const h in o)if(o.hasOwnProperty(h)&&(void 0===c[h]||!pc(o[h],c[h])))return!1;return!0}(n,e);default:return mt()}var i}function gb(n,e){return void 0!==(n.values||[]).find(t=>pc(t,e))}function Kd(n,e){if(n===e)return 0;const t=Uf(n),r=Uf(e);if(t!==r)return Xt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xt(n.booleanValue,e.booleanValue);case 2:return function(i,o){const c=jr(i.integerValue||i.doubleValue),h=jr(o.integerValue||o.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1}(n,e);case 3:return QL(n.timestampValue,e.timestampValue);case 4:return QL(hb(n),hb(e));case 5:return Xt(n.stringValue,e.stringValue);case 6:return function(i,o){const c=Bf(i),h=Bf(o);return c.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),h=o.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Xt(c[p],h[p]);if(0!==y)return y}return Xt(c.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const c=Xt(jr(i.latitude),jr(o.latitude));return 0!==c?c:Xt(jr(i.longitude),jr(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,o){const c=i.values||[],h=o.values||[];for(let p=0;p<c.length&&p<h.length;++p){const y=Kd(c[p],h[p]);if(y)return y}return Xt(c.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,o){if(i===qd.mapValue&&o===qd.mapValue)return 0;if(i===qd.mapValue)return 1;if(o===qd.mapValue)return-1;const c=i.fields||{},h=Object.keys(c),p=o.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let E=0;E<h.length&&E<y.length;++E){const T=Xt(h[E],y[E]);if(0!==T)return T;const R=Kd(c[h[E]],p[y[E]]);if(0!==R)return R}return Xt(h.length,y.length)}(n.mapValue,e.mapValue);default:throw mt()}}function QL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Xt(n,e);const t=Wd(n),r=Wd(e),i=Xt(t.seconds,r.seconds);return 0!==i?i:Xt(t.nanos,r.nanos)}function wm(n){return nR(n)}function nR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Wd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Bf(n.bytesValue).toBase64():"referenceValue"in n?tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const c of r.values||[])o?o=!1:i+=",",i+=nR(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",c=!0;for(const h of i)c?c=!1:o+=",",o+=`${h}:${nR(r.fields[h])}`;return o+"}"}(n.mapValue):mt();var e}function Hf(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function rR(n){return!!n&&"integerValue"in n}function mb(n){return!!n&&"arrayValue"in n}function XL(n){return!!n&&"nullValue"in n}function JL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function WI(n){return!!n&&"mapValue"in n}function _b(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Vf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_b(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_b(n.arrayValue.values[t]);return e}return Object.assign({},n)}function eV(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function dG(n){return"nullValue"in n?GI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Hf(mu.empty(),tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:mt()}function hG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Hf(mu.empty(),tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?qd:mt()}function tV(n,e){const t=Kd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function nV(n,e){const t=Kd(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!WI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_b(t)}setAll(e){let t=Kr.emptyPath(),r={},i=[];e.forEach((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}c?r[h.lastSegment()]=_b(c):i.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());WI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];WI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Vf(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Ki(_b(this.value))}}function rV(n){const e=[];return Vf(n.fields,(t,r)=>{const i=new Kr([t]);if(WI(r)){const o=rV(r.mapValue).fields;if(0===o.length)e.push(i);else for(const c of o)e.push(i.child(c))}else e.push(i)}),new qo(e)}class Qn{constructor(e,t,r,i,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Qn(e,0,Vt.min(),Vt.min(),Ki.empty(),0)}static newFoundDocument(e,t,r){return new Qn(e,1,t,Vt.min(),r,0)}static newNoDocument(e,t){return new Qn(e,2,t,Vt.min(),Ki.empty(),0)}static newUnknownDocument(e,t){return new Qn(e,3,t,Vt.min(),Ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fG{constructor(e,t=null,r=[],i=[],o=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=h,this.ut=null}}function iV(n,e=null,t=[],r=[],i=null,o=null,c=null){return new fG(n,e,t,r,i,o,c)}function jf(n){const e=ot(n);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+wm(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),fb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>wm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>wm(r)).join(",")),e.ut=t}return e.ut}function yb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!EG(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!pc(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!cV(n.startAt,e.startAt)&&cV(n.endAt,e.endAt)}function qI(n){return tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function KI(n,e){return n.filters.filter(t=>t instanceof Yi&&t.field.isEqual(e))}function sV(n,e,t){let r=GI,i=!0;for(const o of KI(n,e)){let c=GI,h=!0;switch(o.op){case"<":case"<=":c=dG(o.value);break;case"==":case"in":case">=":c=o.value;break;case">":c=o.value,h=!1;break;case"!=":case"not-in":c=GI}tV({value:r,inclusive:i},{value:c,inclusive:h})<0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];tV({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function oV(n,e,t){let r=qd,i=!0;for(const o of KI(n,e)){let c=qd,h=!0;switch(o.op){case">=":case">":c=hG(o.value),h=!1;break;case"==":case"in":case"<=":c=o.value;break;case"<":c=o.value,h=!1;break;case"!=":case"not-in":c=qd}nV({value:r,inclusive:i},{value:c,inclusive:h})>0&&(r=c,i=h)}if(null!==t)for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const c=t.position[o];nV({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class Yi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new gG(e,t,r):"array-contains"===t?new yG(e,r):"in"===t?new vG(e,r):"not-in"===t?new bG(e,r):"array-contains-any"===t?new wG(e,r):new Yi(e,t,r)}static ct(e,t,r){return"in"===t?new mG(e,r):new _G(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Kd(t,this.value)):null!==t&&Uf(this.value)===Uf(t)&&this.at(Kd(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return mt()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class gG extends Yi{constructor(e,t,r){super(e,t,r),this.key=tt.fromName(r.referenceValue)}matches(e){const t=tt.comparator(e.key,this.key);return this.at(t)}}class mG extends Yi{constructor(e,t){super(e,"in",t),this.keys=aV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _G extends Yi{constructor(e,t){super(e,"not-in",t),this.keys=aV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function aV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>tt.fromName(r.referenceValue))}class yG extends Yi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mb(t)&&gb(t.arrayValue,this.value)}}class vG extends Yi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gb(this.value.arrayValue,t)}}class bG extends Yi{constructor(e,t){super(e,"not-in",t)}matches(e){if(gb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gb(this.value.arrayValue,t)}}class wG extends Yi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mb(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gb(this.value.arrayValue,r))}}class Yd{constructor(e,t){this.position=e,this.inclusive=t}}class Em{constructor(e,t="asc"){this.field=e,this.dir=t}}function EG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function lV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],c=n.position[i];if(r=o.field.isKeyField()?tt.comparator(tt.fromName(c.referenceValue),t.key):Kd(c,t.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function cV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!pc(n.position[t],e.position[t]))return!1;return!0}class _u{constructor(e,t=null,r=[],i=[],o=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=h,this.endAt=p,this.lt=null,this.ft=null}}function uV(n,e,t,r,i,o,c,h){return new _u(n,e,t,r,i,o,c,h)}function Cm(n){return new _u(n)}function iR(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function sR(n){for(const e of n.filters)if(e.ht())return e.field;return null}function oR(n){return null!==n.collectionGroup}function Im(n){const e=ot(n);if(null===e.lt){e.lt=[];const t=sR(e),r=iR(e);if(null!==t&&null===r)t.isKeyField()||e.lt.push(new Em(t)),e.lt.push(new Em(Kr.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.lt.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Em(Kr.keyField(),o))}}}return e.lt}function Ma(n){const e=ot(n);if(!e.ft)if("F"===e.limitType)e.ft=iV(e.path,e.collectionGroup,Im(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const o of Im(e))t.push(new Em(o.field,"desc"===o.dir?"asc":"desc"));const r=e.endAt?new Yd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Yd(e.startAt.position,e.startAt.inclusive):null;e.ft=iV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.ft}function dV(n,e,t){return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vb(n,e){return yb(Ma(n),Ma(e))&&n.limitType===e.limitType}function hV(n){return`${jf(Ma(n))}|lt:${n.limitType}`}function aR(n){return`Query(target=${function pG(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${wm(r.value)}`;var r}).join(", ")}]`),fb(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>wm(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>wm(t)).join(",")),`Target(${e})`}(Ma(n))}; limitType=${n.limitType})`}function lR(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):tt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,o,c){const h=lV(i,o,c);return i.inclusive?h<=0:h<0}(t.startAt,Im(t),r)||t.endAt&&!function(i,o,c){const h=lV(i,o,c);return i.inclusive?h>=0:h>0}(t.endAt,Im(t),r)));var t,r}function fV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pV(n){return(e,t)=>{let r=!1;for(const i of Im(n)){const o=IG(i,e,t);if(0!==o)return o;r=r||i.field.isKeyField()}return 0}}function IG(n,e,t){const r=n.field.isKeyField()?tt.comparator(e.key,t.key):function(i,o,c){const h=o.data.field(i),p=c.data.field(i);return null!==h&&null!==p?Kd(h,p):mt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return mt()}}function gV(n,e){if(n.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pb(e)?"-0":e}}function mV(n){return{integerValue:""+n}}function _V(n,e){return ZL(e)?mV(e):gV(n,e)}class YI{constructor(){this._=void 0}}function DG(n,e,t){return n instanceof Dm?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(t,e):n instanceof $f?vV(n,e):n instanceof zf?bV(n,e):function(r,i){const o=yV(r,i),c=wV(o)+wV(r._t);return rR(o)&&rR(r._t)?mV(c):gV(r.wt,c)}(n,e)}function TG(n,e,t){return n instanceof $f?vV(n,e):n instanceof zf?bV(n,e):t}function yV(n,e){return n instanceof Tm?rR(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Dm extends YI{}class $f extends YI{constructor(e){super(),this.elements=e}}function vV(n,e){const t=EV(e);for(const r of n.elements)t.some(i=>pc(i,r))||t.push(r);return{arrayValue:{values:t}}}class zf extends YI{constructor(e){super(),this.elements=e}}function bV(n,e){let t=EV(e);for(const r of n.elements)t=t.filter(i=>!pc(i,r));return{arrayValue:{values:t}}}class Tm extends YI{constructor(e,t){super(),this.wt=e,this._t=t}}function wV(n){return jr(n.integerValue||n.doubleValue)}function EV(n){return mb(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bb{constructor(e,t){this.field=e,this.transform=t}}class AG{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ZI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QI{}function CV(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Am(n.key,kr.none()):new Sm(n.key,n.data,kr.none());{const t=n.data,r=Ki.empty();let i=new jn(Kr.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);null===c&&o.length>1&&(o=o.popLast(),c=t.field(o)),null===c?r.delete(o):r.set(o,c),i=i.add(o)}return new yu(n.key,r,new qo(i.toArray()),kr.none())}}function MG(n,e,t){n instanceof Sm?function(r,i,o){const c=r.value.clone(),h=TV(r.fieldTransforms,i,o.transformResults);c.setAll(h),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof yu?function(r,i,o){if(!ZI(r.precondition,i))return void i.convertToUnknownDocument(o.version);const c=TV(r.fieldTransforms,i,o.transformResults),h=i.data;h.setAll(DV(r)),h.setAll(c),i.convertToFoundDocument(o.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function wb(n,e,t,r){return n instanceof Sm?function(i,o,c,h){if(!ZI(i.precondition,o))return c;const p=i.value.clone(),y=SV(i.fieldTransforms,h,o);return p.setAll(y),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof yu?function(i,o,c,h){if(!ZI(i.precondition,o))return c;const p=SV(i.fieldTransforms,h,o),y=o.data;return y.setAll(DV(i)),y.setAll(p),o.convertToFoundDocument(o.version,y).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(E=>E.field))}(n,e,t,r):(c=t,ZI(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c);var o,c}function xG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=yV(r.transform,i||null);null!=o&&(null===t&&(t=Ki.empty()),t.set(r.field,o))}return t||null}function IV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&vm(t,r,(i,o)=>function SG(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $f&&r instanceof $f||t instanceof zf&&r instanceof zf?vm(t.elements,r.elements,pc):t instanceof Tm&&r instanceof Tm?pc(t._t,r._t):t instanceof Dm&&r instanceof Dm);var t,r}(i,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Sm extends QI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class yu extends QI{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function DV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function TV(n,e,t){const r=new Map;Ut(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],c=o.transform,h=e.data.field(o.field);r.set(o.field,TG(c,h,t[i]))}return r}function SV(n,e,t){const r=new Map;for(const i of n){const o=i.transform,c=t.data.field(i.field);r.set(i.field,DG(o,c,e))}return r}class Am extends QI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cR extends QI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class RG{constructor(e){this.count=e}}var ri,vn;function AV(n){switch(n){default:return mt();case be.CANCELLED:case be.UNKNOWN:case be.DEADLINE_EXCEEDED:case be.RESOURCE_EXHAUSTED:case be.INTERNAL:case be.UNAVAILABLE:case be.UNAUTHENTICATED:return!1;case be.INVALID_ARGUMENT:case be.NOT_FOUND:case be.ALREADY_EXISTS:case be.PERMISSION_DENIED:case be.FAILED_PRECONDITION:case be.ABORTED:case be.OUT_OF_RANGE:case be.UNIMPLEMENTED:case be.DATA_LOSS:return!0}}function MV(n){if(void 0===n)return ni("GRPC error has no .code"),be.UNKNOWN;switch(n){case ri.OK:return be.OK;case ri.CANCELLED:return be.CANCELLED;case ri.UNKNOWN:return be.UNKNOWN;case ri.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case ri.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case ri.INTERNAL:return be.INTERNAL;case ri.UNAVAILABLE:return be.UNAVAILABLE;case ri.UNAUTHENTICATED:return be.UNAUTHENTICATED;case ri.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case ri.NOT_FOUND:return be.NOT_FOUND;case ri.ALREADY_EXISTS:return be.ALREADY_EXISTS;case ri.PERMISSION_DENIED:return be.PERMISSION_DENIED;case ri.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case ri.ABORTED:return be.ABORTED;case ri.OUT_OF_RANGE:return be.OUT_OF_RANGE;case ri.UNIMPLEMENTED:return be.UNIMPLEMENTED;case ri.DATA_LOSS:return be.DATA_LOSS;default:return mt()}}(vn=ri||(ri={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class Zd{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,o]of r)if(this.equalsFn(i,e))return o}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vf(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return qL(this.inner)}size(){return this.innerSize}}const kG=new Hr(tt.comparator);function fo(){return kG}const xV=new Hr(tt.comparator);function Eb(...n){let e=xV;for(const t of n)e=e.insert(t.key,t);return e}function RV(n){let e=xV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function gc(){return Cb()}function kV(){return Cb()}function Cb(){return new Zd(n=>n.toString(),(n,e)=>n.isEqual(e))}const OG=new Hr(tt.comparator),NG=new jn(tt.comparator);function en(...n){let e=NG;for(const t of n)e=e.add(t);return e}const PG=new jn(Xt);function XI(){return PG}class Ib{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Db.createSynthesizedTargetChangeForCurrentChange(e,t)),new Ib(Vt.min(),r,XI(),fo(),en())}}class Db{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Db(gi.EMPTY_BYTE_STRING,t,en(),en(),en())}}class JI{constructor(e,t,r,i){this.gt=e,this.removedTargetIds=t,this.key=r,this.yt=i}}class OV{constructor(e,t){this.targetId=e,this.It=t}}class NV{constructor(e,t,r=gi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class PV{constructor(){this.Tt=0,this.Et=LV(),this.At=gi.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=en(),t=en(),r=en();return this.Et.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:mt()}}),new Db(this.At,this.Rt,e,t,r)}Dt(){this.bt=!1,this.Et=LV()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class FG{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=fo(),this.Bt=FV(),this.Lt=new jn(Xt)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const r=this.Qt(t);switch(e.state){case 0:this.jt(t)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),r.Vt(e.resumeToken));break;default:mt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((r,i)=>{this.jt(i)&&t(i)})}zt(e){const t=e.targetId,r=e.It.count,i=this.Ht(t);if(i){const o=i.target;if(qI(o))if(0===r){const c=new tt(o.path);this.Kt(t,c,Qn.newNoDocument(c,Vt.min()))}else Ut(1===r);else this.Jt(t)!==r&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((o,c)=>{const h=this.Ht(c);if(h){if(o.current&&qI(h.target)){const p=new tt(h.target.path);null!==this.$t.get(p)||this.Xt(c,p)||this.Kt(c,p,Qn.newNoDocument(p,e))}o.vt&&(t.set(c,o.St()),o.Dt())}});let r=en();this.Bt.forEach((o,c)=>{let h=!0;c.forEachWhile(p=>{const y=this.Ht(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(o))}),this.$t.forEach((o,c)=>c.setReadTime(e));const i=new Ib(e,t,this.Lt,this.$t,r);return this.$t=fo(),this.Bt=FV(),this.Lt=new jn(Xt),i}qt(e,t){if(!this.jt(e))return;const r=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,r),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,r){if(!this.jt(e))return;const i=this.Qt(e);this.Xt(e,t)?i.Ct(t,1):i.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),r&&(this.$t=this.$t.insert(t,r))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new PV,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new jn(Xt),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new PV),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function FV(){return new Hr(tt.comparator)}function LV(){return new Hr(tt.comparator)}const LG={asc:"ASCENDING",desc:"DESCENDING"},VG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BG{constructor(e,t){this.databaseId=e,this.dt=t}}function Tb(n,e){return n.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VV(n,e){return n.dt?e.toBase64():e.toUint8Array()}function UG(n,e){return Tb(n,e.toTimestamp())}function Ti(n){return Ut(!!n),Vt.fromTimestamp(function(e){const t=Wd(e);return new br(t.seconds,t.nanos)}(n))}function uR(n,e){return(t=n,new yn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function BV(n){const e=yn.fromString(n);return Ut(KV(e)),e}function Sb(n,e){return uR(n.databaseId,e.path)}function mc(n,e){const t=BV(e);if(t.get(1)!==n.databaseId.projectId)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new He(be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new tt(HV(t))}function dR(n,e){return uR(n.databaseId,e)}function UV(n){const e=BV(n);return 4===e.length?yn.emptyPath():HV(e)}function Ab(n){return new yn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function HV(n){return Ut(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function jV(n,e,t){return{name:Sb(n,e),fields:t.value.mapValue.fields}}function $V(n,e,t){const r=mc(n,e.name),i=Ti(e.updateTime),o=new Ki({mapValue:{fields:e.fields}}),c=Qn.newFoundDocument(r,i,o);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Mb(n,e){let t;if(e instanceof Sm)t={update:jV(n,e.key,e.value)};else if(e instanceof Am)t={delete:Sb(n,e.key)};else if(e instanceof yu)t={update:jV(n,e.key,e.data),updateMask:YG(e.fieldMask)};else{if(!(e instanceof cR))return mt();t={verify:Sb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Dm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof $f)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof zf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Tm)return{fieldPath:o.field.canonicalString(),increment:c._t};throw mt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:UG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:mt()),t;var i}function hR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kr.updateTime(Ti(i.updateTime)):void 0!==i.exists?kr.exists(i.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,c){let h=null;"setToServerValue"in c?(Ut("REQUEST_TIME"===c.setToServerValue),h=new Dm):"appendMissingElements"in c?h=new $f(c.appendMissingElements.values||[]):"removeAllFromArray"in c?h=new zf(c.removeAllFromArray.values||[]):"increment"in c?h=new Tm(o,c.increment):mt();const p=Kr.fromServerFormat(c.fieldPath);return new bb(p,h)}(n,i)):[];var i;if(e.update){const i=mc(n,e.update.name),o=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new qo((e.updateMask.fieldPaths||[]).map(y=>Kr.fromServerFormat(y)));return new yu(i,o,c,t,r)}return new Sm(i,o,t,r)}if(e.delete){const i=mc(n,e.delete);return new Am(i,t)}if(e.verify){const i=mc(n,e.verify);return new cR(i,t)}return mt()}function zV(n,e){return{documents:[dR(n,e.path)]}}function GV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=dR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=dR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(E=>function(T){if("=="===T.op){if(JL(T.value))return{unaryFilter:{field:Mm(T.field),op:"IS_NAN"}};if(XL(T.value))return{unaryFilter:{field:Mm(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(JL(T.value))return{unaryFilter:{field:Mm(T.field),op:"IS_NOT_NAN"}};if(XL(T.value))return{unaryFilter:{field:Mm(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mm(T.field),op:WG(T.op),value:T.value}}}(E));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const o=function(p){if(0!==p.length)return p.map(y=>{return{field:Mm((E=y).field),direction:GG(E.dir)};var E})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=(y=e.limit,n.dt||fb(y)?y:{value:y});var y,h,p;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function WV(n){let e=UV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ut(1===r);const E=t.from[0];E.allDescendants?i=E.collectionId:e=e.child(E.collectionId)}let o=[];t.where&&(o=qV(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(E=>{return new Em(xm((T=E).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(E){let T;return T="object"==typeof E?E.value:E,fb(T)?null:T}(t.limit));let p=null;var E;t.startAt&&(p=new Yd((E=t.startAt).values||[],!!E.before));let y=null;return t.endAt&&(y=function(E){return new Yd(E.values||[],!E.before)}(t.endAt)),uV(e,i,c,o,h,"F",p,y)}function qV(n){return n?void 0!==n.unaryFilter?[KG(n)]:void 0!==n.fieldFilter?[qG(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qV(e)).reduce((e,t)=>e.concat(t)):mt():[]}function GG(n){return LG[n]}function WG(n){return VG[n]}function Mm(n){return{fieldPath:n.canonicalString()}}function xm(n){return Kr.fromServerFormat(n.fieldPath)}function qG(n){return Yi.create(xm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return mt()}}(n.fieldFilter.op),n.fieldFilter.value)}function KG(n){switch(n.unaryFilter.op){case"IS_NAN":const e=xm(n.unaryFilter.field);return Yi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=xm(n.unaryFilter.field);return Yi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=xm(n.unaryFilter.field);return Yi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=xm(n.unaryFilter.field);return Yi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return mt()}}function YG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Vs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YV(e)),e=ZG(n.get(t),e);return YV(e)}function ZG(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=o}}return t}function YV(n){return n+"\x01\x01"}function _c(n){const e=n.length;if(Ut(e>=2),2===e)return Ut("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),yn.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const c=n.indexOf("\x01",o);switch((c<0||c>t)&&mt(),n.charAt(c+1)){case"\x01":const h=n.substring(o,c);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(o,c),i+="\0";break;case"\x11":i+=n.substring(o,c+1);break;default:mt()}o=c+2}return new yn(r)}const ZV=["userId","batchId"];function eD(n,e){return[n,Vs(e)]}function QV(n,e,t){return[n,Vs(e),t]}const QG={},XG=["prefixPath","collectionGroup","readTime","documentId"],JG=["prefixPath","collectionGroup","documentId"],eW=["collectionGroup","readTime","prefixPath","documentId"],tW=["canonicalId","targetId"],nW=["targetId","path"],rW=["path","targetId"],iW=["collectionId","parent"],sW=["indexId","uid"],oW=["uid","sequenceNumber"],aW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lW=["indexId","uid","orderedDocumentKey"],cW=["userId","collectionPath","documentId"],uW=["userId","collectionPath","largestBatchId"],dW=["userId","collectionGroup","largestBatchId"],XV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hW=[...XV,"documentOverlays"],JV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eB=JV,fW=[...eB,"indexConfiguration","indexState","indexEntries"];class fR extends zL{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Si(n,e){const t=ot(n);return El.N(t.ee,e)}class pR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&MG(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=wb(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=wb(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=kV();return this.mutations.forEach(i=>{const o=e.get(i.key),c=o.overlayedDocument;let h=this.applyToLocalView(c,o.mutatedFields);h=t.has(i.key)?null:h;const p=CV(c,h);null!==p&&r.set(i.key,p),c.isValidDocument()||c.convertToNoDocument(Vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&vm(this.mutations,e.mutations,(t,r)=>IV(t,r))&&vm(this.baseMutations,e.baseMutations,(t,r)=>IV(t,r))}}class gR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ut(e.mutations.length===r.length);let i=OG;const o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new gR(e,t,r,i)}}class mR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Qd{constructor(e,t,r,i,o=Vt.min(),c=Vt.min(),h=gi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h}withSequenceNumber(e){return new Qd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Qd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class tB{constructor(e){this.ne=e}}function nB(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sb(i=n.ne,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:Tb(i,o.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Gf(e.version)};else{if(!e.isUnknownDocument())return mt();r.unknownDocument={path:t.path.toArray(),version:Gf(e.version)}}var i,o;return r}function tD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Gf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Wf(n){const e=new br(n.seconds,n.nanoseconds);return Vt.fromTimestamp(e)}function qf(n,e){const t=(e.baseMutations||[]).map(o=>hR(n.ne,o));for(let o=0;o<e.mutations.length-1;++o){const c=e.mutations[o];o+1<e.mutations.length&&void 0!==e.mutations[o+1].transform&&(c.updateTransforms=e.mutations[o+1].transform.fieldTransforms,e.mutations.splice(o+1,1),++o)}const r=e.mutations.map(o=>hR(n.ne,o)),i=br.fromMillis(e.localWriteTimeMs);return new pR(e.batchId,i,t,r)}function xb(n){const e=Wf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Wf(n.lastLimboFreeSnapshotVersion):Vt.min();let r;var i;return void 0!==n.query.documents?(Ut(1===(i=n.query).documents.length),r=Ma(Cm(UV(i.documents[0])))):r=Ma(WV(n.query)),new Qd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,gi.fromBase64String(n.resumeToken))}function rB(n,e){const t=Gf(e.snapshotVersion),r=Gf(e.lastLimboFreeSnapshotVersion);let i;i=qI(e.target)?zV(n.ne,e.target):GV(n.ne,e.target);const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jf(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _R(n){const e=WV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?dV(e,e.limit,"L"):e}function yR(n,e){return new mR(e.largestBatchId,hR(n.ne,e.overlayMutation))}function iB(n,e){const t=e.path.lastSegment();return[n,Vs(e.path.popLast()),t]}function sB(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Gf(r.readTime),documentKey:Vs(r.documentKey.path),largestBatchId:r.largestBatchId}}class gW{getBundleMetadata(e,t){return oB(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Wf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return oB(e).put({bundleId:(r=t).id,createTime:Gf(Ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return aB(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:_R(i.bundledQuery),readTime:Wf(i.readTime)};var i})}saveNamedQuery(e,t){return aB(e).put({name:(r=t).name,readTime:Gf(Ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function oB(n){return Si(n,"bundles")}function aB(n){return Si(n,"namedQueries")}class nD{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new nD(e,t.uid||"")}getOverlay(e,t){return Rb(e).get(iB(this.userId,t)).next(r=>r?yR(this.wt,r):null)}getOverlays(e,t){const r=gc();return me.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((o,c)=>{const h=new mR(t,c);i.push(this.ie(e,h))}),me.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Vs(c.getCollectionPath())));const o=[];return i.forEach(c=>{const h=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);o.push(Rb(e).W("collectionPathOverlayIndex",h))}),me.waitFor(o)}getOverlaysForCollection(e,t,r){const i=gc(),o=Vs(t),c=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Rb(e).K("collectionPathOverlayIndex",c).next(h=>{for(const p of h){const y=yR(this.wt,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const o=gc();let c;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rb(e).J({index:"collectionGroupOverlayIndex",range:h},(p,y,E)=>{const T=yR(this.wt,y);o.size()<i||T.largestBatchId===c?(o.set(T.getKey(),T),c=T.largestBatchId):E.done()}).next(()=>o)}ie(e,t){return Rb(e).put(function(r,i,o){const[c,h,p]=iB(i,o.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Mb(r.ne,o.mutation)}}(this.wt,this.userId,t))}}function Rb(n){return Si(n,"documentOverlays")}class Kf{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(jr(e.integerValue));else if("doubleValue"in e){const r=jr(e.doubleValue);isNaN(r)?this.ce(t,13):(this.ce(t,15),pb(r)?t.ae(0):t.ae(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he(`${r.seconds||""}`),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(Bf(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ce(t,45),t.ae(r.latitude||0),t.ae(r.longitude||0)}else"mapValue"in e?eV(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):mt()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const r=e.fields||{};this.ce(t,55);for(const i of Object.keys(r))this.le(i,t),this.oe(r[i],t)}me(e,t){const r=e.values||[];this.ce(t,50);for(const i of r)this.oe(i,t)}_e(e,t){this.ce(t,37),tt.fromName(e).path.forEach(r=>{this.ce(t,60),this.ge(r,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function mW(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function lB(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const o=mW(255&t[i]);if(r+=o,8!==o)break}return r}(n);return Math.ceil(e/8)}Kf.ye=new Kf;class _W{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ie(r.value),r=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ie(r);else if(r<2048)this.Ie(960|r>>>6),this.Ie(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|r>>>12),this.Ie(128|63&r>>>6),this.Ie(128|63&r);else{const i=t.codePointAt(0);this.Ie(240|i>>>18),this.Ie(128|63&i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i)}}this.Te()}Pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}ve(e){const t=this.Ve(e),r=lB(t);this.Se(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}De(e){const t=this.Ve(e),r=lB(t);this.Se(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class yW{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class vW{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class kb{constructor(){this.Me=new _W,this.Fe=new yW(this.Me),this.$e=new vW(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Yf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Yf(this.indexId,this.documentKey,this.arrayValue,r)}}function Zf(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=cB(n.arrayValue,e.arrayValue),0!==t?t:(t=cB(n.directionalValue,e.directionalValue),0!==t?t:tt.comparator(n.documentKey,e.documentKey)))}function cB(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bW{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const r=t;r.ht()?this.Ke=r:this.qe.push(r)}}Ge(e){const t=Qx(e);if(void 0!==t&&!this.Qe(t))return!1;const r=Ff(e);let i=0,o=0;for(;i<r.length&&this.Qe(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ke){const c=r[i];if(!this.je(this.Ke,c)||!this.We(this.Ue[o++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(o>=this.Ue.length||!this.We(this.Ue[o++],c))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class wW{constructor(){this.ze=new vR}addToCollectionParentIndex(e,t){return this.ze.add(t),me.resolve()}getCollectionParents(e,t){return me.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return me.resolve()}deleteFieldIndex(e,t){return me.resolve()}getDocumentsMatchingTarget(e,t){return me.resolve(null)}getIndexType(e,t){return me.resolve(0)}getFieldIndexes(e,t){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,t){return me.resolve(Wo.min())}getMinOffsetFromCollectionGroup(e,t){return me.resolve(Wo.min())}updateCollectionGroup(e,t,r){return me.resolve()}updateIndexEntries(e,t){return me.resolve()}}class vR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new jn(yn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new jn(yn.comparator)).toArray()}}const rD=new Uint8Array(0);class EW{constructor(e,t){this.user=e,this.databaseId=t,this.He=new vR,this.Je=new Zd(r=>jf(r),(r,i)=>yb(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const o={collectionId:r,parent:Vs(i)};return uB(e).put(o)}return me.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[UL(t),""],!1,!0);return uB(e).K(i).next(o=>{for(const c of o){if(c.collectionId!==t)break;r.push(_c(c.parent))}return r})}addFieldIndex(e,t){const r=iD(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var c;delete i.indexId;const o=r.add(i);if(t.indexState){const c=Nb(e);return o.next(h=>{c.put(sB(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){const r=iD(e),i=Nb(e),o=Ob(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Ob(e);let i=!0;const o=new Map;return me.forEach(this.Ye(t),c=>this.Xe(e,c).next(h=>{i&&(i=!!h),o.set(c,h)})).next(()=>{if(i){let c=en();const h=[];return me.forEach(o,(p,y)=>{var E;ze("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(Tt=>`${Tt.fieldPath}:${Tt.kind}`).join(",")}`} to execute ${jf(t)}`);const T=function(Tt,_t){const Gt=Qx(_t);if(void 0===Gt)return null;for(const Jt of KI(Tt,Gt.fieldPath))switch(Jt.op){case"array-contains-any":return Jt.value.arrayValue.values||[];case"array-contains":return[Jt.value]}return null}(y,p),R=function(Tt,_t){const Gt=new Map;for(const Jt of Ff(_t))for(const Tn of KI(Tt,Jt.fieldPath))switch(Tn.op){case"==":case"in":Gt.set(Jt.fieldPath.canonicalString(),Tn.value);break;case"not-in":case"!=":return Gt.set(Jt.fieldPath.canonicalString(),Tn.value),Array.from(Gt.values())}return null}(y,p),L=function(Tt,_t){const Gt=[];let Jt=!0;for(const Tn of Ff(_t)){const $s=0===Tn.kind?sV(Tt,Tn.fieldPath,Tt.startAt):oV(Tt,Tn.fieldPath,Tt.startAt);Gt.push($s.value),Jt&&(Jt=$s.inclusive)}return new Yd(Gt,Jt)}(y,p),B=function(Tt,_t){const Gt=[];let Jt=!0;for(const Tn of Ff(_t)){const $s=0===Tn.kind?oV(Tt,Tn.fieldPath,Tt.endAt):sV(Tt,Tn.fieldPath,Tt.endAt);Gt.push($s.value),Jt&&(Jt=$s.inclusive)}return new Yd(Gt,Jt)}(y,p),J=this.Ze(p,y,L),we=this.Ze(p,y,B),nt=this.tn(p,y,R),ut=this.en(p.indexId,T,J,L.inclusive,we,B.inclusive,nt);return me.forEach(ut,Tt=>r.j(Tt,t.limit).next(_t=>{_t.forEach(Gt=>{const Jt=tt.fromSegments(Gt.documentKey);c.has(Jt)||(c=c.add(Jt),h.push(Jt))})}))}).next(()=>h)}return me.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,r,i,o,c,h){const p=(null!=t?t.length:1)*Math.max(r.length,o.length),y=p/(null!=t?t.length:1),E=[];for(let T=0;T<p;++T){const R=t?this.nn(t[T/y]):rD,L=this.sn(e,R,r[T%y],i),B=this.rn(e,R,o[T%y],c),J=h.map(we=>this.sn(e,R,we,!0));E.push(...this.createRange(L,B,J))}return E}sn(e,t,r,i){const o=new Yf(e,tt.empty(),t,r);return i?o:o.Le()}rn(e,t,r,i){const o=new Yf(e,tt.empty(),t,r);return i?o.Le():o}Xe(e,t){const r=new bW(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let c=null;for(const h of o)r.Ge(h)&&(!c||h.fields.length>c.fields.length)&&(c=h);return c})}getIndexType(e,t){let r=2;return me.forEach(this.Ye(t),i=>this.Xe(e,i).next(o=>{o?0!==r&&o.fields.length<function(c){let h=new jn(Kr.comparator),p=!1;for(const y of c.filters){const E=y;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:h=h.add(E.field))}for(const y of c.orderBy)y.field.isKeyField()||(h=h.add(y.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}on(e,t){const r=new kb;for(const i of Ff(e)){const o=t.data.field(i.fieldPath);if(null==o)return null;const c=r.Be(i.kind);Kf.ye.re(o,c)}return r.Oe()}nn(e){const t=new kb;return Kf.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const r=new kb;return Kf.ye.re(Hf(this.databaseId,t),r.Be(function(i){const o=Ff(i);return 0===o.length?0:o[o.length-1].kind}(e))),r.Oe()}tn(e,t,r){if(null===r)return[];let i=[];i.push(new kb);let o=0;for(const c of Ff(e)){const h=r[o++];for(const p of i)if(this.cn(t,c.fieldPath)&&mb(h))i=this.an(i,c,h);else{const y=p.Be(c.kind);Kf.ye.re(h,y)}}return this.hn(i)}Ze(e,t,r){return this.tn(e,t,r.position)}hn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Oe();return t}an(e,t,r){const i=[...e],o=[];for(const c of r.arrayValue.values||[])for(const h of i){const p=new kb;p.seed(h.Oe()),Kf.ye.re(c,p.Be(t.kind)),o.push(p)}return o}cn(e,t){return!!e.filters.find(r=>r instanceof Yi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=iD(e),i=Nb(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next(o=>{const c=[];return me.forEach(o,h=>i.get([h.indexId,this.uid]).next(p=>{c.push(function(y,E){const T=E?new ub(E.sequenceNumber,new Wo(Wf(E.readTime),new tt(_c(E.documentKey)),E.largestBatchId)):ub.empty(),R=y.fields.map(([L,B])=>new jI(Kr.fromServerFormat(L),B));return new HI(y.indexId,y.collectionGroup,R,T)}(h,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==o?o:Xt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=iD(e),o=Nb(e);return this.ln(e).next(c=>i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>me.forEach(h,p=>o.put(sB(p.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return me.forEach(t,(i,o)=>{const c=r.get(i.collectionGroup);return(c?me.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),me.forEach(h,p=>this.fn(e,i,p).next(y=>{const E=this.dn(o,p);return y.isEqual(E)?me.resolve():this._n(e,o,p,y,E)}))))})}wn(e,t,r,i){return Ob(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.un(r,t.key),documentKey:t.key.path.toArray()})}mn(e,t,r,i){return Ob(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.un(r,t.key),t.key.path.toArray()])}fn(e,t,r){const i=Ob(e);let o=new jn(Zf);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.un(r,t)])},(c,h)=>{o=o.add(new Yf(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>o)}dn(e,t){let r=new jn(Zf);const i=this.on(t,e);if(null==i)return r;const o=Qx(t);if(null!=o){const c=e.data.field(o.fieldPath);if(mb(c))for(const h of c.arrayValue.values||[])r=r.add(new Yf(t.indexId,e.key,this.nn(h),i))}else r=r.add(new Yf(t.indexId,e.key,rD,i));return r}_n(e,t,r,i,o){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(h,p,y,E,T){const R=h.getIterator(),L=p.getIterator();let B=bm(R),J=bm(L);for(;B||J;){let we=!1,nt=!1;if(B&&J){const ut=y(B,J);ut<0?nt=!0:ut>0&&(we=!0)}else null!=B?nt=!0:we=!0;we?(E(J),J=bm(L)):nt?(T(B),B=bm(R)):(B=bm(R),J=bm(L))}}(i,o,Zf,h=>{c.push(this.wn(e,t,r,h))},h=>{c.push(this.mn(e,t,r,h))}),me.waitFor(c)}ln(e){let t=1;return Nb(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,h)=>Zf(c,h)).filter((c,h,p)=>!h||0!==Zf(c,p[h-1]));const i=[];i.push(e);for(const c of r){const h=Zf(c,e),p=Zf(c,t);if(0===h)i[0]=e.Le();else if(h>0&&p<0)i.push(c),i.push(c.Le());else if(p>0)break}i.push(t);const o=[];for(let c=0;c<i.length;c+=2)o.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,rD,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,rD,[]]));return o}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(dB)}getMinOffset(e,t){return me.mapArray(this.Ye(t),r=>this.Xe(e,r).next(i=>i||mt())).next(dB)}}function uB(n){return Si(n,"collectionParents")}function Ob(n){return Si(n,"indexEntries")}function iD(n){return Si(n,"indexConfiguration")}function Nb(n){return Si(n,"indexState")}function dB(n){Ut(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Xx(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Wo(e.readTime,e.documentKey,t)}const hB={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class po{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new po(e,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fB(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),o=[],c=IDBKeyRange.only(t.batchId);let h=0;const p=r.J({range:c},(E,T,R)=>(h++,R.delete()));o.push(p.next(()=>{Ut(1===h)}));const y=[];for(const E of t.mutations){const T=QV(e,E.key.path,t.batchId);o.push(i.delete(T)),y.push(E.key)}return me.waitFor(o).next(()=>y)}function sD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw mt();e=n.noDocument}return JSON.stringify(e).length}po.DEFAULT_COLLECTION_PERCENTILE=10,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,po.DEFAULT=new po(41943040,po.DEFAULT_COLLECTION_PERCENTILE,po.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),po.DISABLED=new po(-1,0,0);class oD{constructor(e,t,r,i){this.userId=e,this.wt=t,this.indexManager=r,this.referenceDelegate=i,this.gn={}}static se(e,t,r,i){Ut(""!==e.uid);const o=e.isAuthenticated()?e.uid:"";return new oD(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xd(e).J({index:"userMutationsIndex",range:r},(i,o,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const o=Rm(e),c=Xd(e);return c.add({}).next(h=>{Ut("number"==typeof h);const p=new pR(h,t,r,i),y=function(R,L,B){const J=B.baseMutations.map(nt=>Mb(R.ne,nt)),we=B.mutations.map(nt=>Mb(R.ne,nt));return{userId:L,batchId:B.batchId,localWriteTimeMs:B.localWriteTime.toMillis(),baseMutations:J,mutations:we}}(this.wt,this.userId,p),E=[];let T=new jn((R,L)=>Xt(R.canonicalString(),L.canonicalString()));for(const R of i){const L=QV(this.userId,R.key.path,h);T=T.add(R.key.path.popLast()),E.push(c.put(y)),E.push(o.put(L,QG))}return T.forEach(R=>{E.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.gn[h]=p.keys()}),me.waitFor(E).next(()=>p)})}lookupMutationBatch(e,t){return Xd(e).get(t).next(r=>r?(Ut(r.userId===this.userId),qf(this.wt,r)):null)}yn(e,t){return this.gn[t]?me.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.gn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return Xd(e).J({index:"userMutationsIndex",range:i},(c,h,p)=>{h.userId===this.userId&&(Ut(h.batchId>=r),o=qf(this.wt,h)),p.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Xd(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,c)=>{r=o.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xd(e).K("userMutationsIndex",t).next(r=>r.map(i=>qf(this.wt,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=eD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Rm(e).J({range:i},(c,h,p)=>{const[y,E,T]=c,R=_c(E);if(y===this.userId&&t.path.isEqual(R))return Xd(e).get(T).next(L=>{if(!L)throw mt();Ut(L.userId===this.userId),o.push(qf(this.wt,L))});p.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Xt);const i=[];return t.forEach(o=>{const c=eD(this.userId,o.path),h=IDBKeyRange.lowerBound(c),p=Rm(e).J({range:h},(y,E,T)=>{const[R,L,B]=y,J=_c(L);R===this.userId&&o.path.isEqual(J)?r=r.add(B):T.done()});i.push(p)}),me.waitFor(i).next(()=>this.pn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=eD(this.userId,r),c=IDBKeyRange.lowerBound(o);let h=new jn(Xt);return Rm(e).J({range:c},(p,y,E)=>{const[T,R,L]=p,B=_c(R);T===this.userId&&r.isPrefixOf(B)?B.length===i&&(h=h.add(L)):E.done()}).next(()=>this.pn(e,h))}pn(e,t){const r=[],i=[];return t.forEach(o=>{i.push(Xd(e).get(o).next(c=>{if(null===c)throw mt();Ut(c.userId===this.userId),r.push(qf(this.wt,c))}))}),me.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fB(e.ee,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),me.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return me.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Rm(e).J({range:r},(o,c,h)=>{if(o[0]===this.userId){const p=_c(o[1]);i.push(p)}else h.done()}).next(()=>{Ut(0===i.length)})})}containsKey(e,t){return pB(e,this.userId,t)}Tn(e){return gB(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pB(n,e,t){const r=eD(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let c=!1;return Rm(n).J({range:o,H:!0},(h,p,y)=>{const[E,T,R]=h;E===e&&T===i&&(c=!0),y.done()}).next(()=>c)}function Xd(n){return Si(n,"mutations")}function Rm(n){return Si(n,"documentMutations")}function gB(n){return Si(n,"mutationQueues")}class Qf{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Qf(0)}static Rn(){return new Qf(-1)}}class CW{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const r=new Qf(t.highestTargetId);return t.highestTargetId=r.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Vt.fromTimestamp(new br(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.bn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Pn(e,i)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(r=>(r.targetCount+=1,this.Vn(t,r),this.Pn(e,r))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>km(e).delete(t.targetId)).next(()=>this.bn(e)).next(r=>(Ut(r.targetCount>0),r.targetCount-=1,this.Pn(e,r)))}removeTargets(e,t,r){let i=0;const o=[];return km(e).J((c,h)=>{const p=xb(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,o.push(this.removeTargetData(e,p)))}).next(()=>me.waitFor(o)).next(()=>i)}forEachTarget(e,t){return km(e).J((r,i)=>{const o=xb(i);t(o)})}bn(e){return mB(e).get("targetGlobalKey").next(t=>(Ut(null!==t),t))}Pn(e,t){return mB(e).put("targetGlobalKey",t)}vn(e,t){return km(e).put(rB(this.wt,t))}Vn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return km(e).J({range:i,index:"queryTargetsIndex"},(c,h,p)=>{const y=xb(h);yb(t,y.target)&&(o=y,p.done())}).next(()=>o)}addMatchingKeys(e,t,r){const i=[],o=Jd(e);return t.forEach(c=>{const h=Vs(c.path);i.push(o.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,c))}),me.waitFor(i)}removeMatchingKeys(e,t,r){const i=Jd(e);return me.forEach(t,o=>{const c=Vs(o.path);return me.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){const r=Jd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Jd(e);let o=en();return i.J({range:r,H:!0},(c,h,p)=>{const y=_c(c[1]),E=new tt(y);o=o.add(E)}).next(()=>o)}containsKey(e,t){const r=Vs(t.path),i=IDBKeyRange.bound([r],[UL(r)],!1,!0);let o=0;return Jd(e).J({index:"documentTargetsIndex",H:!0,range:i},([c,h],p,y)=>{0!==c&&(o++,y.done())}).next(()=>o>0)}te(e,t){return km(e).get(t).next(r=>r?xb(r):null)}}function km(n){return Si(n,"targets")}function mB(n){return Si(n,"targetGlobal")}function Jd(n){return Si(n,"targetDocuments")}function _B([n,e],[t,r]){const i=Xt(n,t);return 0===i?Xt(e,r):i}class IW{constructor(e){this.Sn=e,this.buffer=new jn(_B),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();_B(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DW{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;ze("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ae.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Gd(r)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield zd(r)}yield t.kn(3e5)}))}}class TW{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return me.resolve(ho.ot);const r=new IW(t);return this.On.forEachTarget(e,i=>r.xn(i.sequenceNumber)).next(()=>this.On.Fn(e,i=>r.xn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.On.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(hB)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hB):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let r,i,o,c,h,p,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,c=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,t))).next(T=>(o=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(y=Date.now(),Yx()<=Sa.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${i} in `+(h-c)+`ms\n\tRemoved ${o} targets in `+(p-h)+`ms\n\tRemoved ${T} documents in `+(y-p)+`ms\nTotal Duration: ${y-E}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:T})))}}class SW{constructor(e,t){this.db=e,this.garbageCollector=new TW(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Bn(e){let t=0;return this.Fn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(r,i)=>t(i))}addReference(e,t,r){return aD(e,r)}removeReference(e,t,r){return aD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return aD(e,t)}Un(e,t){return function(r,i){let o=!1;return gB(r).Y(c=>pB(r,c,i).next(h=>(h&&(o=!0),me.resolve(!h)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Ln(e,(c,h)=>{if(h<=t){const p=this.Un(e,c).next(y=>{if(!y)return o++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Vt.min()),Jd(e).delete([0,Vs(c.path)])))});i.push(p)}}).next(()=>me.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return aD(e,t)}Ln(e,t){const r=Jd(e);let i,o=ho.ot;return r.J({index:"documentTargetsIndex"},([c,h],{path:p,sequenceNumber:y})=>{0===c?(o!==ho.ot&&t(new tt(_c(i)),o),o=y,i=p):o=ho.ot}).next(()=>{o!==ho.ot&&t(new tt(_c(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function aD(n,e){return Jd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Vs(e.path),sequenceNumber:r}));var r}class yB{constructor(){this.changes=new Zd(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Qn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?me.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class AW{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Xf(e).put(r)}removeEntry(e,t,r){return Xf(e).delete(function(i,o){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],tD(o),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.qn(e,r)))}getEntry(e,t){let r=Qn.newInvalidDocument(t);return Xf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pb(t))},(i,o)=>{r=this.Kn(t,o)}).next(()=>r)}Gn(e,t){let r={size:0,document:Qn.newInvalidDocument(t)};return Xf(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Pb(t))},(i,o)=>{r={document:this.Kn(t,o),size:sD(o)}}).next(()=>r)}getEntries(e,t){let r=fo();return this.Qn(e,t,(i,o)=>{const c=this.Kn(i,o);r=r.insert(i,c)}).next(()=>r)}jn(e,t){let r=fo(),i=new Hr(tt.comparator);return this.Qn(e,t,(o,c)=>{const h=this.Kn(o,c);r=r.insert(o,h),i=i.insert(o,sD(c))}).next(()=>({documents:r,Wn:i}))}Qn(e,t,r){if(t.isEmpty())return me.resolve();let i=new jn(EB);t.forEach(p=>i=i.add(p));const o=IDBKeyRange.bound(Pb(i.first()),Pb(i.last())),c=i.getIterator();let h=c.getNext();return Xf(e).J({index:"documentKeyIndex",range:o},(p,y,E)=>{const T=tt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&EB(h,T)<0;)r(h,null),h=c.getNext();h&&h.isEqual(T)&&(r(h,y),h=c.hasNext()?c.getNext():null),h?E.q(Pb(h)):E.done()}).next(()=>{for(;h;)r(h,null),h=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),tD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Xf(e).K(IDBKeyRange.bound(i,o,!0)).next(c=>{let h=fo();for(const p of c){const y=this.Kn(tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(y.key,y)}return h})}getAllFromCollectionGroup(e,t,r,i){let o=fo();const c=wB(t,r),h=wB(t,Wo.max());return Xf(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,h,!0)},(p,y,E)=>{const T=this.Kn(tt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);o=o.insert(T.key,T),o.size===i&&E.done()}).next(()=>o)}newChangeBuffer(e){return new MW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return bB(e).get("remoteDocumentGlobalKey").next(t=>(Ut(!!t),t))}qn(e,t){return bB(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const r=function pW(n,e){let t;if(e.document)t=$V(n.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=tt.fromSegments(e.noDocument.path),i=Wf(e.noDocument.readTime);t=Qn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return mt();{const r=tt.fromSegments(e.unknownDocument.path),i=Wf(e.unknownDocument.version);t=Qn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new br(r[0],r[1]);return Vt.fromTimestamp(i)}(e.readTime)),t}(this.wt,t);if(!r.isNoDocument()||!r.version.isEqual(Vt.min()))return r}return Qn.newInvalidDocument(e)}}function vB(n){return new AW(n)}class MW extends yB{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Zd(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new jn((o,c)=>Xt(o.canonicalString(),c.canonicalString()));return this.changes.forEach((o,c)=>{const h=this.Hn.get(o);if(t.push(this.zn.removeEntry(e,o,h.readTime)),c.isValidDocument()){const p=nB(this.zn.wt,c);i=i.add(o.path.popLast()),r+=sD(p)-h.size,t.push(this.zn.addEntry(e,o,p))}else if(r-=h.size,this.trackRemovals){const p=nB(this.zn.wt,c.convertToNoDocument(Vt.min()));t.push(this.zn.addEntry(e,o,p))}}),i.forEach(o=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.zn.updateMetadata(e,r)),me.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(r=>(this.Hn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:r,Wn:i})=>(i.forEach((o,c)=>{this.Hn.set(o,{size:c,readTime:r.get(o).readTime})}),r))}}function bB(n){return Si(n,"remoteDocumentGlobal")}function Xf(n){return Si(n,"remoteDocumentsV14")}function Pb(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wB(n,e){const t=e.documentKey.path.toArray();return[n,tD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function EB(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Xt(t[o],r[o]),i)return i;return i=Xt(t.length,r.length),i||(i=Xt(t[t.length-2],r[r.length-2]),i||Xt(t[t.length-1],r[r.length-1]))}class xW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class CB{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&wb(r.mutation,i,qo.empty(),br.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const i=gc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=Eb();return o.forEach((h,p)=>{c=c.insert(h,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=gc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,h)=>{t.set(c,h)})})}computeViews(e,t,r,i){let o=fo();const c=Cb(),h=Cb();return t.forEach((p,y)=>{const E=r.get(y.key);i.has(y.key)&&(void 0===E||E.mutation instanceof yu)?o=o.insert(y.key,y):void 0!==E&&(c.set(y.key,E.mutation.getFieldMask()),wb(E.mutation,y,E.mutation.getFieldMask(),br.now()))}),this.recalculateAndSaveOverlays(e,o).next(p=>(p.forEach((y,E)=>c.set(y,E)),t.forEach((y,E)=>{var T;return h.set(y,new xW(E,null!==(T=c.get(y))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Cb();let i=new Hr((c,h)=>c-h),o=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const h of c)h.keys().forEach(p=>{const y=t.get(p);if(null===y)return;let E=r.get(p)||qo.empty();E=h.applyToLocalView(y,E),r.set(p,E);const T=(i.get(h.batchId)||en()).add(p);i=i.insert(h.batchId,T)})}).next(()=>{const c=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,E=p.value,T=kV();E.forEach(R=>{if(!o.has(R)){const L=CV(t.get(R),r.get(R));null!==L&&T.set(R,L),o=o.add(R)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return me.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return tt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):oR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):me.resolve(gc());let h=-1,p=o;return c.next(y=>me.forEach(y,(E,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),o.get(E)?me.resolve():this.getBaseDocument(e,E,T).next(R=>{p=p.insert(E,R)}))).next(()=>this.populateOverlays(e,y,o)).next(()=>this.computeViews(e,p,y,en())).next(E=>({batchId:h,changes:RV(E)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tt(t)).next(r=>{let i=Eb();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let o=Eb();return this.indexManager.getCollectionParents(e,i).next(c=>me.forEach(c,h=>{const p=(y=t,E=h.child(i),new _u(E,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,E;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(y=>{y.forEach((E,T)=>{o=o.insert(E,T)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(o=>(i=o,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(o=>{o.forEach((h,p)=>{const y=p.getKey();null===i.get(y)&&(i=i.insert(y,Qn.newInvalidDocument(y)))});let c=Eb();return i.forEach((h,p)=>{const y=o.get(h);void 0!==y&&wb(y.mutation,p,qo.empty(),br.now()),lR(t,p)&&(c=c.insert(h,p))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):me.resolve(Qn.newInvalidDocument(t))}}class RW{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return me.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var r;return this.Jn.set(t.id,{id:(r=t).id,version:r.version,createTime:Ti(r.createTime)}),me.resolve()}getNamedQuery(e,t){return me.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(r=t).name,query:_R(r.bundledQuery),readTime:Ti(r.readTime)}),me.resolve();var r}}class kW{constructor(){this.overlays=new Hr(tt.comparator),this.Xn=new Map}getOverlay(e,t){return me.resolve(this.overlays.get(t))}getOverlays(e,t){const r=gc();return me.forEach(t,i=>this.getOverlay(e,i).next(o=>{null!==o&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ie(e,t,o)}),me.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Xn.get(r);return void 0!==i&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Xn.delete(r)),me.resolve()}getOverlaysForCollection(e,t,r){const i=gc(),o=t.length+1,c=new tt(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===o&&p.largestBatchId>r&&i.set(p.getKey(),p)}return me.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Hr((y,E)=>y-E);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let E=o.get(y.largestBatchId);null===E&&(E=gc(),o=o.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const h=gc(),p=o.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,E)=>h.set(y,E)),!(h.size()>=i)););return me.resolve(h)}ie(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.Xn.get(i.largestBatchId).delete(r.key);this.Xn.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new mR(t,r));let o=this.Xn.get(t);void 0===o&&(o=en(),this.Xn.set(t,o)),this.Xn.set(t,o.add(r.key))}}class bR{constructor(){this.Zn=new jn(Ai.ts),this.es=new jn(Ai.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Ai(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Ai(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new tt(new yn([])),r=new Ai(t,e),i=new Ai(t,e+1),o=[];return this.es.forEachInRange([r,i],c=>{this.rs(c),o.push(c.key)}),o}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new tt(new yn([])),r=new Ai(t,e),i=new Ai(t,e+1);let o=en();return this.es.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){const t=new Ai(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ai{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return tt.comparator(e.key,t.key)||Xt(e.ls,t.ls)}static ns(e,t){return Xt(e.ls,t.ls)||tt.comparator(e.key,t.key)}}class OW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new jn(Ai.ts)}checkEmpty(e){return me.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const o=this.fs;this.fs++;const c=new pR(o,t,r,i);this.mutationQueue.push(c);for(const h of i)this.ds=this.ds.add(new Ai(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,t){return me.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ws(t+1),o=i<0?0:i;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ai(t,0),i=new Ai(t,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],c=>{const h=this._s(c.ls);o.push(h)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new jn(Xt);return t.forEach(i=>{const o=new Ai(i,0),c=new Ai(i,Number.POSITIVE_INFINITY);this.ds.forEachInRange([o,c],h=>{r=r.add(h.ls)})}),me.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;tt.isDocumentKey(o)||(o=o.child(""));const c=new Ai(new tt(o),0);let h=new jn(Xt);return this.ds.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.ls)),!0)},c),me.resolve(this.gs(h))}gs(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ut(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let r=this.ds;return me.forEach(t.mutations,i=>{const o=new Ai(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ds=r})}In(e){}containsKey(e,t){const r=new Ai(t,0),i=this.ds.firstAfterOrEqual(r);return me.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return me.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NW{constructor(e){this.ps=e,this.docs=new Hr(tt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.ps(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return me.resolve(r?r.document.mutableCopy():Qn.newInvalidDocument(t))}getEntries(e,t){let r=fo();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Qn.newInvalidDocument(i))}),me.resolve(r)}getAllFromCollection(e,t,r){let i=fo();const o=new tt(t.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:h,value:{document:p}}=c.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||Xx(jL(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return me.resolve(i)}getAllFromCollectionGroup(e,t,r,i){mt()}Is(e,t){return me.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new PW(this)}getSize(e){return me.resolve(this.size)}}class PW extends yB{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.zn.addEntry(e,i)):this.zn.removeEntry(r)}),me.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class FW{constructor(e){this.persistence=e,this.Ts=new Zd(t=>jf(t),yb),this.lastRemoteSnapshotVersion=Vt.min(),this.highestTargetId=0,this.Es=0,this.As=new bR,this.targetCount=0,this.Rs=Qf.An()}forEachTarget(e,t){return this.Ts.forEach((r,i)=>t(i)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Es&&(this.Es=t),me.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Qf(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,me.resolve()}updateTargetData(e,t){return this.vn(t),me.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Ts.forEach((c,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Ts.delete(c),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),me.waitFor(o).next(()=>i)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,t){const r=this.Ts.get(t)||null;return me.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),me.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),me.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return me.resolve(r)}containsKey(e,t){return me.resolve(this.As.containsKey(t))}}class IB{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ho(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new FW(this),this.indexManager=new wW,this.remoteDocumentCache=new NW(r=>this.referenceDelegate.Ss(r)),this.wt=new tB(t),this.Ds=new RW(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.bs[e.toKey()];return r||(r=new OW(t,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new LW(this.Ps.next());return this.referenceDelegate.Cs(),r(i).next(o=>this.referenceDelegate.xs(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ns(e,t){return me.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class LW extends zL{constructor(e){super(),this.currentSequenceNumber=e}}class lD{constructor(e){this.persistence=e,this.ks=new bR,this.Os=null}static Ms(e){return new lD(e)}get Fs(){if(this.Os)return this.Os;throw mt()}addReference(e,t,r){return this.ks.addReference(r,t),this.Fs.delete(r.toString()),me.resolve()}removeReference(e,t,r){return this.ks.removeReference(r,t),this.Fs.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),me.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(i=>this.Fs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Fs.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.Fs,r=>{const i=tt.fromPath(r);return this.$s(e,i).next(o=>{o||t.removeEntry(i,Vt.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return me.or([()=>me.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class VW{constructor(e){this.wt=e}O(e,t,r,i){const o=new $I("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZV,{unique:!0}),h.createObjectStore("documentMutations"),DB(e),function(h){h.createObjectStore("remoteDocuments")}(e));let c=me.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),DB(e)),c=c.next(()=>function(h){const p=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Vt.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",y)}(o))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(h,p){return p.store("mutations").K().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ZV,{unique:!0});const E=p.store("mutations"),T=y.map(R=>E.put(R));return me.waitFor(T)})}(e,o))),c=c.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Bs(o))),r<6&&i>=6&&(c=c.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(o)))),r<7&&i>=7&&(c=c.next(()=>this.Us(o))),r<8&&i>=8&&(c=c.next(()=>this.qs(e,o))),r<9&&i>=9&&(c=c.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.Ks(o))),r<11&&i>=11&&(c=c.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:cW});p.createIndex("collectionPathOverlayIndex",uW,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",dW,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:XG});p.createIndex("documentKeyIndex",JG),p.createIndex("collectionGroupIndex",eW)}(e)).next(()=>this.Gs(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.Qs(e,o))),r<15&&i>=15&&(c=c.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:sW}).createIndex("sequenceNumberIndex",oW,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:aW}).createIndex("documentKeyIndex",lW,{unique:!1})}(e))),c}Ls(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=sD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Bs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.K().next(i=>me.forEach(i,o=>{const c=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",c).next(h=>me.forEach(h,p=>{Ut(p.userId===o.userId);const y=qf(this.wt,p);return fB(e,o.userId,y).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.J((c,h)=>{const p=new yn(c),y=[0,Vs(p)];o.push(t.get(y).next(E=>E?me.resolve():t.put({targetId:0,path:Vs(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>me.waitFor(o))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:iW});const r=t.store("collectionParents"),i=new vR,o=c=>{if(i.add(c)){const h=c.lastSegment(),p=c.popLast();return r.put({collectionId:h,parent:Vs(p)})}};return t.store("remoteDocuments").J({H:!0},(c,h)=>{const p=new yn(c);return o(p.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([c,h,p],y)=>{const E=_c(h);return o(E.popLast())}))}Ks(e){const t=e.store("targets");return t.J((r,i)=>{const o=xb(i),c=rB(this.wt,o);return t.put(c)})}Gs(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((o,c)=>{const h=t.store("remoteDocumentsV14"),p=(y=c,y.document?new tt(yn.fromString(y.document.name).popFirst(5)):y.noDocument?tt.fromSegments(y.noDocument.path):y.unknownDocument?tt.fromSegments(y.unknownDocument.path):mt()).path.toArray();var y;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(h.put(E))}).next(()=>me.waitFor(i))}Qs(e,t){const r=t.store("mutations"),i=vB(this.wt),o=new IB(lD.Ms,this.wt.ne);return r.K().next(c=>{const h=new Map;return c.forEach(p=>{var y;let E=null!==(y=h.get(p.userId))&&void 0!==y?y:en();qf(this.wt,p).keys().forEach(T=>E=E.add(T)),h.set(p.userId,E)}),me.forEach(h,(p,y)=>{const E=new Ii(y),T=nD.se(this.wt,E),R=o.getIndexManager(E),L=oD.se(E,this.wt,R,o.referenceDelegate);return new CB(i,L,T,R).recalculateAndSaveOverlaysForDocumentKeys(new fR(t,ho.ot),p).next()})})}}function DB(n){n.createObjectStore("targetDocuments",{keyPath:nW}).createIndex("documentTargetsIndex",rW,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tW,{unique:!0}),n.createObjectStore("targetGlobal")}const wR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class ER{constructor(e,t,r,i,o,c,h,p,y,E,T=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.js=o,this.window=c,this.document=h,this.Ws=y,this.zs=E,this.Hs=T,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=R=>Promise.resolve(),!ER.V())throw new He(be.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SW(this,i),this.ei=t+"main",this.wt=new tB(p),this.ni=new El(this.ei,this.Hs,new VW(this.wt)),this.Vs=new CW(this.referenceDelegate,this.wt),this.remoteDocumentCache=vB(this.wt),this.Ds=new gW,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===E&&ni("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new He(be.FAILED_PRECONDITION,wR);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ho(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var r=(0,Ae.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ae.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ae.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>cD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Gd(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Fb(e).get("owner").next(t=>me.resolve(this.di(t)))}_i(e){return cD(e).delete(this.clientId)}wi(){var e=this;return(0,Ae.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Si(r,"clientMetadata");return i.K().next(o=>{const c=e.gi(o,18e5),h=o.filter(p=>-1===c.indexOf(p));return me.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.si)for(const r of t)e.si.removeItem(e.yi(r.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?me.resolve(!0):Fb(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new He(be.FAILED_PRECONDITION,wR);return!1}}return!(!this.networkEnabled||!this.inForeground)||cD(e).K().next(r=>void 0===this.gi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ae.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new fR(t,ho.ot);return e.li(r).next(()=>e._i(r))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(r=>this.mi(r.updateTimeMs,t)&&!this.pi(r.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>cD(e).K().next(t=>this.gi(t,18e5).map(r=>r.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return oD.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new EW(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return nD.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",o=15===(c=this.Hs)?fW:14===c?eB:13===c?JV:12===c?hW:11===c?XV:void mt();var c;let h;return this.ni.runTransaction(e,i,o,p=>(h=new fR(p,this.Ps?this.Ps.next():ho.ot),"readwrite-primary"===t?this.ai(h).next(y=>!!y||this.hi(h)).next(y=>{if(!y)throw ni(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new He(be.FAILED_PRECONDITION,$L);return r(h)}).next(y=>this.fi(h).next(()=>y)):this.bi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}bi(e){return Fb(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new He(be.FAILED_PRECONDITION,wR)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fb(e).put("owner",t)}static V(){return El.V()}li(e){const t=Fb(e);return t.get("owner").next(r=>this.di(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):me.resolve())}mi(e,t){const r=Date.now();return!(e<r-t||e>r&&(ni(`Detected an update time that is in the future: ${e} > ${r}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,ne.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const r=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ni("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){ni("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch{}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fb(n){return Si(n,"owner")}function cD(n){return Si(n,"clientMetadata")}function CR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class IR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Pi=r,this.vi=i}static Vi(e,t){let r=en(),i=en();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new IR(e,t.fromCache,r,i)}}class TB{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ci(e,t).next(o=>o||this.xi(e,t,i,r)).next(o=>o||this.Ni(e,t))}Ci(e,t){return me.resolve(null)}xi(e,t,r,i){return function CG(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(Vt.min())?this.Ni(e,t):this.Di.getDocuments(e,r).next(o=>{const c=this.ki(t,o);return this.Oi(t,c,r,i)?this.Ni(e,t):(Yx()<=Sa.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),aR(t)),this.Mi(e,c,t,HL(i,-1)))})}ki(e,t){let r=new jn(pV(e));return t.forEach((i,o)=>{lR(e,o)&&(r=r.add(o))}),r}Oi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const o="F"===e.limitType?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ni(e,t){return Yx()<=Sa.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",aR(t)),this.Di.getDocumentsMatchingQuery(e,t,Wo.min())}Mi(e,t,r,i){return this.Di.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}}class BW{constructor(e,t,r,i){this.persistence=e,this.Fi=t,this.wt=i,this.$i=new Hr(Xt),this.Bi=new Zd(o=>jf(o),yb),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(r)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CB(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function SB(n,e,t,r){return new BW(n,e,t,r)}function AB(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,Ae.Z)(function*(n,e){const t=ot(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.qi(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],h=[];let p=en();for(const y of i){c.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}for(const y of o){h.push(y.batchId);for(const E of y.mutations)p=p.add(E.key)}return t.localDocuments.getDocuments(r,p).next(y=>({Ki:y,removedBatchIds:c,addedBatchIds:h}))})})}),DR.apply(this,arguments)}function UW(n,e){const t=ot(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.Ui.newChangeBuffer({trackRemovals:!0});return function(c,h,p,y){const E=p.batch,T=E.keys();let R=me.resolve();return T.forEach(L=>{R=R.next(()=>y.getEntry(h,L)).next(B=>{const J=p.docVersions.get(L);Ut(null!==J),B.version.compareTo(J)<0&&(E.applyToRemoteDocument(B,p),B.isValidDocument()&&(B.setReadTime(p.commitVersion),y.addEntry(B)))})}),R.next(()=>c.mutationQueue.removeMutationBatch(h,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let h=en();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MB(n){const e=ot(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function HW(n,e){const t=ot(n),r=e.snapshotVersion;let i=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=t.Ui.newChangeBuffer({trackRemovals:!0});i=t.$i;const h=[];e.targetChanges.forEach((E,T)=>{const R=i.get(T);if(!R)return;h.push(t.Vs.removeMatchingKeys(o,E.removedDocuments,T).next(()=>t.Vs.addMatchingKeys(o,E.addedDocuments,T)));let L=R.withSequenceNumber(o.currentSequenceNumber);var B,J,we;e.targetMismatches.has(T)?L=L.withResumeToken(gi.EMPTY_BYTE_STRING,Vt.min()).withLastLimboFreeSnapshotVersion(Vt.min()):E.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(E.resumeToken,r)),i=i.insert(T,L),J=L,we=E,(0===(B=R).resumeToken.approximateByteSize()||J.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||we.addedDocuments.size+we.modifiedDocuments.size+we.removedDocuments.size>0)&&h.push(t.Vs.updateTargetData(o,L))});let p=fo(),y=en();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,E))}),h.push(xB(o,c,e.documentUpdates).next(E=>{p=E.Gi,y=E.Qi})),!r.isEqual(Vt.min())){const E=t.Vs.getLastRemoteSnapshotVersion(o).next(T=>t.Vs.setTargetsMetadata(o,o.currentSequenceNumber,r));h.push(E)}return me.waitFor(h).next(()=>c.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,p,y)).next(()=>p)}).then(o=>(t.$i=i,o))}function xB(n,e,t){let r=en(),i=en();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let c=fo();return t.forEach((h,p)=>{const y=o.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(Vt.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||0===p.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ze("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)}),{Gi:c,Qi:i}})}function jW(n,e){const t=ot(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Om(n,e){const t=ot(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Vs.getTargetData(r,e).next(o=>o?(i=o,me.resolve(i)):t.Vs.allocateTargetId(r).next(c=>(i=new Qd(e,c,0,r.currentSequenceNumber),t.Vs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.$i.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.$i=t.$i.insert(r.targetId,r),t.Bi.set(e,r.targetId)),r})}function Nm(n,e,t){return TR.apply(this,arguments)}function TR(){return TR=(0,Ae.Z)(function*(n,e,t){const r=ot(n),i=r.$i.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Gd(c))throw c;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.$i=r.$i.remove(e),r.Bi.delete(i.target)}),TR.apply(this,arguments)}function uD(n,e,t){const r=ot(n);let i=Vt.min(),o=en();return r.persistence.runTransaction("Execute query","readonly",c=>function(h,p,y){const E=ot(h),T=E.Bi.get(y);return void 0!==T?me.resolve(E.$i.get(T)):E.Vs.getTargetData(p,y)}(r,c,Ma(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(c,h.targetId).next(p=>{o=p})}).next(()=>r.Fi.getDocumentsMatchingQuery(c,e,t?i:Vt.min(),t?o:en())).next(h=>(OB(r,fV(e),h),{documents:h,ji:o})))}function RB(n,e){const t=ot(n),r=ot(t.Vs),i=t.$i.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.te(o,e).next(c=>c?c.target:null))}function kB(n,e){const t=ot(n),r=t.Li.get(e)||Vt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Ui.getAllFromCollectionGroup(i,e,HL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(OB(t,e,i),i))}function OB(n,e,t){let r=Vt.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Li.set(e,r)}function SR(){return SR=(0,Ae.Z)(function*(n,e,t,r){const i=ot(n);let o=en(),c=fo();for(const y of t){const E=e.Wi(y.metadata.name);y.document&&(o=o.add(E));const T=e.zi(y);T.setReadTime(e.Hi(y.metadata.readTime)),c=c.insert(E,T)}const h=i.Ui.newChangeBuffer({trackRemovals:!0}),p=yield Om(i,(y=r,Ma(Cm(yn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>xB(y,h,c).next(E=>(h.apply(y),E)).next(E=>i.Vs.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Vs.addMatchingKeys(y,o,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,E.Gi,E.Qi)).next(()=>E.Gi)))}),SR.apply(this,arguments)}function zW(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,Ae.Z)(function*(n,e,t=en()){const r=yield Om(n,Ma(_R(e.bundledQuery))),i=ot(n);return i.persistence.runTransaction("Save named query","readwrite",o=>{const c=Ti(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ds.saveNamedQuery(o,e);const h=r.withResumeToken(gi.EMPTY_BYTE_STRING,c);return i.$i=i.$i.insert(h.targetId,h),i.Vs.updateTargetData(o,h).next(()=>i.Vs.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Vs.addMatchingKeys(o,t,r.targetId)).next(()=>i.Ds.saveNamedQuery(o,e))})}),AR.apply(this,arguments)}function NB(n,e){return`firestore_clients_${n}_${e}`}function PB(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function MR(n,e){return`firestore_targets_${n}_${e}`}class dD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ji(e,t,r){const i=JSON.parse(r);let o,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(o=new He(i.error.code,i.error.message))),c?new dD(e,t,i.state,o):(ni("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ji(e,t){const r=JSON.parse(t);let i,o="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new He(r.error.code,r.error.message))),o?new Lb(e,r.state,i):(ni("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class hD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,o=XI();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=ZL(r.activeTargetIds[c]),o=o.add(r.activeTargetIds[c]);return i?new hD(e,o):(ni("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class xR{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new xR(t.clientId,t.onlineState):(ni("SharedClientState",`Failed to parse online state: ${e}`),null)}}class RR{constructor(){this.activeTargetIds=XI()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class kR{constructor(e,t,r,i,o){this.window=e,this.js=t,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Hr(Xt),this.started=!1,this.ir=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.rr=NB(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new RR),this.cr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.syncEngine.Ri();for(const i of t){if(i===e.tr)continue;const o=e.getItem(NB(e.persistenceKey,i));if(o){const c=hD.Ji(i,o);c&&(e.sr=e.sr.insert(c.clientId,c))}}e._r();const r=e.storage.getItem(e.lr);if(r){const i=e.wr(r);i&&e.mr(i)}for(const i of e.ir)e.nr(i);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,r){this.yr(e,t,r),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(MR(this.persistenceKey,e));if(r){const i=Lb.Ji(e,r);i&&(t=i.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(MR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Tr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.pr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.rr)return void ni("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ae.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const i=t.Rr(r.key);return t.br(i,null)}{const i=t.Pr(r.key,r.newValue);if(i)return t.br(i.clientId,i)}}else if(t.ar.test(r.key)){if(null!==r.newValue){const i=t.vr(r.key,r.newValue);if(i)return t.Vr(i)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const i=t.Sr(r.key,r.newValue);if(i)return t.Dr(i)}}else if(r.key===t.lr){if(null!==r.newValue){const i=t.wr(r.newValue);if(i)return t.mr(i)}}else if(r.key===t.ur){const i=function(o){let c=ho.ot;if(null!=o)try{const h=JSON.parse(o);Ut("number"==typeof h),c=h}catch(h){ni("SharedClientState","Failed to read sequence number from WebStorage",h)}return c}(r.newValue);i!==ho.ot&&t.sequenceNumberHandler(i)}else if(r.key===t.dr){const i=t.Cr(r.newValue);yield Promise.all(i.map(o=>t.syncEngine.Nr(o)))}}else t.ir.push(r)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,r){const i=new dD(this.currentUser,e,t,r),o=PB(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Yi())}pr(e){const t=PB(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,r){const i=MR(this.persistenceKey,e),o=new Lb(e,t,r);this.setItem(i,o.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const r=this.Rr(e);return hD.Ji(r,t)}vr(e,t){const r=this.ar.exec(e),i=Number(r[1]);return dD.Ji(new Ii(void 0!==r[2]?r[2]:null),i,t)}Sr(e,t){const r=this.hr.exec(e),i=Number(r[1]);return Lb.Ji(i,t)}wr(e){return xR.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ae.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),o=this.gr(r),c=[],h=[];return o.forEach(p=>{i.has(p)||c.push(p)}),i.forEach(p=>{o.has(p)||h.push(p)}),this.syncEngine.Mr(c,h).then(()=>{this.sr=r})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=XI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class FB{constructor(){this.Fr=new RR,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,r){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new RR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class GW{Br(e){}shutdown(){}}class LB{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const WW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qW{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class KW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,r,i,o){const c=this.oo(e,t);ze("RestConnection","Sending: ",c,r);const h={};return this.uo(h,i,o),this.co(e,c,h,r).then(p=>(ze("RestConnection","Received: ",p),p),p=>{throw lb("RestConnection",`${e} failed with error: `,p,"url: ",c,"request:",r),p})}ao(e,t,r,i,o,c){return this.ro(e,t,r,i,o)}uo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ym,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}oo(e,t){return`${this.so}/v1/${t}:${WW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,i){return new Promise((o,c)=>{const h=new qz;h.listenOnce(zz.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Kx.NO_ERROR:const y=h.getResponseJson();ze("Connection","XHR received:",JSON.stringify(y)),o(y);break;case Kx.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),c(new He(be.DEADLINE_EXCEEDED,"Request time out"));break;case Kx.HTTP_ERROR:const E=h.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',E,"response text:",h.getResponseText()),E>0){const T=h.getResponseJson().error;if(T&&T.status&&T.message){const R=function(L){const B=L.toLowerCase().replace(/_/g,"-");return Object.values(be).indexOf(B)>=0?B:be.UNKNOWN}(T.status);c(new He(R,T.message))}else c(new He(be.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new He(be.UNAVAILABLE,"Connection failed."));break;default:mt()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}ho(e,t,r){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jz(),c=$z(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Wz({})),this.uo(h.initMessageHeaders,t,r),(0,ne.uI)()||(0,ne.b$)()||(0,ne.d)()||(0,ne.w1)()||(0,ne.Mn)()||(0,ne.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");ze("Connection","Creating WebChannel: "+p,h);const y=o.createWebChannel(p,h);let E=!1,T=!1;const R=new qW({jr:B=>{T?ze("Connection","Not sending because WebChannel is closed:",B):(E||(ze("Connection","Opening WebChannel transport."),y.open(),E=!0),ze("Connection","WebChannel sending:",B),y.send(B))},Wr:()=>y.close()}),L=(B,J,we)=>{B.listen(J,nt=>{try{we(nt)}catch(ut){setTimeout(()=>{throw ut},0)}})};return L(y,UI.EventType.OPEN,()=>{T||ze("Connection","WebChannel transport opened.")}),L(y,UI.EventType.CLOSE,()=>{T||(T=!0,ze("Connection","WebChannel transport closed"),R.eo())}),L(y,UI.EventType.ERROR,B=>{T||(T=!0,lb("Connection","WebChannel transport errored:",B),R.eo(new He(be.UNAVAILABLE,"The operation could not be completed")))}),L(y,UI.EventType.MESSAGE,B=>{var J;if(!T){const we=B.data[0];Ut(!!we);const nt=we,ut=nt.error||(null===(J=nt[0])||void 0===J?void 0:J.error);if(ut){ze("Connection","WebChannel received error:",ut);const Tt=ut.status;let _t=function(Jt){const Tn=ri[Jt];if(void 0!==Tn)return MV(Tn)}(Tt),Gt=ut.message;void 0===_t&&(_t=be.INTERNAL,Gt="Unknown error status: "+Tt+" with message "+ut.message),T=!0,R.eo(new He(_t,Gt)),y.close()}else ze("Connection","WebChannel received:",we),R.no(we)}}),L(c,Gz.STAT_EVENT,B=>{B.stat===PL.PROXY?ze("Connection","Detected buffering proxy"):B.stat===PL.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.Zr()},0),R}}function VB(){return typeof window<"u"?window:null}function fD(){return typeof document<"u"?document:null}function Vb(n){return new BG(n,!0)}class OR{constructor(e,t,r=1e3,i=1.5,o=6e4){this.js=e,this.timerId=t,this.lo=r,this.fo=i,this._o=o,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,i,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class BB{constructor(e,t,r,i,o,c,h,p){this.js=e,this.Ao=r,this.Ro=i,this.bo=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new OR(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ae.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ae.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var r=this;return(0,Ae.Z)(function*(){r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==e?r.So.reset():t&&t.code===be.RESOURCE_EXHAUSTED?(ni(t.toString()),ni("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):t&&t.code===be.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Po===t&&this.Uo(r,i)},r=>{e(()=>{const i=new He(be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.qo(i)})})}Uo(e,t){const r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{r(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(i=>{r(()=>this.qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}xo(){var e=this;this.state=5,this.So.Io((0,Ae.Z)(function*(){e.state=0,e.start()}))}qo(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YW extends BB{constructor(e,t,r,i,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.wt=o}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function jG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:mt(),i=e.targetChange.targetIds||[],o=function(p,y){return p.dt?(Ut(void 0===y||"string"==typeof y),gi.fromBase64String(y||"")):(Ut(void 0===y||y instanceof Uint8Array),gi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&function(p){const y=void 0===p.code?be.UNKNOWN:MV(p.code);return new He(y,p.message||"")}(c);t=new NV(r,i,o,h||null)}else if("documentChange"in e){const r=e.documentChange,i=mc(n,r.document.name),o=Ti(r.document.updateTime),c=new Ki({mapValue:{fields:r.document.fields}}),h=Qn.newFoundDocument(i,o,c);t=new JI(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=mc(n,r.document),o=r.readTime?Ti(r.readTime):Vt.min(),c=Qn.newNoDocument(i,o);t=new JI([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=mc(n,r.document);t=new JI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return mt();{const r=e.filter,o=new RG(r.count||0);t=new OV(r.targetId,o)}}var p;return t}(this.wt,e),r=function(i){if(!("targetChange"in i))return Vt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Vt.min():o.readTime?Ti(o.readTime):Vt.min()}(e);return this.listener.Go(t,r)}Qo(e){const t={};t.database=Ab(this.wt),t.addTarget=function(i,o){let c;const h=o.target;return c=qI(h)?{documents:zV(i,h)}:{query:GV(i,h)},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?c.resumeToken=VV(i,o.resumeToken):o.snapshotVersion.compareTo(Vt.min())>0&&(c.readTime=Tb(i,o.snapshotVersion.toTimestamp())),c}(this.wt,e);const r=function zG(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return mt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Mo(t)}jo(e){const t={};t.database=Ab(this.wt),t.removeTarget=e,this.Mo(t)}}class ZW extends BB{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.wt=o,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Ut(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function $G(n,e){return n&&n.length>0?(Ut(void 0!==e),n.map(t=>function(r,i){let o=Ti(r.updateTime?r.updateTime:i);return o.isEqual(Vt.min())&&(o=Ti(i)),new AG(o,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.Jo(r,t)}return Ut(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Ab(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Mb(this.wt,r))};this.Mo(t)}}class QW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.wt=i,this.Zo=!1}tu(){if(this.Zo)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,r){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ro(e,t,r,i,o)).catch(i=>{throw"FirebaseError"===i.name?(i.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new He(be.UNKNOWN,i.toString())})}ao(e,t,r,i){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.bo.ao(e,t,r,o,c,i)).catch(o=>{throw"FirebaseError"===o.name?(o.code===be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new He(be.UNKNOWN,o.toString())})}terminate(){this.Zo=!0}}class XW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(ni(t),this.su=!1):ze("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class JW{constructor(e,t,r,i,o){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=o,this.du.Br(h=>{r.enqueueAndForget((0,Ae.Z)(function*(){var p;eh(c)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Ae.Z)(function*(y){const E=ot(y);E.lu.add(4),yield Pm(E),E._u.set("Unknown"),E.lu.delete(4),yield Bb(E)}),function(y){return p.apply(this,arguments)})(c))}))}),this._u=new XW(r,i)}}function Bb(n){return NR.apply(this,arguments)}function NR(){return NR=(0,Ae.Z)(function*(n){if(eh(n))for(const e of n.fu)yield e(!0)}),NR.apply(this,arguments)}function Pm(n){return PR.apply(this,arguments)}function PR(){return PR=(0,Ae.Z)(function*(n){for(const e of n.fu)yield e(!1)}),PR.apply(this,arguments)}function pD(n,e){const t=ot(n);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),VR(t)?LR(t):Lm(t).Co()&&FR(t,e))}function Ub(n,e){const t=ot(n),r=Lm(t);t.hu.delete(e),r.Co()&&UB(t,e),0===t.hu.size&&(r.Co()?r.ko():eh(t)&&t._u.set("Unknown"))}function FR(n,e){n.wu.Nt(e.targetId),Lm(n).Qo(e)}function UB(n,e){n.wu.Nt(e),Lm(n).jo(e)}function LR(n){n.wu=new FG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),te:e=>n.hu.get(e)||null}),Lm(n).start(),n._u.iu()}function VR(n){return eh(n)&&!Lm(n).Do()&&n.hu.size>0}function eh(n){return 0===ot(n).lu.size}function HB(n){n.wu=void 0}function e3(n){return BR.apply(this,arguments)}function BR(){return BR=(0,Ae.Z)(function*(n){n.hu.forEach((e,t)=>{FR(n,e)})}),BR.apply(this,arguments)}function t3(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,Ae.Z)(function*(n,e){HB(n),VR(n)?(n._u.uu(e),LR(n)):n._u.set("Unknown")}),UR.apply(this,arguments)}function n3(n,e,t){return HR.apply(this,arguments)}function HR(){return HR=(0,Ae.Z)(function*(n,e,t){if(n._u.set("Online"),e instanceof NV&&2===e.state&&e.cause)try{yield(r=(0,Ae.Z)(function*(i,o){const c=o.cause;for(const h of o.targetIds)i.hu.has(h)&&(yield i.remoteSyncer.rejectListen(h,c),i.hu.delete(h),i.wu.removeTarget(h))}),function(i,o){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield gD(n,r)}else if(e instanceof JI?n.wu.Ut(e):e instanceof OV?n.wu.zt(e):n.wu.Gt(e),!t.isEqual(Vt.min()))try{const r=yield MB(n.localStore);t.compareTo(r)>=0&&(yield function(i,o){const c=i.wu.Yt(o);return c.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.hu.get(p);y&&i.hu.set(p,y.withResumeToken(h.resumeToken,o))}}),c.targetMismatches.forEach(h=>{const p=i.hu.get(h);if(!p)return;i.hu.set(h,p.withResumeToken(gi.EMPTY_BYTE_STRING,p.snapshotVersion)),UB(i,h);const y=new Qd(p.target,h,1,p.sequenceNumber);FR(i,y)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield gD(n,r)}var r}),HR.apply(this,arguments)}function gD(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,Ae.Z)(function*(n,e,t){if(!Gd(e))throw e;n.lu.add(1),yield Pm(n),n._u.set("Offline"),t||(t=()=>MB(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ae.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.lu.delete(1),yield Bb(n)}))}),jR.apply(this,arguments)}function jB(n,e){return e().catch(t=>gD(n,t,e))}function Fm(n){return $R.apply(this,arguments)}function $R(){return $R=(0,Ae.Z)(function*(n){const e=ot(n),t=th(e);let r=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;r3(e);)try{const i=yield jW(e.localStore,r);if(null===i){0===e.au.length&&t.ko();break}r=i.batchId,s3(e,i)}catch(i){yield gD(e,i)}$B(e)&&zB(e)}),$R.apply(this,arguments)}function r3(n){return eh(n)&&n.au.length<10}function s3(n,e){n.au.push(e);const t=th(n);t.Co()&&t.zo&&t.Ho(e.mutations)}function $B(n){return eh(n)&&!th(n).Do()&&n.au.length>0}function zB(n){th(n).start()}function o3(n){return zR.apply(this,arguments)}function zR(){return zR=(0,Ae.Z)(function*(n){th(n).Xo()}),zR.apply(this,arguments)}function a3(n){return GR.apply(this,arguments)}function GR(){return GR=(0,Ae.Z)(function*(n){const e=th(n);for(const t of n.au)e.Ho(t.mutations)}),GR.apply(this,arguments)}function l3(n,e,t){return WR.apply(this,arguments)}function WR(){return WR=(0,Ae.Z)(function*(n,e,t){const r=n.au.shift(),i=gR.from(r,e,t);yield jB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fm(n)}),WR.apply(this,arguments)}function c3(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,Ae.Z)(function*(n,e){var t;e&&th(n).zo&&(yield(t=(0,Ae.Z)(function*(r,i){if(AV(o=i.code)&&o!==be.ABORTED){const c=r.au.shift();th(r).No(),yield jB(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Fm(r)}var o}),function(r,i){return t.apply(this,arguments)})(n,e)),$B(n)&&zB(n)}),qR.apply(this,arguments)}function GB(n,e){return KR.apply(this,arguments)}function KR(){return KR=(0,Ae.Z)(function*(n,e){const t=ot(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=eh(t);t.lu.add(3),yield Pm(t),r&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Bb(t)}),KR.apply(this,arguments)}function YR(n,e){return ZR.apply(this,arguments)}function ZR(){return ZR=(0,Ae.Z)(function*(n,e){const t=ot(n);e?(t.lu.delete(2),yield Bb(t)):e||(t.lu.add(2),yield Pm(t),t._u.set("Unknown"))}),ZR.apply(this,arguments)}function Lm(n){return n.mu||(n.mu=function(e,t,r){const i=ot(e);return i.tu(),new YW(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:e3.bind(null,n),Jr:t3.bind(null,n),Go:n3.bind(null,n)}),n.fu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.mu.No(),VR(n)?LR(n):n._u.set("Unknown")):(yield n.mu.stop(),HB(n))});return function(t){return e.apply(this,arguments)}}())),n.mu}function th(n){return n.gu||(n.gu=function(e,t,r){const i=ot(e);return i.tu(),new ZW(t,i.bo,i.authCredentials,i.appCheckCredentials,i.wt,r)}(n.datastore,n.asyncQueue,{zr:o3.bind(null,n),Jr:c3.bind(null,n),Yo:a3.bind(null,n),Jo:l3.bind(null,n)}),n.fu.push(function(){var e=(0,Ae.Z)(function*(t){t?(n.gu.No(),yield Fm(n)):(yield n.gu.stop(),n.au.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.au.length} pending writes`),n.au=[]))});return function(t){return e.apply(this,arguments)}}())),n.gu}class QR{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,o){const c=Date.now()+r,h=new QR(e,t,c,i,o);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new He(be.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vm(n,e){if(ni("AsyncQueue",`${e}: ${n}`),Gd(n))return new He(be.UNAVAILABLE,`${e}: ${n}`);throw n}class Bm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||tt.comparator(t.key,r.key):(t,r)=>tt.comparator(t.key,r.key),this.keyedMap=Eb(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new Bm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Bm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Bm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class WB{constructor(){this.yu=new Hr(tt.comparator)}track(e){const t=e.doc.key,r=this.yu.get(t);r?0!==e.type&&3===r.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==r.type?this.yu=this.yu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.yu=this.yu.remove(t):1===e.type&&2===r.type?this.yu=this.yu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):mt():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Um{constructor(e,t,r,i,o,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new Um(e,t,Bm.emptySet(t),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class u3{constructor(){this.Iu=void 0,this.listeners=[]}}class d3{constructor(){this.queries=new Zd(e=>hV(e),vb),this.onlineState="Unknown",this.Tu=new Set}}function XR(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,Ae.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1,o=t.queries.get(r);if(o||(i=!0,o=new u3),i)try{o.Iu=yield t.onListen(r)}catch(c){const h=Vm(c,`Initialization of query '${aR(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,o),o.listeners.push(e),e.Eu(t.onlineState),o.Iu&&e.Au(o.Iu)&&nk(t)}),JR.apply(this,arguments)}function ek(n,e){return tk.apply(this,arguments)}function tk(){return tk=(0,Ae.Z)(function*(n,e){const t=ot(n),r=e.query;let i=!1;const o=t.queries.get(r);if(o){const c=o.listeners.indexOf(e);c>=0&&(o.listeners.splice(c,1),i=0===o.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),tk.apply(this,arguments)}function h3(n,e){const t=ot(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const h of c.listeners)h.Au(i)&&(r=!0);c.Iu=i}}r&&nk(t)}function f3(n,e,t){const r=ot(n),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(t);r.queries.delete(e)}function nk(n){n.Tu.forEach(e=>{e.next()})}class rk{constructor(e,t,r){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}Au(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Um(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Um.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class p3{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class qB{constructor(e){this.wt=e}Wi(e){return mc(this.wt,e)}zi(e){return e.metadata.exists?$V(this.wt,e.document,!1):Qn.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ti(e)}}class g3{constructor(e,t,r){this.xu=e,this.localStore=t,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KB(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=yn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,r=new qB(this.wt);for(const i of e)if(i.metadata.queries){const o=r.Wi(i.metadata.name);for(const c of i.metadata.queries){const h=(t.get(c)||en()).add(o);t.set(c,h)}}return t}complete(){var e=this;return(0,Ae.Z)(function*(){const t=yield function $W(n,e,t,r){return SR.apply(this,arguments)}(e.localStore,new qB(e.wt),e.documents,e.xu.id),r=e.ku(e.documents);for(const i of e.queries)yield zW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function KB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class YB{constructor(e){this.key=e}}class ZB{constructor(e){this.key=e}}class QB{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=en(),this.mutatedKeys=en(),this.Lu=pV(e),this.Uu=new Bm(this.Lu)}get qu(){return this.Fu}Ku(e,t){const r=t?t.Gu:new WB,i=t?t.Uu:this.Uu;let o=t?t.mutatedKeys:this.mutatedKeys,c=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((E,T)=>{const R=i.get(E),L=lR(this.query,T)?T:null,B=!!R&&this.mutatedKeys.has(R.key),J=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let we=!1;R&&L?R.data.isEqual(L.data)?B!==J&&(r.track({type:3,doc:L}),we=!0):this.Qu(R,L)||(r.track({type:2,doc:L}),we=!0,(p&&this.Lu(L,p)>0||y&&this.Lu(L,y)<0)&&(h=!0)):!R&&L?(r.track({type:0,doc:L}),we=!0):R&&!L&&(r.track({type:1,doc:R}),we=!0,(p||y)&&(h=!0)),we&&(L?(c=c.add(L),o=J?o.add(E):o.delete(E)):(c=c.delete(E),o=o.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),o=o.delete(E.key),r.track({type:1,doc:E})}return{Uu:c,Gu:r,Oi:h,mutatedKeys:o}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const o=e.Gu.pu();o.sort((y,E)=>function(T,R){const L=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return mt()}};return L(T)-L(R)}(y.type,E.type)||this.Lu(y.doc,E.doc)),this.ju(r);const c=t?this.Wu():[],h=0===this.Bu.size&&this.current?1:0,p=h!==this.$u;return this.$u=h,0!==o.length||p?{snapshot:new Um(this.query,e.Uu,i,o,e.mutatedKeys,0===h,p,!1),zu:c}:{zu:c}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new WB,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=en(),this.Uu.forEach(r=>{this.Hu(r.key)&&(this.Bu=this.Bu.add(r.key))});const t=[];return e.forEach(r=>{this.Bu.has(r)||t.push(new ZB(r))}),this.Bu.forEach(r=>{e.has(r)||t.push(new YB(r))}),t}Ju(e){this.Fu=e.ji,this.Bu=en();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Um.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class m3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _3{constructor(e){this.key=e,this.Xu=!1}}class y3{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Zu={},this.tc=new Zd(h=>hV(h),vb),this.ec=new Map,this.nc=new Set,this.sc=new Hr(tt.comparator),this.ic=new Map,this.rc=new bR,this.oc={},this.uc=new Map,this.cc=Qf.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function v3(n,e){return ik.apply(this,arguments)}function ik(){return ik=(0,Ae.Z)(function*(n,e){const t=Sk(n);let r,i;const o=t.tc.get(e);if(o)r=o.targetId,t.sharedClientState.addLocalQueryTarget(r),i=o.view.Yu();else{const c=yield Om(t.localStore,Ma(e));t.isPrimaryClient&&pD(t.remoteStore,c);const h=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield sk(t,e,r,"current"===h)}return i}),ik.apply(this,arguments)}function sk(n,e,t,r){return ok.apply(this,arguments)}function ok(){return ok=(0,Ae.Z)(function*(n,e,t,r){n.hc=(E,T,R)=>{return(L=(0,Ae.Z)(function*(B,J,we,nt){let ut=J.view.Ku(we);ut.Oi&&(ut=yield uD(B.localStore,J.query,!1).then(({documents:Gt})=>J.view.Ku(Gt,ut)));const Tt=nt&&nt.targetChanges.get(J.targetId),_t=J.view.applyChanges(ut,B.isPrimaryClient,Tt);return mk(B,J.targetId,_t.zu),_t.snapshot}),function(B,J,we,nt){return L.apply(this,arguments)})(n,E,T,R);var L};const i=yield uD(n.localStore,e,!0),o=new QB(e,i.ji),c=o.Ku(i.documents),h=Db.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=o.applyChanges(c,n.isPrimaryClient,h);mk(n,t,p.zu);const y=new m3(e,t,o);return n.tc.set(e,y),n.ec.has(t)?n.ec.get(t).push(e):n.ec.set(t,[e]),p.snapshot}),ok.apply(this,arguments)}function b3(n,e){return ak.apply(this,arguments)}function ak(){return ak=(0,Ae.Z)(function*(n,e){const t=ot(n),r=t.tc.get(e),i=t.ec.get(r.targetId);if(i.length>1)return t.ec.set(r.targetId,i.filter(o=>!vb(o,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Nm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Ub(t.remoteStore,r.targetId),Hm(t,r.targetId)}).catch(zd))):(Hm(t,r.targetId),yield Nm(t.localStore,r.targetId,!0))}),ak.apply(this,arguments)}function lk(){return lk=(0,Ae.Z)(function*(n,e,t){const r=Ak(n);try{const i=yield function(o,c){const h=ot(o),p=br.now(),y=c.reduce((R,L)=>R.add(L.key),en());let E,T;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let L=fo(),B=en();return h.Ui.getEntries(R,y).next(J=>{L=J,L.forEach((we,nt)=>{nt.isValidDocument()||(B=B.add(we))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,L)).next(J=>{E=J;const we=[];for(const nt of c){const ut=xG(nt,E.get(nt.key).overlayedDocument);null!=ut&&we.push(new yu(nt.key,ut,rV(ut.value.mapValue),kr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,p,we,c)}).next(J=>{T=J;const we=J.applyToLocalDocumentSet(E,B);return h.documentOverlayCache.saveOverlays(R,J.batchId,we)})}).then(()=>({batchId:T.batchId,changes:RV(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,h){let p=o.oc[o.currentUser.toKey()];p||(p=new Hr(Xt)),p=p.insert(c,h),o.oc[o.currentUser.toKey()]=p}(r,i.batchId,t),yield vu(r,i.changes),yield Fm(r.remoteStore)}catch(i){const o=Vm(i,"Failed to persist write");t.reject(o)}}),lk.apply(this,arguments)}function XB(n,e){return ck.apply(this,arguments)}function ck(){return ck=(0,Ae.Z)(function*(n,e){const t=ot(n);try{const r=yield HW(t.localStore,e);e.targetChanges.forEach((i,o)=>{const c=t.ic.get(o);c&&(Ut(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.Xu=!0:i.modifiedDocuments.size>0?Ut(c.Xu):i.removedDocuments.size>0&&(Ut(c.Xu),c.Xu=!1))}),yield vu(t,r,e)}catch(r){yield zd(r)}}),ck.apply(this,arguments)}function JB(n,e,t){const r=ot(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.tc.forEach((o,c)=>{const h=c.view.Eu(e);h.snapshot&&i.push(h.snapshot)}),function(o,c){const h=ot(o);h.onlineState=c;let p=!1;h.queries.forEach((y,E)=>{for(const T of E.listeners)T.Eu(c)&&(p=!0)}),p&&nk(h)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function E3(n,e,t){return uk.apply(this,arguments)}function uk(){return uk=(0,Ae.Z)(function*(n,e,t){const r=ot(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.ic.get(e),o=i&&i.key;if(o){let c=new Hr(tt.comparator);c=c.insert(o,Qn.newNoDocument(o,Vt.min()));const h=en().add(o),p=new Ib(Vt.min(),new Map,new jn(Xt),c,h);yield XB(r,p),r.sc=r.sc.remove(o),r.ic.delete(e),_k(r)}else yield Nm(r.localStore,e,!1).then(()=>Hm(r,e,t)).catch(zd)}),uk.apply(this,arguments)}function C3(n,e){return dk.apply(this,arguments)}function dk(){return dk=(0,Ae.Z)(function*(n,e){const t=ot(n),r=e.batch.batchId;try{const i=yield UW(t.localStore,e);gk(t,r,null),pk(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield vu(t,i)}catch(i){yield zd(i)}}),dk.apply(this,arguments)}function I3(n,e,t){return hk.apply(this,arguments)}function hk(){return hk=(0,Ae.Z)(function*(n,e,t){const r=ot(n);try{const i=yield function(o,c){const h=ot(o);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next(E=>(Ut(null!==E),y=E.keys(),h.mutationQueue.removeMutationBatch(p,E))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y)).next(()=>h.localDocuments.getDocuments(p,y))})}(r.localStore,e);gk(r,e,t),pk(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield vu(r,i)}catch(i){yield zd(i)}}),hk.apply(this,arguments)}function fk(){return fk=(0,Ae.Z)(function*(n,e){const t=ot(n);eh(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const c=ot(o);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>c.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.uc.get(r)||[];i.push(e),t.uc.set(r,i)}catch(r){const i=Vm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),fk.apply(this,arguments)}function pk(n,e){(n.uc.get(e)||[]).forEach(t=>{t.resolve()}),n.uc.delete(e)}function gk(n,e,t){const r=ot(n);let i=r.oc[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Hm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ec.get(e))n.tc.delete(r),t&&n.Zu.lc(r,t);n.ec.delete(e),n.isPrimaryClient&&n.rc.us(e).forEach(r=>{n.rc.containsKey(r)||eU(n,r)})}function eU(n,e){n.nc.delete(e.path.canonicalString());const t=n.sc.get(e);null!==t&&(Ub(n.remoteStore,t),n.sc=n.sc.remove(e),n.ic.delete(t),_k(n))}function mk(n,e,t){for(const r of t)r instanceof YB?(n.rc.addReference(r.key,e),T3(n,r)):r instanceof ZB?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.rc.removeReference(r.key,e),n.rc.containsKey(r.key)||eU(n,r.key)):mt()}function T3(n,e){const t=e.key,r=t.path.canonicalString();n.sc.get(t)||n.nc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.nc.add(r),_k(n))}function _k(n){for(;n.nc.size>0&&n.sc.size<n.maxConcurrentLimboResolutions;){const e=n.nc.values().next().value;n.nc.delete(e);const t=new tt(yn.fromString(e)),r=n.cc.next();n.ic.set(r,new _3(t)),n.sc=n.sc.insert(t,r),pD(n.remoteStore,new Qd(Ma(Cm(t.path)),r,2,ho.ot))}}function vu(n,e,t){return yk.apply(this,arguments)}function yk(){return yk=(0,Ae.Z)(function*(n,e,t){const r=ot(n),i=[],o=[],c=[];var h;r.tc.isEmpty()||(r.tc.forEach((h,p)=>{c.push(r.hc(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const E=IR.Vi(p.targetId,y);o.push(E)}}))}),yield Promise.all(c),r.Zu.Go(i),yield(h=(0,Ae.Z)(function*(p,y){const E=ot(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>me.forEach(y,R=>me.forEach(R.Pi,L=>E.persistence.referenceDelegate.addReference(T,R.targetId,L)).next(()=>me.forEach(R.vi,L=>E.persistence.referenceDelegate.removeReference(T,R.targetId,L)))))}catch(T){if(!Gd(T))throw T;ze("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const R=T.targetId;if(!T.fromCache){const L=E.$i.get(R),J=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);E.$i=E.$i.insert(R,J)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,o))}),yk.apply(this,arguments)}function S3(n,e){return vk.apply(this,arguments)}function vk(){return vk=(0,Ae.Z)(function*(n,e){const t=ot(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield AB(t.localStore,e);t.currentUser=e,(i=t).uc.forEach(c=>{c.forEach(h=>{h.reject(new He(be.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.uc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield vu(t,r.Ki)}var i}),vk.apply(this,arguments)}function A3(n,e){const t=ot(n),r=t.ic.get(e);if(r&&r.Xu)return en().add(r.key);{let i=en();const o=t.ec.get(e);if(!o)return i;for(const c of o){const h=t.tc.get(c);i=i.unionWith(h.view.qu)}return i}}function M3(n,e){return bk.apply(this,arguments)}function bk(){return bk=(0,Ae.Z)(function*(n,e){const t=ot(n),r=yield uD(t.localStore,e.query,!0),i=e.view.Ju(r);return t.isPrimaryClient&&mk(t,e.targetId,i.zu),i}),bk.apply(this,arguments)}function x3(n,e){return wk.apply(this,arguments)}function wk(){return wk=(0,Ae.Z)(function*(n,e){const t=ot(n);return kB(t.localStore,e).then(r=>vu(t,r))}),wk.apply(this,arguments)}function R3(n,e,t,r){return Ek.apply(this,arguments)}function Ek(){return Ek=(0,Ae.Z)(function*(n,e,t,r){const i=ot(n),o=yield function(c,h){const p=ot(c),y=ot(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>y.yn(E,h).next(T=>T?p.localDocuments.getDocuments(E,T):me.resolve(null)))}(i.localStore,e);var h;null!==o?("pending"===t?yield Fm(i.remoteStore):"acknowledged"===t||"rejected"===t?(gk(i,e,r||null),pk(i,e),h=e,ot(ot(i.localStore).mutationQueue).In(h)):mt(),yield vu(i,o)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ek.apply(this,arguments)}function Ck(){return Ck=(0,Ae.Z)(function*(n,e){const t=ot(n);if(Sk(t),Ak(t),!0===e&&!0!==t.ac){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield tU(t,r.toArray());t.ac=!0,yield YR(t.remoteStore,!0);for(const o of i)pD(t.remoteStore,o)}else if(!1===e&&!1!==t.ac){const r=[];let i=Promise.resolve();t.ec.forEach((o,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Hm(t,c),Nm(t.localStore,c,!0))),Ub(t.remoteStore,c)}),yield i,yield tU(t,r),function(o){const c=ot(o);c.ic.forEach((h,p)=>{Ub(c.remoteStore,p)}),c.rc.cs(),c.ic=new Map,c.sc=new Hr(tt.comparator)}(t),t.ac=!1,yield YR(t.remoteStore,!1)}}),Ck.apply(this,arguments)}function tU(n,e,t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,Ae.Z)(function*(n,e,t){const r=ot(n),i=[],o=[];for(const c of e){let h;const p=r.ec.get(c);if(p&&0!==p.length){h=yield Om(r.localStore,Ma(p[0]));for(const y of p){const E=r.tc.get(y),T=yield M3(r,E);T.snapshot&&o.push(T.snapshot)}}else{const y=yield RB(r.localStore,c);h=yield Om(r.localStore,y),yield sk(r,nU(y),c,!1)}i.push(h)}return r.Zu.Go(o),i}),Ik.apply(this,arguments)}function nU(n){return uV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function O3(n){const e=ot(n);return ot(ot(e.localStore).persistence).Ri()}function N3(n,e,t,r){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,Ae.Z)(function*(n,e,t,r){const i=ot(n);if(i.ac)return void ze("SyncEngine","Ignoring unexpected query state notification.");const o=i.ec.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{const c=yield kB(i.localStore,fV(o[0])),h=Ib.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield vu(i,c,h);break}case"rejected":yield Nm(i.localStore,e,!0),Hm(i,e,r);break;default:mt()}}),Dk.apply(this,arguments)}function P3(n,e,t){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,Ae.Z)(function*(n,e,t){const r=Sk(n);if(r.ac){for(const i of e){if(r.ec.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const o=yield RB(r.localStore,i),c=yield Om(r.localStore,o);yield sk(r,nU(o),c.targetId,!1),pD(r.remoteStore,c)}for(const i of t)r.ec.has(i)&&(yield Nm(r.localStore,i,!1).then(()=>{Ub(r.remoteStore,i),Hm(r,i)}).catch(zd))}}),Tk.apply(this,arguments)}function Sk(n){const e=ot(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=XB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=A3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E3.bind(null,e),e.Zu.Go=h3.bind(null,e.eventManager),e.Zu.lc=f3.bind(null,e.eventManager),e}function Ak(n){const e=ot(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I3.bind(null,e),e}class rU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ae.Z)(function*(){t.wt=Vb(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return SB(this.persistence,new TB,e.initialUser,this.wt)}_c(e){return new IB(lD.Ms,this.wt)}dc(e){return new FB}terminate(){var e=this;return(0,Ae.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class iU extends rU{constructor(e,t,r){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e),yield r.yc.initialize(r,e),yield Ak(r.yc.syncEngine),yield Fm(r.yc.remoteStore),yield r.persistence.ci(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return SB(this.persistence,new TB,e.initialUser,this.wt)}mc(e,t){return new DW(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const r=new aG(t,this.persistence);return new oG(e.asyncQueue,r)}_c(e){const t=CR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?po.withCacheSize(this.cacheSizeBytes):po.DEFAULT;return new ER(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,VB(),fD(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new FB}}class L3 extends iU{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ae.Z)(function*(){yield t().call(r,e);const i=r.yc.syncEngine;r.sharedClientState instanceof kR&&(r.sharedClientState.syncEngine={kr:R3.bind(null,i),Or:N3.bind(null,i),Mr:P3.bind(null,i),Ri:O3.bind(null,i),Nr:x3.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.ci(function(){var o=(0,Ae.Z)(function*(c){yield function k3(n,e){return Ck.apply(this,arguments)}(r.yc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return o.apply(this,arguments)}}())})()}dc(e){const t=VB();if(!kR.V(t))throw new He(be.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=CR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new kR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mk{initialize(e,t){var r=this;return(0,Ae.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>JB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=S3.bind(null,r.syncEngine),yield YR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new d3}createDatastore(e){const t=Vb(e.databaseInfo.databaseId),r=new KW(e.databaseInfo);return new QW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,o=h=>JB(this.syncEngine,h,0),c=LB.V()?new LB:new GW,new JW(t,r,i,o,c);var t,r,i,o,c}createSyncEngine(e,t){return function(r,i,o,c,h,p,y){const E=new y3(r,i,o,c,h,p);return y&&(E.ac=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ae.Z)(function*(t){const r=ot(t);ze("RemoteStore","RemoteStore shutting down."),r.lu.add(5),yield Pm(r),r.du.shutdown(),r._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function sU(n,e=10240){let t=0;return{read:()=>(0,Ae.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ae.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class mD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class V3{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new Di,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(r=>{r&&r.Cu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ae.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ae.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.bc();if(null===t)return null;const r=e.Ac.decode(t),i=Number(r);isNaN(i)&&e.Pc(`length string (${r}) is not valid number`);const o=yield e.vc(i);return new p3(JSON.parse(o),t.length+i)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ae.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}vc(e){var t=this;return(0,Ae.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const r=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ae.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class B3{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ae.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new He(be.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ae.Z)(function*(o,c){const h=ot(o),p=Ab(h.wt)+"/documents",y={documents:c.map(L=>Sb(h.wt,L))},E=yield h.ao("BatchGetDocuments",p,y,c.length),T=new Map;E.forEach(L=>{const B=function HG(n,e){return"found"in e?function(t,r){Ut(!!r.found);const i=mc(t,r.found.name),o=Ti(r.found.updateTime),c=new Ki({mapValue:{fields:r.found.fields}});return Qn.newFoundDocument(i,o,c)}(n,e):"missing"in e?function(t,r){Ut(!!r.missing),Ut(!!r.readTime);const i=mc(t,r.missing),o=Ti(r.readTime);return Qn.newNoDocument(i,o)}(n,e):mt()}(h.wt,L);T.set(B.key.toString(),B)});const R=[];return c.forEach(L=>{const B=T.get(L.toString());Ut(!!B),R.push(B)}),R}),function(o,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Am(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ae.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const o=tt.fromPath(i);e.mutations.push(new cR(o,e.precondition(o)))}),yield(r=(0,Ae.Z)(function*(i,o){const c=ot(i),h=Ab(c.wt)+"/documents",p={writes:o.map(y=>Mb(c.wt,y))};yield c.ro("Commit",h,p)}),function(i,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw mt();t=Vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new He(be.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Vt.min()))throw new He(be.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class U3{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.Dc=r.maxAttempts,this.So=new OR(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ae.Z)(function*(){const t=new B3(e.datastore),r=e.xc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(o=>{e.Nc(o)}))}).catch(i=>{e.Nc(i)})}))}xc(e){try{const t=this.updateFunction(e);return!fb(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!AV(t)}return!1}}class H3{constructor(e,t,r,i){var o=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ii.UNAUTHENTICATED,this.clientId=BL.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ae.Z)(function*(h){ze("FirestoreClient","Received user=",h.uid),yield o.authCredentialListener(h),o.user=h});return function(h){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ze("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ae.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new He(be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Vm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function oU(n,e){return xk.apply(this,arguments)}function xk(){return xk=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ae.Z)(function*(o){r.isEqual(o)||(yield AB(e.localStore,o),r=o)});return function(o){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),xk.apply(this,arguments)}function aU(n,e){return Rk.apply(this,arguments)}function Rk(){return Rk=(0,Ae.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield kk(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>GB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>GB(e.remoteStore,o)),n.onlineComponents=e}),Rk.apply(this,arguments)}function kk(n){return Ok.apply(this,arguments)}function Ok(){return Ok=(0,Ae.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield oU(n,new rU)),n.offlineComponents}),Ok.apply(this,arguments)}function _D(n){return Nk.apply(this,arguments)}function Nk(){return Nk=(0,Ae.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield aU(n,new Mk)),n.onlineComponents}),Nk.apply(this,arguments)}function lU(n){return kk(n).then(e=>e.persistence)}function Pk(n){return kk(n).then(e=>e.localStore)}function cU(n){return _D(n).then(e=>e.remoteStore)}function Fk(n){return _D(n).then(e=>e.syncEngine)}function jm(n){return Lk.apply(this,arguments)}function Lk(){return Lk=(0,Ae.Z)(function*(n){const e=yield _D(n),t=e.eventManager;return t.onListen=v3.bind(null,e.syncEngine),t.onUnlisten=b3.bind(null,e.syncEngine),t}),Lk.apply(this,arguments)}function uU(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(i,o,c,h,p){const y=new mD({next:T=>{o.enqueueAndForget(()=>ek(i,E));const R=T.docs.has(c);!R&&T.fromCache?p.reject(new He(be.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&T.fromCache&&h&&"server"===h.source?p.reject(new He(be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new rk(Cm(c.path),y,{includeMetadataChanges:!0,Du:!0});return XR(i,E)}(yield jm(n),n.asyncQueue,e,t,r)})),r.promise}function dU(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function(i,o,c,h,p){const y=new mD({next:T=>{o.enqueueAndForget(()=>ek(i,E)),T.fromCache&&"server"===h.source?p.reject(new He(be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new rk(c,y,{includeMetadataChanges:!0,Du:!0});return XR(i,E)}(yield jm(n),n.asyncQueue,e,t,r)})),r.promise}const hU=new Map;function Vk(n,e,t){if(!t)throw new He(be.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fU(n,e,t,r){if(!0===e&&!0===r)throw new He(be.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pU(n){if(!tt.isDocumentKey(n))throw new He(be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gU(n){if(tt.isDocumentKey(n))throw new He(be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function yD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":mt()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new He(be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yD(n);throw new He(be.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function mU(n,e){if(e<=0)throw new He(be.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class _U{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new He(be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new He(be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,fU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _U({}),this._settingsFrozen=!1,e instanceof mu?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new He(be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(i.options.projectId)}(e))}get app(){if(!this._app)throw new He(be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _U(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Zz;switch(t.type){case"gapi":const r=t.client;return Ut(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new eG(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new He(be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=hU.get(e);t&&(ze("ComponentProvider","Removing Datastore"),hU.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class hs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class yc extends hs{constructor(e,t,r){super(e,t,Cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new tt(e))}withConverter(e){return new yc(this.firestore,e,this._path)}}function yU(n,e,...t){if(n=(0,ne.m9)(n),Vk("collection","path",e),n instanceof Hb){const r=yn.fromString(e,...t);return gU(r),new yc(n,null,r)}{if(!(n instanceof ar||n instanceof yc))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return gU(r),new yc(n.firestore,null,r)}}function vD(n,e,...t){if(n=(0,ne.m9)(n),1===arguments.length&&(e=BL.I()),Vk("doc","path",e),n instanceof Hb){const r=yn.fromString(e,...t);return pU(r),new ar(n,null,new tt(r))}{if(!(n instanceof ar||n instanceof yc))throw new He(be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yn.fromString(e,...t));return pU(r),new ar(n.firestore,n instanceof yc?n.converter:null,new tt(r))}}function vU(n,e){return n=(0,ne.m9)(n),e=(0,ne.m9)(e),(n instanceof ar||n instanceof yc)&&(e instanceof ar||e instanceof yc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function bU(n,e){return n=(0,ne.m9)(n),e=(0,ne.m9)(e),n instanceof hs&&e instanceof hs&&n.firestore===e.firestore&&vb(n._query,e._query)&&n.converter===e.converter}class X3{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new OR(this,"async_queue_retry"),this.Kc=()=>{const t=fD();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=fD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=fD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new Di;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ae.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Gd(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(r=>{throw this.Bc=r,this.Lc=!1,ni("INTERNAL UNHANDLED ERROR: ",function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),c}(r)),r}).then(r=>(this.Lc=!1,r))));return this.Oc=t,t}enqueueAfterDelay(e,t,r){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const i=QR.createAndSchedule(this,e,t,r,o=>this.Wc(o));return this.$c.push(i),i}Gc(){this.Bc&&mt()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ae.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Bk(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class J3{constructor(){this._progressObserver={},this._taskCompletionResolver=new Di,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class wr extends Hb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new X3,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||wU(this),this._firestoreClient.terminate()}}function tq(n=(0,Wi.getApp)()){return(0,Wi._getProvider)(n,"firestore").getImmediate()}function ii(n){return n._firestoreClient||wU(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function wU(n){var e;const t=n._freezeSettings(),r=(o=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new uG(n._databaseId,o,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var o,h;n._firestoreClient=new H3(n._authCredentials,n._appCheckCredentials,n._queue,r)}function EU(n,e,t){const r=new Di;return n.asyncQueue.enqueue((0,Ae.Z)(function*(){try{yield oU(n,t),yield aU(n,e),r.resolve()}catch(i){const o=i;if(!("FirebaseError"===(c=o).name?c.code===be.FAILED_PRECONDITION||c.code===be.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var c})).then(()=>r.promise)}function CU(n){if(n._initialized||n._terminated)throw new He(be.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class bu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new He(be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class vc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vc(gi.fromBase64String(e))}catch(t){throw new He(be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vc(gi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Jf{constructor(e){this._methodName=e}}class bD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new He(be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new He(be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Xt(this._lat,e._lat)||Xt(this._long,e._long)}}const uq=/^__.*__$/;class dq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new yu(e,this.data,this.fieldMask,t,this.fieldTransforms):new Sm(e,this.data,t,this.fieldTransforms)}}class IU{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new yu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function DU(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw mt()}}class wD{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.wt=r,this.ignoreUndefinedProperties=i,void 0===o&&this.Xc(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new wD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.sa(e),i}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ta({path:r,na:!1});return i.Xc(),i}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return ID(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(DU(this.Zc)&&uq.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class hq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=r||Vb(e)}aa(e,t,r,i=!1){return new wD({Zc:e,methodName:t,ca:r,path:Kr.emptyPath(),na:!1,ua:i},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function ep(n){const e=n._freezeSettings(),t=Vb(n._databaseId);return new hq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ED(n,e,t,r,i,o={}){const c=n.aa(o.merge||o.mergeFields?2:0,e,t,i);$k("Data must be an object, but it was:",c,r);const h=AU(r,c);let p,y;if(o.merge)p=new qo(c.fieldMask),y=c.fieldTransforms;else if(o.mergeFields){const E=[];for(const T of o.mergeFields){const R=zk(e,T,t);if(!c.contains(R))throw new He(be.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);xU(E,R)||E.push(R)}p=new qo(E),y=c.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=c.fieldTransforms;return new dq(new Ki(h),p,y)}class jb extends Jf{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jb}}function TU(n,e,t){return new wD({Zc:3,ca:e.settings.ca,methodName:n._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class Uk extends Jf{_toFieldTransform(e){return new bb(e.path,new Dm)}isEqual(e){return e instanceof Uk}}class fq extends Jf{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=TU(this,e,!0),r=this.ha.map(o=>tp(o,t)),i=new $f(r);return new bb(e.path,i)}isEqual(e){return this===e}}class pq extends Jf{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=TU(this,e,!0),r=this.ha.map(o=>tp(o,t)),i=new zf(r);return new bb(e.path,i)}isEqual(e){return this===e}}class gq extends Jf{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Tm(e.wt,_V(e.wt,this.la));return new bb(e.path,t)}isEqual(e){return this===e}}function Hk(n,e,t,r){const i=n.aa(1,e,t);$k("Data must be an object, but it was:",i,r);const o=[],c=Ki.empty();Vf(r,(p,y)=>{const E=CD(e,p,t);y=(0,ne.m9)(y);const T=i.ia(E);if(y instanceof jb)o.push(E);else{const R=tp(y,T);null!=R&&(o.push(E),c.set(E,R))}});const h=new qo(o);return new IU(c,h,i.fieldTransforms)}function jk(n,e,t,r,i,o){const c=n.aa(1,e,t),h=[zk(e,r,t)],p=[i];if(o.length%2!=0)throw new He(be.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<o.length;R+=2)h.push(zk(e,o[R])),p.push(o[R+1]);const y=[],E=Ki.empty();for(let R=h.length-1;R>=0;--R)if(!xU(y,h[R])){const L=h[R];let B=p[R];B=(0,ne.m9)(B);const J=c.ia(L);if(B instanceof jb)y.push(L);else{const we=tp(B,J);null!=we&&(y.push(L),E.set(L,we))}}const T=new qo(y);return new IU(E,T,c.fieldTransforms)}function SU(n,e,t,r=!1){return tp(t,n.aa(r?4:3,e))}function tp(n,e){if(MU(n=(0,ne.m9)(n)))return $k("Unsupported field value:",e,n),AU(n,e);if(n instanceof Jf)return function(t,r){if(!DU(r.Zc))throw r.oa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.oa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,r){const i=[];let o=0;for(const c of t){let h=tp(c,r.ra(o));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),o++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ne.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _V(r.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=br.fromDate(t);return{timestampValue:Tb(r.wt,i)}}if(t instanceof br){const i=new br(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Tb(r.wt,i)}}if(t instanceof bD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vc)return{bytesValue:VV(r.wt,t._byteString)};if(t instanceof ar){const i=r.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw r.oa(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:uR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.oa(`Unsupported field value: ${yD(t)}`)}(n,e)}function AU(n,e){const t={};return qL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vf(n,(r,i)=>{const o=tp(i,e.ea(r));null!=o&&(t[r]=o)}),{mapValue:{fields:t}}}function MU(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof br||n instanceof bD||n instanceof vc||n instanceof ar||n instanceof Jf)}function $k(n,e,t){if(!MU(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=yD(t);throw e.oa("an object"===r?n+" a custom object":n+" "+r)}var r}function zk(n,e,t){if((e=(0,ne.m9)(e))instanceof bu)return e._internalPath;if("string"==typeof e)return CD(n,e);throw ID("Field path arguments must be of type string or ",n,!1,void 0,t)}const mq=new RegExp("[~\\*/\\[\\]]");function CD(n,e,t){if(e.search(mq)>=0)throw ID(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bu(...e.split("."))._internalPath}catch{throw ID(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ID(n,e,t,r,i){const o=r&&!r.isEmpty(),c=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(o||c)&&(p+=" (found",o&&(p+=` in field ${r}`),c&&(p+=` in document ${i}`),p+=")"),new He(be.INVALID_ARGUMENT,h+n+p)}function xU(n,e){return n.some(t=>t.isEqual(e))}class $b{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new _q(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class _q extends $b{data(){return super.data()}}function DD(n,e){return"string"==typeof e?CD(n,e):e instanceof bu?e._internalPath:e._delegate._internalPath}class np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wu extends $b{constructor(e,t,r,i,o,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(DD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zb extends wu{data(e={}){return super.data(e)}}class nh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new np(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zb(this._firestore,this._userDataWriter,r.key,r,new np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new He(be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new zb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new np(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const h=new zb(r._firestore,r._userDataWriter,c.doc.key,c.doc,new np(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==c.type&&(p=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),1!==c.type&&(o=o.add(c.doc),y=o.indexOf(c.doc.key)),{type:yq(c.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function yq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return mt()}}function RU(n,e){return n instanceof wu&&e instanceof wu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof nh&&e instanceof nh&&n._firestore===e._firestore&&bU(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function kU(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new He(be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gb{}function rh(n,...e){for(const t of e)n=t._apply(n);return n}class vq extends Gb{constructor(e,t,r){super(),this.fa=e,this.da=t,this._a=r,this.type="where"}_apply(e){const t=ep(e.firestore),r=function(i,o,c,h,p,y,E){let T;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new He(be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){VU(E,y);const L=[];for(const B of E)L.push(LU(h,i,B));T={arrayValue:{values:L}}}else T=LU(h,i,E)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||VU(E,y),T=SU(c,"where",E,"in"===y||"not-in"===y);const R=Yi.create(p,y,T);return function(L,B){if(B.ht()){const we=sR(L);if(null!==we&&!we.isEqual(B.field))throw new He(be.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${B.field.toString()}'`);const nt=iR(L);null!==nt&&BU(0,B.field,nt)}const J=function(we,nt){for(const ut of we.filters)if(nt.indexOf(ut.op)>=0)return ut.op;return null}(L,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(B.op));if(null!==J)throw new He(be.INVALID_ARGUMENT,J===B.op?`Invalid query. You cannot use more than one '${B.op.toString()}' filter.`:`Invalid query. You cannot use '${B.op.toString()}' filters with '${J.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new hs(e.firestore,e.converter,function(i,o){const c=i.filters.concat([o]);return new _u(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class wq extends Gb{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(r,i,o){if(null!==r.startAt)throw new He(be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new He(be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Em(i,o);return function(h,p){if(null===iR(h)){const y=sR(h);null!==y&&BU(0,y,p.field)}}(r,c),c}(e._query,this.fa,this.wa);return new hs(e.firestore,e.converter,function(r,i){const o=r.explicitOrderBy.concat([i]);return new _u(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class OU extends Gb{constructor(e,t,r){super(),this.type=e,this.ma=t,this.ga=r}_apply(e){return new hs(e.firestore,e.converter,dV(e._query,this.ma,this.ga))}}class NU extends Gb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=FU(e,this.type,this.ya,this.pa);return new hs(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class PU extends Gb{constructor(e,t,r){super(),this.type=e,this.ya=t,this.pa=r}_apply(e){const t=FU(e,this.type,this.ya,this.pa);return new hs(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function FU(n,e,t,r){if(t[0]=(0,ne.m9)(t[0]),t[0]instanceof $b)return function(i,o,c,h,p){if(!h)throw new He(be.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const E of Im(i))if(E.field.isKeyField())y.push(Hf(o,h.key));else{const T=h.data.field(E.field);if(tR(T))throw new He(be.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const R=E.field.canonicalString();throw new He(be.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(T)}return new Yd(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ep(n.firestore);return function(o,c,h,p,y,E){const T=o.explicitOrderBy;if(y.length>T.length)throw new He(be.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<y.length;L++){const B=y[L];if(T[L].field.isKeyField()){if("string"!=typeof B)throw new He(be.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof B}`);if(!oR(o)&&-1!==B.indexOf("/"))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${B}' contains a slash.`);const J=o.path.child(yn.fromString(B));if(!tt.isDocumentKey(J))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const we=new tt(J);R.push(Hf(c,we))}else{const J=SU(h,p,B);R.push(J)}}return new Yd(R,E)}(n._query,n.firestore._databaseId,i,e,t,r)}}function LU(n,e,t){if("string"==typeof(t=(0,ne.m9)(t))){if(""===t)throw new He(be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!oR(e)&&-1!==t.indexOf("/"))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yn.fromString(t));if(!tt.isDocumentKey(r))throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hf(n,new tt(r))}if(t instanceof ar)return Hf(n,t._key);throw new He(be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yD(t)}.`)}function VU(n,e){if(!Array.isArray(n)||0===n.length)throw new He(be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new He(be.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function BU(n,e,t){if(!t.isEqual(e))throw new He(be.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Mq={maxAttempts:5};class Gk{convertValue(e,t="none"){switch(Uf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw mt()}}convertObject(e,t){const r={};return Vf(e.fields,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertGeoPoint(e){return new bD(jr(e.latitude),jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=YL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hb(e));default:return null}}convertTimestamp(e){const t=Wd(e);return new br(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yn.fromString(e);Ut(KV(r));const i=new mu(r.get(1),r.get(3)),o=new tt(r.popFirst(5));return i.isEqual(t)||ni(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}function TD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class xq extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class UU{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ep(e)}set(e,t,r){this._verifyNotCommitted();const i=ih(e,this._firestore),o=TD(i.converter,t,r),c=ED(this._dataReader,"WriteBatch.set",i._key,o,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,kr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const o=ih(e,this._firestore);let c;return c="string"==typeof(t=(0,ne.m9)(t))||t instanceof bu?jk(this._dataReader,"WriteBatch.update",o._key,t,r,i):Hk(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(c.toMutation(o._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ih(e,this._firestore);return this._mutations=this._mutations.concat(new Am(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new He(be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ih(n,e){if((n=(0,ne.m9)(n)).firestore!==e)throw new He(be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class rp extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new vc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function HU(n,e,t){n=gn(n,ar);const r=gn(n.firestore,wr),i=TD(n.converter,e,t);return $m(r,[ED(ep(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kr.none())])}function jU(n,e,t,...r){n=gn(n,ar);const i=gn(n.firestore,wr),o=ep(i);let c;return c="string"==typeof(e=(0,ne.m9)(e))||e instanceof bu?jk(o,"updateDoc",n._key,e,t,r):Hk(o,"updateDoc",n._key,e),$m(i,[c.toMutation(n._key,kr.exists(!0))])}function $U(n,...e){var t,r,i;n=(0,ne.m9)(n);let o={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Bk(e[c])||(o=e[c],c++);const h={includeMetadataChanges:o.includeMetadataChanges};if(Bk(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[c+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let p,y,E;if(n instanceof ar)y=gn(n.firestore,wr),E=Cm(n._key.path),p={next:T=>{e[c]&&e[c](Wk(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=gn(n,hs);y=gn(T.firestore,wr),E=T._query;const R=new rp(y);p={next:L=>{e[c]&&e[c](new nh(y,R,T,L))},error:e[c+1],complete:e[c+2]},kU(n._query)}return function(T,R,L,B){const J=new mD(B),we=new rk(R,J,L);return T.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return XR(yield jm(T),we)})),()=>{J.Tc(),T.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return ek(yield jm(T),we)}))}}(ii(y),E,h,p)}function $m(n,e){return function(t,r){const i=new Di;return t.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function w3(n,e,t){return lk.apply(this,arguments)}(yield Fk(t),r,i)})),i.promise}(ii(n),e)}function Wk(n,e,t){const r=t.docs.get(e._key),i=new rp(n);return new wu(n,i,e._key,r,new np(t.hasPendingWrites,t.fromCache),e.converter)}class Uq extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ep(e)}get(e){const t=ih(e,this._firestore),r=new xq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return mt();const o=i[0];if(o.isFoundDocument())return new $b(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new $b(this._firestore,r,t._key,null,t.converter);throw mt()})}set(e,t,r){const i=ih(e,this._firestore),o=TD(i.converter,t,r),c=ED(this._dataReader,"Transaction.set",i._key,o,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const o=ih(e,this._firestore);let c;return c="string"==typeof(t=(0,ne.m9)(t))||t instanceof bu?jk(this._dataReader,"Transaction.update",o._key,t,r,i):Hk(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,c),this}delete(e){const t=ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ih(e,this._firestore),r=new rp(this._firestore);return super.get(e).then(i=>new wu(this._firestore,r,t._key,i._document,new np(!1,!1),t.converter))}}function qk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new He("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function GU(){if(typeof Uint8Array>"u")throw new He("unimplemented","Uint8Arrays are not available in this environment.")}function WU(){if(!function lG(){return typeof atob<"u"}())throw new He("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ym=Wi.SDK_VERSION,(0,Wi._registerComponent)(new Af.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),o=new wr(i,new Xz(t.getProvider("auth-internal")),new tG(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC")),(0,Wi.registerVersion)(FL,"3.4.13",n),(0,Wi.registerVersion)(FL,"3.4.13","esm2017")}();class Wb{constructor(e){this._delegate=e}static fromBase64String(e){return WU(),new Wb(vc.fromBase64String(e))}static fromUint8Array(e){return GU(),new Wb(vc.fromUint8Array(e))}toBase64(){return WU(),this._delegate.toBase64()}toUint8Array(){return GU(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Kk(n){return function Yq(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Zq{enableIndexedDbPersistence(e,t){return function nq(n,e){CU(n=gn(n,wr));const t=ii(n),r=n._freezeSettings(),i=new Mk;return EU(t,i,new iU(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function rq(n){CU(n=gn(n,wr));const e=ii(n),t=n._freezeSettings(),r=new Mk;return EU(e,r,new L3(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function iq(n){if(n._initialized&&!n._terminated)throw new He(be.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Di;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ae.Z)(function*(){try{yield(t=(0,Ae.Z)(function*(r){if(!El.V())return Promise.resolve();const i=r+"main";yield El.delete(i)}),function(r){return t.apply(this,arguments)})(CR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class qU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof mu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&lb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Z3(n,e,t,r={}){var i;const o=(n=gn(n,Hb))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&lb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},o),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,h;if("string"==typeof r.mockUserToken)c=r.mockUserToken,h=Ii.MOCK_USER;else{c=(0,ne.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new He(be.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ii(p)}n._authCredentials=new Qz(new LL(c,h))}}(this._delegate,e,t,r)}enableNetwork(){return function oq(n){return function j3(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield lU(n),t=yield cU(n);return e.setNetworkEnabled(!0),function(r){const i=ot(r);return i.lu.delete(0),Bb(i)}(t)}))}(ii(n=gn(n,wr)))}(this._delegate)}disableNetwork(){return function aq(n){return function $3(n){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){const e=yield lU(n),t=yield cU(n);return e.setNetworkEnabled(!1),(r=(0,Ae.Z)(function*(i){const o=ot(i);o.lu.add(0),yield Pm(o),o._u.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ii(n=gn(n,wr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function sq(n){return function(e){const t=new Di;return e.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return function D3(n,e){return fk.apply(this,arguments)}(yield Fk(e),t)})),t.promise}(ii(n=gn(n,wr)))}(this._delegate)}onSnapshotsInSync(e){return function Bq(n,e){return function W3(n,e){const t=new mD(e);return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield jm(n),i=t,ot(r).Tu.add(i),void i.next();var r,i})),()=>{t.Tc(),n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return r=yield jm(n),i=t,void ot(r).Tu.delete(i);var r,i}))}}(ii(n=gn(n,wr)),Bk(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new He("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zm(this,yU(this._delegate,e))}catch(t){throw Bs(t,"collection()","Firestore.collection()")}}doc(e){try{return new xa(this,vD(this._delegate,e))}catch(t){throw Bs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Us(this,function Q3(n,e){if(n=gn(n,Hb),Vk("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new He(be.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new hs(n,null,(t=e,new _u(yn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Bs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Hq(n,e,t){n=gn(n,wr);const r=Object.assign(Object.assign({},Mq),t);return function(i){if(i.maxAttempts<1)throw new He(be.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function q3(n,e,t){const r=new Di;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){const i=yield(o=n,_D(o).then(c=>c.datastore));var o;new U3(n.asyncQueue,i,t,e,r).run()})),r.promise}(ii(n),i=>e(new Uq(n,i)),r)}(this._delegate,t=>e(new KU(this,t)))}batch(){return ii(this._delegate),new YU(new UU(this._delegate,e=>$m(this._delegate,e)))}loadBundle(e){return function lq(n,e){const t=ii(n=gn(n,wr)),r=new J3;return function K3(n,e,t,r){const i=function(o,c){let h;return h="string"==typeof o?(new TextEncoder).encode(o):o,p=function(p,y){if(p instanceof Uint8Array)return sU(p,y);if(p instanceof ArrayBuffer)return sU(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new V3(p,c);var p}(t,Vb(e));n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){!function F3(n,e,t){const r=ot(n);var i;(i=(0,Ae.Z)(function*(o,c,h){try{const p=yield c.getMetadata();if(yield function(R,L){const B=ot(R),J=Ti(L.createTime);return B.persistence.runTransaction("hasNewerBundle","readonly",we=>B.Ds.getBundleMetadata(we,L.id)).then(we=>!!we&&we.createTime.compareTo(J)>=0)}(o.localStore,p))return yield c.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=p).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(KB(p));const y=new g3(p,o.localStore,c.wt);let E=yield c.fc();for(;E;){const R=yield y.Nu(E);R&&h._updateProgress(R),E=yield c.fc()}const T=yield y.complete();return yield vu(o,T.Mu,void 0),yield function(R,L){const B=ot(R);return B.persistence.runTransaction("Save bundle","readwrite",J=>B.Ds.saveBundleMetadata(J,L))}(o.localStore,p),h._completeWith(T.progress),Promise.resolve(T.Ou)}catch(p){return lb("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var R}),function(o,c,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield Fk(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function cq(n,e){return function Y3(n,e){return n.asyncQueue.enqueue((0,Ae.Z)(function*(){return function(t,r){const i=ot(t);return i.persistence.runTransaction("Get named query","readonly",o=>i.Ds.getNamedQuery(o,r))}(yield Pk(n),e)}))}(ii(n=gn(n,wr)),e).then(t=>t?new hs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Us(this,t):null)}}class SD extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wb(new vc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xa.forKey(t,this.firestore,null)}}class KU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new SD(e)}get(e){const t=sp(e);return this._delegate.get(t).then(r=>new qb(this._firestore,new wu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=sp(e);return r?(qk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=sp(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=sp(e);return this._delegate.delete(t),this}}class YU{constructor(e){this._delegate=e}set(e,t,r){const i=sp(e);return r?(qk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const o=sp(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){const t=sp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class ip{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new zb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Kb(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=ip.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new ip(e,new SD(e),t),i.set(t,o)),o}}ip.INSTANCES=new WeakMap;class xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new SD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new He("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xa(t,new ar(t._delegate,r,new tt(e)))}static forKey(e,t,r){return new xa(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zm(this.firestore,yU(this._delegate,e))}catch(t){throw Bs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ne.m9)(e))instanceof ar&&vU(this._delegate,e)}set(e,t){t=qk("DocumentReference.set",t);try{return t?HU(this._delegate,e,t):HU(this._delegate,e)}catch(r){throw Bs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?jU(this._delegate,e):jU(this._delegate,e,t,...r)}catch(i){throw Bs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function Lq(n){return $m(gn(n.firestore,wr),[new Am(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=ZU(e),r=QU(e,i=>new qb(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return $U(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function kq(n){n=gn(n,ar);const e=gn(n.firestore,wr),t=ii(e),r=new rp(e);return function z3(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(i,o,c){try{const h=yield function(p,y){const E=ot(p);return E.persistence.runTransaction("read document","readonly",T=>E.localDocuments.getDocument(T,y))}(i,o);h.isFoundDocument()?c.resolve(h):h.isNoDocument()?c.resolve(null):c.reject(new He(be.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Vm(h,`Failed to get document '${o} from cache`);c.reject(p)}}),function(i,o,c){return r.apply(this,arguments)})(yield Pk(n),e,t);var r})),t.promise}(t,n._key).then(i=>new wu(e,r,n._key,i,new np(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Oq(n){n=gn(n,ar);const e=gn(n.firestore,wr);return uU(ii(e),n._key,{source:"server"}).then(t=>Wk(e,n,t))}(this._delegate):function Rq(n){n=gn(n,ar);const e=gn(n.firestore,wr);return uU(ii(e),n._key).then(t=>Wk(e,n,t))}(this._delegate),t.then(r=>new qb(this.firestore,new wu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xa(this.firestore,this._delegate.withConverter(e?ip.getInstance(this.firestore,e):null))}}function Bs(n,e,t){return n.message=n.message.replace(e,t),n}function ZU(n){for(const e of n)if("object"==typeof e&&!Kk(e))return e;return{}}function QU(n,e){var t,r;let i;return i=Kk(n[0])?n[0]:Kk(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return RU(this._delegate,e._delegate)}}class Kb extends qb{data(e){const t=this._delegate.data(e);return function Yz(n,e){n||mt()}(void 0!==t),t}}class Us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new SD(e)}where(e,t,r){try{return new Us(this.firestore,rh(this._delegate,function bq(n,e,t){const r=e,i=DD("where",n);return new vq(i,r,t)}(e,t,r)))}catch(i){throw Bs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Us(this.firestore,rh(this._delegate,function Eq(n,e="asc"){const t=e,r=DD("orderBy",n);return new wq(r,t)}(e,t)))}catch(r){throw Bs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Us(this.firestore,rh(this._delegate,function Cq(n){return mU("limit",n),new OU("limit",n,"F")}(e)))}catch(t){throw Bs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Us(this.firestore,rh(this._delegate,function Iq(n){return mU("limitToLast",n),new OU("limitToLast",n,"L")}(e)))}catch(t){throw Bs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Us(this.firestore,rh(this._delegate,function Dq(...n){return new NU("startAt",n,!0)}(...e)))}catch(t){throw Bs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Us(this.firestore,rh(this._delegate,function Tq(...n){return new NU("startAfter",n,!1)}(...e)))}catch(t){throw Bs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Us(this.firestore,rh(this._delegate,function Sq(...n){return new PU("endBefore",n,!1)}(...e)))}catch(t){throw Bs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Us(this.firestore,rh(this._delegate,function Aq(...n){return new PU("endAt",n,!0)}(...e)))}catch(t){throw Bs(t,"endAt()","Query.endAt()")}}isEqual(e){return bU(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Pq(n){n=gn(n,hs);const e=gn(n.firestore,wr),t=ii(e),r=new rp(e);return function G3(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((0,Ae.Z)(function*(){return(r=(0,Ae.Z)(function*(i,o,c){try{const h=yield uD(i,o,!0),p=new QB(o,h.ji),y=p.Ku(h.documents),E=p.applyChanges(y,!1);c.resolve(E.snapshot)}catch(h){const p=Vm(h,`Failed to execute query '${o} against cache`);c.reject(p)}}),function(i,o,c){return r.apply(this,arguments)})(yield Pk(n),e,t);var r})),t.promise}(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate):"server"===e?.source?function Fq(n){n=gn(n,hs);const e=gn(n.firestore,wr),t=ii(e),r=new rp(e);return dU(t,n._query,{source:"server"}).then(i=>new nh(e,r,n,i))}(this._delegate):function Nq(n){n=gn(n,hs);const e=gn(n.firestore,wr),t=ii(e),r=new rp(e);return kU(n._query),dU(t,n._query).then(i=>new nh(e,r,n,i))}(this._delegate),t.then(r=>new Yk(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=ZU(e),r=QU(e,i=>new Yk(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return $U(this._delegate,t,r)}withConverter(e){return new Us(this.firestore,this._delegate.withConverter(e?ip.getInstance(this.firestore,e):null))}}class Xq{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Kb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yk{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Kb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Xq(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Kb(this._firestore,r))})}isEqual(e){return RU(this._delegate,e._delegate)}}class zm extends Us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xa(this.firestore,e):null}doc(e){try{return new xa(this.firestore,void 0===e?vD(this._delegate):vD(this._delegate,e))}catch(t){throw Bs(t,"doc()","CollectionReference.doc()")}}add(e){return function Vq(n,e){const t=gn(n.firestore,wr),r=vD(n),i=TD(n.converter,e);return $m(t,[ED(ep(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xa(this.firestore,t))}isEqual(e){return vU(this._delegate,e._delegate)}withConverter(e){return new zm(this.firestore,this._delegate.withConverter(e?ip.getInstance(this.firestore,e):null))}}function sp(n){return gn(n,ar)}class Zk{constructor(...e){this._delegate=new bu(...e)}static documentId(){return new Zk(Kr.keyField().canonicalString())}isEqual(e){return(e=(0,ne.m9)(e))instanceof bu&&this._delegate._internalPath.isEqual(e._internalPath)}}class op{constructor(e){this._delegate=e}static serverTimestamp(){const e=function $q(){return new Uk("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new op(e)}static delete(){const e=function jq(){return new jb("deleteField")}();return e._methodName="FieldValue.delete",new op(e)}static arrayUnion(...e){const t=function zq(...n){return new fq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new op(t)}static arrayRemove(...e){const t=function Gq(...n){return new pq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new op(t)}static increment(e){const t=function Wq(n){return new gq("increment",n)}(e);return t._methodName="FieldValue.increment",new op(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Jq={Firestore:qU,GeoPoint:bD,Timestamp:br,Blob:Wb,Transaction:KU,WriteBatch:YU,DocumentReference:xa,DocumentSnapshot:qb,Query:Us,QueryDocumentSnapshot:Kb,QuerySnapshot:Yk,CollectionReference:zm,FieldPath:Zk,FieldValue:op,setLogLevel:function Qq(n){!function Kz(n){$d.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function t6(n){(function e6(n,e){n.INTERNAL.registerComponent(new Af.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Jq)))})(n,(e,t)=>new qU(e,t,new Zq)),n.registerVersion("@firebase/firestore-compat","0.1.22")}(z1.Z);var AD=F(5363),n6=F(6063);class r6 extends Qt.x{constructor(e=1/0,t=1/0,r=n6.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:c}=this;t||(r.push(e),!i&&r.push(o.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let c=0;c<o.length&&!e.closed;c+=r?1:2)e.next(o[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){const c=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=c;p+=2)h=p;h&&r.splice(0,h+1)}}}var XU=F(3099);function JU(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,XU.B)({connector:()=>new r6(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function e2(n,e){return(0,Lr.m)(e)?ir(()=>n,e):ir(()=>n)}var Qk=F(9468),Eu=F(5867);class ap{constructor(e){return e}}class MD{constructor(){return(0,Eu.C6)()}}const Xk=new d.OlP("angularfire2._apps"),s6={provide:ap,useFactory:function i6(n){return n&&1===n.length?n[0]:new ap((0,Eu.Mq)())},deps:[[new d.FiY,Xk]]},o6={provide:MD,deps:[[new d.FiY,Xk]]};function a6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new ap(r)}}let l6=(()=>{class n{constructor(t){(0,Eu.KN)("angularfire",cn.q4.full,"core"),(0,Eu.KN)("angularfire",cn.q4.full,"app"),(0,Eu.KN)("angular",d.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.Lbi))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[s6,o6]}),n})();function c6(n,...e){return{ngModule:l6,providers:[{provide:Xk,useFactory:a6(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,...e]}]}}const u6=(0,cn.u3)(Eu.ZF,!0),t2=new Map,d6={activated:!1,tokenObservers:[]},h6={initialized:!1,enabled:!1};function Mi(n){return t2.get(n)||d6}function Cl(n,e){t2.set(n,e)}function xD(){return h6}class _6{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ae.Z)(function*(){t.stop();try{t.pending=new ne.BH,yield function y6(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ne.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hs=new ne.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function r2(n){if(!Mi(n).activated)throw Hs.create("use-before-activation",{appName:n.name})}function tO(n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,Ae.Z)(function*({url:n,body:e},t){var r,i;const o={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const L=yield c.getHeartbeatsHeader();L&&(o["X-Firebase-Client"]=L)}const h={method:"POST",body:JSON.stringify(e),headers:o};let p,y;try{p=yield fetch(n,h)}catch(L){throw Hs.create("fetch-network-error",{originalErrorMessage:null===(r=L)||void 0===r?void 0:r.message})}if(200!==p.status)throw Hs.create("fetch-status-error",{httpStatus:p.status});try{y=yield p.json()}catch(L){throw Hs.create("fetch-parse-error",{originalErrorMessage:null===(i=L)||void 0===i?void 0:i.message})}const E=y.ttl.match(/^([\d.]+)(s)$/);if(!E||!E[2]||isNaN(Number(E[1])))throw Hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(E[1]),R=Date.now();return{token:y.token,expireTimeMillis:R+T,issuedAtTimeMillis:R}}),nO.apply(this,arguments)}function E6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Yb="firebase-app-check-store";let OD=null;function o2(){return OD||(OD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var o;e(Hs.create("storage-open",{originalErrorMessage:null===(o=i.target.error)||void 0===o?void 0:o.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Yb,{keyPath:"compositeKey"})}}catch(r){e(Hs.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),OD)}function rO(){return rO=(0,Ae.Z)(function*(n,e){const r=(yield o2()).transaction(Yb,"readwrite"),o=r.objectStore(Yb).put({compositeKey:n,value:e});return new Promise((c,h)=>{o.onsuccess=p=>{c()},r.onerror=p=>{var y;h(Hs.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),rO.apply(this,arguments)}const Zb=new Sa.Yd("@firebase/app-check");function u2(n,e){return(0,ne.hl)()?function T6(n,e){return function a2(n,e){return rO.apply(this,arguments)}(function c2(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Zb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function d2(){return xD().enabled}function h2(){return aO.apply(this,arguments)}function aO(){return aO=(0,Ae.Z)(function*(){const n=xD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),aO.apply(this,arguments)}const k6={error:"UNKNOWN_ERROR"};function O6(n){return ne.US.encodeString(JSON.stringify(n),!1)}function ND(n){return lO.apply(this,arguments)}function lO(){return lO=(0,Ae.Z)(function*(n,e=!1){const t=n.app;r2(t);const r=Mi(t);let o,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&PD(p)&&(i=p)}if(!e&&i&&PD(i))return{token:i.token};let h,c=!1;if(d2()){r.exchangeTokenPromise||(r.exchangeTokenPromise=tO(E6(t,yield h2()),n.heartbeatServiceProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),c=!0);const p=yield r.exchangeTokenPromise;return yield u2(t,p),Cl(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),c=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Zb.warn(p.message):Zb.error(p),o=p}return i?(h={token:i.token},Cl(t,Object.assign(Object.assign({},r),{token:i})),yield u2(t,i)):h=P6(o),c&&p2(t,h),h}),lO.apply(this,arguments)}function uO(n,e){const t=Mi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Cl(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function f2(n){const{app:e}=n,t=Mi(e);let r=t.tokenRefresher;r||(r=function N6(n){const{app:e}=n;return new _6((0,Ae.Z)(function*(){let r;if(r=Mi(e).token?yield ND(n,!0):yield ND(n),r.error)throw r.error}),()=>!0,()=>{const t=Mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Cl(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function p2(n,e){const t=Mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function PD(n){return n.expireTimeMillis-Date.now()>0}function P6(n){return{token:O6(k6),error:n}}class F6{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Mi(this.app);for(const t of e)uO(this.app,t.next);return Promise.resolve()}}const E2="app-check-internal";!function Z6(){(0,Wi._registerComponent)(new Af.wA("app-check",n=>function L6(n,e){return new F6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(E2).initialize()})),(0,Wi._registerComponent)(new Af.wA(E2,n=>function V6(n){return{getToken:e=>ND(n,e),addTokenListener:e=>function cO(n,e,t,r){const{app:i}=n,o=Mi(i),c={next:t,error:r,type:e};if(Cl(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,c]})),o.token&&PD(o.token)){const h=o.token;Promise.resolve().then(()=>{t({token:h.token}),f2(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>f2(n))}(n,"INTERNAL",e),removeTokenListener:e=>uO(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Wi.registerVersion)("@firebase/app-check","0.5.12")}();class Gm{constructor(){return(0,cn.vb)("app-check")}}typeof window<"u"&&window,F(127);const I2=new d.OlP("angularfire2.auth.use-emulator"),D2=new d.OlP("angularfire2.auth.settings"),T2=new d.OlP("angularfire2.auth.tenant-id"),S2=new d.OlP("angularfire2.auth.langugage-code"),A2=new d.OlP("angularfire2.auth.use-device-language"),M2=new d.OlP("angularfire.auth.persistence"),x2=(n,e,t,r,i,o,c,h)=>(0,qr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,o&&p.useDeviceLanguage(),c)for(const[y,E]of Object.entries(c))p.settings[y]=E;return h&&p.setPersistence(h),p},[t,r,i,o,c,h]);let R2=(()=>{class n{constructor(t,r,i,o,c,h,p,y,E,T,R,L){const B=new Qt.x,J=Je(void 0).pipe((0,AD.Q)(c.outsideAngular),ir(()=>o.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,ft.U)(()=>(0,qr.on)(t,o,r)),(0,ft.U)(we=>x2(we,o,h,y,E,T,p,R)),JU({bufferSize:1,refCount:!1}));if(Ih(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{J.pipe(In()).subscribe();const nt=J.pipe(ir(_t=>_t.getRedirectResult().then(Gt=>Gt,()=>null)),cn.iC,JU({bufferSize:1,refCount:!1})),ut=J.pipe(ir(_t=>new Zn.y(Gt=>({unsubscribe:o.runOutsideAngular(()=>_t.onAuthStateChanged(Jt=>Gt.next(Jt),Jt=>Gt.error(Jt),()=>Gt.complete()))})))),Tt=J.pipe(ir(_t=>new Zn.y(Gt=>({unsubscribe:o.runOutsideAngular(()=>_t.onIdTokenChanged(Jt=>Gt.next(Jt),Jt=>Gt.error(Jt),()=>Gt.complete()))}))));this.authState=nt.pipe(e2(ut),(0,Qk.R)(c.outsideAngular),(0,AD.Q)(c.insideAngular)),this.user=nt.pipe(e2(Tt),(0,Qk.R)(c.outsideAngular),(0,AD.Q)(c.insideAngular)),this.idToken=this.user.pipe(ir(_t=>_t?(0,En.D)(_t.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(ir(_t=>_t?(0,En.D)(_t.getIdTokenResult()):Je(null))),this.credential=(0,Id.T)(nt,B,this.authState.pipe(Mr(_t=>!_t))).pipe((0,ft.U)(_t=>_t?.user?_t:null),(0,Qk.R)(c.outsideAngular),(0,AD.Q)(c.insideAngular))}return(0,qr.pX)(this,J,o,{spy:{apply:(we,nt,ut)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&ut.then(Tt=>B.next(Tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qr.Dh),d.LFG(qr.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(cn.HU),d.LFG(I2,8),d.LFG(D2,8),d.LFG(T2,8),d.LFG(S2,8),d.LFG(A2,8),d.LFG(M2,8),d.LFG(Gm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function k2(n,e){return function nK(n,e=og.z){return new Zn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function gO(n,e){return k2(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function LD(n,e){return gO(n,e).pipe(As(void 0),Sf(),(0,ft.U)(([t,r])=>{const i=r.payload.docChanges(),o=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,h)=>{const p=i.find(E=>E.doc.ref.isEqual(c.ref)),y=t?.payload.docs.find(E=>E.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||o.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:c}})}),o}))}function O2(n,e,t){return LD(n,t).pipe(_r((r,i)=>function iK(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function sK(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return mO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return mO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(o=>o.payload),e),[]),XS(),(0,ft.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function mO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function N2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class P2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=LD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(As(void 0),Sf(),Mr(([r,i])=>i.length>0||!r),(0,ft.U)(([r,i])=>i),cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(_r((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N2(e);return O2(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return gO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),cn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(cn.iC)}add(e){return this.ref.add(e)}doc(e){return new F2(this.ref.doc(e),this.afs)}}class F2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:o}=L2(r,t);return new P2(i,o,this.afs)}snapshotChanges(){return function rK(n,e){return k2(n,e).pipe(As(void 0),Sf(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(cn.iC)}}class oK{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?LD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Mr(t=>t.length>0),cn.iC):LD(this.query,this.afs.schedulers.outsideAngular).pipe(cn.iC)}auditTrail(e){return this.stateChanges(e).pipe(_r((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=N2(e);return O2(this.query,t,this.afs.schedulers.outsideAngular).pipe(cn.iC)}valueChanges(e={}){return gO(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),cn.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(cn.iC)}}const aK=new d.OlP("angularfire2.enableFirestorePersistence"),lK=new d.OlP("angularfire2.firestore.persistenceSettings"),cK=new d.OlP("angularfire2.firestore.settings"),uK=new d.OlP("angularfire2.firestore.use-emulator");function L2(n,e=(t=>t)){return{query:e(n),ref:n}}let V2=(()=>{class n{constructor(t,r,i,o,c,h,p,y,E,T,R,L,B,J,we,nt,ut){this.schedulers=p;const Tt=(0,qr.on)(t,h,r),_t=E;T&&x2(Tt,h,R,B,J,we,L,nt),[this.firestore,this.persistenceEnabled$]=(0,qr.cc)(`${Tt.name}.firestore`,"AngularFirestore",Tt.name,()=>{const Gt=h.runOutsideAngular(()=>Tt.firestore());if(o&&Gt.settings(o),_t&&Gt.useEmulator(..._t),i&&!Ih(c)){const Jt=()=>{try{return(0,En.D)(Gt.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(Tn){return typeof console<"u"&&console.warn(Tn),Je(!1)}};return[Gt,h.runOutsideAngular(Jt)]}return[Gt,Je(!1)]},[o,_t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:o,query:c}=L2(i,r),h=this.schedulers.ngZone.run(()=>o);return new P2(h,c,this)}collectionGroup(t,r){const i=r||(c=>c),o=this.firestore.collectionGroup(t);return new oK(i(o),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new F2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qr.Dh),d.LFG(qr.xv,8),d.LFG(aK,8),d.LFG(cK,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(cn.HU),d.LFG(lK,8),d.LFG(uK,8),d.LFG(R2,8),d.LFG(I2,8),d.LFG(D2,8),d.LFG(T2,8),d.LFG(S2,8),d.LFG(A2,8),d.LFG(M2,8),d.LFG(Gm,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();class dK{}class sh{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),o=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(c):this.headers.set(o,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof sh?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new sh;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof sh?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const o=e.value;if(o){let c=this.headers.get(t);if(!c)return;c=c.filter(h=>-1===o.indexOf(h)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class hK{encodeKey(e){return B2(e)}encodeValue(e){return B2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const pK=/%(\d[a-f0-9])/gi,gK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function B2(n){return encodeURIComponent(n).replace(pK,(e,t)=>gK[t]??e)}function VD(n){return`${n}`}class oh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new hK,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fK(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const o=i.indexOf("="),[c,h]=-1==o?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],p=t.get(c)||[];p.push(h),t.set(c,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(VD):[VD(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new oh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(VD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(VD(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class mK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function U2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function H2(n){return typeof Blob<"u"&&n instanceof Blob}function j2(n){return typeof FormData<"u"&&n instanceof FormData}class Qb{constructor(e,t,r,i){let o;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function _K(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params)),this.headers||(this.headers=new sh),this.context||(this.context=new mK),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+c}}else this.params=new oh,this.urlWithParams=t}serializeBody(){return null===this.body?null:U2(this.body)||H2(this.body)||j2(this.body)||function yK(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof oh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||j2(this.body)?null:H2(this.body)?this.body.type||null:U2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,h=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let p=e.headers||this.headers,y=e.params||this.params;const E=e.context??this.context;return void 0!==e.setHeaders&&(p=Object.keys(e.setHeaders).reduce((T,R)=>T.set(R,e.setHeaders[R]),p)),e.setParams&&(y=Object.keys(e.setParams).reduce((T,R)=>T.set(R,e.setParams[R]),y)),new Qb(t,r,o,{params:y,headers:p,context:E,reportProgress:h,responseType:i,withCredentials:c})}}var Zi=(()=>((Zi=Zi||{})[Zi.Sent=0]="Sent",Zi[Zi.UploadProgress=1]="UploadProgress",Zi[Zi.ResponseHeader=2]="ResponseHeader",Zi[Zi.DownloadProgress=3]="DownloadProgress",Zi[Zi.Response=4]="Response",Zi[Zi.User=5]="User",Zi))();class _O extends class vK{constructor(e,t=200,r="OK"){this.headers=e.headers||new sh,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Zi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new _O({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function yO(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let z2=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Qb)o=t;else{let p,y;p=i.headers instanceof sh?i.headers:new sh(i.headers),i.params&&(y=i.params instanceof oh?i.params:new oh({fromObject:i.params})),o=new Qb(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=Je(o).pipe(Ms(p=>this.handler.handle(p)));if(t instanceof Qb||"events"===i.observe)return c;const h=c.pipe(Mr(p=>p instanceof _O));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return h.pipe((0,ft.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ft.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ft.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ft.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new oh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,yO(i,r))}post(t,r,i={}){return this.request("POST",t,yO(i,r))}put(t,r,i={}){return this.request("PUT",t,yO(i,r))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(dK))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const wK=["*"];let BD;function Xb(n){return function EK(){if(void 0===BD&&(BD=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(BD=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return BD}()?.createHTML(n)||n}function G2(n){return Error(`Unable to find icon with the name "${n}"`)}function W2(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function q2(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class lp{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let UD=(()=>{class n{constructor(t,r,i,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,o){return this._addSvgIconConfig(t,r,new lp(i,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,o){const c=this._sanitizer.sanitize(d.q3G.HTML,i);if(!c)throw q2(i);const h=Xb(c);return this._addSvgIconConfig(t,r,new lp("",h,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new lp(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const o=this._sanitizer.sanitize(d.q3G.HTML,r);if(!o)throw q2(r);const c=Xb(o);return this._addSvgIconSetConfig(t,new lp("",c,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,t);if(!r)throw W2(t);const i=this._cachedIconsByUrl.get(r);return i?Je(HD(i)):this._loadSvgIconFromConfig(new lp(t,null)).pipe((0,An.b)(o=>this._cachedIconsByUrl.set(r,o)),(0,ft.U)(o=>HD(o)))}getNamedSvgIcon(t,r=""){const i=K2(r,t);let o=this._svgIconConfigs.get(i);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(i,o),this._getSvgFromConfig(o);const c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(t,c):Ss(G2(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?Je(HD(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ft.U)(r=>HD(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?Je(i):Zy(r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Oo(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(d.q3G.RESOURCE_URL,c.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),Je(null)})))).pipe((0,ft.U)(()=>{const c=this._extractIconWithNameFromAnySet(t,r);if(!c)throw G2(t);return c}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const o=r[i];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const c=this._svgElementFromConfig(o),h=this._extractSvgIconFromSet(c,t,o.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,An.b)(r=>t.svgText=r),(0,ft.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?Je(null):this._fetchIcon(t).pipe((0,An.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const c=o.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,i);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),i);const h=this._svgElementFromString(Xb("<svg></svg>"));return h.appendChild(c),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Xb("<svg></svg>")),i=t.attributes;for(let o=0;o<i.length;o++){const{name:c,value:h}=i[o];"id"!==c&&r.setAttribute(c,h)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:i}=t,o=i?.withCredentials??!1;if(!this._httpClient)throw function CK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const c=this._sanitizer.sanitize(d.q3G.RESOURCE_URL,r);if(!c)throw W2(r);const h=this._inProgressUrlFetches.get(c);if(h)return h;const p=this._httpClient.get(c,{responseType:"text",withCredentials:o}).pipe((0,ft.U)(y=>Xb(y)),No(()=>this._inProgressUrlFetches.delete(c)),(0,XU.B)());return this._inProgressUrlFetches.set(c,p),p}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(K2(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const o=this._resolvers[i](r,t);if(o)return DK(o)?new lp(o.url,null,o.options):new lp(o,null)}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(z2,8),d.LFG(xo),d.LFG(ce,8),d.LFG(d.qLn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function HD(n){return n.cloneNode(!0)}function K2(n,e){return n+":"+e}function DK(n){return!(!n.url||!n.options)}const TK=Tg(class{constructor(n){this._elementRef=n}}),SK=new d.OlP("MAT_ICON_DEFAULT_OPTIONS"),AK=new d.OlP("mat-icon-location",{providedIn:"root",factory:function MK(){const n=(0,d.f3M)(ce),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Y2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],xK=Y2.map(n=>`[${n}]`).join(", "),RK=/^url\(['"]?#(.*?)['"]?\)$/;let kK=(()=>{class n extends TK{constructor(t,r,i,o,c,h){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=c,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ar.w0.EMPTY,h&&(h.color&&(this.color=this.defaultColor=h.color),h.fontSet&&(this.fontSet=h.fontSet)),i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=fl(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(i=>i.length>0);this._previousFontSetClass.forEach(i=>t.classList.remove(i)),r.forEach(i=>t.classList.add(i)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,o)=>{i.forEach(c=>{o.setAttribute(c.name,`url('${t}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(xK),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)Y2.forEach(c=>{const h=r[o],p=h.getAttribute(c),y=p?p.match(RK):null;if(y){let E=i.get(h);E||(E=[],i.set(h,E)),E.push({name:c,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe(Ui(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${o.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(UD),d.$8M("aria-hidden"),d.Y36(AK),d.Y36(d.qLn),d.Y36(SK,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(d.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),d.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[d.qOj],ngContentSelectors:wK,decls:1,vars:0,template:function(t,r){1&t&&(d.F$t(),d.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),OK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ls,ls]}),n})(),NK=(()=>{class n{constructor(){this.playerActive=!1}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-player"]],inputs:{name:"name",playerActive:"playerActive"},decls:4,vars:3,consts:[[1,"player"],["src","./assets/img/profile/avatar1.png"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.TgZ(2,"span"),d._uU(3),d.qZA()()),2&t&&(d.ekj("player-active",r.playerActive),d.xp6(3),d.Oqu(r.name))},styles:[".player[_ngcontent-%COMP%]{width:300px;display:flex;align-items:center;border-top-left-radius:50px;border-bottom-left-radius:50px;background-color:#dce6f5a6}.player[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px;margin-left:16px}.player[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:70px;height:70px;object-fit:cover;border-radius:100%}.player-active[_ngcontent-%COMP%]{background-color:#f8b025fa!important}"]}),n})();const PK=["*",[["mat-card-footer"]]],FK=["*","mat-card-footer"];let LK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-content"],["","mat-card-content",""],["","matCardContent",""]],hostAttrs:[1,"mat-card-content"]}),n})(),VK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),BK=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.QbO,8))},n.\u0275cmp=d.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&d.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:FK,decls:2,vars:0,template:function(t,r){1&t&&(d.F$t(PK),d.Hsn(0),d.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),n})(),UK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[ls,ls]}),n})(),HK=(()=>{class n{constructor(){this.cardAction=[{title:"Waterfall",description:"Everyone has to start drinking at the same time. As soon as player 1 stops drinking, player 2 may stop drinking. Player 3 may stop as soon as player 2 stops drinking, and so on."},{title:"You",description:"You decide who drinks"},{title:"Me",description:"Congrats! Drink a shot!"},{title:"Category",description:"Come up with a category (e.g. Colors). Each player must enumerate one item from the category."},{title:"Bust a jive",description:"Player 1 makes a dance move. Player 2 repeats the dance move and adds a second one. "},{title:"Chicks",description:"All girls drink."},{title:"Heaven",description:"Put your hands up! The last player drinks!"},{title:"Mate",description:"Pick a mate. Your mate must always drink when you drink and the other way around."},{title:"Thumbmaster",description:""},{title:"Men",description:"All men drink."},{title:"Quizmaster",description:""},{title:"Never have i ever...",description:"Say something you nnever did. Everyone who did it has to drink."},{title:"Rule",description:"Make a rule. Everyone needs to drink when he breaks the rule."}],this.title="",this.description=""}ngOnInit(){}ngOnChanges(){if(this.card){console.log("Current card is:",this.card);let t=+this.card.split("_")[1];this.title=this.cardAction[t-1].title,this.description=this.cardAction[t-1].description}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game-info"]],inputs:{card:"card"},features:[d.TTD],decls:5,vars:2,template:function(t,r){1&t&&(d.TgZ(0,"mat-card")(1,"mat-card-title"),d._uU(2),d.qZA(),d.TgZ(3,"mat-card-content"),d._uU(4),d.qZA()()),2&t&&(d.xp6(2),d.Oqu(r.card?r.title:"Please pick a card"),d.xp6(2),d.hij(" ",r.card?r.description:" Please click on the card stack to select the next card."," "))},dependencies:[BK,LK,VK]}),n})();const jK=function(n){return{"top.px":n}};function $K(n,e){if(1&n&&d._UZ(0,"app-player",9),2&n){const t=e.$implicit,r=e.index,i=d.oxw();d.Q6J("ngStyle",d.VKq(3,jK,100+90*r))("playerActive",r==i.game.currentPlayer)("name",t)}}const zK=function(n){return{"right.px":n}};function GK(n,e){1&n&&d._UZ(0,"img",10),2&n&&d.Q6J("ngStyle",d.VKq(1,zK,5*e.index))}function WK(n,e){1&n&&d._UZ(0,"img",11),2&n&&d.MGl("src","assets/img/cards/",e.$implicit,".png",d.LSH)}function qK(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"img",12),d.NdJ("click",function(){d.CHM(t);const i=d.oxw();return d.KtG(i.takeCard())}),d.qZA()}if(2&n){const t=d.oxw();d.MGl("src","assets/img/cards/",t.game.currentCard,".png",d.LSH)}}const KK=function(){return[0,1,2,3]},YK=[{path:"",component:(()=>{class n{constructor(t,r){this.firestore=t,this.router=r}ngOnInit(){}newGame(){let t=new Jw;this.firestore.collection("games").add(t.toJson()).then(r=>{this.router.navigateByUrl("/game/"+r.id)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(V2),d.Y36(ui))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-startscreen"]],decls:4,vars:0,consts:[[1,"start-screen"],["src","assets/img/startbox.png"],[1,"start-label-box"],["src","assets/img/startlabel.png",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d._UZ(1,"img",1),d.TgZ(2,"div",2)(3,"img",3),d.NdJ("click",function(){return r.newGame()}),d.qZA()()())},styles:[".start-screen[_ngcontent-%COMP%]{background-color:#404040;width:100vw;height:100vh;max-width:100%;display:flex;justify-content:center;align-items:center}.start-screen[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100vh}.start-label-box[_ngcontent-%COMP%]{position:absolute;left:0;right:0;bottom:50px;display:flex;justify-content:center}.start-label-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20vw;height:auto}.start-label-box[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{filter:brightness(1.25);cursor:pointer}"]}),n})()},{path:"game/:id",component:(()=>{class n{constructor(t,r,i){this.route=t,this.firestore=r,this.dialog=i}ngOnInit(){this.newGame(),this.route.params.subscribe(t=>{console.log(t.id),this.gameId=t.id,this.firestore.collection("games").doc(t.id).valueChanges().subscribe(r=>{console.log("Game update",r),this.game.currentPlayer=r.currentPlayer,this.game.playedCards=r.playedCards,this.game.players=r.players,this.game.stack=r.stack,this.game.pickCardAnimation=r.pickCardAnimation,this.game.currentCard=r.currentCard})})}newGame(){this.game=new Jw}takeCard(){this.game.pickCardAnimation||(this.game.currentCard=this.game.stack.pop(),this.game.pickCardAnimation=!0,console.log("New Card: "+this.game.currentCard),console.log("Game is",this.game),this.game.currentPlayer++,this.game.currentPlayer=this.game.currentPlayer%this.game.players.length,this.saveGame(),setTimeout(()=>{this.game.playedCards.push(this.game.currentCard),this.game.pickCardAnimation=!1,this.saveGame()},1e3))}openDialog(){this.dialog.open(hc).afterClosed().subscribe(r=>{r&&r.length>0&&(this.game.players.push(r),this.saveGame())})}saveGame(){this.firestore.collection("games").doc(this.gameId).update(this.game.toJson())}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Mt),d.Y36(V2),d.Y36(Yy))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-game"]],decls:11,vars:6,consts:[["class","player-position",3,"ngStyle","playerActive","name",4,"ngFor","ngForOf"],[1,"field"],[1,"card-stack"],["src","assets/img/cards/card_cover.png",3,"ngStyle",4,"ngFor","ngForOf"],["src","assets/img/cards/card_cover.png",1,"top-card",2,"right","25px",3,"click"],["class","played-card",3,"src",4,"ngFor","ngForOf"],["class","pick-card","style","right: 25px",3,"src","click",4,"ngIf"],[1,"pin-bottom",3,"card"],["mat-fab","","color","primary",1,"btn-add",3,"click"],[1,"player-position",3,"ngStyle","playerActive","name"],["src","assets/img/cards/card_cover.png",3,"ngStyle"],[1,"played-card",3,"src"],[1,"pick-card",2,"right","25px",3,"src","click"]],template:function(t,r){1&t&&(d.YNc(0,$K,1,5,"app-player",0),d.TgZ(1,"div",1)(2,"div",2),d.YNc(3,GK,1,3,"img",3),d.TgZ(4,"img",4),d.NdJ("click",function(){return r.takeCard()}),d.qZA(),d.YNc(5,WK,1,1,"img",5),d.YNc(6,qK,1,1,"img",6),d.qZA()(),d._UZ(7,"app-game-info",7),d.TgZ(8,"button",8),d.NdJ("click",function(){return r.openDialog()}),d.TgZ(9,"mat-icon"),d._uU(10,"add"),d.qZA()()),2&t&&(d.Q6J("ngForOf",r.game.players),d.xp6(3),d.Q6J("ngForOf",d.DdM(5,KK)),d.xp6(2),d.Q6J("ngForOf",r.game.playedCards),d.xp6(1),d.Q6J("ngIf",r.game.pickCardAnimation),d.xp6(1),d.Q6J("card",r.game.currentCard))},dependencies:[es,Pr,Va,Mv,kK,NK,HK],styles:[".field[_ngcontent-%COMP%]{width:100vw;height:100vh;max-width:100%;background-image:url(brett.05a0279f151e5585.jpg);display:flex;justify-content:center;align-items:center}.card-stack[_ngcontent-%COMP%]{position:relative}.card-stack[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:120px}.top-card[_ngcontent-%COMP%]{cursor:pointer;transition:all 125ms ease-in-out}.top-card[_ngcontent-%COMP%]:hover{transform:scale(1.1) translateY(-10px)}.played-card[_ngcontent-%COMP%]{right:25px;transform:scale(1.3) translate(140px) translateY(-180px) rotate(-10deg)}.pick-card[_ngcontent-%COMP%]{animation:pick-card-animation 1s ease-in-out;transform:scale(1.3) translate(140px) translateY(-180px) rotate(-10deg)}@keyframes pick-card-animation{0%{transform:scale(1)}40%{transform:scale(1.7)}60%{transform:scale(1.7)}to{transform:scale(1.3) translate(140px) translateY(-180px) rotate(-10deg)}}.player-position[_ngcontent-%COMP%]{position:absolute;right:0;z-index:1}.btn-add[_ngcontent-%COMP%]{position:absolute;right:32px;bottom:32px}.pin-bottom[_ngcontent-%COMP%]{position:absolute;bottom:32px;left:100px;right:100px}"]}),n})()}];let ZK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Jp.forRoot(YK),Jp]}),n})(),QK=(()=>{class n{constructor(){this.title="ringoffire"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},dependencies:[E_]}),n})();function Z2(n){return new d.vHH(3e3,!1)}function k4(){return typeof window<"u"&&typeof window.document<"u"}function vO(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function ah(n){switch(n.length){case 0:return new yf;case 1:return n[0];default:return new SE(n)}}function Q2(n,e,t,r,i=new Map,o=new Map){const c=[],h=[];let p=-1,y=null;if(r.forEach(E=>{const T=E.get("offset"),R=T==p,L=R&&y||new Map;E.forEach((B,J)=>{let we=J,nt=B;if("offset"!==J)switch(we=e.normalizePropertyName(we,c),nt){case"!":nt=i.get(J);break;case lo:nt=o.get(J);break;default:nt=e.normalizeStyleValue(J,we,nt,c)}L.set(we,nt)}),R||h.push(L),y=L,p=T}),c.length)throw function b4(n){return new d.vHH(3502,!1)}();return h}function bO(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&wO(t,"start",n)));break;case"done":n.onDone(()=>r(t&&wO(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&wO(t,"destroy",n)))}}function wO(n,e,t){const o=EO(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(o._data=c),o}function EO(n,e,t,r,i="",o=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:o,disabled:!!c}}function Ko(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function X2(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let CO=(n,e)=>!1,J2=(n,e,t)=>[],eH=null;function IO(n){const e=n.parentNode||n.host;return e===eH?null:e}(vO()||typeof Element<"u")&&(k4()?(eH=(()=>document.documentElement)(),CO=(n,e)=>{for(;e;){if(e===n)return!0;e=IO(e)}return!1}):CO=(n,e)=>n.contains(e),J2=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let cp=null,tH=!1;const nH=CO,rH=J2;let iH=(()=>{class n{validateStyleProperty(t){return function N4(n){cp||(cp=function P4(){return typeof document<"u"?document.body:null}()||{},tH=!!cp.style&&"WebkitAppearance"in cp.style);let e=!0;return cp.style&&!function O4(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in cp.style,!e&&tH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in cp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return nH(t,r)}getParentElement(t){return IO(t)}query(t,r,i){return rH(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,o,c,h=[],p){return new yf(i,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),DO=(()=>{class n{}return n.NOOP=new iH,n})();const TO="ng-enter",jD="ng-leave",$D="ng-trigger",zD=".ng-trigger",oH="ng-animating",SO=".ng-animating";function lh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:AO(parseFloat(e[1]),e[2])}function AO(n,e){return"s"===e?1e3*n:n}function GD(n,e,t){return n.hasOwnProperty("duration")?n:function V4(n,e,t){let i,o=0,c="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(Z2()),{duration:0,delay:0,easing:""};i=AO(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(o=AO(parseFloat(p),h[4]));const y=h[5];y&&(c=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function XK(){return new d.vHH(3100,!1)}()),h=!0),o<0&&(e.push(function JK(){return new d.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,Z2())}return{duration:i,delay:o,easing:c}}(n,e,t)}function Jb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function aH(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function ch(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function cH(n,e,t){return t?e+":"+t+";":""}function uH(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=cH(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=cH(0,j4(t),n.style[t]));n.setAttribute("style",e)}function bc(n,e,t){n.style&&(e.forEach((r,i)=>{const o=xO(i);t&&!t.has(i)&&t.set(i,n.style[o]),n.style[o]=r}),vO()&&uH(n))}function up(n,e){n.style&&(e.forEach((t,r)=>{const i=xO(r);n.style[i]=""}),vO()&&uH(n))}function ew(n){return Array.isArray(n)?1==n.length?n[0]:qy(n):n}const MO=new RegExp("{{\\s*(.+?)\\s*}}","g");function dH(n){let e=[];if("string"==typeof n){let t;for(;t=MO.exec(n);)e.push(t[1]);MO.lastIndex=0}return e}function WD(n,e,t){const r=n.toString(),i=r.replace(MO,(o,c)=>{let h=e[c];return null==h&&(t.push(function t4(n){return new d.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function qD(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const H4=/-+([a-z0-9])/g;function xO(n){return n.replace(H4,(...e)=>e[1].toUpperCase())}function j4(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function n4(n){return new d.vHH(3004,!1)}()}}function hH(n,e){return window.getComputedStyle(n)[e]}function K4(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Y4(n,e,t){if(":"==n[0]){const p=function Z4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function m4(n){return new d.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function g4(n){return new d.vHH(3015,!1)}()),e;const i=r[1],o=r[2],c=r[3];e.push(fH(i,c));"<"==o[0]&&!("*"==i&&"*"==c)&&e.push(fH(c,i))}(r,t,e)):t.push(n),t}const QD=new Set(["true","1"]),XD=new Set(["false","0"]);function fH(n,e){const t=QD.has(n)||XD.has(n),r=QD.has(e)||XD.has(e);return(i,o)=>{let c="*"==n||n==i,h="*"==e||e==o;return!c&&t&&"boolean"==typeof i&&(c=i?QD.has(n):XD.has(n)),!h&&r&&"boolean"==typeof o&&(h=o?QD.has(e):XD.has(e)),c&&h}}const Q4=new RegExp("s*:selfs*,?","g");function RO(n,e,t,r){return new X4(n).build(e,t,r)}class X4{constructor(e){this._driver=e}build(e,t,r){const i=new t8(t);return this._resetContextStyleTimingState(i),Yo(this,ew(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const o=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function i4(){return new d.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,o.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,c.push(p)}else t.errors.push(function s4(){return new d.vHH(3007,!1)}())}),{type:7,name:e.name,states:o,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const o=new Set,c=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{dH(p).forEach(y=>{c.hasOwnProperty(y)||o.add(y)})})}),o.size&&(qD(o.values()),t.errors.push(function o4(n,e){return new d.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Yo(this,ew(e.animation),t);return{type:1,matchers:K4(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:dp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Yo(this,r,t)),options:dp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const o=e.steps.map(c=>{t.currentTime=r;const h=Yo(this,c,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:o,options:dp(e.options)}}visitAnimate(e,t){const r=function r8(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return kO(GD(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(o=>"{"==o.charAt(0)&&"{"==o.charAt(1))){const o=kO(0,0,"");return o.dynamic=!0,o.strValue=t,o}const i=GD(t,e);return kO(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,o=e.styles?e.styles:cc({});if(5==o.type)i=this.visitKeyframes(o,t);else{let c=e.styles,h=!1;if(!c){h=!0;const y={};r.easing&&(y.easing=r.easing),c=cc(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(c,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===lo?r.push(h):t.errors.push(new d.vHH(3002,!1)):r.push(aH(h));let o=!1,c=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(c=h.get("easing"),h.delete("easing")),!o))for(let p of h.values())if(p.toString().indexOf("{{")>=0){o=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,o=t.currentTime;r&&o>0&&(o-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((h,p)=>{const y=t.collectedStyles.get(t.currentQuerySelector),E=y.get(p);let T=!0;E&&(o!=i&&o>=E.startTime&&i<=E.endTime&&(t.errors.push(function l4(n,e,t,r,i){return new d.vHH(3010,!1)}()),T=!1),o=E.startTime),T&&y.set(p,{startTime:o,endTime:i}),t.options&&function U4(n,e,t){const r=e.params||{},i=dH(n);i.length&&i.forEach(o=>{r.hasOwnProperty(o)||t.push(function e4(n){return new d.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function c4(){return new d.vHH(3011,!1)}()),r;let o=0;const c=[];let h=!1,p=!1,y=0;const E=e.steps.map(nt=>{const ut=this._makeStyleAst(nt,t);let Tt=null!=ut.offset?ut.offset:function n8(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(ut.styles),_t=0;return null!=Tt&&(o++,_t=ut.offset=Tt),p=p||_t<0||_t>1,h=h||_t<y,y=_t,c.push(_t),ut});p&&t.errors.push(function u4(){return new d.vHH(3012,!1)}()),h&&t.errors.push(function d4(){return new d.vHH(3200,!1)}());const T=e.steps.length;let R=0;o>0&&o<T?t.errors.push(function h4(){return new d.vHH(3202,!1)}()):0==o&&(R=1/(T-1));const L=T-1,B=t.currentTime,J=t.currentAnimateTimings,we=J.duration;return E.forEach((nt,ut)=>{const Tt=R>0?ut==L?1:R*ut:c[ut],_t=Tt*we;t.currentTime=B+J.delay+_t,J.duration=_t,this._validateStyleAst(nt,t),nt.offset=Tt,r.styles.push(nt)}),r}visitReference(e,t){return{type:8,animation:Yo(this,ew(e.animation),t),options:dp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:dp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:dp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[o,c]=function J4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(Q4,"")),n=n.replace(/@\*/g,zD).replace(/@\w+/g,t=>zD+"-"+t.slice(1)).replace(/:animating/g,SO),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+o:o,Ko(t.collectedStyles,t.currentQuerySelector,new Map);const h=Yo(this,ew(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:o,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:h,originalSelector:e.selector,options:dp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function f4(){return new d.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:GD(e.timings,t.errors,!0);return{type:12,animation:Yo(this,ew(e.animation),t),timings:r,options:null}}}class t8{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function dp(n){return n?(n=Jb(n)).params&&(n.params=function e8(n){return n?Jb(n):null}(n.params)):n={},n}function kO(n,e,t){return{duration:n,delay:e,easing:t}}function OO(n,e,t,r,i,o,c=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:o,totalTime:i+o,easing:c,subTimeline:h}}class JD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const o8=new RegExp(":enter","g"),l8=new RegExp(":leave","g");function NO(n,e,t,r,i,o=new Map,c=new Map,h,p,y=[]){return(new c8).buildKeyframes(n,e,t,r,i,o,c,h,p,y)}class c8{buildKeyframes(e,t,r,i,o,c,h,p,y,E=[]){y=y||new JD;const T=new PO(e,t,y,i,o,E,[]);T.options=p;const R=p.delay?lh(p.delay):0;T.currentTimeline.delayNextStep(R),T.currentTimeline.setStyles([c],null,T.errors,p),Yo(this,r,T);const L=T.timelines.filter(B=>B.containsAnimation());if(L.length&&h.size){let B;for(let J=L.length-1;J>=0;J--){const we=L[J];if(we.element===t){B=we;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,T.errors,p)}return L.length?L.map(B=>B.buildKeyframes()):[OO(t,[],[],[],0,R,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),o=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);o!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let o=t.currentTimeline.currentTime;const c=null!=r.duration?lh(r.duration):null,h=null!=r.delay?lh(r.delay):null;return 0!==c&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,c,h);o=Math.max(o,y.duration+y.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),Yo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const o=e.options;if(o&&(o.params||o.delay)&&(i=t.createSubContext(o),i.transformIntoNewTimeline(),null!=o.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=eT);const c=lh(o.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Yo(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const o=e.options&&e.options.delay?lh(e.options.delay):0;e.steps.forEach(c=>{const h=t.createSubContext(e.options);o&&h.delayNextStep(o),Yo(this,c,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return GD(t.params?WD(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const o=e.style;5==o.type?this.visitKeyframes(o,t):(t.incrementTime(r.duration),this.visitStyle(o,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const o=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(o):r.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,o=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*o),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+o),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},o=i.delay?lh(i.delay):0;o&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=eT);let c=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,E)=>{t.currentQueryIndex=E;const T=t.createSubContext(e.options,y);o&&T.delayNextStep(o),y===t.element&&(p=T.currentTimeline),Yo(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,o=e.timings,c=Math.abs(o.duration),h=c*(t.currentQueryTotal-1);let p=c*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const E=t.currentTimeline;p&&E.delayNextStep(p);const T=E.currentTime;Yo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const eT={};class PO{constructor(e,t,r,i,o,c,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=o,this.errors=c,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=eT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new tT(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=lh(r.duration)),null!=r.delay&&(i.delay=lh(r.delay));const o=r.params;if(o){let c=i.params;c||(c=this.options.params={}),Object.keys(o).forEach(h=>{(!t||!c.hasOwnProperty(h))&&(c[h]=WD(o[h],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,o=new PO(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=eT,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},o=new u8(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(o),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,o,c){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(o8,"."+this._enterClassName)).replace(l8,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!o&&0==h.length&&c.push(function p4(n){return new d.vHH(3014,!1)}()),h}}class tT{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new tT(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||lo),this._currentKeyframe.set(t,lo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const o=i&&i.params||{},c=function d8(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let o of r)t.set(o,lo)}else ch(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of c){const y=WD(p,o,r);this._pendingStyles.set(h,y),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??lo),this._updateStyle(h,y)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=ch(h,new Map,this._backFill);y.forEach((E,T)=>{"!"===E?e.add(T):E===lo&&t.add(T)}),r||y.set("offset",p/this.duration),i.push(y)});const o=e.size?qD(e.values()):[],c=t.size?qD(t.values()):[];if(r){const h=i[0],p=new Map(h);h.set("offset",0),p.set("offset",1),i=[h,p]}return OO(this.element,i,o,c,this.duration,this.startTime,this.easing,!1)}}class u8 extends tT{constructor(e,t,r,i,o,c,h=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=o,this._stretchStartingKeyframe=h,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const o=[],c=r+t,h=t/c,p=ch(e[0]);p.set("offset",0),o.push(p);const y=ch(e[0]);y.set("offset",mH(h)),o.push(y);const E=e.length-1;for(let T=1;T<=E;T++){let R=ch(e[T]);const L=R.get("offset");R.set("offset",mH((t+L*r)/c)),o.push(R)}r=c,t=0,i="",e=o}return OO(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function mH(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class FO{}const h8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class f8 extends FO{normalizePropertyName(e,t){return xO(e)}normalizeStyleValue(e,t,r,i){let o="";const c=r.toString().trim();if(h8.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)o="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function r4(n,e){return new d.vHH(3005,!1)}())}return c+o}}function _H(n,e,t,r,i,o,c,h,p,y,E,T,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:o,toState:r,toStyles:c,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:E,totalTime:T,errors:R}}const LO={};class yH{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function p8(n,e,t,r,i){return n.some(o=>o(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,o,c,h,p,y,E){const T=[],R=this.ast.options&&this.ast.options.params||LO,B=this.buildStyles(r,h&&h.params||LO,T),J=p&&p.params||LO,we=this.buildStyles(i,J,T),nt=new Set,ut=new Map,Tt=new Map,_t="void"===i,Gt={params:g8(J,R),delay:this.ast.options?.delay},Jt=E?[]:NO(e,t,this.ast.animation,o,c,B,we,Gt,y,T);let Tn=0;if(Jt.forEach(Du=>{Tn=Math.max(Du.duration+Du.delay,Tn)}),T.length)return _H(t,this._triggerName,r,i,_t,B,we,[],[],ut,Tt,Tn,T);Jt.forEach(Du=>{const Tu=Du.element,V$=Ko(ut,Tu,new Set);Du.preStyleProps.forEach(Cp=>V$.add(Cp));const Sw=Ko(Tt,Tu,new Set);Du.postStyleProps.forEach(Cp=>Sw.add(Cp)),Tu!==t&&nt.add(Tu)});const $s=qD(nt.values());return _H(t,this._triggerName,r,i,_t,B,we,Jt,$s,ut,Tt,Tn)}}function g8(n,e){const t=Jb(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class m8{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Jb(this.defaultParams);return Object.keys(e).forEach(o=>{const c=e[o];null!==c&&(i[o]=c)}),this.styles.styles.forEach(o=>{"string"!=typeof o&&o.forEach((c,h)=>{c&&(c=WD(c,i,t));const p=this.normalizer.normalizePropertyName(h,t);c=this.normalizer.normalizeStyleValue(h,p,c,t),r.set(p,c)})}),r}}class y8{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new m8(i.style,i.options&&i.options.params||{},r))}),vH(this.states,"true","1"),vH(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new yH(e,i,this.states))}),this.fallbackTransition=function v8(n,e,t){return new yH(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function vH(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const b8=new JD;class w8{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],o=RO(this._driver,t,r,[]);if(r.length)throw function w4(n){return new d.vHH(3503,!1)}();this._animations.set(e,o)}_buildPlayer(e,t,r){const i=e.element,o=Q2(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],o=this._animations.get(e);let c;const h=new Map;if(o?(c=NO(this._driver,t,o,TO,jD,new Map,new Map,r,b8,i),c.forEach(E=>{const T=Ko(h,E.element,new Map);E.postStyleProps.forEach(R=>T.set(R,null))})):(i.push(function E4(){return new d.vHH(3300,!1)}()),c=[]),i.length)throw function C4(n){return new d.vHH(3504,!1)}();h.forEach((E,T)=>{E.forEach((R,L)=>{E.set(L,this._driver.computeStyle(T,L,lo))})});const y=ah(c.map(E=>{const T=h.get(E.element);return this._buildPlayer(E,new Map,T)}));return this._playersById.set(e,y),y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function I4(n){return new d.vHH(3301,!1)}();return t}listen(e,t,r,i){const o=EO(t,"","","");return bO(this._getPlayer(e),r,o,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const o=this._getPlayer(e);switch(r){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const bH="ng-animate-queued",VO="ng-animate-disabled",T8=[],wH={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},S8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ra="__ng_removed";class BO{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function R8(n){return n??null}(r?e.value:e),r){const o=Jb(e);delete o.value,this.options=o}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const tw="void",UO=new BO(tw);class A8{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ka(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function D4(n,e){return new d.vHH(3302,!1)}();if(null==r||0==r.length)throw function T4(n){return new d.vHH(3303,!1)}();if(!function k8(n){return"start"==n||"done"==n}(r))throw function S4(n,e){return new d.vHH(3400,!1)}();const o=Ko(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};o.push(c);const h=Ko(this._engine.statesByElement,e,new Map);return h.has(t)||(ka(e,$D),ka(e,$D+"-"+t),h.set(t,UO)),()=>{this._engine.afterFlush(()=>{const p=o.indexOf(c);p>=0&&o.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function A4(n){return new d.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const o=this._getTrigger(t),c=new HO(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(ka(e,$D),ka(e,$D+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const y=new BO(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h.set(t,y),p||(p=UO),y.value!==tw&&p.value===y.value){if(!function P8(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const o=t[i];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}(p.params,y.params)){const J=[],we=o.matchStyles(p.value,p.params,J),nt=o.matchStyles(y.value,y.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{up(e,we),bc(e,nt)})}return}const R=Ko(this._engine.playersByElement,e,[]);R.forEach(J=>{J.namespaceId==this.id&&J.triggerName==t&&J.queued&&J.destroy()});let L=o.matchTransition(p.value,y.value,e,y.params),B=!1;if(!L){if(!i)return;L=o.fallbackTransition,B=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:p,toState:y,player:c,isFallbackTransition:B}),B||(ka(e,bH),c.onStart(()=>{Wm(e,bH)})),c.onDone(()=>{let J=this.players.indexOf(c);J>=0&&this.players.splice(J,1);const we=this._engine.playersByElement.get(e);if(we){let nt=we.indexOf(c);nt>=0&&we.splice(nt,1)}}),this.players.push(c),R.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,zD,!0);r.forEach(i=>{if(i[Ra])return;const o=this._engine.fetchNamespacesByElement(i);o.size?o.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const o=this._engine.statesByElement.get(e),c=new Map;if(o){const h=[];if(o.forEach((p,y)=>{if(c.set(y,p.value),this._triggers.has(y)){const E=this.trigger(e,y,tw,i);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&ah(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(o=>{const c=o.name;if(i.has(c))return;i.add(c);const p=this._triggers.get(c).fallbackTransition,y=r.get(c)||UO,E=new BO(tw),T=new HO(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:p,fromState:y,toState:E,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const o=r.players.length?r.playersByQueriedElement.get(e):[];if(o&&o.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const o=e[Ra];(!o||o===wH)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){ka(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const o=r.element,c=this._elementListeners.get(o);c&&c.forEach(h=>{if(h.name==r.triggerName){const p=EO(o,r.triggerName,r.fromState.value,r.toState.value);p._data=e,bO(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const o=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==o||0==c?o-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class M8{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,o)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new A8(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const y=r.indexOf(p);r.splice(y+1,0,e),c=!0;break}h=this.driver.getParentElement(h)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const o=this._fetchNamespace(i.namespaceId);o&&t.add(o)}return t}trigger(e,t,r,i){if(nT(t)){const o=this._fetchNamespace(e);if(o)return o.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!nT(t))return;const o=t[Ra];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ka(e,VO)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Wm(e,VO))}removeNode(e,t,r,i){if(nT(t)){const o=e?this._fetchNamespace(e):null;if(o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,o){this.collectedLeaveElements.push(t),t[Ra]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,r,i,o){return nT(t)?this._fetchNamespace(e).listen(t,r,i,o):()=>{}}_buildInstruction(e,t,r,i,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,zD,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,SO,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return ah(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ra];if(t&&t.setForRemoval){if(e[Ra]=wH,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(VO)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)ka(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?ah(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function M4(n){return new d.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new JD,i=[],o=new Map,c=[],h=new Map,p=new Map,y=new Map,E=new Set;this.disabledNodes.forEach(bt=>{E.add(bt);const kt=this.driver.query(bt,".ng-animate-queued",!0);for(let Bt=0;Bt<kt.length;Bt++)E.add(kt[Bt])});const T=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=IH(R,this.collectedEnterElements),B=new Map;let J=0;L.forEach((bt,kt)=>{const Bt=TO+J++;B.set(kt,Bt),bt.forEach(bn=>ka(bn,Bt))});const we=[],nt=new Set,ut=new Set;for(let bt=0;bt<this.collectedLeaveElements.length;bt++){const kt=this.collectedLeaveElements[bt],Bt=kt[Ra];Bt&&Bt.setForRemoval&&(we.push(kt),nt.add(kt),Bt.hasAnimation?this.driver.query(kt,".ng-star-inserted",!0).forEach(bn=>nt.add(bn)):ut.add(kt))}const Tt=new Map,_t=IH(R,Array.from(nt));_t.forEach((bt,kt)=>{const Bt=jD+J++;Tt.set(kt,Bt),bt.forEach(bn=>ka(bn,Bt))}),e.push(()=>{L.forEach((bt,kt)=>{const Bt=B.get(kt);bt.forEach(bn=>Wm(bn,Bt))}),_t.forEach((bt,kt)=>{const Bt=Tt.get(kt);bt.forEach(bn=>Wm(bn,Bt))}),we.forEach(bt=>{this.processLeaveNode(bt)})});const Gt=[],Jt=[];for(let bt=this._namespaceList.length-1;bt>=0;bt--)this._namespaceList[bt].drainQueuedTransitions(t).forEach(Bt=>{const bn=Bt.player,ki=Bt.element;if(Gt.push(bn),this.collectedEnterElements.length){const ps=ki[Ra];if(ps&&ps.setForMove){if(ps.previousTriggersValues&&ps.previousTriggersValues.has(Bt.triggerName)){const Ip=ps.previousTriggersValues.get(Bt.triggerName),Fa=this.statesByElement.get(Bt.element);if(Fa&&Fa.has(Bt.triggerName)){const HT=Fa.get(Bt.triggerName);HT.value=Ip,Fa.set(Bt.triggerName,HT)}}return void bn.destroy()}}const Tc=!T||!this.driver.containsElement(T,ki),Qo=Tt.get(ki),vh=B.get(ki),Nr=this._buildInstruction(Bt,r,vh,Qo,Tc);if(Nr.errors&&Nr.errors.length)return void Jt.push(Nr);if(Tc)return bn.onStart(()=>up(ki,Nr.fromStyles)),bn.onDestroy(()=>bc(ki,Nr.toStyles)),void i.push(bn);if(Bt.isFallbackTransition)return bn.onStart(()=>up(ki,Nr.fromStyles)),bn.onDestroy(()=>bc(ki,Nr.toStyles)),void i.push(bn);const H$=[];Nr.timelines.forEach(ps=>{ps.stretchStartingKeyframe=!0,this.disabledNodes.has(ps.element)||H$.push(ps)}),Nr.timelines=H$,r.append(ki,Nr.timelines),c.push({instruction:Nr,player:bn,element:ki}),Nr.queriedElements.forEach(ps=>Ko(h,ps,[]).push(bn)),Nr.preStyleProps.forEach((ps,Ip)=>{if(ps.size){let Fa=p.get(Ip);Fa||p.set(Ip,Fa=new Set),ps.forEach((HT,aP)=>Fa.add(aP))}}),Nr.postStyleProps.forEach((ps,Ip)=>{let Fa=y.get(Ip);Fa||y.set(Ip,Fa=new Set),ps.forEach((HT,aP)=>Fa.add(aP))})});if(Jt.length){const bt=[];Jt.forEach(kt=>{bt.push(function x4(n,e){return new d.vHH(3505,!1)}())}),Gt.forEach(kt=>kt.destroy()),this.reportError(bt)}const Tn=new Map,$s=new Map;c.forEach(bt=>{const kt=bt.element;r.has(kt)&&($s.set(kt,kt),this._beforeAnimationBuild(bt.player.namespaceId,bt.instruction,Tn))}),i.forEach(bt=>{const kt=bt.element;this._getPreviousPlayers(kt,!1,bt.namespaceId,bt.triggerName,null).forEach(bn=>{Ko(Tn,kt,[]).push(bn),bn.destroy()})});const Du=we.filter(bt=>TH(bt,p,y)),Tu=new Map;CH(Tu,this.driver,ut,y,lo).forEach(bt=>{TH(bt,p,y)&&Du.push(bt)});const Sw=new Map;L.forEach((bt,kt)=>{CH(Sw,this.driver,new Set(bt),p,"!")}),Du.forEach(bt=>{const kt=Tu.get(bt),Bt=Sw.get(bt);Tu.set(bt,new Map([...Array.from(kt?.entries()??[]),...Array.from(Bt?.entries()??[])]))});const Cp=[],B$=[],U$={};c.forEach(bt=>{const{element:kt,player:Bt,instruction:bn}=bt;if(r.has(kt)){if(E.has(kt))return Bt.onDestroy(()=>bc(kt,bn.toStyles)),Bt.disabled=!0,Bt.overrideTotalTime(bn.totalTime),void i.push(Bt);let ki=U$;if($s.size>1){let Qo=kt;const vh=[];for(;Qo=Qo.parentNode;){const Nr=$s.get(Qo);if(Nr){ki=Nr;break}vh.push(Qo)}vh.forEach(Nr=>$s.set(Nr,ki))}const Tc=this._buildAnimation(Bt.namespaceId,bn,Tn,o,Sw,Tu);if(Bt.setRealPlayer(Tc),ki===U$)Cp.push(Bt);else{const Qo=this.playersByElement.get(ki);Qo&&Qo.length&&(Bt.parentPlayer=ah(Qo)),i.push(Bt)}}else up(kt,bn.fromStyles),Bt.onDestroy(()=>bc(kt,bn.toStyles)),B$.push(Bt),E.has(kt)&&i.push(Bt)}),B$.forEach(bt=>{const kt=o.get(bt.element);if(kt&&kt.length){const Bt=ah(kt);bt.setRealPlayer(Bt)}}),i.forEach(bt=>{bt.parentPlayer?bt.syncPlayerEvents(bt.parentPlayer):bt.destroy()});for(let bt=0;bt<we.length;bt++){const kt=we[bt],Bt=kt[Ra];if(Wm(kt,jD),Bt&&Bt.hasAnimation)continue;let bn=[];if(h.size){let Tc=h.get(kt);Tc&&Tc.length&&bn.push(...Tc);let Qo=this.driver.query(kt,SO,!0);for(let vh=0;vh<Qo.length;vh++){let Nr=h.get(Qo[vh]);Nr&&Nr.length&&bn.push(...Nr)}}const ki=bn.filter(Tc=>!Tc.destroyed);ki.length?O8(this,kt,ki):this.processLeaveNode(kt)}return we.length=0,Cp.forEach(bt=>{this.players.push(bt),bt.onDone(()=>{bt.destroy();const kt=this.players.indexOf(bt);this.players.splice(kt,1)}),bt.play()}),Cp}elementContainsData(e,t){let r=!1;const i=t[Ra];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,o){let c=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(c=h)}else{const h=this.playersByElement.get(e);if(h){const p=!o||o==tw;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||c.push(y)})}}return(r||i)&&(c=c.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),c}_beforeAnimationBuild(e,t,r){const o=t.element,c=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,E=y!==o,T=Ko(r,y,[]);this._getPreviousPlayers(y,E,c,h,t.toState).forEach(L=>{const B=L.getRealPlayer();B.beforeDestroy&&B.beforeDestroy(),L.destroy(),T.push(L)})}up(o,t.fromStyles)}_buildAnimation(e,t,r,i,o,c){const h=t.triggerName,p=t.element,y=[],E=new Set,T=new Set,R=t.timelines.map(B=>{const J=B.element;E.add(J);const we=J[Ra];if(we&&we.removedBeforeQueried)return new yf(B.duration,B.delay);const nt=J!==p,ut=function N8(n){const e=[];return DH(n,e),e}((r.get(J)||T8).map(Tn=>Tn.getRealPlayer())).filter(Tn=>!!Tn.element&&Tn.element===J),Tt=o.get(J),_t=c.get(J),Gt=Q2(0,this._normalizer,0,B.keyframes,Tt,_t),Jt=this._buildPlayer(B,Gt,ut);if(B.subTimeline&&i&&T.add(J),nt){const Tn=new HO(e,h,J);Tn.setRealPlayer(Jt),y.push(Tn)}return Jt});y.forEach(B=>{Ko(this.playersByQueriedElement,B.element,[]).push(B),B.onDone(()=>function x8(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,B.element,B))}),E.forEach(B=>ka(B,oH));const L=ah(R);return L.onDestroy(()=>{E.forEach(B=>Wm(B,oH)),bc(p,t.toStyles)}),T.forEach(B=>{Ko(i,B,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new yf(e.duration,e.delay)}}class HO{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new yf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>bO(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ko(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function nT(n){return n&&1===n.nodeType}function EH(n,e){const t=n.style.display;return n.style.display=e??"none",t}function CH(n,e,t,r,i){const o=[];t.forEach(p=>o.push(EH(p)));const c=[];r.forEach((p,y)=>{const E=new Map;p.forEach(T=>{const R=e.computeStyle(y,T,i);E.set(T,R),(!R||0==R.length)&&(y[Ra]=S8,c.push(y))}),n.set(y,E)});let h=0;return t.forEach(p=>EH(p,o[h++])),c}function IH(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),o=new Map;function c(h){if(!h)return 1;let p=o.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:c(y),o.set(h,p),p}return e.forEach(h=>{const p=c(h);1!==p&&t.get(p).push(h)}),t}function ka(n,e){n.classList?.add(e)}function Wm(n,e){n.classList?.remove(e)}function O8(n,e,t){ah(t).onDone(()=>n.processLeaveNode(e))}function DH(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof SE?DH(r.players,e):e.push(r)}}function TH(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(o=>i.add(o)):e.set(n,r),t.delete(n),!0}class rT{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,o)=>{},this._transitionEngine=new M8(e,t,r),this._timelineEngine=new w8(e,t,r),this._transitionEngine.onRemovalComplete=(i,o)=>this.onRemovalComplete(i,o)}registerTrigger(e,t,r,i,o){const c=e+"-"+i;let h=this._triggerCache[c];if(!h){const p=[],E=RO(this._driver,o,p,[]);if(p.length)throw function v4(n,e){return new d.vHH(3404,!1)}();h=function _8(n,e,t){return new y8(n,e,t)}(i,E,this._normalizer),this._triggerCache[c]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[o,c]=X2(r);this._timelineEngine.command(o,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,o){if("@"==r.charAt(0)){const[c,h]=X2(r);return this._timelineEngine.listen(c,t,h,o)}return this._transitionEngine.listen(e,t,r,i,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let L8=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(t);o||n.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&bc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(bc(this._element,this._initialStyles),this._endStyles&&(bc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(up(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(up(this._element,this._endStyles),this._endStyles=null),bc(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function jO(n){let e=null;return n.forEach((t,r)=>{(function V8(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class SH{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:hH(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class B8{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return nH(e,t)}getParentElement(e){return IO(e)}query(e,t,r){return rH(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,o,c=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};o&&(p.easing=o);const y=new Map,E=c.filter(L=>L instanceof SH);(function $4(n,e){return 0===n||0===e})(r,i)&&E.forEach(L=>{L.currentSnapshot.forEach((B,J)=>y.set(J,B))});let T=function B4(n){return n.length?n[0]instanceof Map?n:n.map(e=>aH(e)):[]}(t).map(L=>ch(L));T=function z4(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((o,c)=>{r.has(c)||i.push(c),r.set(c,o)}),i.length)for(let o=1;o<e.length;o++){let c=e[o];i.forEach(h=>c.set(h,hH(n,h)))}}return e}(e,T,y);const R=function F8(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=jO(e[0]),e.length>1&&(r=jO(e[e.length-1]))):e instanceof Map&&(t=jO(e)),t||r?new L8(n,t,r):null}(e,T);return new SH(e,T,p,R)}}let U8=(()=>{class n extends EE{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:d.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?qy(t):t;return AH(this._renderer,null,r,"register",[i]),new H8(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(ce))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class H8 extends class Mg{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new j8(this._id,e,t||{},this._renderer)}}class j8{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return AH(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function AH(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const MH="@.disabled";let $8=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(o,c)=>{const h=c?.parentNode(o);h&&c.removeChild(h,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let E=this._rendererCache.get(o);return E||(E=new xH("",o,this.engine),this._rendererCache.set(o,E)),E}const c=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(c,h,t,E.name,E)};return r.data.animation.forEach(p),new z8(this,h,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[c,h]=o;c(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.FYo),d.LFG(rT),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class xH{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==MH?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class z8 extends xH{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==MH?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function G8(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let o=t.slice(1),c="";return"@"!=o.charAt(0)&&([o,c]=function W8(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(o)),this.engine.listen(this.namespaceId,i,o,c,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let q8=(()=>{class n extends rT{constructor(t,r,i,o){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ce),d.LFG(DO),d.LFG(FO),d.LFG(d.z2F))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const RH=[{provide:EE,useClass:U8},{provide:FO,useFactory:function K8(){return new f8}},{provide:rT,useClass:q8},{provide:d.FYo,useFactory:function Y8(n,e,t){return new $8(n,e,t)},deps:[To,rT,d.R0b]}],$O=[{provide:DO,useFactory:()=>new B8},{provide:d.QbO,useValue:"BrowserAnimations"},...RH],kH=[{provide:DO,useClass:iH},{provide:d.QbO,useValue:"NoopAnimations"},...RH];let Z8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?kH:$O}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:$O,imports:[Pn]}),n})();const zO_firebase={projectId:"ring-of-fire-dc796",appId:"1:1065851047732:web:e671a37efbcef277aa9f61",storageBucket:"ring-of-fire-dc796.appspot.com",apiKey:"AIzaSyCG2o3jHlzVvoK0hK7pNfK64OmXG7tmXPs",authDomain:"ring-of-fire-dc796.firebaseapp.com",messagingSenderId:"1065851047732"};var Q8=F(6457);class GO{constructor(e){return e}}class WO{constructor(){return(0,cn.vb)("auth")}}const qO=new d.OlP("angularfire2.auth-instances");function J8(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new GO(r)}}const e5={provide:WO,deps:[[new d.FiY,qO]]},t5={provide:GO,useFactory:function X8(n,e){const t=(0,cn.JM)("auth",n,e);return t&&new GO(t)},deps:[[new d.FiY,qO],ap]};let n5=(()=>{class n{constructor(){(0,Eu.KN)("angularfire",cn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[t5,e5]}),n})();function r5(n,...e){return{ngModule:n5,providers:[{provide:qO,useFactory:J8(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,MD,[new d.FiY,Gm],...e]}]}}const s5=(0,cn.u3)(Q8.n,!0),NH="@firebase/database";let KO="";class a5{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ne.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ne.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class l5{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ne.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const FH=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new a5(e)}}catch{}return new l5},hp=FH("localStorage"),YO=FH("sessionStorage"),qm=new Sa.Yd("@firebase/database"),LH=function(){let n=1;return function(){return n++}}(),VH=function(n){const e=(0,ne.dS)(n),t=new ne.gQ;t.update(e);const r=t.digest();return ne.US.encodeByteArray(r)},nw=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=nw.apply(null,r):e+="object"==typeof r?(0,ne.Pz)(r):r,e+=" "}return e};let fp=null,BH=!0;const xi=function(...n){if(!0===BH&&(BH=!1,null===fp&&!0===YO.get("logging_enabled")&&function(n,e){(0,ne.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(qm.logLevel=Sa.in.VERBOSE,fp=qm.log.bind(qm),e&&YO.set("logging_enabled",!0)):"function"==typeof n?fp=n:(fp=null,YO.remove("logging_enabled"))}(!0)),fp){const e=nw.apply(null,n);fp(e)}},rw=function(n){return function(...e){xi(n,...e)}},ZO=function(...n){const e="FIREBASE INTERNAL ERROR: "+nw(...n);qm.error(e)},wc=function(...n){const e=`FIREBASE FATAL ERROR: ${nw(...n)}`;throw qm.error(e),new Error(e)},fs=function(...n){const e="FIREBASE WARNING: "+nw(...n);qm.warn(e)},sT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cu="[MIN_NAME]",Ec="[MAX_NAME]",pp=function(n,e){if(n===e)return 0;if(n===Cu||e===Ec)return-1;if(e===Cu||n===Ec)return 1;{const t=oT(n),r=oT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},d5=function(n,e){return n===e?0:n<e?-1:1},iw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ne.Pz)(e))},QO=function(n){if("object"!=typeof n||null===n)return(0,ne.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,ne.Pz)(e[r]),t+=":",t+=QO(n[e[r]]);return t+="}",t},HH=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ri(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const jH=function(n){(0,ne.hu)(!sT(n),"Invalid JSON number");const r=1023;let i,o,c,h,p;0===n?(o=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=h+r,c=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(o=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)y.push(o%2?1:0),o=Math.floor(o/2);y.push(i?1:0),y.reverse();const E=y.join("");let T="";for(p=0;p<64;p+=8){let R=parseInt(E.substr(p,8),2).toString(16);1===R.length&&(R="0"+R),T+=R}return T.toLowerCase()},g5=new RegExp("^-?(0*)\\d{1,10}$"),oT=function(n){if(g5.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Km=function(n){try{n()}catch(e){setTimeout(()=>{throw fs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},sw=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class _5{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class y5{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(xi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fs(e)}}let ow=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,QH="websocket",XH="long_polling";class eN{constructor(e,t,r,i,o=!1,c="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=c,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function JH(n,e,t){let r;if((0,ne.hu)("string"==typeof e,"typeof type must == string"),(0,ne.hu)("object"==typeof t,"typeof params must == object"),e===QH)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==XH)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function v5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ri(t,(o,c)=>{i.push(o+"="+c)}),r+i.join("&")}class b5{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ne.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ne.p$)(this.counters_)}}const tN={},nN={};function rN(n){const e=n.toString();return tN[e]||(tN[e]=new b5),tN[e]}class E5{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Km(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class uh{constructor(e,t,r,i,o,c,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=c,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=rw(e),this.stats_=rN(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),JH(t,XH,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new E5(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ne.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iN((...o)=>{const[c,h,p,y,E]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=h,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[c,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(c,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&KH.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){uh.forceAllow_=!0}static forceDisallow(){uh.forceDisallow_=!0}static isAvailable(){return!((0,ne.Yr)()||!uh.forceAllow_&&(uh.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ne.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,ne.h$)(t),i=HH(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ne.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ne.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class iN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ne.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=LH(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=iN.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(h){xi("frame writing exception"),h.stack&&xi(h.stack),xi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||xi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,ne.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{xi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let lT=null;typeof MozWebSocket<"u"?lT=MozWebSocket:typeof WebSocket<"u"&&(lT=WebSocket);let Ym=(()=>{class n{constructor(t,r,i,o,c,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=rw(this.connId),this.stats_=rN(r),this.connURL=n.connectionURL_(r,h,p,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,c){const h={v:"5"};return!(0,ne.Yr)()&&typeof location<"u"&&location.hostname&&KH.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),o&&(h.ac=o),c&&(h.p=c),JH(t,QH,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hp.set("previous_websocket_failure",!0);try{let i;if((0,ne.Yr)()){i={headers:{"User-Agent":`Firebase/5/${KO}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,h=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new lT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==lT&&!n.forceDisallow_}static previouslyFailed(){return hp.isInMemoryStorage||!0===hp.get("previous_websocket_failure")}markConnectionHealthy(){hp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,ne.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ne.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,ne.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=HH(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),oj=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[uh,Ym]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Ym&&Ym.isAvailable();let i=r&&!Ym.previouslyFailed();if(t.webSocketOnly&&(r||fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ym];else{const o=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class fj{constructor(e,t,r,i,o,c,h,p,y,E){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=c,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=rw("c:"+this.id+":"),this.transportManager_=new oj(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=sw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=iw("t",e),r=iw("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=iw("t",e),r=iw("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=iw("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?ZO("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ZO("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),sw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class pj{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class gj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ne.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(e){(0,ne.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class cT extends gj{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ne.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cT}getInitialEvent(e){return(0,ne.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Ln{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Dn(){return new Ln("")}function an(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function dh(n){return n.pieces_.length-n.pieceNum_}function Kn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ln(n.pieces_,e)}function oN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function aw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function yj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ln(e,0)}function Er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ln)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ln(t,0)}function ln(n){return n.pieceNum_>=n.pieces_.length}function js(n,e){const t=an(n),r=an(e);if(null===t)return e;if(t===r)return js(Kn(n),Kn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function aN(n,e){if(dh(n)!==dh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Oa(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(dh(n)>dh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class G5{constructor(e,t){this.errorPrefix_=t,this.parts_=aw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ne.ug)(this.parts_[r]);vj(this)}}function vj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+gp(n))}function gp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class lN extends gj{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new lN}getInitialEvent(e){return(0,ne.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const lw=1e3;let dT,mp=(()=>{class n extends pj{constructor(t,r,i,o,c,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=rw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lw,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,ne.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&cT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const o=++this.requestNumber_,c={r:o,a:t,b:r};this.log_((0,ne.Pz)(c)),(0,ne.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();const r=new ne.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,o){this.initConnection_();const c=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+c),this.listens.has(h)||this.listens.set(h,new Map),(0,ne.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ne.hu)(!this.listens.get(h).has(c),"listen() called twice for same path/queryId.");const p={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(h).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,p=>{const y=p.d,E=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(i,o),t.onComplete&&t.onComplete(E,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,ne.r3)(t,"w")){const i=(0,ne.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ne.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,ne.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const c=o.s,h=o.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),(0,ne.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);const c={p:t};o&&(c.q=i,c.t=o),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,h=>{o&&setTimeout(()=>{o(h.s,h.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,c){this.initConnection_();const h={p:r,d:i};void 0!==c&&(h.h=c),this.outstandingPuts_.push({action:t,request:h,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ne.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):ZO("Unrecognized action received from server: "+(0,ne.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ne.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lw,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lw,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lw),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ae.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),o=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const E=function(){y?y.close():(p=!0,o())};t.realtime_={close:E,sendRequest:function(L){(0,ne.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,B]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);p?xi("getToken() completed but was canceled"):(xi("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=B&&B.token,y=new fj(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,o,J=>{fs(J+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),p||(t.repoInfo_.nodeAdmin&&fs(L),E())}}})()}interrupt(t){xi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){xi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ne.xb)(this.interruptReasons_)&&(this.reconnectDelay_=lw,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>QO(c)).join("$"):"default";const o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){const i=new Ln(t).toString();let o;if(this.listens.has(i)){const c=this.listens.get(i);o=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){xi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){xi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,ne.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+KO.replace(/\./g,"-")]=1,(0,ne.uI)()?t["framework.cordova"]=1:(0,ne.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=cT.getInstance().currentlyOnline();return(0,ne.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class dn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new dn(e,t)}}class uT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new dn(Cu,e),i=new dn(Cu,t);return 0!==this.compare(r,i)}minPost(){return dn.MIN}}class Ej extends uT{static get __EMPTY_NODE(){return dT}static set __EMPTY_NODE(e){dT=e}compare(e,t){return pp(e.name,t.name)}isDefinedOn(e){throw(0,ne.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return dn.MIN}maxPost(){return new dn(Ec,dT)}makePost(e,t){return(0,ne.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new dn(e,dT)}toString(){return".key"}}const Cc=new Ej;class hT{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let uN,Il=(()=>{class n{constructor(t,r,i,o,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??go.EMPTY_NODE,this.right=c??go.EMPTY_NODE}copy(t,r,i,o,c){return new n(t??this.key,r??this.value,i??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this;const c=i(t,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(t,r,i),null):0===c?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return go.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return go.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class go{constructor(e,t=go.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new go(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Il.BLACK,null,null))}remove(e){return new go(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Il.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new hT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new hT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new hT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new hT(this.root_,null,this.comparator_,!0,e)}}function J5(n,e){return pp(n.name,e.name)}function cN(n,e){return pp(n,e)}go.EMPTY_NODE=new class X5{copy(e,t,r,i,o){return this}insert(e,t,r){return new Il(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Cj=function(n){return"number"==typeof n?"number:"+jH(n):"string:"+n},Ij=function(n){if(n.isLeafNode()){const e=n.val();(0,ne.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ne.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ne.hu)(n===uN||n.isEmpty(),"priority of unexpected type.");(0,ne.hu)(n===uN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Dj,Tj,Sj,Zm=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,ne.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ij(this.priorityNode_)}static set __childrenNodeConstructor(t){Dj=t}static get __childrenNodeConstructor(){return Dj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ln(t)?this:".priority"===an(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=an(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,ne.hu)(".priority"!==i||1===dh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Kn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Cj(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?jH(this.value_):this.value_,this.lazyHash_=VH(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ne.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,ne.hu)(o>=0,"Unknown leaf type: "+r),(0,ne.hu)(c>=0,"Unknown leaf type: "+i),o===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Xn=new class rY extends uT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return 0===o?pp(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return dn.MIN}maxPost(){return new dn(Ec,new Zm("[PRIORITY-POST]",Sj))}makePost(e,t){const r=Tj(e);return new dn(t,new Zm("[PRIORITY-POST]",r))}toString(){return".priority"}},iY=Math.log(2);class sY{constructor(e){this.count=parseInt(Math.log(e+1)/iY,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fT=function(n,e,t,r){n.sort(e);const i=function(p,y){const E=y-p;let T,R;if(0===E)return null;if(1===E)return T=n[p],R=t?t(T):T,new Il(R,T.node,Il.BLACK,null,null);{const L=parseInt(E/2,10)+p,B=i(p,L),J=i(L+1,y);return T=n[L],R=t?t(T):T,new Il(R,T.node,Il.BLACK,B,J)}},h=function(p){let y=null,E=null,T=n.length;const R=function(B,J){const we=T-B,nt=T;T-=B;const ut=i(we+1,nt),Tt=n[we],_t=t?t(Tt):Tt;L(new Il(_t,Tt.node,J,null,ut))},L=function(B){y?(y.left=B,y=B):(E=B,y=B)};for(let B=0;B<p.count;++B){const J=p.nextBitIsOne(),we=Math.pow(2,p.count-(B+1));J?R(we,Il.BLACK):(R(we,Il.BLACK),R(we,Il.RED))}return E}(new sY(n.length));return new go(r||e,h)};let dN;const Qm={};class Iu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ne.hu)(Qm&&Xn,"ChildrenNode.ts has not been loaded"),dN=dN||new Iu({".priority":Qm},{".priority":Xn}),dN}get(e){const t=(0,ne.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof go?t:null}hasIndex(e){return(0,ne.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ne.hu)(e!==Cc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=t.getIterator(dn.Wrap);let h,c=o.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=o.getNext();h=i?fT(r,e.getCompare()):Qm;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const E=Object.assign({},this.indexes_);return E[p]=h,new Iu(E,y)}addToIndexes(e,t){const r=(0,ne.UI)(this.indexes_,(i,o)=>{const c=(0,ne.DV)(this.indexSet_,o);if((0,ne.hu)(c,"Missing index implementation for "+o),i===Qm){if(c.isDefinedOn(e.node)){const h=[],p=t.getIterator(dn.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),fT(h,c.getCompare())}return Qm}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new dn(e.name,h))),p.insert(e,e.node)}});return new Iu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,ne.UI)(this.indexes_,i=>{if(i===Qm)return i;{const o=t.get(e.name);return o?i.remove(new dn(e.name,o)):i}});return new Iu(r,this.indexSet_)}}let cw,Zt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ij(this.priorityNode_),this.children_.isEmpty()&&(0,ne.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cw||(cw=new n(new go(cN),null,Iu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cw}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?cw:r}}getChild(t){const r=an(t);return null===r?this:this.getImmediateChild(r).getChild(Kn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,ne.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new dn(t,r);let o,c;r.isEmpty()?(o=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const h=o.isEmpty()?cw:this.priorityNode_;return new n(o,h,c)}}updateChild(t,r){const i=an(t);if(null===i)return r;{(0,ne.hu)(".priority"!==an(t)||1===dh(t),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Kn(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,o=0,c=!0;if(this.forEachChild(Xn,(h,p)=>{r[h]=p.val(t),i++,c&&n.INTEGER_REGEXP_.test(h)?o=Math.max(o,Number(h)):c=!1}),!t&&c&&o<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+Cj(this.getPriority().val())+":"),this.forEachChild(Xn,(r,i)=>{const o=i.hash();""!==o&&(t+=":"+r+":"+o)}),this.lazyHash_=""===t?"":VH(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const o=this.resolveIndex_(i);if(o){const c=o.getPredecessorKey(new dn(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new dn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new dn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{const o=this.children_.getIteratorFrom(t.name,dn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{const o=this.children_.getReverseIteratorFrom(t.name,dn.Wrap);let c=o.peek();for(;null!=c&&r.compare(c,t)>0;)o.getNext(),c=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===uw?-1:0}withIndex(t){if(t===Cc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Cc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Xn),o=r.getIterator(Xn);let c=i.getNext(),h=o.getNext();for(;c&&h;){if(c.name!==h.name||!c.node.equals(h.node))return!1;c=i.getNext(),h=o.getNext()}return null===c&&null===h}return!1}return!1}}resolveIndex_(t){return t===Cc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const uw=new class oY extends Zt{constructor(){super(new go(cN),Zt.EMPTY_NODE,Iu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function Or(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ne.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Zm(n,Or(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return Ri(n,(r,i)=>{if((0,ne.r3)(n,r)&&"."!==r.substring(0,1)){const o=Or(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Or(e))}{const t=[];let r=!1;if(Ri(n,(c,h)=>{if("."!==c.substring(0,1)){const p=Or(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new dn(c,p)))}}),0===t.length)return Zt.EMPTY_NODE;const o=fT(t,J5,c=>c.name,cN);if(r){const c=fT(t,Xn.getCompare());return new Zt(o,Or(e),new Iu({".priority":c},{".priority":Xn}))}return new Zt(o,Or(e),Iu.Default)}}Object.defineProperties(dn,{MIN:{value:new dn(Cu,Zt.EMPTY_NODE)},MAX:{value:new dn(Ec,uw)}}),Ej.__EMPTY_NODE=Zt.EMPTY_NODE,Zm.__childrenNodeConstructor=Zt,function eY(n){uN=n}(uw),function nY(n){Sj=n}(uw),function tY(n){Tj=n}(Or);class hN extends uT{constructor(e){super(),this.indexPath_=e,(0,ne.hu)(!ln(e)&&".priority"!==an(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return 0===o?pp(e.name,t.name):o}makePost(e,t){const r=Or(e),i=Zt.EMPTY_NODE.updateChild(this.indexPath_,r);return new dn(t,i)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,uw);return new dn(Ec,e)}toString(){return aw(this.indexPath_,0).join("/")}}const fN=new class lY extends uT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?pp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return dn.MIN}maxPost(){return dn.MAX}makePost(e,t){const r=Or(e);return new dn(t,r)}toString(){return".value"}};function hw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class mN{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ne.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ne.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ec}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ne.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Xn}copy(){const e=new mN;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Oj(n){const e={};if(n.isDefault())return e;let t;return n.index_===Xn?t="$priority":n.index_===fN?t="$value":n.index_===Cc?t="$key":((0,ne.hu)(n.index_ instanceof hN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ne.Pz)(t),n.startSet_&&(e.startAt=(0,ne.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,ne.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,ne.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,ne.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function Nj(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Xn&&(e.i=n.index_.toString()),e}class gT extends pj{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=rw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ne.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const c=gT.getListenId_(e,r),h={};this.listens_[c]=h;const p=Oj(e._queryParams);this.restRequest_(o+".json",p,(y,E)=>{let T=E;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(o,T,!1,r),(0,ne.DV)(this.listens_,c)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=gT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Oj(e._queryParams),r=e._path.toString(),i=new ne.BH;return this.restRequest_(r+".json",t,(o,c)=>{let h=c;404===o&&(h=null,o=null),null===o?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ne.xO)(t);this.log_("Sending REST request for "+c);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,ne.cI)(h.responseText)}catch{fs("Failed to parse JSON response for "+c+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&fs("Got unsuccessful REST response for "+c+" Status: "+h.status),r(h.status);r=null}},h.open("GET",c,!0),h.send()})}}class _Y{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function mT(){return{value:null,children:new Map}}function e_(n,e,t){if(ln(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=an(e);n.children.has(r)||n.children.set(r,mT()),e_(n.children.get(r),e=Kn(e),t)}}function bN(n,e,t){null!==n.value?t(e,n.value):function yY(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{bN(i,new Ln(e.toString()+"/"+r),t)})}class vY{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ri(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class EY{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new vY(e);const r=1e4+2e4*Math.random();sw(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ri(e,(i,o)=>{o>0&&(0,ne.r3)(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),sw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Na=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Na||(Na={})),Na))();function CN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class _T{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Na.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ln(this.path)){if(null!=this.affectedTree.value)return(0,ne.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Ln(e));return new _T(Dn(),t,this.revert)}}return(0,ne.hu)(an(this.path)===e,"operationForChild called for unrelated child."),new _T(Kn(this.path),this.affectedTree,this.revert)}}class _p{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Na.OVERWRITE}operationForChild(e){return ln(this.path)?new _p(this.source,Dn(),this.snap.getImmediateChild(e)):new _p(this.source,Kn(this.path),this.snap)}}class t_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Na.MERGE}operationForChild(e){if(ln(this.path)){const t=this.children.subtree(new Ln(e));return t.isEmpty()?null:t.value?new _p(this.source,Dn(),t.value):new t_(this.source,Dn(),t)}return(0,ne.hu)(an(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t_(this.source,Kn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class hh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ln(e))return this.isFullyInitialized()&&!this.filtered_;const t=an(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function gw(n,e,t,r,i,o){const c=r.filter(h=>h.type===t);c.sort((h,p)=>function TY(n,e,t){if(null==e.childName||null==t.childName)throw(0,ne.g5)("Should only compare child_ events.");const r=new dn(e.childName,e.snapshotNode),i=new dn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),c.forEach(h=>{const p=function DY(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,o);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function yT(n,e){return{eventCache:n,serverCache:e}}function mw(n,e,t,r){return yT(new hh(e,t,r),n.serverCache)}function Fj(n,e,t,r){return yT(n.eventCache,new hh(e,t,r))}function vT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function yp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let IN;class Jn{constructor(e,t=(()=>(IN||(IN=new go(d5)),IN))()){this.value=e,this.children=t}static fromObject(e){let t=new Jn(null);return Ri(e,(r,i)=>{t=t.set(new Ln(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Dn(),value:this.value};if(ln(e))return null;{const r=an(e),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Kn(e),t);return null!=o?{path:Er(new Ln(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ln(e))return this;{const t=an(e),r=this.children.get(t);return null!==r?r.subtree(Kn(e)):new Jn(null)}}set(e,t){if(ln(e))return new Jn(t,this.children);{const r=an(e),o=(this.children.get(r)||new Jn(null)).set(Kn(e),t),c=this.children.insert(r,o);return new Jn(this.value,c)}}remove(e){if(ln(e))return this.children.isEmpty()?new Jn(null):new Jn(null,this.children);{const t=an(e),r=this.children.get(t);if(r){const i=r.remove(Kn(e));let o;return o=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&o.isEmpty()?new Jn(null):new Jn(this.value,o)}return this}}get(e){if(ln(e))return this.value;{const t=an(e),r=this.children.get(t);return r?r.get(Kn(e)):null}}setTree(e,t){if(ln(e))return t;{const r=an(e),o=(this.children.get(r)||new Jn(null)).setTree(Kn(e),t);let c;return c=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Jn(this.value,c)}}fold(e){return this.fold_(Dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ln(e))return null;{const o=an(e),c=this.children.get(o);return c?c.findOnPath_(Kn(e),Er(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Dn(),t)}foreachOnPath_(e,t,r){if(ln(e))return this;{this.value&&r(t,this.value);const i=an(e),o=this.children.get(i);return o?o.foreachOnPath_(Kn(e),Er(t,i),r):new Jn(null)}}foreach(e){this.foreach_(Dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Dl{constructor(e){this.writeTree_=e}static empty(){return new Dl(new Jn(null))}}function _w(n,e,t){if(ln(e))return new Dl(new Jn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let o=r.value;const c=js(i,e);return o=o.updateChild(c,t),new Dl(n.writeTree_.set(i,o))}{const i=new Jn(t),o=n.writeTree_.setTree(e,i);return new Dl(o)}}}function DN(n,e,t){let r=n;return Ri(t,(i,o)=>{r=_w(r,Er(e,i),o)}),r}function Lj(n,e){if(ln(e))return Dl.empty();{const t=n.writeTree_.setTree(e,new Jn(null));return new Dl(t)}}function TN(n,e){return null!=vp(n,e)}function vp(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(js(t.path,e)):null}function Vj(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Xn,(r,i)=>{e.push(new dn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new dn(r,i.value))}),e}function fh(n,e){if(ln(e))return n;{const t=vp(n,e);return new Dl(null!=t?new Jn(t):n.writeTree_.subtree(e))}}function SN(n){return n.writeTree_.isEmpty()}function n_(n,e){return Bj(Dn(),n.writeTree_,e)}function Bj(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{".priority"===i?((0,ne.hu)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):t=Bj(Er(n,i),o,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Er(n,".priority"),r)),t}}function bT(n,e){return zj(e,n)}function kY(n,e){if(n.snap)return Oa(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Oa(Er(n.path,t),e))return!0;return!1}function NY(n){return n.visible}function Uj(n,e,t){let r=Dl.empty();for(let i=0;i<n.length;++i){const o=n[i];if(e(o)){const c=o.path;let h;if(o.snap)Oa(t,c)?(h=js(t,c),r=_w(r,h,o.snap)):Oa(c,t)&&(h=js(c,t),r=_w(r,Dn(),o.snap.getChild(h)));else{if(!o.children)throw(0,ne.g5)("WriteRecord should have .snap or .children");if(Oa(t,c))h=js(t,c),r=DN(r,h,o.children);else if(Oa(c,t))if(h=js(c,t),ln(h))r=DN(r,Dn(),o.children);else{const p=(0,ne.DV)(o.children,an(h));if(p){const y=p.getChild(Kn(h));r=_w(r,Dn(),y)}}}}}return r}function Hj(n,e,t,r,i){if(r||i){const o=fh(n.visibleWrites,e);return!i&&SN(o)?t:i||null!=t||TN(o,Dn())?n_(Uj(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Oa(y.path,e)||Oa(e,y.path))},e),t||Zt.EMPTY_NODE):null}{const o=vp(n.visibleWrites,e);if(null!=o)return o;{const c=fh(n.visibleWrites,e);return SN(c)?t:null!=t||TN(c,Dn())?n_(c,t||Zt.EMPTY_NODE):null}}}function wT(n,e,t,r){return Hj(n.writeTree,n.treePath,e,t,r)}function AN(n,e){return function PY(n,e,t){let r=Zt.EMPTY_NODE;const i=vp(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xn,(o,c)=>{r=r.updateImmediateChild(o,c)}),r;if(t){const o=fh(n.visibleWrites,e);return t.forEachChild(Xn,(c,h)=>{const p=n_(fh(o,new Ln(c)),h);r=r.updateImmediateChild(c,p)}),Vj(o).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return Vj(fh(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function jj(n,e,t,r){return function FY(n,e,t,r,i){(0,ne.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Er(e,t);if(TN(n.visibleWrites,o))return null;{const c=fh(n.visibleWrites,o);return SN(c)?i.getChild(t):n_(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function ET(n,e){return function VY(n,e){return vp(n.visibleWrites,e)}(n.writeTree,Er(n.treePath,e))}function MN(n,e,t){return function LY(n,e,t,r){const i=Er(e,t),o=vp(n.visibleWrites,i);return null!=o?o:r.isCompleteForChild(t)?n_(fh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function $j(n,e){return zj(Er(n.treePath,e),n.writeTree)}function zj(n,e){return{treePath:n,writeTree:e}}class jY{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,ne.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ne.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===t&&"child_removed"===o)this.changeMap.set(r,hw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===o)this.changeMap.set(r,function dw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}(r,i.oldSnap));else if("child_changed"===t&&"child_added"===o)this.changeMap.set(r,function Jm(n,e){return{type:"child_added",snapshotNode:e,childName:n}}(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==o)throw(0,ne.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,hw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Gj=new class $Y{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class xN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new hh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:yp(this.viewCache_),o=function HY(n,e,t,r,i,o){return function BY(n,e,t,r,i,o,c){let h;const p=fh(n.visibleWrites,e),y=vp(p,Dn());if(null!=y)h=y;else{if(null==t)return[];h=n_(p,t)}if(h=h.withIndex(c),h.isEmpty()||h.isLeafNode())return[];{const E=[],T=c.getCompare(),R=o?h.getReverseIteratorFrom(r,c):h.getIteratorFrom(r,c);let L=R.getNext();for(;L&&E.length<i;)0!==T(L,r)&&E.push(L),L=R.getNext();return E}}(n.writeTree,n.treePath,e,t,r,i,o)}(this.writes_,i,t,1,r,e);return 0===o.length?null:o[0]}}function Wj(n,e,t,r,i,o){const c=e.eventCache;if(null!=ET(r,t))return e;{let h,p;if(ln(t))if((0,ne.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=yp(e),T=AN(r,y instanceof Zt?y:Zt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,o)}else{const y=wT(r,yp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,o)}else{const y=an(t);if(".priority"===y){(0,ne.hu)(1===dh(t),"Can't have a priority with additional path components");const E=c.getNode();p=e.serverCache.getNode();const T=jj(r,t,E,p);h=null!=T?n.filter.updatePriority(E,T):c.getNode()}else{const E=Kn(t);let T;if(c.isCompleteForChild(y)){p=e.serverCache.getNode();const R=jj(r,t,c.getNode(),p);T=null!=R?c.getNode().getImmediateChild(y).updateChild(E,R):c.getNode().getImmediateChild(y)}else T=MN(r,y,e.serverCache);h=null!=T?n.filter.updateChild(c.getNode(),y,T,E,i,o):c.getNode()}}return mw(e,h,c.isFullyInitialized()||ln(t),n.filter.filtersNodes())}}function CT(n,e,t,r,i,o,c,h){const p=e.serverCache;let y;const E=c?n.filter:n.filter.getIndexedFilter();if(ln(t))y=E.updateFullNode(p.getNode(),r,null);else if(E.filtersNodes()&&!p.isFiltered()){const L=p.getNode().updateChild(t,r);y=E.updateFullNode(p.getNode(),L,null)}else{const L=an(t);if(!p.isCompleteForPath(t)&&dh(t)>1)return e;const B=Kn(t),we=p.getNode().getImmediateChild(L).updateChild(B,r);y=".priority"===L?E.updatePriority(p.getNode(),we):E.updateChild(p.getNode(),L,we,B,Gj,null)}const T=Fj(e,y,p.isFullyInitialized()||ln(t),E.filtersNodes());return Wj(n,T,t,i,new xN(i,T,o),h)}function RN(n,e,t,r,i,o,c){const h=e.eventCache;let p,y;const E=new xN(i,e,o);if(ln(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,c),p=mw(e,y,!0,n.filter.filtersNodes());else{const T=an(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=mw(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=Kn(t),L=h.getNode().getImmediateChild(T);let B;if(ln(R))B=r;else{const J=E.getCompleteChild(T);B=null!=J?".priority"===oN(R)&&J.getChild(yj(R)).isEmpty()?J:J.updateChild(R,r):Zt.EMPTY_NODE}p=L.equals(B)?e:mw(e,n.filter.updateChild(h.getNode(),T,B,R,E,c),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function qj(n,e){return n.eventCache.isCompleteForChild(e)}function Kj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kN(n,e,t,r,i,o,c,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=ln(t)?r:new Jn(null).setTree(t,r);const E=e.serverCache.getNode();return y.children.inorderTraversal((T,R)=>{if(E.hasChild(T)){const B=Kj(0,e.serverCache.getNode().getImmediateChild(T),R);p=CT(n,p,new Ln(T),B,i,o,c,h)}}),y.children.inorderTraversal((T,R)=>{const L=!e.serverCache.isCompleteForChild(T)&&void 0===R.value;if(!E.hasChild(T)&&!L){const J=Kj(0,e.serverCache.getNode().getImmediateChild(T),R);p=CT(n,p,new Ln(T),J,i,o,c,h)}}),p}function tZ(n,e){const t=yp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ln(e)&&!t.getImmediateChild(an(e)).isEmpty())?t.getChild(e):null}function Qj(n,e,t,r){e.type===Na.MERGE&&null!==e.source.queryId&&((0,ne.hu)(yp(n.viewCache_),"We should always have a full cache before handling merges"),(0,ne.hu)(vT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,o=function WY(n,e,t,r,i){const o=new jY;let c,h;if(t.type===Na.OVERWRITE){const y=t;y.source.fromUser?c=RN(n,e,y.path,y.snap,r,i,o):((0,ne.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!ln(y.path),c=CT(n,e,y.path,y.snap,r,i,h,o))}else if(t.type===Na.MERGE){const y=t;y.source.fromUser?c=function KY(n,e,t,r,i,o,c){let h=e;return r.foreach((p,y)=>{const E=Er(t,p);qj(e,an(E))&&(h=RN(n,h,E,y,i,o,c))}),r.foreach((p,y)=>{const E=Er(t,p);qj(e,an(E))||(h=RN(n,h,E,y,i,o,c))}),h}(n,e,y.path,y.children,r,i,o):((0,ne.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),c=kN(n,e,y.path,y.children,r,i,h,o))}else if(t.type===Na.ACK_USER_WRITE){const y=t;c=y.revert?function QY(n,e,t,r,i,o){let c;if(null!=ET(r,t))return e;{const h=new xN(r,e,i),p=e.eventCache.getNode();let y;if(ln(t)||".priority"===an(t)){let E;if(e.serverCache.isFullyInitialized())E=wT(r,yp(e));else{const T=e.serverCache.getNode();(0,ne.hu)(T instanceof Zt,"serverChildren would be complete if leaf node"),E=AN(r,T)}y=n.filter.updateFullNode(p,E,o)}else{const E=an(t);let T=MN(r,E,e.serverCache);null==T&&e.serverCache.isCompleteForChild(E)&&(T=p.getImmediateChild(E)),y=null!=T?n.filter.updateChild(p,E,T,Kn(t),h,o):e.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Zt.EMPTY_NODE,Kn(t),h,o):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=wT(r,yp(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,o)))}return c=e.serverCache.isFullyInitialized()||null!=ET(r,Dn()),mw(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,r,i,o):function YY(n,e,t,r,i,o,c){if(null!=ET(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(ln(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return CT(n,e,t,p.getNode().getChild(t),i,o,h,c);if(ln(t)){let y=new Jn(null);return p.getNode().forEachChild(Cc,(E,T)=>{y=y.set(new Ln(E),T)}),kN(n,e,t,y,i,o,h,c)}return e}{let y=new Jn(null);return r.foreach((E,T)=>{const R=Er(t,E);p.isCompleteForPath(R)&&(y=y.set(E,p.getNode().getChild(R)))}),kN(n,e,t,y,i,o,h,c)}}(n,e,y.path,y.affectedTree,r,i,o)}else{if(t.type!==Na.LISTEN_COMPLETE)throw(0,ne.g5)("Unknown operation type: "+t.type);c=function ZY(n,e,t,r,i){const o=e.serverCache;return Wj(n,Fj(e,o.getNode(),o.isFullyInitialized()||ln(t),o.isFiltered()),t,r,Gj,i)}(n,e,t.path,r,o)}const p=o.getChanges();return function qY(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=vT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(function kj(n){return{type:"value",snapshotNode:n}}(vT(e)))}}(e,c,p),{viewCache:c,changes:p}}(n.processor_,i,e,t,r);return function GY(n,e){(0,ne.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ne.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,o.viewCache),(0,ne.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,function Xj(n,e,t,r){return function IY(n,e,t,r){const i=[],o=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&o.push(function uY(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),gw(n,i,"child_removed",e,r,t),gw(n,i,"child_added",e,r,t),gw(n,i,"child_moved",o,r,t),gw(n,i,"child_changed",e,r,t),gw(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}(n,o.changes,o.viewCache.eventCache.getNode(),null)}let IT,TT;function ON(n,e,t,r){const i=e.source.queryId;if(null!==i){const o=n.views.get(i);return(0,ne.hu)(null!=o,"SyncTree gave us an op for an invalid query."),Qj(o,e,t,r)}{let o=[];for(const c of n.views.values())o=o.concat(Qj(c,e,t,r));return o}}function ph(n,e){let t=null;for(const r of n.views.values())t=t||tZ(r,e);return t}class r${constructor(e){this.listenProvider_=e,this.syncPointTree_=new Jn(null),this.pendingWriteTree_=function UY(){return{visibleWrites:Dl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function PN(n,e,t,r,i){return function AY(n,e,t,r,i){(0,ne.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=_w(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?r_(n,new _p({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function mh(n,e,t=!1){const r=function xY(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function RY(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,ne.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const h=n.allWrites[c];h.visible&&(c>=t&&kY(h,r.path)?i=!1:Oa(r.path,h.path)&&(o=!0)),c--}return!!i&&(o?(function OY(n){n.visibleWrites=Uj(n.allWrites,NY,Dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=Lj(n.visibleWrites,r.path):Ri(r.children,p=>{n.visibleWrites=Lj(n.visibleWrites,Er(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let o=new Jn(null);return null!=r.snap?o=o.set(Dn(),!0):Ri(r.children,c=>{o=o.set(new Ln(c),!0)}),r_(n,new _T(r.path,o,t))}return[]}function yw(n,e,t){return r_(n,new _p({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function AT(n,e,t){const i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(c,h)=>{const y=ph(h,js(c,e));if(y)return y});return Hj(i,e,o,t,!0)}function r_(n,e){return a$(e,n.syncPointTree_,null,bT(n.pendingWriteTree_,Dn()))}function a$(n,e,t,r){if(ln(n.path))return l$(n,e,t,r);{const i=e.get(Dn());null==t&&null!=i&&(t=ph(i,Dn()));let o=[];const c=an(n.path),h=n.operationForChild(c),p=e.children.get(c);if(p&&h){const y=t?t.getImmediateChild(c):null,E=$j(r,c);o=o.concat(a$(h,p,y,E))}return i&&(o=o.concat(ON(i,n,r,t))),o}}function l$(n,e,t,r){const i=e.get(Dn());null==t&&null!=i&&(t=ph(i,Dn()));let o=[];return e.children.inorderTraversal((c,h)=>{const p=t?t.getImmediateChild(c):null,y=$j(r,c),E=n.operationForChild(c);E&&(o=o.concat(l$(E,h,p,y)))}),i&&(o=o.concat(ON(i,n,r,t))),o}function FN(n,e){return n.tagToQueryMap.get(e)}function LN(n){const e=n.indexOf("$");return(0,ne.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ln(n.substr(0,e))}}function VN(n,e,t){const r=n.syncPointTree_.get(e);return(0,ne.hu)(r,"Missing sync point for query tag that we're tracking"),ON(r,t,bT(n.pendingWriteTree_,e),null)}class BN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new BN(t)}node(){return this.node_}}class UN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Er(this.path_,e);return new UN(this.syncTree_,t)}node(){return AT(this.syncTree_,this.path_)}}const u$=function(n,e,t){return n&&"object"==typeof n?((0,ne.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?IZ(n[".sv"],e,t):"object"==typeof n[".sv"]?DZ(n[".sv"],e):void(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},IZ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ne.hu)(!1,"Unexpected server value: "+n)},DZ=function(n,e,t){n.hasOwnProperty("increment")||(0,ne.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ne.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,ne.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},HN=function(n,e,t){return jN(n,new BN(e),t)};function jN(n,e,t){const r=n.getPriority().val(),i=u$(r,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const c=n,h=u$(c.getValue(),e,t);return h!==c.getValue()||i!==c.getPriority().val()?new Zm(h,Or(i)):n}{const c=n;return o=c,i!==c.getPriority().val()&&(o=o.updatePriority(new Zm(i))),c.forEachChild(Xn,(h,p)=>{const y=jN(p,e.getImmediateChild(h),t);y!==p&&(o=o.updateImmediateChild(h,y))}),o}}class $N{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function xT(n,e){let t=e instanceof Ln?e:new Ln(e),r=n,i=an(t);for(;null!==i;){const o=(0,ne.DV)(r.node.children,i)||{children:{},childCount:0};r=new $N(i,r,o),t=Kn(t),i=an(t)}return r}function bp(n){return n.node.value}function zN(n,e){n.node.value=e,GN(n)}function h$(n){return n.node.childCount>0}function RT(n,e){Ri(n.node.children,(t,r)=>{e(new $N(t,n,r))})}function f$(n,e,t,r){t&&!r&&e(n),RT(n,i=>{f$(i,e,!0,r)}),t&&r&&e(n)}function ww(n){return new Ln(null===n.parent?n.name:ww(n.parent)+"/"+n.name)}function GN(n){null!==n.parent&&function AZ(n,e,t){const r=function TZ(n){return void 0===bp(n)&&!h$(n)}(t),i=(0,ne.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,GN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,GN(n))}(n.parent,n.name,n)}const MZ=/[\[\].#$\/\u0000-\u001F\u007F]/,xZ=/[\[\].#$\u0000-\u001F\u007F]/,WN=10485760,kT=function(n){return"string"==typeof n&&0!==n.length&&!MZ.test(n)},Cw=function(n,e,t){const r=t instanceof Ln?new G5(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+gp(r));if("function"==typeof e)throw new Error(n+"contains a function "+gp(r)+" with contents = "+e.toString());if(sT(e))throw new Error(n+"contains "+e.toString()+" "+gp(r));if("string"==typeof e&&e.length>WN/3&&(0,ne.ug)(e)>WN)throw new Error(n+"contains a string greater than "+WN+" utf8 bytes "+gp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,o=!1;if(Ri(e,(c,h)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(o=!0,!kT(c)))throw new Error(n+" contains an invalid key ("+c+") "+gp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function W5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ne.ug)(e),vj(n)})(r,c),Cw(n,h,r),function q5(n){const e=n.parts_.pop();n.byteLength_-=(0,ne.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&o)throw new Error(n+' contains ".value" child '+gp(r)+" in addition to actual children.")}},m$=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!kT(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),function(n){return"string"==typeof n&&0!==n.length&&!xZ.test(n)}(n)}(t))throw new Error((0,ne.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class NZ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pa(n,e,t){(function OT(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],o=i.getPath();null!==t&&!aN(o,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)})(n,t),function y$(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(PZ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}(n,r=>Oa(r,e)||Oa(e,r))}function PZ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();fp&&xi("event: "+t.toString()),Km(r)}}}class LZ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new NZ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mT(),this.transactionQueueTree_=new $N,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function b$(n){const t=n.infoData_.getNode(new Ln(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Dw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:b$(n)})}function w$(n,e,t,r,i){n.dataUpdateCount++;const o=new Ln(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const p=(0,ne.UI)(t,y=>Or(y));c=function _Z(n,e,t,r){const i=FN(n,r);if(i){const o=LN(i),c=o.path,h=o.queryId,p=js(c,e),y=Jn.fromObject(t);return VN(n,c,new t_(CN(h),p,y))}return[]}(n.serverSyncTree_,o,p,i)}else{const p=Or(t);c=function i$(n,e,t,r){const i=FN(n,r);if(null!=i){const o=LN(i),c=o.path,h=o.queryId,p=js(c,e);return VN(n,c,new _p(CN(h),p,t))}return[]}(n.serverSyncTree_,o,p,i)}else if(r){const p=(0,ne.UI)(t,y=>Or(y));c=function fZ(n,e,t){const r=Jn.fromObject(t);return r_(n,new t_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,o,p)}else{const p=Or(t);c=yw(n.serverSyncTree_,o,p)}let h=o;c.length>0&&(h=i_(n,o)),Pa(n.eventQueue_,h,c)}function E$(n,e){YN(n,"connected",e),!1===e&&function jZ(n){wp(n,"onDisconnectEvents");const e=Dw(n),t=mT();bN(n.onDisconnect_,Dn(),(i,o)=>{const c=function(n,e,t,r){return jN(e,new UN(t,n),r)}(i,o,n.serverSyncTree_,e);e_(t,i,c)});let r=[];bN(t,Dn(),(i,o)=>{r=r.concat(yw(n.serverSyncTree_,i,o));const c=function JN(n,e){const t=ww(D$(n,e)),r=xT(n.transactionQueueTree_,e);return function SZ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{eP(n,i)}),eP(n,r),f$(r,i=>{eP(n,i)}),t}(n,i);i_(n,c)}),n.onDisconnect_=mT(),Pa(n.eventQueue_,Dn(),r)}(n)}function YN(n,e,t){const r=new Ln("/.info/"+e),i=Or(t);n.infoData_.updateSnapshot(r,i);const o=yw(n.infoSyncTree_,r,i);Pa(n.eventQueue_,r,o)}function NT(n){return n.nextWriteId_++}function wp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),xi(t,...e)}function XN(n,e,t){return AT(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function PT(n,e=n.transactionQueueTree_){if(e||FT(n,e),bp(e)){const t=T$(n,e);(0,ne.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function YZ(n,e,t){const r=t.map(y=>y.currentWriteId),i=XN(n,e,r);let o=i;const c=i.hash();for(let y=0;y<t.length;y++){const E=t[y];(0,ne.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const T=js(e,E.path);o=o.updateChild(T,E.currentOutputSnapshotRaw)}const h=o.val(!0),p=e;n.server_.put(p.toString(),h,y=>{wp(n,"transaction put response",{path:p.toString(),status:y});let E=[];if("ok"===y){const T=[];for(let R=0;R<t.length;R++)t[R].status=2,E=E.concat(mh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&T.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();FT(n,xT(n.transactionQueueTree_,e)),PT(n,n.transactionQueueTree_),Pa(n.eventQueue_,e,E);for(let R=0;R<T.length;R++)Km(T[R])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{fs("transaction at "+p.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}i_(n,e)}},c)}(n,ww(e),t)}else h$(e)&&RT(e,t=>{PT(n,t)})}function i_(n,e){const t=D$(n,e),r=ww(t);return function ZZ(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=js(t,p.path);let T,E=!1;if((0,ne.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,T=p.abortReason,i=i.concat(mh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,T="maxretry",i=i.concat(mh(n.serverSyncTree_,p.currentWriteId,!0));else{const R=XN(n,p.path,c);p.currentInputSnapshot=R;const L=e[h].update(R.val());if(void 0!==L){Cw("transaction failed: Data returned ",L,p.path);let B=Or(L);"object"==typeof L&&null!=L&&(0,ne.r3)(L,".priority")||(B=B.updatePriority(R.getPriority()));const we=p.currentWriteId,nt=Dw(n),ut=HN(B,R,nt);p.currentOutputSnapshotRaw=B,p.currentOutputSnapshotResolved=ut,p.currentWriteId=NT(n),c.splice(c.indexOf(we),1),i=i.concat(PN(n.serverSyncTree_,p.path,ut,p.currentWriteId,p.applyLocally)),i=i.concat(mh(n.serverSyncTree_,we,!0))}else E=!0,T="nodata",i=i.concat(mh(n.serverSyncTree_,p.currentWriteId,!0))}Pa(n.eventQueue_,t,i),i=[],E&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}FT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Km(r[h]);PT(n,n.transactionQueueTree_)}(n,T$(n,t),r),r}function D$(n,e){let t,r=n.transactionQueueTree_;for(t=an(e);null!==t&&void 0===bp(r);)r=xT(r,t),t=an(e=Kn(e));return r}function T$(n,e){const t=[];return S$(n,e,t),t.sort((r,i)=>r.order-i.order),t}function S$(n,e,t){const r=bp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);RT(e,i=>{S$(n,i,t)})}function FT(n,e){const t=bp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,zN(e,t.length>0?t:void 0)}RT(e,r=>{FT(n,r)})}function eP(n,e){const t=bp(e);if(t){const r=[];let i=[],o=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,ne.hu)(o===c-1,"All SENT items should be at beginning of queue."),o=c,t[c].status=3,t[c].abortReason="set"):((0,ne.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat(mh(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===o?zN(e,void 0):t.length=o+1,Pa(n.eventQueue_,ww(e),i);for(let c=0;c<r.length;c++)Km(r[c])}}const tP=function(n,e){const t=JZ(n),r=t.namespace;return"firebase.com"===t.domain&&wc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&wc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new eN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Ln(t.pathString)}},JZ=function(n){let e="",t="",r="",i="",o="",c=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let E=n.indexOf("/");-1===E&&(E=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(E,T)),E<T&&(i=function QZ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(E,T)));const R=function XZ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):fs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(c="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const B=e.indexOf(".");r=e.substring(0,B).toLowerCase(),t=e.substring(B+1),o=r}"ns"in R&&(o=R.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:c,scheme:h,pathString:i,namespace:o}};class Zo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ln(this._path)?null:oN(this._path)}get ref(){return new Tl(this._repo,this._path)}get _queryIdentifier(){const e=Nj(this._queryParams),t=QO(e);return"{}"===t?"default":t}get _queryObject(){return Nj(this._queryParams)}isEqual(e){if(!((e=(0,ne.m9)(e))instanceof Zo))return!1;const t=this._repo===e._repo,r=aN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function $5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}class Tl extends Zo{constructor(e,t){super(e,t,new mN,!1)}get parent(){const e=yj(this._path);return null===e?null:new Tl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function iZ(n){(0,ne.hu)(!IT,"__referenceConstructor has already been defined"),IT=n})(Tl),function cZ(n){(0,ne.hu)(!TT,"__referenceConstructor has already been defined"),TT=n}(Tl);const nP={};class y7{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function VZ(n,e,t){if(n.stats_=rN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new gT(n.repoInfo_,(r,i,o,c)=>{w$(n,r,i,o,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>E$(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ne.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new mp(n.repoInfo_,e,(r,i,o,c)=>{w$(n,r,i,o,c)},r=>{E$(n,r)},r=>{!function BZ(n,e){Ri(e,(t,r)=>{YN(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function w5(n,e){const t=n.toString();return nN[t]||(nN[t]=e()),nN[t]}(n.repoInfo_,()=>new EY(n.stats_,n.server_)),n.infoData_=new _Y,n.infoSyncTree_=new r$({startListening:(r,i,o,c)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=yw(n.infoSyncTree_,r._path,p),setTimeout(()=>{c("ok")},0)),h},stopListening:()=>{}}),YN(n,"connected",!1),n.serverSyncTree_=new r$({startListening:(r,i,o,c)=>(n.server_.listen(r,o,i,(h,p)=>{const y=c(h,p);Pa(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tl(this._repo,Dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function g7(n,e){const t=nP[e];(!t||t[n.key]!==n)&&wc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),function I$(n){n.persistentConnection_&&n.persistentConnection_.interrupt("repo_interrupt")}(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&wc("Cannot call "+e+" on a deleted database.")}}function v7(n=(0,Wi.getApp)(),e){return(0,Wi._getProvider)(n,"database").getImmediate({identifier:e})}mp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},mp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function b7(n){(function o5(n){KO=n})(Wi.SDK_VERSION),(0,Wi._registerComponent)(new Af.wA("database",(e,{instanceIdentifier:t})=>function p7(n,e,t,r,i){let o=r||n.options.databaseURL;void 0===o&&(n.options.projectId||wc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),xi("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,c=tP(o,i),h=c.repoInfo;typeof process<"u"&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,o=`http://${y}?ns=${h.namespace}`,c=tP(o,i),h=c.repoInfo):p=!c.repoInfo.secure;const E=i&&p?new ow(ow.OWNER):new y5(n.name,n.options,e);m$("Invalid Firebase Database URL",c),ln(c.path)||wc("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function m7(n,e,t,r){let i=nP[e.name];i||(i={},nP[e.name]=i);let o=i[n.toURLString()];return o&&wc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new LZ(n,!1,t,r),i[n.toURLString()]=o,o}(h,n,E,new _5(n.name,t));return new y7(T,n)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Wi.registerVersion)(NH,"0.13.3",n),(0,Wi.registerVersion)(NH,"0.13.3","esm2017")}();class rP{constructor(e){return e}}const F$="database",iP=new d.OlP("angularfire2.database-instances");function D7(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new rP(r)}}const T7={provide:class C7{constructor(){return(0,cn.vb)(F$)}},deps:[[new d.FiY,iP]]},S7={provide:rP,useFactory:function I7(n,e){const t=(0,cn.JM)(F$,n,e);return t&&new rP(t)},deps:[[new d.FiY,iP],ap]};let A7=(()=>{class n{constructor(){(0,Eu.KN)("angularfire",cn.q4.full,"rtdb")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[S7,T7]}),n})();function M7(n,...e){return{ngModule:A7,providers:[{provide:iP,useFactory:D7(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,MD,[new d.FiY,WO],[new d.FiY,Gm],...e]}]}}const x7=(0,cn.u3)(v7,!0);class sP{constructor(e){return e}}const L$="firestore",oP=new d.OlP("angularfire2.firestore-instances");function O7(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new sP(r)}}const N7={provide:class R7{constructor(){return(0,cn.vb)(L$)}},deps:[[new d.FiY,oP]]},P7={provide:sP,useFactory:function k7(n,e){const t=(0,cn.JM)(L$,n,e);return t&&new sP(t)},deps:[[new d.FiY,oP],ap]};let F7=(()=>{class n{constructor(){(0,Eu.KN)("angularfire",cn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[P7,N7]}),n})();function L7(n,...e){return{ngModule:F7,providers:[{provide:oP,useFactory:O7(n),multi:!0,deps:[d.R0b,d.zs3,cn.HU,MD,[new d.FiY,WO],[new d.FiY,Gm],...e]}]}}const V7=(0,cn.u3)(tq,!0);let B7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[QK]}),n.\u0275inj=d.cJS({imports:[qr.hO.initializeApp(zO_firebase),Pn,ZK,$C,UK,T1,OK,Fv,wM,Z8,c6(()=>u6(zO_firebase)),r5(()=>s5()),M7(()=>x7()),L7(()=>V7())]}),n})();(0,d.G48)(),Ul().bootstrapModule(B7).catch(n=>console.error(n))},5867:(gt,Oe,F)=>{F.d(Oe,{C6:()=>d.getApps,KN:()=>d.registerVersion,Mq:()=>d.getApp,ZF:()=>d.initializeApp});var d=F(9681);(0,d.registerVersion)("firebase","9.9.1","app")},127:(gt,Oe,F)=>{F.d(Oe,{Z:()=>d.Z});var d=F(3942);d.Z.registerVersion("firebase","9.9.1","app-compat")},5881:(gt,Oe,F)=>{F.r(Oe);var d=F(5861),H=F(3942),N=F(6457),ue=F(2090),ce=(F(9681),F(1877),F(4859));function ge(){return window}function W(){return(W=(0,d.Z)(function*(ie,$,z){var Ie;const{BuildInfo:We}=ge();(0,N.aq)($.sessionId,"AuthEvent did not contain a session ID");const Et=yield _e($.sessionId),Pe={};return(0,N.ar)()?Pe.ibi=We.packageName:(0,N.as)()?Pe.apn=We.packageName:(0,N.at)(ie,"operation-not-supported-in-this-environment"),We.displayName&&(Pe.appDisplayName=We.displayName),Pe.sessionId=Et,(0,N.au)(ie,z,$.type,void 0,null!==(Ie=$.eventId)&&void 0!==Ie?Ie:void 0,Pe)})).apply(this,arguments)}function Ge(){return(Ge=(0,d.Z)(function*(ie){const{BuildInfo:$}=ge(),z={};(0,N.ar)()?z.iosBundleId=$.packageName:(0,N.as)()?z.androidPackageName=$.packageName:(0,N.at)(ie,"operation-not-supported-in-this-environment"),yield(0,N.av)(ie,z)})).apply(this,arguments)}function at(){return(at=(0,d.Z)(function*(ie,$,z){const{cordova:Ie}=ge();let We=()=>{};try{yield new Promise((Et,Pe)=>{let it=null;function At(){var St;Et();const hr=null===(St=Ie.plugins.browsertab)||void 0===St?void 0:St.close;"function"==typeof hr&&hr(),"function"==typeof z?.close&&z.close()}function pn(){it||(it=window.setTimeout(()=>{Pe((0,N.aw)(ie,"redirect-cancelled-by-user"))},2e3))}function Ir(){"visible"===document?.visibilityState&&pn()}$.addPassiveListener(At),document.addEventListener("resume",pn,!1),(0,N.as)()&&document.addEventListener("visibilitychange",Ir,!1),We=()=>{$.removePassiveListener(At),document.removeEventListener("resume",pn,!1),document.removeEventListener("visibilitychange",Ir,!1),it&&window.clearTimeout(it)}})}finally{We()}})).apply(this,arguments)}function _e(ie){return rt.apply(this,arguments)}function rt(){return(rt=(0,d.Z)(function*(ie){const $=et(ie),z=yield crypto.subtle.digest("SHA-256",$);return Array.from(new Uint8Array(z)).map(We=>We.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function et(ie){if((0,N.aq)(/[0-9a-zA-Z]+/.test(ie),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(ie);const $=new ArrayBuffer(ie.length),z=new Uint8Array($);for(let Ie=0;Ie<ie.length;Ie++)z[Ie]=ie.charCodeAt(Ie);return z}class Ne extends N.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise($=>{this.resolveInialized=$})}addPassiveListener($){this.passiveListeners.add($)}removePassiveListener($){this.passiveListeners.delete($)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent($){return this.resolveInialized(),this.passiveListeners.forEach(z=>z($)),super.onEvent($)}initialized(){var $=this;return(0,d.Z)(function*(){yield $.initPromise})()}}function ae(ie){return ve.apply(this,arguments)}function ve(){return(ve=(0,d.Z)(function*(ie){const $=yield le()._get(de(ie));return $&&(yield le()._remove(de(ie))),$})).apply(this,arguments)}function te(){const ie=[],$="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const Ie=Math.floor(Math.random()*$.length);ie.push($.charAt(Ie))}return ie.join("")}function le(){return(0,N.ay)(N.b)}function de(ie){return(0,N.az)("authEvent",ie.config.apiKey,ie.name)}function je(ie){if(!ie?.includes("?"))return{};const[$,...z]=ie.split("?");return(0,ue.zd)(z.join("?"))}function Ze(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.aw)("no-auth-event")}}function qt(){var ie;return(null===(ie=self?.location)||void 0===ie?void 0:ie.protocol)||null}function Mn(ie=(0,ue.z$)()){return!("file:"!==qt()&&"ionic:"!==qt()&&"capacitor:"!==qt()||!ie.toLowerCase().match(/iphone|ipad|ipod|android/))}function mi(){try{const ie=self.localStorage,$=N.aI();if(ie)return ie.setItem($,"1"),ie.removeItem($),!function gs(ie=(0,ue.z$)()){return function $r(){return(0,ue.w1)()&&11===document?.documentMode}()||function Vn(ie=(0,ue.z$)()){return/Edge\/\d+/.test(ie)}(ie)}()||(0,ue.hl)()}catch{return Ni()&&(0,ue.hl)()}return!1}function Ni(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function sn(){return"http:"===qt()||"https:"===qt()}()||(0,ue.ru)()||Mn())&&!function Oi(){return(0,ue.b$)()||(0,ue.UG)()}()&&mi()&&!Ni()}function Qi(){return Mn()&&typeof document<"u"}function zr(){return(zr=(0,d.Z)(function*(){return!!Qi()&&new Promise(ie=>{const $=setTimeout(()=>{ie(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout($),ie(!0)})})})).apply(this,arguments)}const nn={LOCAL:"local",NONE:"none",SESSION:"session"},lr=N.ax,Yr="persistence";function Rn(ie){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,d.Z)(function*(ie){yield ie._initializationPromise;const $=Yt(),z=N.az(Yr,ie.config.apiKey,ie.name);$&&$.setItem(z,ie._getPersistence())})).apply(this,arguments)}function Yt(){var ie;try{return(null===(ie=function xn(){return typeof window<"u"?window:null}())||void 0===ie?void 0:ie.sessionStorage)||null}catch{return null}}const Qe=N.ax;class dt{constructor(){this.browserResolver=N.ay(N.k),this.cordovaResolver=N.ay(class tn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize($){var z=this;return(0,d.Z)(function*(){const Ie=$._key();let We=z.eventManagers.get(Ie);return We||(We=new Ne($),z.eventManagers.set(Ie,We),z.attachCallbackListeners($,We)),We})()}_openPopup($){(0,N.at)($,"operation-not-supported-in-this-environment")}_openRedirect($,z,Ie,We){var Et=this;return(0,d.Z)(function*(){!function De(ie){var $,z,Ie,We,Et,Pe,it,At,pn,Ir;const St=ge();(0,N.ax)("function"==typeof(null===($=St?.universalLinks)||void 0===$?void 0:$.subscribe),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.ax)(typeof(null===(z=St?.BuildInfo)||void 0===z?void 0:z.packageName)<"u",ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.ax)("function"==typeof(null===(Et=null===(We=null===(Ie=St?.cordova)||void 0===Ie?void 0:Ie.plugins)||void 0===We?void 0:We.browsertab)||void 0===Et?void 0:Et.openUrl),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(At=null===(it=null===(Pe=St?.cordova)||void 0===Pe?void 0:Pe.plugins)||void 0===it?void 0:it.browsertab)||void 0===At?void 0:At.isAvailable),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.ax)("function"==typeof(null===(Ir=null===(pn=St?.cordova)||void 0===pn?void 0:pn.InAppBrowser)||void 0===Ir?void 0:Ir.open),ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}($);const Pe=yield Et._initialize($);yield Pe.initialized(),Pe.resetRedirect(),(0,N.aD)(),yield Et._originValidation($);const it=function Me(ie,$,z=null){return{type:$,eventId:z,urlResponse:null,sessionId:te(),postBody:null,tenantId:ie.tenantId,error:(0,N.aw)(ie,"no-auth-event")}}($,Ie,We);yield function Ye(ie,$){return le()._set(de(ie),$)}($,it);const At=yield function K(ie,$,z){return W.apply(this,arguments)}($,it,z),pn=yield function Ve(ie){const{cordova:$}=ge();return new Promise(z=>{$.plugins.browsertab.isAvailable(Ie=>{let We=null;Ie?$.plugins.browsertab.openUrl(ie):We=$.InAppBrowser.open(ie,(0,N.ap)()?"_blank":"_system","location=yes"),z(We)})})}(At);return function Se(ie,$,z){return at.apply(this,arguments)}($,Pe,pn)})()}_isIframeWebStorageSupported($,z){throw new Error("Method not implemented.")}_originValidation($){const z=$._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function re(ie){return Ge.apply(this,arguments)}($)),this.originValidationPromises[z]}attachCallbackListeners($,z){const{universalLinks:Ie,handleOpenURL:We,BuildInfo:Et}=ge(),Pe=setTimeout((0,d.Z)(function*(){yield ae($),z.onEvent(Ze())}),500),it=function(){var Ir=(0,d.Z)(function*(St){clearTimeout(Pe);const hr=yield ae($);let Sn=null;hr&&St?.url&&(Sn=function Te(ie,$){var z,Ie;const We=function pe(ie){const $=je(ie),z=$.link?decodeURIComponent($.link):void 0,Ie=je(z).link,We=$.deep_link_id?decodeURIComponent($.deep_link_id):void 0;return je(We).link||We||Ie||z||ie}($);if(We.includes("/__/auth/callback")){const Et=je(We),Pe=Et.firebaseError?function Ee(ie){try{return JSON.parse(ie)}catch{return null}}(decodeURIComponent(Et.firebaseError)):null,it=null===(Ie=null===(z=Pe?.code)||void 0===z?void 0:z.split("auth/"))||void 0===Ie?void 0:Ie[1],At=it?(0,N.aw)(it):null;return At?{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,error:At,urlResponse:null,sessionId:null,postBody:null}:{type:ie.type,eventId:ie.eventId,tenantId:ie.tenantId,sessionId:ie.sessionId,urlResponse:We,postBody:null}}return null}(hr,St.url)),z.onEvent(Sn||Ze())});return function(hr){return Ir.apply(this,arguments)}}();typeof Ie<"u"&&"function"==typeof Ie.subscribe&&Ie.subscribe(null,it);const At=We,pn=`${Et.packageName.toLowerCase()}://`;ge().handleOpenURL=function(){var Ir=(0,d.Z)(function*(St){if(St.toLowerCase().startsWith(pn)&&it({url:St}),"function"==typeof At)try{At(St)}catch(hr){console.error(hr)}});return function(St){return Ir.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aB,this._overrideRedirectResult=N.aC}_initialize($){var z=this;return(0,d.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize($)})()}_openPopup($,z,Ie,We){var Et=this;return(0,d.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openPopup($,z,Ie,We)})()}_openRedirect($,z,Ie,We){var Et=this;return(0,d.Z)(function*(){return yield Et.selectUnderlyingResolver(),Et.assertedUnderlyingResolver._openRedirect($,z,Ie,We)})()}_isIframeWebStorageSupported($,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported($,z)}_originValidation($){return this.assertedUnderlyingResolver._originValidation($)}get _shouldInitProactively(){return Qi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Qe(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var $=this;return(0,d.Z)(function*(){if($.underlyingResolver)return;const z=yield function yt(){return zr.apply(this,arguments)}();$.underlyingResolver=z?$.cordovaResolver:$.browserResolver})()}}function Pi(ie){return ie.unwrap()}function Ot(ie){return kn(ie)}function kn(ie){const{_tokenResponse:$}=ie instanceof ue.ZR?ie.customData:ie;if(!$)return null;if(!(ie instanceof ue.ZR)&&"temporaryProof"in $&&"phoneNumber"in $)return N.P.credentialFromResult(ie);const z=$.providerId;if(!z||z===N.o.PASSWORD)return null;let Ie;switch(z){case N.o.GOOGLE:Ie=N.Q;break;case N.o.FACEBOOK:Ie=N.N;break;case N.o.GITHUB:Ie=N.T;break;case N.o.TWITTER:Ie=N.W;break;default:const{oauthIdToken:We,oauthAccessToken:Et,oauthTokenSecret:Pe,pendingToken:it,nonce:At}=$;return Et||Pe||We||it?it?z.startsWith("saml.")?N.aL._create(z,it):N.J._fromParams({providerId:z,signInMethod:z,pendingToken:it,idToken:We,accessToken:Et}):new N.U(z).credential({idToken:We,accessToken:Et,rawNonce:At}):null}return ie instanceof ue.ZR?Ie.credentialFromError(ie):Ie.credentialFromResult(ie)}function On(ie,$){return $.catch(z=>{throw z instanceof ue.ZR&&function Gr(ie,$){var z,Ie;const We=null===(z=$.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Ie=$)||void 0===Ie?void 0:Ie.code))$.resolver=new G(ie,N.an(ie,$));else if(We){const Et=kn($),Pe=$;Et&&(Pe.credential=Et,Pe.tenantId=We.tenantId||void 0,Pe.email=We.email||void 0,Pe.phoneNumber=We.phoneNumber||void 0)}}(ie,z),z}).then(z=>{const We=z.user;return{operationType:z.operationType,credential:Ot(z),additionalUserInfo:N.al(z),user:q.getOrCreate(We)}})}function hn(ie,$){return er.apply(this,arguments)}function er(){return(er=(0,d.Z)(function*(ie,$){const z=yield $;return{verificationId:z.verificationId,confirm:Ie=>On(ie,z.confirm(Ie))}})).apply(this,arguments)}class G{constructor($,z){this.resolver=z,this.auth=function ur(ie){return ie.wrapped()}($)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn($){return On(Pi(this.auth),this.resolver.resolveSignIn($))}}class q{constructor($){this._delegate=$,this.multiFactor=N.ao($)}static getOrCreate($){return q.USER_MAP.has($)||q.USER_MAP.set($,new q($)),q.USER_MAP.get($)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult($){return this._delegate.getIdTokenResult($)}getIdToken($){return this._delegate.getIdToken($)}linkAndRetrieveDataWithCredential($){return this.linkWithCredential($)}linkWithCredential($){var z=this;return(0,d.Z)(function*(){return On(z.auth,N.Z(z._delegate,$))})()}linkWithPhoneNumber($,z){var Ie=this;return(0,d.Z)(function*(){return hn(Ie.auth,N.l(Ie._delegate,$,z))})()}linkWithPopup($){var z=this;return(0,d.Z)(function*(){return On(z.auth,N.d(z._delegate,$,dt))})()}linkWithRedirect($){var z=this;return(0,d.Z)(function*(){return yield Rn(N.aE(z.auth)),N.g(z._delegate,$,dt)})()}reauthenticateAndRetrieveDataWithCredential($){return this.reauthenticateWithCredential($)}reauthenticateWithCredential($){var z=this;return(0,d.Z)(function*(){return On(z.auth,N._(z._delegate,$))})()}reauthenticateWithPhoneNumber($,z){return hn(this.auth,N.r(this._delegate,$,z))}reauthenticateWithPopup($){return On(this.auth,N.e(this._delegate,$,dt))}reauthenticateWithRedirect($){var z=this;return(0,d.Z)(function*(){return yield Rn(N.aE(z.auth)),N.h(z._delegate,$,dt)})()}sendEmailVerification($){return N.ab(this._delegate,$)}unlink($){var z=this;return(0,d.Z)(function*(){return yield N.ak(z._delegate,$),z})()}updateEmail($){return N.ag(this._delegate,$)}updatePassword($){return N.ah(this._delegate,$)}updatePhoneNumber($){return N.u(this._delegate,$)}updateProfile($){return N.af(this._delegate,$)}verifyBeforeUpdateEmail($,z){return N.ac(this._delegate,$,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}q.USER_MAP=new WeakMap;const j=N.ax;let Y=(()=>{class ie{constructor(z,Ie){if(this.app=z,Ie.isInitialized())return this._delegate=Ie.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:We}=z.options;j(We,"invalid-api-key",{appName:z.name}),j(We,"invalid-api-key",{appName:z.name});const Et=typeof window<"u"?dt:void 0;this._delegate=Ie.initialize({options:{persistence:Fe(We,z.name),popupRedirectResolver:Et}}),this._delegate._updateErrorMap(N.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?q.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,Ie){N.G(this._delegate,z,Ie)}applyActionCode(z){return N.a2(this._delegate,z)}checkActionCode(z){return N.a3(this._delegate,z)}confirmPasswordReset(z,Ie){return N.a1(this._delegate,z,Ie)}createUserWithEmailAndPassword(z,Ie){var We=this;return(0,d.Z)(function*(){return On(We._delegate,N.a5(We._delegate,z,Ie))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return N.aa(this._delegate,z)}isSignInWithEmailLink(z){return N.a8(this._delegate,z)}getRedirectResult(){var z=this;return(0,d.Z)(function*(){j(zn(),z._delegate,"operation-not-supported-in-this-environment");const Ie=yield N.j(z._delegate,dt);return Ie?On(z._delegate,Promise.resolve(Ie)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function mn(ie,$){(0,N.aE)(ie)._logFramework($)}(this._delegate,z)}onAuthStateChanged(z,Ie,We){const{next:Et,error:Pe,complete:it}=Q(z,Ie,We);return this._delegate.onAuthStateChanged(Et,Pe,it)}onIdTokenChanged(z,Ie,We){const{next:Et,error:Pe,complete:it}=Q(z,Ie,We);return this._delegate.onIdTokenChanged(Et,Pe,it)}sendSignInLinkToEmail(z,Ie){return N.a7(this._delegate,z,Ie)}sendPasswordResetEmail(z,Ie){return N.a0(this._delegate,z,Ie||void 0)}setPersistence(z){var Ie=this;return(0,d.Z)(function*(){let We;switch(function cr(ie,$){lr(Object.values(nn).includes($),ie,"invalid-persistence-type"),(0,ue.b$)()?lr($!==nn.SESSION,ie,"unsupported-persistence-type"):(0,ue.UG)()?lr($===nn.NONE,ie,"unsupported-persistence-type"):Ni()?lr($===nn.NONE||$===nn.LOCAL&&(0,ue.hl)(),ie,"unsupported-persistence-type"):lr($===nn.NONE||mi(),ie,"unsupported-persistence-type")}(Ie._delegate,z),z){case nn.SESSION:We=N.a;break;case nn.LOCAL:We=(yield N.ay(N.i)._isAvailable())?N.i:N.b;break;case nn.NONE:We=N.L;break;default:return N.at("argument-error",{appName:Ie._delegate.name})}return Ie._delegate.setPersistence(We)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return On(this._delegate,N.X(this._delegate))}signInWithCredential(z){return On(this._delegate,N.Y(this._delegate,z))}signInWithCustomToken(z){return On(this._delegate,N.$(this._delegate,z))}signInWithEmailAndPassword(z,Ie){return On(this._delegate,N.a6(this._delegate,z,Ie))}signInWithEmailLink(z,Ie){return On(this._delegate,N.a9(this._delegate,z,Ie))}signInWithPhoneNumber(z,Ie){return hn(this._delegate,N.s(this._delegate,z,Ie))}signInWithPopup(z){var Ie=this;return(0,d.Z)(function*(){return j(zn(),Ie._delegate,"operation-not-supported-in-this-environment"),On(Ie._delegate,N.c(Ie._delegate,z,dt))})()}signInWithRedirect(z){var Ie=this;return(0,d.Z)(function*(){return j(zn(),Ie._delegate,"operation-not-supported-in-this-environment"),yield Rn(Ie._delegate),N.f(Ie._delegate,z,dt)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return N.a4(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return ie.Persistence=nn,ie})();function Q(ie,$,z){let Ie=ie;"function"!=typeof ie&&({next:Ie,error:$,complete:z}=ie);const We=Ie;return{next:Pe=>We(Pe&&q.getOrCreate(Pe)),error:$,complete:z}}function Fe(ie,$){const z=function zs(ie,$){const z=Yt();if(!z)return[];const Ie=N.az(Yr,ie,$);switch(z.getItem(Ie)){case nn.NONE:return[N.L];case nn.LOCAL:return[N.i,N.a];case nn.SESSION:return[N.a];default:return[]}}(ie,$);if(typeof self<"u"&&!z.includes(N.i)&&z.push(N.i),typeof window<"u")for(const Ie of[N.b,N.a])z.includes(Ie)||z.push(Ie);return z.includes(N.L)||z.push(N.L),z}class Ke{constructor(){this.providerId="phone",this._delegate=new N.P(Pi(H.Z.auth()))}static credential($,z){return N.P.credential($,z)}verifyPhoneNumber($,z){return this._delegate.verifyPhoneNumber($,z)}unwrap(){return this._delegate}}Ke.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,Ke.PROVIDER_ID=N.P.PROVIDER_ID;const Dt=N.ax;class fn{constructor($,z,Ie=H.Z.app()){var We;Dt(null===(We=Ie.options)||void 0===We?void 0:We.apiKey,"invalid-api-key",{appName:Ie.name}),this._delegate=new N.R($,z,Ie.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dr(ie){ie.INTERNAL.registerComponent(new ce.wA("auth-compat",$=>{const z=$.getProvider("app-compat").getImmediate(),Ie=$.getProvider("auth");return new Y(z,Ie)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.M,FacebookAuthProvider:N.N,GithubAuthProvider:N.T,GoogleAuthProvider:N.Q,OAuthProvider:N.U,SAMLAuthProvider:N.V,PhoneAuthProvider:Ke,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:fn,TwitterAuthProvider:N.W,Auth:Y,AuthCredential:N.H,Error:ue.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ie.registerVersion("@firebase/auth-compat","0.2.18")}(H.Z)},9751:(gt,Oe,F)=>{F.d(Oe,{y:()=>ge});var d=F(930),H=F(727),N=F(8822),ue=F(9635),fe=F(2416),ye=F(576),ce=F(2806);let ge=(()=>{class re{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const Se=new re;return Se.source=this,Se.operator=Ve,Se}subscribe(Ve,Se,at){const De=function W(re){return re&&re instanceof d.Lv||function K(re){return re&&(0,ye.m)(re.next)&&(0,ye.m)(re.error)&&(0,ye.m)(re.complete)}(re)&&(0,H.Nn)(re)}(Ve)?Ve:new d.Hp(Ve,Se,at);return(0,ce.x)(()=>{const{operator:_e,source:rt}=this;De.add(_e?_e.call(De,rt):rt?this._subscribe(De):this._trySubscribe(De))}),De}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(Se){Ve.error(Se)}}forEach(Ve,Se){return new(Se=Ce(Se))((at,De)=>{const _e=new d.Hp({next:rt=>{try{Ve(rt)}catch(et){De(et),_e.unsubscribe()}},error:De,complete:at});this.subscribe(_e)})}_subscribe(Ve){var Se;return null===(Se=this.source)||void 0===Se?void 0:Se.subscribe(Ve)}[N.L](){return this}pipe(...Ve){return(0,ue.U)(Ve)(this)}toPromise(Ve){return new(Ve=Ce(Ve))((Se,at)=>{let De;this.subscribe(_e=>De=_e,_e=>at(_e),()=>Se(De))})}}return re.create=Ge=>new re(Ge),re})();function Ce(re){var Ge;return null!==(Ge=re??fe.v.Promise)&&void 0!==Ge?Ge:Promise}},7579:(gt,Oe,F)=>{F.d(Oe,{x:()=>ce});var d=F(9751),H=F(727);const ue=(0,F(3888).d)(Ce=>function(){Ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var fe=F(8737),ye=F(2806);let ce=(()=>{class Ce extends d.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const re=new ge(this,this);return re.operator=W,re}_throwIfClosed(){if(this.closed)throw new ue}next(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(W)}})}error(W){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:re}=this;for(;re.length;)re.shift().error(W)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:re,isStopped:Ge,observers:Ve}=this;return re||Ge?H.Lc:(this.currentObservers=null,Ve.push(W),new H.w0(()=>{this.currentObservers=null,(0,fe.P)(Ve,W)}))}_checkFinalizedStatuses(W){const{hasError:re,thrownError:Ge,isStopped:Ve}=this;re?W.error(Ge):Ve&&W.complete()}asObservable(){const W=new d.y;return W.source=this,W}}return Ce.create=(K,W)=>new ge(K,W),Ce})();class ge extends ce{constructor(K,W){super(),this.destination=K,this.source=W}next(K){var W,re;null===(re=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===re||re.call(W,K)}error(K){var W,re;null===(re=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===re||re.call(W,K)}complete(){var K,W;null===(W=null===(K=this.destination)||void 0===K?void 0:K.complete)||void 0===W||W.call(K)}_subscribe(K){var W,re;return null!==(re=null===(W=this.source)||void 0===W?void 0:W.subscribe(K))&&void 0!==re?re:H.Lc}}},930:(gt,Oe,F)=>{F.d(Oe,{Hp:()=>at,Lv:()=>re});var d=F(576),H=F(727),N=F(2416),ue=F(7849),fe=F(5032);const ye=Ce("C",void 0,void 0);function Ce(Ue,Ne,Me){return{kind:Ue,value:Ne,error:Me}}var K=F(3410),W=F(2806);class re extends H.w0{constructor(Ne){super(),this.isStopped=!1,Ne?(this.destination=Ne,(0,H.Nn)(Ne)&&Ne.add(this)):this.destination=et}static create(Ne,Me,Ye){return new at(Ne,Me,Ye)}next(Ne){this.isStopped?rt(function ge(Ue){return Ce("N",Ue,void 0)}(Ne),this):this._next(Ne)}error(Ne){this.isStopped?rt(function ce(Ue){return Ce("E",void 0,Ue)}(Ne),this):(this.isStopped=!0,this._error(Ne))}complete(){this.isStopped?rt(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ne){this.destination.next(Ne)}_error(Ne){try{this.destination.error(Ne)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ge=Function.prototype.bind;function Ve(Ue,Ne){return Ge.call(Ue,Ne)}class Se{constructor(Ne){this.partialObserver=Ne}next(Ne){const{partialObserver:Me}=this;if(Me.next)try{Me.next(Ne)}catch(Ye){De(Ye)}}error(Ne){const{partialObserver:Me}=this;if(Me.error)try{Me.error(Ne)}catch(Ye){De(Ye)}else De(Ne)}complete(){const{partialObserver:Ne}=this;if(Ne.complete)try{Ne.complete()}catch(Me){De(Me)}}}class at extends re{constructor(Ne,Me,Ye){let ae;if(super(),(0,d.m)(Ne)||!Ne)ae={next:Ne??void 0,error:Me??void 0,complete:Ye??void 0};else{let ve;this&&N.v.useDeprecatedNextContext?(ve=Object.create(Ne),ve.unsubscribe=()=>this.unsubscribe(),ae={next:Ne.next&&Ve(Ne.next,ve),error:Ne.error&&Ve(Ne.error,ve),complete:Ne.complete&&Ve(Ne.complete,ve)}):ae=Ne}this.destination=new Se(ae)}}function De(Ue){N.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ue):(0,ue.h)(Ue)}function rt(Ue,Ne){const{onStoppedNotification:Me}=N.v;Me&&K.z.setTimeout(()=>Me(Ue,Ne))}const et={closed:!0,next:fe.Z,error:function _e(Ue){throw Ue},complete:fe.Z}},727:(gt,Oe,F)=>{F.d(Oe,{Lc:()=>ye,w0:()=>fe,Nn:()=>ce});var d=F(576);const N=(0,F(3888).d)(Ce=>function(W){Ce(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((re,Ge)=>`${Ge+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var ue=F(8737);class fe{constructor(K){this.initialTeardown=K,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let K;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Ve of W)Ve.remove(this);else W.remove(this);const{initialTeardown:re}=this;if((0,d.m)(re))try{re()}catch(Ve){K=Ve instanceof N?Ve.errors:[Ve]}const{_finalizers:Ge}=this;if(Ge){this._finalizers=null;for(const Ve of Ge)try{ge(Ve)}catch(Se){K=K??[],Se instanceof N?K=[...K,...Se.errors]:K.push(Se)}}if(K)throw new N(K)}}add(K){var W;if(K&&K!==this)if(this.closed)ge(K);else{if(K instanceof fe){if(K.closed||K._hasParent(this))return;K._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(K)}}_hasParent(K){const{_parentage:W}=this;return W===K||Array.isArray(W)&&W.includes(K)}_addParent(K){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(K),W):W?[W,K]:K}_removeParent(K){const{_parentage:W}=this;W===K?this._parentage=null:Array.isArray(W)&&(0,ue.P)(W,K)}remove(K){const{_finalizers:W}=this;W&&(0,ue.P)(W,K),K instanceof fe&&K._removeParent(this)}}fe.EMPTY=(()=>{const Ce=new fe;return Ce.closed=!0,Ce})();const ye=fe.EMPTY;function ce(Ce){return Ce instanceof fe||Ce&&"closed"in Ce&&(0,d.m)(Ce.remove)&&(0,d.m)(Ce.add)&&(0,d.m)(Ce.unsubscribe)}function ge(Ce){(0,d.m)(Ce)?Ce():Ce.unsubscribe()}},2416:(gt,Oe,F)=>{F.d(Oe,{v:()=>d});const d={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(gt,Oe,F)=>{F.d(Oe,{E:()=>H});const H=new(F(9751).y)(fe=>fe.complete())},8996:(gt,Oe,F)=>{F.d(Oe,{D:()=>Ne});var d=F(8421),H=F(5363),N=F(9468),ye=F(9751),ge=F(2202),Ce=F(576),K=F(9672);function re(Me,Ye){if(!Me)throw new Error("Iterable cannot be null");return new ye.y(ae=>{(0,K.f)(ae,Ye,()=>{const ve=Me[Symbol.asyncIterator]();(0,K.f)(ae,Ye,()=>{ve.next().then(Te=>{Te.done?ae.complete():ae.next(Te.value)})},0,!0)})})}var Ge=F(3670),Ve=F(8239),Se=F(1144),at=F(6495),De=F(2206),_e=F(4532),rt=F(3260);function Ne(Me,Ye){return Ye?function Ue(Me,Ye){if(null!=Me){if((0,Ge.c)(Me))return function ue(Me,Ye){return(0,d.Xf)(Me).pipe((0,N.R)(Ye),(0,H.Q)(Ye))}(Me,Ye);if((0,Se.z)(Me))return function ce(Me,Ye){return new ye.y(ae=>{let ve=0;return Ye.schedule(function(){ve===Me.length?ae.complete():(ae.next(Me[ve++]),ae.closed||this.schedule())})})}(Me,Ye);if((0,Ve.t)(Me))return function fe(Me,Ye){return(0,d.Xf)(Me).pipe((0,N.R)(Ye),(0,H.Q)(Ye))}(Me,Ye);if((0,De.D)(Me))return re(Me,Ye);if((0,at.T)(Me))return function W(Me,Ye){return new ye.y(ae=>{let ve;return(0,K.f)(ae,Ye,()=>{ve=Me[ge.h](),(0,K.f)(ae,Ye,()=>{let Te,te;try{({value:Te,done:te}=ve.next())}catch(le){return void ae.error(le)}te?ae.complete():ae.next(Te)},0,!0)}),()=>(0,Ce.m)(ve?.return)&&ve.return()})}(Me,Ye);if((0,rt.L)(Me))return function et(Me,Ye){return re((0,rt.Q)(Me),Ye)}(Me,Ye)}throw(0,_e.z)(Me)}(Me,Ye):(0,d.Xf)(Me)}},8421:(gt,Oe,F)=>{F.d(Oe,{Xf:()=>Ge});var d=F(655),H=F(1144),N=F(8239),ue=F(9751),fe=F(3670),ye=F(2206),ce=F(4532),ge=F(6495),Ce=F(3260),K=F(576),W=F(7849),re=F(8822);function Ge(Ue){if(Ue instanceof ue.y)return Ue;if(null!=Ue){if((0,fe.c)(Ue))return function Ve(Ue){return new ue.y(Ne=>{const Me=Ue[re.L]();if((0,K.m)(Me.subscribe))return Me.subscribe(Ne);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ue);if((0,H.z)(Ue))return function Se(Ue){return new ue.y(Ne=>{for(let Me=0;Me<Ue.length&&!Ne.closed;Me++)Ne.next(Ue[Me]);Ne.complete()})}(Ue);if((0,N.t)(Ue))return function at(Ue){return new ue.y(Ne=>{Ue.then(Me=>{Ne.closed||(Ne.next(Me),Ne.complete())},Me=>Ne.error(Me)).then(null,W.h)})}(Ue);if((0,ye.D)(Ue))return _e(Ue);if((0,ge.T)(Ue))return function De(Ue){return new ue.y(Ne=>{for(const Me of Ue)if(Ne.next(Me),Ne.closed)return;Ne.complete()})}(Ue);if((0,Ce.L)(Ue))return function rt(Ue){return _e((0,Ce.Q)(Ue))}(Ue)}throw(0,ce.z)(Ue)}function _e(Ue){return new ue.y(Ne=>{(function et(Ue,Ne){var Me,Ye,ae,ve;return(0,d.mG)(this,void 0,void 0,function*(){try{for(Me=(0,d.KL)(Ue);!(Ye=yield Me.next()).done;)if(Ne.next(Ye.value),Ne.closed)return}catch(Te){ae={error:Te}}finally{try{Ye&&!Ye.done&&(ve=Me.return)&&(yield ve.call(Me))}finally{if(ae)throw ae.error}}Ne.complete()})})(Ue,Ne).catch(Me=>Ne.error(Me))})}},6451:(gt,Oe,F)=>{F.d(Oe,{T:()=>ye});var d=F(8189),H=F(8421),N=F(515),ue=F(3269),fe=F(8996);function ye(...ce){const ge=(0,ue.yG)(ce),Ce=(0,ue._6)(ce,1/0),K=ce;return K.length?1===K.length?(0,H.Xf)(K[0]):(0,d.J)(Ce)((0,fe.D)(K,ge)):N.E}},5403:(gt,Oe,F)=>{F.d(Oe,{x:()=>H});var d=F(930);function H(ue,fe,ye,ce,ge){return new N(ue,fe,ye,ce,ge)}class N extends d.Lv{constructor(fe,ye,ce,ge,Ce,K){super(fe),this.onFinalize=Ce,this.shouldUnsubscribe=K,this._next=ye?function(W){try{ye(W)}catch(re){fe.error(re)}}:super._next,this._error=ge?function(W){try{ge(W)}catch(re){fe.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(W){fe.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var fe;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(fe=this.onFinalize)||void 0===fe||fe.call(this))}}}},4004:(gt,Oe,F)=>{F.d(Oe,{U:()=>N});var d=F(4482),H=F(5403);function N(ue,fe){return(0,d.e)((ye,ce)=>{let ge=0;ye.subscribe((0,H.x)(ce,Ce=>{ce.next(ue.call(fe,Ce,ge++))}))})}},8189:(gt,Oe,F)=>{F.d(Oe,{J:()=>N});var d=F(5577),H=F(4671);function N(ue=1/0){return(0,d.z)(H.y,ue)}},5577:(gt,Oe,F)=>{F.d(Oe,{z:()=>ge});var d=F(4004),H=F(8421),N=F(4482),ue=F(9672),fe=F(5403),ce=F(576);function ge(Ce,K,W=1/0){return(0,ce.m)(K)?ge((re,Ge)=>(0,d.U)((Ve,Se)=>K(re,Ve,Ge,Se))((0,H.Xf)(Ce(re,Ge))),W):("number"==typeof K&&(W=K),(0,N.e)((re,Ge)=>function ye(Ce,K,W,re,Ge,Ve,Se,at){const De=[];let _e=0,rt=0,et=!1;const Ue=()=>{et&&!De.length&&!_e&&K.complete()},Ne=Ye=>_e<re?Me(Ye):De.push(Ye),Me=Ye=>{Ve&&K.next(Ye),_e++;let ae=!1;(0,H.Xf)(W(Ye,rt++)).subscribe((0,fe.x)(K,ve=>{Ge?.(ve),Ve?Ne(ve):K.next(ve)},()=>{ae=!0},void 0,()=>{if(ae)try{for(_e--;De.length&&_e<re;){const ve=De.shift();Se?(0,ue.f)(K,Se,()=>Me(ve)):Me(ve)}Ue()}catch(ve){K.error(ve)}}))};return Ce.subscribe((0,fe.x)(K,Ne,()=>{et=!0,Ue()})),()=>{at?.()}}(re,Ge,Ce,W)))}},5363:(gt,Oe,F)=>{F.d(Oe,{Q:()=>ue});var d=F(9672),H=F(4482),N=F(5403);function ue(fe,ye=0){return(0,H.e)((ce,ge)=>{ce.subscribe((0,N.x)(ge,Ce=>(0,d.f)(ge,fe,()=>ge.next(Ce),ye),()=>(0,d.f)(ge,fe,()=>ge.complete(),ye),Ce=>(0,d.f)(ge,fe,()=>ge.error(Ce),ye)))})}},3099:(gt,Oe,F)=>{F.d(Oe,{B:()=>fe});var d=F(8421),H=F(7579),N=F(930),ue=F(4482);function fe(ce={}){const{connector:ge=(()=>new H.x),resetOnError:Ce=!0,resetOnComplete:K=!0,resetOnRefCountZero:W=!0}=ce;return re=>{let Ge,Ve,Se,at=0,De=!1,_e=!1;const rt=()=>{Ve?.unsubscribe(),Ve=void 0},et=()=>{rt(),Ge=Se=void 0,De=_e=!1},Ue=()=>{const Ne=Ge;et(),Ne?.unsubscribe()};return(0,ue.e)((Ne,Me)=>{at++,!_e&&!De&&rt();const Ye=Se=Se??ge();Me.add(()=>{at--,0===at&&!_e&&!De&&(Ve=ye(Ue,W))}),Ye.subscribe(Me),!Ge&&at>0&&(Ge=new N.Hp({next:ae=>Ye.next(ae),error:ae=>{_e=!0,rt(),Ve=ye(et,Ce,ae),Ye.error(ae)},complete:()=>{De=!0,rt(),Ve=ye(et,K),Ye.complete()}}),(0,d.Xf)(Ne).subscribe(Ge))})(re)}}function ye(ce,ge,...Ce){if(!0===ge)return void ce();if(!1===ge)return;const K=new N.Hp({next:()=>{K.unsubscribe(),ce()}});return ge(...Ce).subscribe(K)}},9468:(gt,Oe,F)=>{F.d(Oe,{R:()=>H});var d=F(4482);function H(N,ue=0){return(0,d.e)((fe,ye)=>{ye.add(N.schedule(()=>fe.subscribe(ye),ue))})}},8505:(gt,Oe,F)=>{F.d(Oe,{b:()=>fe});var d=F(576),H=F(4482),N=F(5403),ue=F(4671);function fe(ye,ce,ge){const Ce=(0,d.m)(ye)||ce||ge?{next:ye,error:ce,complete:ge}:ye;return Ce?(0,H.e)((K,W)=>{var re;null===(re=Ce.subscribe)||void 0===re||re.call(Ce);let Ge=!0;K.subscribe((0,N.x)(W,Ve=>{var Se;null===(Se=Ce.next)||void 0===Se||Se.call(Ce,Ve),W.next(Ve)},()=>{var Ve;Ge=!1,null===(Ve=Ce.complete)||void 0===Ve||Ve.call(Ce),W.complete()},Ve=>{var Se;Ge=!1,null===(Se=Ce.error)||void 0===Se||Se.call(Ce,Ve),W.error(Ve)},()=>{var Ve,Se;Ge&&(null===(Ve=Ce.unsubscribe)||void 0===Ve||Ve.call(Ce)),null===(Se=Ce.finalize)||void 0===Se||Se.call(Ce)}))}):ue.y}},4408:(gt,Oe,F)=>{F.d(Oe,{o:()=>fe});var d=F(727);class H extends d.w0{constructor(ce,ge){super()}schedule(ce,ge=0){return this}}const N={setInterval(ye,ce,...ge){const{delegate:Ce}=N;return Ce?.setInterval?Ce.setInterval(ye,ce,...ge):setInterval(ye,ce,...ge)},clearInterval(ye){const{delegate:ce}=N;return(ce?.clearInterval||clearInterval)(ye)},delegate:void 0};var ue=F(8737);class fe extends H{constructor(ce,ge){super(ce,ge),this.scheduler=ce,this.work=ge,this.pending=!1}schedule(ce,ge=0){if(this.closed)return this;this.state=ce;const Ce=this.id,K=this.scheduler;return null!=Ce&&(this.id=this.recycleAsyncId(K,Ce,ge)),this.pending=!0,this.delay=ge,this.id=this.id||this.requestAsyncId(K,this.id,ge),this}requestAsyncId(ce,ge,Ce=0){return N.setInterval(ce.flush.bind(ce,this),Ce)}recycleAsyncId(ce,ge,Ce=0){if(null!=Ce&&this.delay===Ce&&!1===this.pending)return ge;N.clearInterval(ge)}execute(ce,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ce=this._execute(ce,ge);if(Ce)return Ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ge){let K,Ce=!1;try{this.work(ce)}catch(W){Ce=!0,K=W||new Error("Scheduled action threw falsy error")}if(Ce)return this.unsubscribe(),K}unsubscribe(){if(!this.closed){const{id:ce,scheduler:ge}=this,{actions:Ce}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(Ce,this),null!=ce&&(this.id=this.recycleAsyncId(ge,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(gt,Oe,F)=>{F.d(Oe,{v:()=>N});var d=F(6063);class H{constructor(fe,ye=H.now){this.schedulerActionCtor=fe,this.now=ye}schedule(fe,ye=0,ce){return new this.schedulerActionCtor(this,fe).schedule(ce,ye)}}H.now=d.l.now;class N extends H{constructor(fe,ye=H.now){super(fe,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(fe){const{actions:ye}=this;if(this._active)return void ye.push(fe);let ce;this._active=!0;do{if(ce=fe.execute(fe.state,fe.delay))break}while(fe=ye.shift());if(this._active=!1,ce){for(;fe=ye.shift();)fe.unsubscribe();throw ce}}}},4986:(gt,Oe,F)=>{F.d(Oe,{P:()=>ue,z:()=>N});var d=F(4408);const N=new(F(7565).v)(d.o),ue=N},6063:(gt,Oe,F)=>{F.d(Oe,{l:()=>d});const d={now:()=>(d.delegate||Date).now(),delegate:void 0}},3410:(gt,Oe,F)=>{F.d(Oe,{z:()=>d});const d={setTimeout(H,N,...ue){const{delegate:fe}=d;return fe?.setTimeout?fe.setTimeout(H,N,...ue):setTimeout(H,N,...ue)},clearTimeout(H){const{delegate:N}=d;return(N?.clearTimeout||clearTimeout)(H)},delegate:void 0}},2202:(gt,Oe,F)=>{F.d(Oe,{h:()=>H});const H=function d(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(gt,Oe,F)=>{F.d(Oe,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(gt,Oe,F)=>{F.d(Oe,{_6:()=>ye,jO:()=>ue,yG:()=>fe});var d=F(576),H=F(3532);function N(ce){return ce[ce.length-1]}function ue(ce){return(0,d.m)(N(ce))?ce.pop():void 0}function fe(ce){return(0,H.K)(N(ce))?ce.pop():void 0}function ye(ce,ge){return"number"==typeof N(ce)?ce.pop():ge}},8737:(gt,Oe,F)=>{function d(H,N){if(H){const ue=H.indexOf(N);0<=ue&&H.splice(ue,1)}}F.d(Oe,{P:()=>d})},3888:(gt,Oe,F)=>{function d(H){const ue=H(fe=>{Error.call(fe),fe.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}F.d(Oe,{d:()=>d})},2806:(gt,Oe,F)=>{F.d(Oe,{O:()=>ue,x:()=>N});var d=F(2416);let H=null;function N(fe){if(d.v.useDeprecatedSynchronousErrorHandling){const ye=!H;if(ye&&(H={errorThrown:!1,error:null}),fe(),ye){const{errorThrown:ce,error:ge}=H;if(H=null,ce)throw ge}}else fe()}function ue(fe){d.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=fe)}},9672:(gt,Oe,F)=>{function d(H,N,ue,fe=0,ye=!1){const ce=N.schedule(function(){ue(),ye?H.add(this.schedule(null,fe)):this.unsubscribe()},fe);if(H.add(ce),!ye)return ce}F.d(Oe,{f:()=>d})},4671:(gt,Oe,F)=>{function d(H){return H}F.d(Oe,{y:()=>d})},1144:(gt,Oe,F)=>{F.d(Oe,{z:()=>d});const d=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(gt,Oe,F)=>{F.d(Oe,{D:()=>H});var d=F(576);function H(N){return Symbol.asyncIterator&&(0,d.m)(N?.[Symbol.asyncIterator])}},576:(gt,Oe,F)=>{function d(H){return"function"==typeof H}F.d(Oe,{m:()=>d})},3670:(gt,Oe,F)=>{F.d(Oe,{c:()=>N});var d=F(8822),H=F(576);function N(ue){return(0,H.m)(ue[d.L])}},6495:(gt,Oe,F)=>{F.d(Oe,{T:()=>N});var d=F(2202),H=F(576);function N(ue){return(0,H.m)(ue?.[d.h])}},8239:(gt,Oe,F)=>{F.d(Oe,{t:()=>H});var d=F(576);function H(N){return(0,d.m)(N?.then)}},3260:(gt,Oe,F)=>{F.d(Oe,{L:()=>ue,Q:()=>N});var d=F(655),H=F(576);function N(fe){return(0,d.FC)(this,arguments,function*(){const ce=fe.getReader();try{for(;;){const{value:ge,done:Ce}=yield(0,d.qq)(ce.read());if(Ce)return yield(0,d.qq)(void 0);yield yield(0,d.qq)(ge)}}finally{ce.releaseLock()}})}function ue(fe){return(0,H.m)(fe?.getReader)}},3532:(gt,Oe,F)=>{F.d(Oe,{K:()=>H});var d=F(576);function H(N){return N&&(0,d.m)(N.schedule)}},4482:(gt,Oe,F)=>{F.d(Oe,{A:()=>H,e:()=>N});var d=F(576);function H(ue){return(0,d.m)(ue?.lift)}function N(ue){return fe=>{if(H(fe))return fe.lift(function(ye){try{return ue(ye,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(gt,Oe,F)=>{function d(){}F.d(Oe,{Z:()=>d})},9635:(gt,Oe,F)=>{F.d(Oe,{U:()=>N,z:()=>H});var d=F(4671);function H(...ue){return N(ue)}function N(ue){return 0===ue.length?d.y:1===ue.length?ue[0]:function(ye){return ue.reduce((ce,ge)=>ge(ce),ye)}}},7849:(gt,Oe,F)=>{F.d(Oe,{h:()=>N});var d=F(2416),H=F(3410);function N(ue){H.z.setTimeout(()=>{const{onUnhandledError:fe}=d.v;if(!fe)throw ue;fe(ue)})}},4532:(gt,Oe,F)=>{function d(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Oe,{z:()=>d})},655:(gt,Oe,F)=>{function ue(te,le){var de={};for(var Ee in te)Object.prototype.hasOwnProperty.call(te,Ee)&&le.indexOf(Ee)<0&&(de[Ee]=te[Ee]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(Ee=Object.getOwnPropertySymbols(te);pe<Ee.length;pe++)le.indexOf(Ee[pe])<0&&Object.prototype.propertyIsEnumerable.call(te,Ee[pe])&&(de[Ee[pe]]=te[Ee[pe]])}return de}function ge(te,le,de,Ee){return new(de||(de=Promise))(function(je,wt){function tn(mn){try{Ze(Ee.next(mn))}catch($n){wt($n)}}function Wt(mn){try{Ze(Ee.throw(mn))}catch($n){wt($n)}}function Ze(mn){mn.done?je(mn.value):function pe(je){return je instanceof de?je:new de(function(wt){wt(je)})}(mn.value).then(tn,Wt)}Ze((Ee=Ee.apply(te,le||[])).next())})}function De(te){return this instanceof De?(this.v=te,this):new De(te)}function _e(te,le,de){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,Ee=de.apply(te,le||[]),je=[];return pe={},wt("next"),wt("throw"),wt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function wt(_n){Ee[_n]&&(pe[_n]=function(rn){return new Promise(function(qt,sn){je.push([_n,rn,qt,sn])>1||tn(_n,rn)})})}function tn(_n,rn){try{!function Wt(_n){_n.value instanceof De?Promise.resolve(_n.value.v).then(Ze,mn):$n(je[0][2],_n)}(Ee[_n](rn))}catch(qt){$n(je[0][3],qt)}}function Ze(_n){tn("next",_n)}function mn(_n){tn("throw",_n)}function $n(_n,rn){_n(rn),je.shift(),je.length&&tn(je[0][0],je[0][1])}}function et(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var de,le=te[Symbol.asyncIterator];return le?le.call(te):(te=function re(te){var le="function"==typeof Symbol&&Symbol.iterator,de=le&&te[le],Ee=0;if(de)return de.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&Ee>=te.length&&(te=void 0),{value:te&&te[Ee++],done:!te}}};throw new TypeError(le?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),de={},Ee("next"),Ee("throw"),Ee("return"),de[Symbol.asyncIterator]=function(){return this},de);function Ee(je){de[je]=te[je]&&function(wt){return new Promise(function(tn,Wt){!function pe(je,wt,tn,Wt){Promise.resolve(Wt).then(function(Ze){je({value:Ze,done:tn})},wt)}(tn,Wt,(wt=te[je](wt)).done,wt.value)})}}}F.d(Oe,{FC:()=>_e,KL:()=>et,_T:()=>ue,mG:()=>ge,qq:()=>De})},4650:(gt,Oe,F)=>{F.d(Oe,{$8M:()=>Bi,$Z:()=>jS,AFp:()=>qC,AaK:()=>ge,BQk:()=>ky,CHM:()=>Co,CRH:()=>SC,CZH:()=>em,CqO:()=>jA,D6c:()=>Tx,DdM:()=>Ug,EJc:()=>L1,EiD:()=>id,EpF:()=>bg,F$t:()=>Q0,F4k:()=>df,FYo:()=>Wh,FiY:()=>he,G48:()=>_x,Gf:()=>TC,GfV:()=>qh,Gpc:()=>W,Hsn:()=>X0,Ikx:()=>Ag,JOm:()=>wa,JVY:()=>Bp,KtG:()=>Nl,L6k:()=>m_,LAX:()=>y_,LFG:()=>Hn,LSH:()=>$p,Lbi:()=>rx,Lck:()=>SM,MGl:()=>Py,MMx:()=>nC,NdJ:()=>Id,OlP:()=>Nt,Oqu:()=>Hy,PXZ:()=>Wi,Q6J:()=>cf,QGY:()=>K0,QP$:()=>co,QbO:()=>F1,Qsj:()=>Vw,R0b:()=>cs,RDi:()=>h_,Rgc:()=>dc,SBq:()=>Gh,Sil:()=>Ov,Suo:()=>Cv,TTD:()=>ys,TgZ:()=>vg,VKq:()=>xM,WFA:()=>wg,X6Q:()=>mx,XFs:()=>yt,Xpm:()=>j,Xts:()=>as,Y36:()=>ef,YKP:()=>Vg,YNc:()=>BA,Yjl:()=>ie,Yz7:()=>rn,ZZ4:()=>jv,_Bn:()=>Ef,_UZ:()=>q0,_Vd:()=>eu,_c5:()=>vI,_uU:()=>sM,aQg:()=>Ud,c2e:()=>sx,cJS:()=>sn,cg1:()=>wE,d8E:()=>Gy,dDg:()=>fx,deG:()=>qu,dqk:()=>Qe,eBb:()=>__,eFA:()=>Aa,ekj:()=>aE,eoX:()=>nI,f3M:()=>Jl,g9A:()=>YC,h0i:()=>xd,hGG:()=>bI,hij:()=>Dg,iGM:()=>Ev,ifc:()=>Yt,ip1:()=>WC,kL8:()=>hM,lG2:()=>dr,lqb:()=>Jc,lri:()=>eI,mCW:()=>Re,n5z:()=>Kl,oAB:()=>Dt,oxw:()=>Eg,pB0:()=>v_,q3G:()=>Rr,q4F:()=>k_,qLn:()=>cd,qOj:()=>z0,qZA:()=>Cd,qzn:()=>ec,rWj:()=>tI,sBO:()=>sI,sIi:()=>yd,s_b:()=>zg,soG:()=>kv,tb:()=>ix,tp0:()=>qe,uIk:()=>G0,vHH:()=>Se,vpe:()=>yl,wAp:()=>Rt,xp6:()=>xS,ynx:()=>Ry,z2F:()=>sm,z3N:()=>Ns,zSh:()=>A_,zs3:()=>hd});var d=F(7579),H=F(727),N=F(9751),ue=F(6451),fe=F(3099);function ye(s){for(let a in s)if(s[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function ce(s,a){for(const l in a)a.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=a[l])}function ge(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ge).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const a=s.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Ce(s,a){return null==s||""===s?null===a?"":a:null==a||""===a?s:s+" "+a}const K=ye({__forward_ref__:ye});function W(s){return s.__forward_ref__=W,s.toString=function(){return ge(this())},s}function re(s){return Ge(s)?s():s}function Ge(s){return"function"==typeof s&&s.hasOwnProperty(K)&&s.__forward_ref__===W}class Se extends Error{constructor(a,l){super(function at(s,a){return`NG0${Math.abs(s)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function De(s){return"string"==typeof s?s:null==s?"":String(s)}function Ne(s,a){throw new Se(-201,!1)}function Wt(s,a){null==s&&function Ze(s,a,l,u){throw new Error(`ASSERTION ERROR: ${s}`+(null==u?"":` [Expected=> ${l} ${u} ${a} <=Actual]`))}(a,s,null,"!=")}function rn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function sn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Mn(s){return Oi(s,mi)||Oi(s,zn)}function Oi(s,a){return s.hasOwnProperty(a)?s[a]:null}function gs(s){return s&&(s.hasOwnProperty(Ni)||s.hasOwnProperty(Qi))?s[Ni]:null}const mi=ye({\u0275prov:ye}),Ni=ye({\u0275inj:ye}),zn=ye({ngInjectableDef:ye}),Qi=ye({ngInjectorDef:ye});var yt=(()=>((yt=yt||{})[yt.Default=0]="Default",yt[yt.Host=1]="Host",yt[yt.Self=2]="Self",yt[yt.SkipSelf=4]="SkipSelf",yt[yt.Optional=8]="Optional",yt))();let zr;function nn(s){const a=zr;return zr=s,a}function lr(s,a,l){const u=Mn(s);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:l&yt.Optional?null:void 0!==a?a:void Ne(ge(s))}function cr(s){return{toString:s}.toString()}var Rn=(()=>((Rn=Rn||{})[Rn.OnPush=0]="OnPush",Rn[Rn.Default=1]="Default",Rn))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const Qe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ur={},Ot=[],Gr=ye({\u0275cmp:ye}),kn=ye({\u0275dir:ye}),On=ye({\u0275pipe:ye}),hn=ye({\u0275mod:ye}),er=ye({\u0275fac:ye}),G=ye({__NG_ELEMENT_ID__:ye});let q=0;function j(s){return cr(()=>{const l=!0===s.standalone,u={},f={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Rn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Ot,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,id:"c"+q++,styles:s.styles||Ot,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return f.inputs=on(s.inputs,u),f.outputs=on(s.outputs),v&&v.forEach(w=>w(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(Q).filter(Fe):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(Ie).filter(Fe):null,f})}function Q(s){return $(s)||z(s)}function Fe(s){return null!==s}const Ke={};function Dt(s){return cr(()=>{const a={type:s.type,bootstrap:s.bootstrap||Ot,declarations:s.declarations||Ot,imports:s.imports||Ot,exports:s.exports||Ot,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Ke[s.id]=s.type),a})}function on(s,a){if(null==s)return ur;const l={};for(const u in s)if(s.hasOwnProperty(u)){let f=s[u],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=u,a&&(a[f]=g)}return l}const dr=j;function ie(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function $(s){return s[Gr]||null}function z(s){return s[kn]||null}function Ie(s){return s[On]||null}function We(s,a){const l=s[hn]||null;if(!l&&!0===a)throw new Error(`Type ${ge(s)} does not have '\u0275mod' property.`);return l}function Pr(s){return Array.isArray(s)&&"object"==typeof s[1]}function Wr(s){return Array.isArray(s)&&!0===s[1]}function Mc(s){return 0!=(8&s.flags)}function vo(s){return 2==(2&s.flags)}function ea(s){return 1==(1&s.flags)}function si(s){return null!==s.template}function Al(s){return 0!=(256&s[2])}function Fi(s,a){return s.hasOwnProperty(er)?s[er]:null}class _s{constructor(a,l,u){this.previousValue=a,this.currentValue=l,this.firstChange=u}isFirstChange(){return this.firstChange}}function ys(){return bo}function bo(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ru),Eh}function Eh(){const s=xl(this),a=s?.current;if(a){const l=s.previous;if(l===ur)s.previous=a;else for(let u in a)l[u]=a[u];s.current=null,this.ngOnChanges(a)}}function Ru(s,a,l,u){const f=xl(s)||function ra(s,a){return s[Ml]=a}(s,{previous:ur,current:null}),g=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[l],I=v[w];g[w]=new _s(I&&I.currentValue,a,v===ur),s[u]=a}ys.ngInherit=!0;const Ml="__ngSimpleChanges__";function xl(s){return s[Ml]||null}function Bn(s){for(;Array.isArray(s);)s=s[0];return s}function Ha(s,a){return Bn(a[s])}function pr(s,a){return Bn(a[s.index])}function wo(s,a){return s.data[a]}function gr(s,a){const l=a[s];return Pr(l)?l:l[0]}function sa(s){return 4==(4&s[2])}function Qs(s){return 64==(64&s[2])}function Li(s,a){return null==a?null:s[a]}function vs(s){s[18]=0}function oa(s,a){s[5]+=a;let l=s,u=s[3];for(;null!==u&&(1===a&&1===l[5]||-1===a&&0===l[5]);)u[5]+=a,l=u,u=u[3]}const lt={lFrame:Fu(null),bindingsEnabled:!0};function bs(){return lt.bindingsEnabled}function ke(){return lt.lFrame.lView}function Kt(){return lt.lFrame.tView}function Co(s){return lt.lFrame.contextLView=s,s[8]}function Nl(s){return lt.lFrame.contextLView=null,s}function Nn(){let s=Pl();for(;null!==s&&64===s.type;)s=s.parent;return s}function Pl(){return lt.lFrame.currentTNode}function rs(s,a){const l=lt.lFrame;l.currentTNode=s,l.isParent=a}function Io(){return lt.lFrame.isParent}function za(){lt.lFrame.isParent=!1}function Yn(){const s=lt.lFrame;let a=s.bindingRootIndex;return-1===a&&(a=s.bindingRootIndex=s.tView.bindingStartIndex),a}function Cs(){return lt.lFrame.bindingIndex++}function Ll(s,a){const l=lt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Vl(a)}function Vl(s){lt.lFrame.currentDirectiveIndex=s}function Xs(s){const a=lt.lFrame.currentDirectiveIndex;return-1===a?null:s[a]}function Pu(){return lt.lFrame.currentQueryIndex}function So(s){lt.lFrame.currentQueryIndex=s}function Dh(s){const a=s[1];return 2===a.type?a.declTNode:1===a.type?s[6]:null}function Js(s,a,l){if(l&yt.SkipSelf){let f=a,g=s;for(;!(f=f.parent,null!==f||l&yt.Host||(f=Dh(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,s=g}const u=lt.lFrame=Ga();return u.currentTNode=a,u.lView=s,!0}function Vc(s){const a=Ga(),l=s[1];lt.lFrame=a,a.currentTNode=l.firstChild,a.lView=s,a.tView=l,a.contextLView=s,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function Ga(){const s=lt.lFrame,a=null===s?null:s.child;return null===a?Fu(s):a}function Fu(s){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=a),a}function la(){const s=lt.lFrame;return lt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Lu=la;function Bl(){const s=la();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Tr(){return lt.lFrame.selectedIndex}function Qr(s){lt.lFrame.selectedIndex=s}function Pn(){const s=lt.lFrame;return wo(s.tView,s.selectedIndex)}function Uu(s,a){for(let l=a.directiveStart,u=a.directiveEnd;l<u;l++){const g=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:M,ngOnDestroy:O}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),w&&((s.contentHooks||(s.contentHooks=[])).push(l,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,w)),I&&(s.viewHooks||(s.viewHooks=[])).push(-l,I),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=O&&(s.destroyHooks||(s.destroyHooks=[])).push(l,O)}}function Sh(s,a,l){Ao(s,a,3,l)}function jl(s,a,l,u){(3&s[2])===l&&Ao(s,a,l,u)}function Hu(s,a){let l=s[2];(3&l)===a&&(l&=2047,l+=1,s[2]=l)}function Ao(s,a,l,u){const g=u??-1,v=a.length-1;let w=0;for(let I=void 0!==u?65535&s[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(w=a[I],null!=u&&w>=u)break}else a[I]<0&&(s[18]+=65536),(w<g||-1==g)&&(Bc(s,l,a,I),s[18]=(4294901760&s[18])+I+2),I++}function Bc(s,a,l,u){const f=l[u]<0,g=l[u+1],w=s[f?-l[u]:l[u]];if(f){if(s[2]>>11<s[18]>>16&&(3&s[2])===a){s[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Ds{constructor(a,l,u){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=u}}function Ka(s,a,l){let u=0;for(;u<l.length;){const f=l[u];if("number"==typeof f){if(0!==f)break;u++;const g=l[u++],v=l[u++],w=l[u++];s.setAttribute(a,v,w,g)}else{const g=f,v=l[++u];Ya(g)?s.setProperty(a,g,v):s.setAttribute(a,g,v),u++}}return u}function $l(s){return 3===s||4===s||6===s}function Ya(s){return 64===s.charCodeAt(0)}function Uc(s,a){if(null!==a&&0!==a.length)if(null===s||0===s.length)s=a.slice();else{let l=-1;for(let u=0;u<a.length;u++){const f=a[u];"number"==typeof f?l=f:0===l||Mh(s,l,f,null,-1===l||2===l?a[++u]:null)}}return s}function Mh(s,a,l,u,f){let g=0,v=s.length;if(-1===a)v=-1;else for(;g<s.length;){const w=s[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<s.length;){const w=s[g];if("number"==typeof w)break;if(w===l){if(null===u)return void(null!==f&&(s[g+1]=f));if(u===s[g+1])return void(s[g+2]=f)}g++,null!==u&&g++,null!==f&&g++}-1!==v&&(s.splice(v,0,a),g=v+1),s.splice(g++,0,l),null!==u&&s.splice(g++,0,u),null!==f&&s.splice(g++,0,f)}function xh(s){return-1!==s}function zl(s){return 32767&s}function Gl(s,a){let l=function oi(s){return s>>16}(s),u=a;for(;l>0;)u=u[15],l--;return u}let xo=!0;function Wl(s){const a=xo;return xo=s,a}let Cn=0;const Je={};function Sr(s,a){const l=Hc(s,a);if(-1!==l)return l;const u=a[1];u.firstCreatePass&&(s.injectorIndex=a.length,Zn(u.data,s),Zn(a,null),Zn(u.blueprint,null));const f=ql(s,a),g=s.injectorIndex;if(xh(f)){const v=zl(f),w=Gl(f,a),I=w[1].data;for(let M=0;M<8;M++)a[g+M]=w[v+M]|I[v+M]}return a[g+8]=f,g}function Zn(s,a){s.push(0,0,0,0,0,0,0,0,a)}function Hc(s,a){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===a[s.injectorIndex+8]?-1:s.injectorIndex}function ql(s,a){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,u=null,f=a;for(;null!==f;){if(u=Ja(f),null===u)return-1;if(l++,f=f[15],-1!==u.injectorIndex)return u.injectorIndex|l<<16}return-1}function Qa(s,a,l){!function Qt(s,a,l){let u;"string"==typeof l?u=l.charCodeAt(0)||0:l.hasOwnProperty(G)&&(u=l[G]),null==u&&(u=l[G]=Cn++);const f=255&u;a.data[s+(f>>5)]|=1<<f}(s,a,l)}function ca(s,a,l){if(l&yt.Optional)return s;Ne()}function Xa(s,a,l,u){if(l&yt.Optional&&void 0===u&&(u=null),0==(l&(yt.Self|yt.Host))){const f=s[9],g=nn(void 0);try{return f?f.get(a,u,l&yt.Optional):lr(a,u,l&yt.Optional)}finally{nn(g)}}return ca(u,0,l)}function is(s,a,l,u=yt.Default,f){if(null!==s){if(1024&a[2]){const v=function Yl(s,a,l,u,f){let g=s,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const w=ft(g,v,l,u|yt.Self,Je);if(w!==Je)return w;let I=g.parent;if(!I){const M=v[21];if(M){const O=M.get(l,Je,u);if(O!==Je)return O}I=Ja(v),v=v[15]}g=I}return f}(s,a,l,u,Je);if(v!==Je)return v}const g=ft(s,a,l,u,Je);if(g!==Je)return g}return Xa(a,l,u,f)}function ft(s,a,l,u,f){const g=function ua(s){if("string"==typeof s)return s.charCodeAt(0)||0;const a=s.hasOwnProperty(G)?s[G]:void 0;return"number"==typeof a?a>=0?255&a:Wu:a}(l);if("function"==typeof g){if(!Js(a,s,u))return u&yt.Host?ca(f,0,u):Xa(a,l,u,f);try{const v=g(u);if(null!=v||u&yt.Optional)return v;Ne()}finally{Lu()}}else if("number"==typeof g){let v=null,w=Hc(s,a),I=-1,M=u&yt.Host?a[16][6]:null;for((-1===w||u&yt.SkipSelf)&&(I=-1===w?ql(s,a):a[w+8],-1!==I&&da(u,!1)?(v=a[1],w=zl(I),a=Gl(I,a)):w=-1);-1!==w;){const O=a[1];if(Wn(g,w,O.data)){const V=Rh(w,a,l,v,u,M);if(V!==Je)return V}I=a[w+8],-1!==I&&da(u,a[1].data[w+8]===M)&&Wn(g,w,a)?(v=O,w=zl(I),a=Gl(I,a)):w=-1}}return f}function Rh(s,a,l,u,f,g){const v=a[1],w=v.data[s+8],O=to(w,v,l,null==u?vo(w)&&xo:u!=v&&0!=(3&w.type),f&yt.Host&&g===w);return null!==O?no(a,v,O,w):Je}function to(s,a,l,u,f){const g=s.providerIndexes,v=a.data,w=1048575&g,I=s.directiveStart,O=g>>20,X=f?w+O:s.directiveEnd;for(let oe=u?w:w+O;oe<X;oe++){const xe=v[oe];if(oe<I&&l===xe||oe>=I&&xe.type===l)return oe}if(f){const oe=v[I];if(oe&&si(oe)&&oe.type===l)return I}return null}function no(s,a,l,u){let f=s[l];const g=a.data;if(function eo(s){return s instanceof Ds}(f)){const v=f;v.resolving&&function rt(s,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${s}`:"";throw new Se(-200,`Circular dependency in DI detected for ${s}${l}`)}(function _e(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():De(s)}(g[l]));const w=Wl(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?nn(v.injectImpl):null;Js(s,u,yt.Default);try{f=s[l]=v.factory(void 0,g,s,u),a.firstCreatePass&&l>=u.directiveStart&&function kp(s,a,l){const{ngOnChanges:u,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(u){const v=bo(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,g))}(l,g[l],a)}finally{null!==I&&nn(I),Wl(w),v.resolving=!1,Lu()}}return f}function Wn(s,a,l){return!!(l[a+(s>>5)]&1<<s)}function da(s,a){return!(s&yt.Self||s&yt.Host&&a)}class Vi{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,u){return is(this._tNode,this._lView,a,u,l)}}function Wu(){return new Vi(Nn(),ke())}function Kl(s){return cr(()=>{const a=s.prototype.constructor,l=a[er]||ha(a),u=Object.prototype;let f=Object.getPrototypeOf(s.prototype).constructor;for(;f&&f!==u;){const g=f[er]||ha(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function ha(s){return Ge(s)?()=>{const a=ha(re(s));return a&&a()}:Fi(s)}function Ja(s){const a=s[1],l=a.type;return 2===l?a.declTNode:1===l?s[6]:null}function Bi(s){return function jc(s,a){if("class"===a)return s.classes;if("style"===a)return s.styles;const l=s.attrs;if(l){const u=l.length;let f=0;for(;f<u;){const g=l[f];if($l(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<u&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(Nn(),s)}const Fr="__parameters__";function _i(s,a,l){return cr(()=>{const u=function Ro(s){return function(...l){if(s){const u=s(...l);for(const f in u)this[f]=u[f]}}}(a);function f(...g){if(this instanceof f)return u.apply(this,g),this;const v=new f(...g);return w.annotation=v,w;function w(I,M,O){const V=I.hasOwnProperty(Fr)?I[Fr]:Object.defineProperty(I,Fr,{value:[]})[Fr];for(;V.length<=O;)V.push(null);return(V[O]=V[O]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=s,f.annotationCls=f,f})}class Nt{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=rn({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const qu=new Nt("AnalyzeForEntryComponents");function _r(s,a){void 0===a&&(a=s);for(let l=0;l<s.length;l++){let u=s[l];Array.isArray(u)?(a===s&&(a=s.slice(0,l)),_r(u,a)):a!==s&&a.push(u)}return a}function ai(s,a){s.forEach(l=>Array.isArray(l)?ai(l,a):a(l))}function $c(s,a,l){a>=s.length?s.push(l):s.splice(a,0,l)}function fa(s,a){return a>=s.length-1?s.pop():s.splice(a,1)[0]}function io(s,a){const l=[];for(let u=0;u<s;u++)l.push(a);return l}function Un(s,a,l){let u=Fo(s,a);return u>=0?s[1|u]=l:(u=~u,function Ku(s,a,l,u){let f=s.length;if(f==a)s.push(l,u);else if(1===f)s.push(u,s[0]),s[0]=l;else{for(f--,s.push(s[f-1],s[f]);f>a;)s[f]=s[f-2],f--;s[a]=l,s[a+1]=u}}(s,u,a,l)),u}function tl(s,a){const l=Fo(s,a);if(l>=0)return s[1|l]}function Fo(s,a){return function Xl(s,a,l){let u=0,f=s.length>>l;for(;f!==u;){const g=u+(f-u>>1),v=s[g<<l];if(a===v)return g<<l;v>a?f=g:u=g+1}return~(f<<l)}(s,a,1)}const xs={},Rs="__NG_DI_FLAG__",pa="ngTempTokenPath",ks=/\n/gm,ma="__source";let yi;function vi(s){const a=yi;return yi=s,a}function Fh(s,a=yt.Default){if(void 0===yi)throw new Se(-203,!1);return null===yi?lr(s,void 0,a):yi.get(s,a&yt.Optional?null:void 0,a)}function Hn(s,a=yt.Default){return(function xn(){return zr}()||Fh)(re(s),a)}function Jl(s,a=yt.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),Hn(s,a)}function _a(s){const a=[];for(let l=0;l<s.length;l++){const u=re(s[l]);if(Array.isArray(u)){if(0===u.length)throw new Se(900,!1);let f,g=yt.Default;for(let v=0;v<u.length;v++){const w=u[v],I=S(w);"number"==typeof I?-1===I?f=w.token:g|=I:f=w}a.push(Hn(f,g))}else a.push(Hn(u))}return a}function D(s,a){return s[Rs]=a,s.prototype[Rs]=a,s}function S(s){return s[Rs]}const he=D(_i("Optional"),8),qe=D(_i("SkipSelf"),4);let va,ul;function h_(s){va=s}function ba(s){return function Bh(){if(void 0===ul&&(ul=null,Qe.trustedTypes))try{ul=Qe.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return ul}()?.createHTML(s)||s}class ci{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Xu extends ci{getTypeName(){return"HTML"}}class Ju extends ci{getTypeName(){return"Style"}}class p_ extends ci{getTypeName(){return"Script"}}class Lp extends ci{getTypeName(){return"URL"}}class g_ extends ci{getTypeName(){return"ResourceURL"}}function Ns(s){return s instanceof ci?s.changingThisBreaksApplicationSecurity:s}function ec(s,a){const l=function Vp(s){return s instanceof ci&&s.getTypeName()||null}(s);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Bp(s){return new Xu(s)}function m_(s){return new Ju(s)}function __(s){return new p_(s)}function y_(s){return new Lp(s)}function v_(s){return new g_(s)}class m{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(ba(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch{return null}}}class _{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const u=this.inertDocument.createElement("body");l.appendChild(u)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ba(a),l;const u=this.inertDocument.createElement("body");return u.innerHTML=ba(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let u=a.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const x=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,se=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Re(s){return(s=String(s)).match(x)||s.match(se)?s:"unsafe:"+s}function ht(s){const a={};for(const l of s.split(","))a[l]=!0;return a}function Mt(...s){const a={};for(const l of s)for(const u in l)l.hasOwnProperty(u)&&(a[u]=!0);return a}const Fn=ht("area,br,col,hr,img,wbr"),Ps=ht("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),os=ht("rp,rt"),tc=Mt(Fn,Mt(Ps,ht("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mt(os,ht("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mt(os,Ps)),nc=ht("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Yc=ht("srcset"),td=Mt(nc,Yc,ht("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ht("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),nd=ht("script,style,template");class Up{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,u=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?u=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,u&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!tc.hasOwnProperty(l))return this.sanitizedSomething=!0,!nd.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const u=a.attributes;for(let f=0;f<u.length;f++){const g=u.item(f),v=g.name,w=v.toLowerCase();if(!td.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=g.value;nc[w]&&(I=Re(I)),Yc[w]&&(s=I,I=(s=String(s)).split(",").map(a=>Re(a.trim())).join(", ")),this.buf.push(" ",v,'="',w_(I),'"')}var s;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();tc.hasOwnProperty(l)&&!Fn.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(w_(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const rd=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hp=/([^\#-~ |!])/g;function w_(s){return s.replace(/&/g,"&amp;").replace(rd,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Hp,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let jp;function id(s,a){let l=null;try{jp=jp||function b(s){const a=new _(s);return function C(){try{return!!(new window.DOMParser).parseFromString(ba(""),"text/html")}catch{return!1}}()?new m(a):a}(s);let u=a?String(a):"";l=jp.getInertBodyElement(u);let f=5,g=u;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,u=g,g=l.innerHTML,l=jp.getInertBodyElement(u)}while(u!==g);return ba((new Up).sanitizeChildren(sd(l)||l))}finally{if(l){const u=sd(l)||l;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function sd(s){return"content"in s&&function E_(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Rr=(()=>((Rr=Rr||{})[Rr.NONE=0]="NONE",Rr[Rr.HTML=1]="HTML",Rr[Rr.STYLE=2]="STYLE",Rr[Rr.SCRIPT=3]="SCRIPT",Rr[Rr.URL=4]="URL",Rr[Rr.RESOURCE_URL=5]="RESOURCE_URL",Rr))();function $p(s){const a=function Qc(){const s=ke();return s&&s[12]}();return a?a.sanitize(Rr.URL,s)||"":ec(s,"URL")?Ns(s):Re(De(s))}const as=new Nt("ENVIRONMENT_INITIALIZER"),I_=new Nt("INJECTOR",-1),D_=new Nt("INJECTOR_DEF_TYPES");class Mw{get(a,l=xs){if(l===xs){const u=new Error(`NullInjectorError: No provider for ${ge(a)}!`);throw u.name="NullInjectorError",u}return l}}function GT(...s){return{\u0275providers:T_(0,s)}}function T_(s,...a){const l=[],u=new Set;let f;return ai(a,g=>{const v=g;S_(v,l,[],u)&&(f||(f=[]),f.push(v))}),void 0!==f&&$h(f,l),l}function $h(s,a){for(let l=0;l<s.length;l++){const{providers:f}=s[l];ai(f,g=>{a.push(g)})}}function S_(s,a,l,u){if(!(s=re(s)))return!1;let f=null,g=gs(s);const v=!g&&$(s);if(g||v){if(v&&!v.standalone)return!1;f=s}else{const I=s.ngModule;if(g=gs(I),!g)return!1;f=I}const w=u.has(f);if(v){if(w)return!1;if(u.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const M of I)S_(M,a,l,u)}}else{if(!g)return!1;{if(null!=g.imports&&!w){let M;u.add(f);try{ai(g.imports,O=>{S_(O,a,l,u)&&(M||(M=[]),M.push(O))})}finally{}void 0!==M&&$h(M,a)}if(!w){const M=Fi(f)||(()=>new f);a.push({provide:f,useFactory:M,deps:Ot},{provide:D_,useValue:f,multi:!0},{provide:as,useValue:()=>Hn(f),multi:!0})}const I=g.providers;null==I||w||ai(I,O=>{a.push(O)})}}return f!==s&&void 0!==s.providers}const zp=ye({provide:String,useValue:ye});function Xc(s){return null!==s&&"object"==typeof s&&zp in s}function Bo(s){return"function"==typeof s}const A_=new Nt("Set Injector scope."),Gp={},WT={};let M_;function Wp(){return void 0===M_&&(M_=new Mw),M_}class Jc{}class qT extends Jc{constructor(a,l,u,f){super(),this.parent=l,this.source=u,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,R_(a,v=>this.processProvider(v)),this.records.set(I_,ad(void 0,this)),f.has("environment")&&this.records.set(Jc,ad(void 0,this));const g=this.records.get(A_);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(D_.multi,Ot,yt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=vi(this),u=nn(void 0);try{return a()}finally{vi(l),nn(u)}}get(a,l=xs,u=yt.Default){this.assertNotDestroyed();const f=vi(this),g=nn(void 0);try{if(!(u&yt.SkipSelf)){let w=this.records.get(a);if(void 0===w){const I=function ZT(s){return"function"==typeof s||"object"==typeof s&&s instanceof Nt}(a)&&Mn(a);w=I&&this.injectableDefInScope(I)?ad(x_(a),Gp):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(u&yt.Self?Wp():this.parent).get(a,l=u&yt.Optional&&l===xs?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[pa]=v[pa]||[]).unshift(ge(a)),f)throw v;return function k(s,a,l,u){const f=s[pa];throw a[ma]&&f.unshift(a[ma]),s.message=function U(s,a,l,u=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let f=ge(a);if(Array.isArray(a))f=a.map(ge).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):ge(w)))}f=`{${g.join(", ")}}`}return`${l}${u?"("+u+")":""}[${f}]: ${s.replace(ks,"\n  ")}`}("\n"+s.message,f,l,u),s.ngTokenPath=f,s[pa]=null,s}(v,a,"R3InjectorError",this.source)}throw v}finally{nn(g),vi(f)}}resolveInjectorInitializers(){const a=vi(this),l=nn(void 0);try{const u=this.get(as.multi,Ot,yt.Self);for(const f of u)f()}finally{vi(a),nn(l)}}toString(){const a=[],l=this.records;for(const u of l.keys())a.push(ge(u));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Se(205,!1)}processProvider(a){let l=Bo(a=re(a))?a:re(a&&a.provide);const u=function od(s){return Xc(s)?ad(void 0,s.useValue):ad(kw(s),Gp)}(a);if(Bo(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=ad(void 0,Gp,!0),f.factory=()=>_a(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,u)}hydrate(a,l){return l.value===Gp&&(l.value=WT,l.value=l.factory()),"object"==typeof l.value&&l.value&&function YT(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=re(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function x_(s){const a=Mn(s),l=null!==a?a.factory:Fi(s);if(null!==l)return l;if(s instanceof Nt)throw new Se(204,!1);if(s instanceof Function)return function qp(s){const a=s.length;if(a>0)throw io(a,"?"),new Se(204,!1);const l=function $r(s){const a=s&&(s[mi]||s[zn]);if(a){const l=function Vn(s){if(s.hasOwnProperty("name"))return s.name;const a=(""+s).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Se(204,!1)}function kw(s,a,l){let u;if(Bo(s)){const f=re(s);return Fi(f)||x_(f)}if(Xc(s))u=()=>re(s.useValue);else if(function Rw(s){return!(!s||!s.useFactory)}(s))u=()=>s.useFactory(..._a(s.deps||[]));else if(function xw(s){return!(!s||!s.useExisting)}(s))u=()=>Hn(re(s.useExisting));else{const f=re(s&&(s.useClass||s.provide));if(!function KT(s){return!!s.deps}(s))return Fi(f)||x_(f);u=()=>new f(..._a(s.deps))}return u}function ad(s,a,l=!1){return{factory:s,value:a,multi:l?[]:void 0}}function QT(s){return!!s.\u0275providers}function R_(s,a){for(const l of s)Array.isArray(l)?R_(l,a):QT(l)?R_(l.\u0275providers,a):a(l)}class Ow{}class Lw{resolveComponentFactory(a){throw function Nw(s){const a=Error(`No component factory found for ${ge(s)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=s,a}(a)}}let eu=(()=>{class s{}return s.NULL=new Lw,s})();function Kp(){return ld(Nn(),ke())}function ld(s,a){return new Gh(pr(s,a))}let Gh=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=Kp,s})();function JT(s){return s instanceof Gh?s.nativeElement:s}class Wh{}let Vw=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Bw(){const s=ke(),l=gr(Nn().index,s);return(Pr(l)?l:s)[11]}(),s})(),Yp=(()=>{class s{}return s.\u0275prov=rn({token:s,providedIn:"root",factory:()=>null}),s})();class qh{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const k_=new qh("14.1.0"),tu={};function Qp(s){return s.ngOriginalError}class cd{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Qp(a);for(;l&&Qp(l);)l=Qp(l);return l||null}}const Kh=new Map;let lS=0;const z_="__ngContext__";function bi(s,a){Pr(a)?(s[z_]=a[20],function uS(s){Kh.set(s[20],s)}(a)):s[z_]=a}function Zh(s){const a=s[z_];return"number"==typeof a?function U_(s){return Kh.get(s)||null}(a):a||null}function G_(s){const a=Zh(s);return a?Pr(a)?a:a.lView:null}const qw=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Qe))();function dl(s){return s instanceof Function?s():s}var wa=(()=>((wa=wa||{})[wa.Important=1]="Important",wa[wa.DashCase=2]="DashCase",wa))();function Y_(s,a){return undefined(s,a)}function ud(s){const a=s[3];return Wr(a)?a[3]:a}function Z_(s){return X_(s[13])}function Q_(s){return X_(s[4])}function X_(s){for(;null!==s&&!Wr(s);)s=s[4];return s}function dd(s,a,l,u,f){if(null!=u){let g,v=!1;Wr(u)?g=u:Pr(u)&&(v=!0,u=u[0]);const w=Bn(u);0===s&&null!==l?null==f?rc(a,l,w):Ea(a,l,w,f||null,!0):1===s&&null!==l?Ea(a,l,w,f||null,!0):2===s?function a0(s,a,l){const u=ng(s,a);u&&function SP(s,a,l,u){s.removeChild(a,l,u)}(s,u,a,l)}(a,w,v):3===s&&a.destroyNode(w),null!=g&&function MP(s,a,l,u,f){const g=l[7];g!==Bn(l)&&dd(a,s,u,g,f);for(let w=10;w<l.length;w++){const I=l[w];sg(I[1],I,s,a,u,g)}}(a,s,g,l,f)}}function ey(s,a,l){return s.createElement(a,l)}function zi(s,a){const l=s[9],u=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,oa(f,-1)),l.splice(u,1)}function e0(s,a){if(s.length<=10)return;const l=10+a,u=s[l];if(u){const f=u[17];null!==f&&f!==s&&zi(f,u),a>0&&(s[l-1][4]=u[4]);const g=fa(s,10+a);!function yS(s,a){sg(s,a,a[11],2,null,null),a[0]=null,a[6]=null}(u[1],u);const v=g[19];null!==v&&v.detachView(g[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function ru(s,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&sg(s,a,l,3,null,null),function Jw(s){let a=s[13];if(!a)return tg(s[1],s);for(;a;){let l=null;if(Pr(a))l=a[13];else{const u=a[10];u&&(l=u)}if(!l){for(;a&&!a[4]&&a!==s;)Pr(a)&&tg(a[1],a),a=a[3];null===a&&(a=s),Pr(a)&&tg(a[1],a),l=a&&a[4]}a=l}}(a)}}function tg(s,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function Qh(s,a){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let u=0;u<l.length;u+=2){const f=a[l[u]];if(!(f instanceof Ds)){const g=l[u+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=f[g[v]],I=g[v+1];try{I.call(w)}finally{}}else try{g.call(f)}finally{}}}}(s,a),function t0(s,a){const l=s.cleanup,u=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(a):Bn(a[v]),I=u[f=l[g+2]],M=l[g+3];"boolean"==typeof M?w.removeEventListener(l[g],I,M):M>=0?u[f=M]():u[f=-M].unsubscribe(),g+=2}else{const v=u[f=l[g+1]];l[g].call(v)}if(null!==u){for(let g=f+1;g<u.length;g++)(0,u[g])();a[7]=null}}(s,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&Wr(a[3])){l!==a[3]&&zi(l,a);const u=a[19];null!==u&&u.detachView(s)}!function H_(s){Kh.delete(s[20])}(a)}}function n0(s,a,l){return function Xh(s,a,l){let u=a;for(;null!==u&&40&u.type;)u=(a=u).parent;if(null===u)return l[0];if(2&u.flags){const f=s.data[u.directiveStart].encapsulation;if(f===Yt.None||f===Yt.Emulated)return null}return pr(u,l)}(s,a.parent,l)}function Ea(s,a,l,u,f){s.insertBefore(a,l,u,f)}function rc(s,a,l){s.appendChild(a,l)}function r0(s,a,l,u,f){null!==u?Ea(s,a,l,u,f):rc(s,a,l)}function ng(s,a){return s.parentNode(a)}function rg(s,a,l){return ig(s,a,l)}let ig=function ic(s,a,l){return 40&s.type?pr(s,l):null};function ny(s,a,l,u){const f=n0(s,u,a),g=a[11],w=rg(u.parent||a[6],u,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)r0(g,f,l[I],w,!1);else r0(g,f,l,w,!1)}function ry(s,a){if(null!==a){const l=a.type;if(3&l)return pr(a,s);if(4&l)return iy(-1,s[a.index]);if(8&l){const u=a.child;if(null!==u)return ry(s,u);{const f=s[a.index];return Wr(f)?iy(-1,f):Bn(f)}}if(32&l)return Y_(a,s)()||Bn(s[a.index]);{const u=CS(s,a);return null!==u?Array.isArray(u)?u[0]:ry(ud(s[16]),u):ry(s,a.next)}}return null}function CS(s,a){return null!==a?s[16][6].projection[a.projection]:null}function iy(s,a){const l=10+s+1;if(l<a.length){const u=a[l],f=u[1].firstChild;if(null!==f)return ry(u,f)}return a[7]}function sy(s,a,l,u,f,g,v){for(;null!=l;){const w=u[l.index],I=l.type;if(v&&0===a&&(w&&bi(Bn(w),u),l.flags|=4),64!=(64&l.flags))if(8&I)sy(s,a,l.child,u,f,g,!1),dd(a,s,f,w,g);else if(32&I){const M=Y_(l,u);let O;for(;O=M();)dd(a,s,f,O,g);dd(a,s,f,w,g)}else 16&I?oy(s,a,u,l,f,g):dd(a,s,f,w,g);l=v?l.projectionNext:l.next}}function sg(s,a,l,u,f,g){sy(l,u,s.firstChild,a,f,g,!1)}function oy(s,a,l,u,f,g){const v=l[16],I=v[6].projection[u.projection];if(Array.isArray(I))for(let M=0;M<I.length;M++)dd(a,s,f,I[M],g);else sy(s,a,I,v[3],f,g,!0)}function IS(s,a,l){s.setAttribute(a,"style",l)}function l0(s,a,l){""===l?s.removeAttribute(a,"class"):s.setAttribute(a,"class",l)}function DS(s,a,l){let u=s.length;for(;;){const f=s.indexOf(a,l);if(-1===f)return f;if(0===f||s.charCodeAt(f-1)<=32){const g=a.length;if(f+g===u||s.charCodeAt(f+g)<=32)return f}l=f+1}}const TS="ng-template";function RP(s,a,l){let u=0;for(;u<s.length;){let f=s[u++];if(l&&"class"===f){if(f=s[u],-1!==DS(f.toLowerCase(),a,0))return!0}else if(1===f){for(;u<s.length&&"string"==typeof(f=s[u++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function SS(s){return 4===s.type&&s.value!==TS}function kP(s,a,l){return a===(4!==s.type||l?s.value:TS)}function OP(s,a,l){let u=4;const f=s.attrs||[],g=function FP(s){for(let a=0;a<s.length;a++)if($l(s[a]))return a;return s.length}(f);let v=!1;for(let w=0;w<a.length;w++){const I=a[w];if("number"!=typeof I){if(!v)if(4&u){if(u=2|1&u,""!==I&&!kP(s,I,l)||""===I&&1===a.length){if(Ca(u))return!1;v=!0}}else{const M=8&u?I:a[++w];if(8&u&&null!==s.attrs){if(!RP(s.attrs,M,l)){if(Ca(u))return!1;v=!0}continue}const V=NP(8&u?"class":I,f,SS(s),l);if(-1===V){if(Ca(u))return!1;v=!0;continue}if(""!==M){let X;X=V>g?"":f[V+1].toLowerCase();const oe=8&u?X:null;if(oe&&-1!==DS(oe,M,0)||2&u&&M!==X){if(Ca(u))return!1;v=!0}}}}else{if(!v&&!Ca(u)&&!Ca(I))return!1;if(v&&Ca(I))continue;v=!1,u=I|1&u}}return Ca(u)||v}function Ca(s){return 0==(1&s)}function NP(s,a,l,u){if(null===a)return-1;let f=0;if(u||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===s)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function LP(s,a){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const u=s[l];if("number"==typeof u)return-1;if(u===a)return l;l++}return-1}(a,s)}function AS(s,a,l=!1){for(let u=0;u<a.length;u++)if(OP(s,a[u],l))return!0;return!1}function VP(s,a){e:for(let l=0;l<a.length;l++){const u=a[l];if(s.length===u.length){for(let f=0;f<s.length;f++)if(s[f]!==u[f])continue e;return!0}}return!1}function MS(s,a){return s?":not("+a.trim()+")":a}function BP(s){let a=s[0],l=1,u=2,f="",g=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&u){const w=s[++l];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&u?f+="."+v:4&u&&(f+=" "+v);else""!==f&&!Ca(v)&&(a+=MS(g,f),f=""),u=v,g=g||!Ca(u);l++}return""!==f&&(a+=MS(g,f)),a}const zt={};function xS(s){RS(Kt(),ke(),Tr()+s,!1)}function RS(s,a,l,u){if(!u)if(3==(3&a[2])){const g=s.preOrderCheckHooks;null!==g&&Sh(a,g,l)}else{const g=s.preOrderHooks;null!==g&&jl(a,g,0,l)}Qr(l)}function PS(s,a=null,l=null,u){const f=FS(s,a,l,u);return f.resolveInjectorInitializers(),f}function FS(s,a=null,l=null,u,f=new Set){const g=[l||Ot,GT(s)];return u=u||("object"==typeof s?void 0:ge(s)),new qT(g,a||Wp(),u||null,f)}let hd=(()=>{class s{static create(l,u){if(Array.isArray(l))return PS({name:""},u,l,"");{const f=l.name??"";return PS({name:f},l.parent,l.providers,f)}}}return s.THROW_IF_NOT_FOUND=xs,s.NULL=new Mw,s.\u0275prov=rn({token:s,providedIn:"any",factory:()=>Hn(I_)}),s.__NG_ELEMENT_ID__=-1,s})();function ef(s,a=yt.Default){const l=ke();return null===l?Hn(s,a):is(Nn(),l,re(s),a)}function jS(){throw new Error("invalid")}function ly(s,a){return s<<17|a<<2}function Ia(s){return s>>17&32767}function p0(s){return 2|s}function sc(s){return(131068&s)>>2}function g0(s,a){return-131069&s|a<<2}function m0(s){return 1|s}function C0(s,a){const l=s.contentQueries;if(null!==l)for(let u=0;u<l.length;u+=2){const f=l[u],g=l[u+1];if(-1!==g){const v=s.data[g];So(f),v.contentQueries(2,a[g],g)}}}function fy(s,a,l,u,f,g,v,w,I,M,O){const V=a.blueprint.slice();return V[0]=f,V[2]=76|u,(null!==O||s&&1024&s[2])&&(V[2]|=1024),vs(V),V[3]=V[15]=s,V[8]=l,V[10]=v||s&&s[10],V[11]=w||s&&s[11],V[12]=I||s&&s[12]||null,V[9]=M||s&&s[9]||null,V[6]=g,V[20]=function cS(){return lS++}(),V[21]=O,V[16]=2==a.type?s[16]:V,V}function iu(s,a,l,u,f){let g=s.data[a];if(null===g)g=function ac(s,a,l,u,f){const g=Pl(),v=Io(),I=s.data[a]=function _F(s,a,l,u,f,g){return{type:l,index:u,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,u,f);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,a,l,u,f),function Nu(){return lt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=u,g.attrs=f;const v=function ws(){const s=lt.lFrame,a=s.currentTNode;return s.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return rs(g,!0),g}function gd(s,a,l,u){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(u),s.blueprint.push(u),s.data.push(null);return f}function lg(s,a,l){Vc(a);try{const u=s.viewQuery;null!==u&&_d(1,u,l);const f=s.template;null!==f&&py(s,a,f,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&C0(s,a),s.staticViewQueries&&_d(2,s.viewQuery,l);const g=s.components;null!==g&&function I0(s,a){for(let l=0;l<a.length;l++)P0(s,a[l])}(a,g)}catch(u){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),u}finally{a[2]&=-5,Bl()}}function tf(s,a,l,u){const f=a[2];if(128!=(128&f)){Vc(a);try{vs(a),function Fc(s){return lt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&py(s,a,l,2,u);const v=3==(3&f);if(v){const M=s.preOrderCheckHooks;null!==M&&Sh(a,M,null)}else{const M=s.preOrderHooks;null!==M&&jl(a,M,0,null),Hu(a,0)}if(function N0(s){for(let a=Z_(s);null!==a;a=Q_(a)){if(!a[2])continue;const l=a[9];for(let u=0;u<l.length;u++){const f=l[u],g=f[3];0==(512&f[2])&&oa(g,1),f[2]|=512}}}(a),function O0(s){for(let a=Z_(s);null!==a;a=Q_(a))for(let l=10;l<a.length;l++){const u=a[l],f=u[1];Qs(u)&&tf(f,u,f.template,u[8])}}(a),null!==s.contentQueries&&C0(s,a),v){const M=s.contentCheckHooks;null!==M&&Sh(a,M)}else{const M=s.contentHooks;null!==M&&jl(a,M,1),Hu(a,1)}!function E0(s,a){const l=s.hostBindingOpCodes;if(null!==l)try{for(let u=0;u<l.length;u++){const f=l[u];if(f<0)Qr(~f);else{const g=f,v=l[++u],w=l[++u];Ll(v,g),w(2,a[g])}}}finally{Qr(-1)}}(s,a);const w=s.components;null!==w&&function eA(s,a){for(let l=0;l<a.length;l++)pA(s,a[l])}(a,w);const I=s.viewQuery;if(null!==I&&_d(2,I,u),v){const M=s.viewCheckHooks;null!==M&&Sh(a,M)}else{const M=s.viewHooks;null!==M&&jl(a,M,2),Hu(a,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,oa(a[3],-1))}finally{Bl()}}}function tA(s,a,l,u){const f=a[10],v=sa(a);try{!v&&f.begin&&f.begin(),v&&lg(s,a,u),tf(s,a,l,u)}finally{!v&&f.end&&f.end()}}function py(s,a,l,u,f){const g=Tr(),v=2&u;try{Qr(-1),v&&a.length>22&&RS(s,a,22,!1),l(u,f)}finally{Qr(g)}}function nA(s,a,l){if(Mc(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function cg(s,a,l){!bs()||(function cA(s,a,l,u){const f=l.directiveStart,g=l.directiveEnd;s.firstCreatePass||Sr(l,a),bi(u,a);const v=l.initialInputs;for(let w=f;w<g;w++){const I=s.data[w],M=si(I);M&&yy(a,l,I);const O=no(a,s,w,l);bi(O,a),null!==v&&bF(0,w-f,O,I,0,v),M&&(gr(l.index,a)[8]=O)}}(s,a,l,pr(l,a)),128==(128&l.flags)&&function uA(s,a,l){const u=l.directiveStart,f=l.directiveEnd,g=l.index,v=function Lc(){return lt.lFrame.currentDirectiveIndex}();try{Qr(g);for(let w=u;w<f;w++){const I=s.data[w],M=a[w];Vl(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&A0(I,M)}}finally{Qr(-1),Vl(v)}}(s,a,l))}function D0(s,a,l=pr){const u=a.localNames;if(null!==u){let f=a.index+1;for(let g=0;g<u.length;g+=2){const v=u[g+1],w=-1===v?l(a,s):s[v];s[f++]=w}}}function rA(s){const a=s.tView;return null===a||a.incompleteFirstPass?s.tView=ug(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):a}function ug(s,a,l,u,f,g,v,w,I,M){const O=22+u,V=O+f,X=function pF(s,a){const l=[];for(let u=0;u<a;u++)l.push(u<s?null:zt);return l}(O,V),oe="function"==typeof M?M():M;return X[1]={type:s,blueprint:X,template:l,queries:null,viewQuery:w,declTNode:a,data:X.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:oe,incompleteFirstPass:!1}}function T0(s,a,l,u){const f=wy(a);null===l?f.push(u):(f.push(l),s.firstCreatePass&&hg(s).push(u,f.length-1))}function iA(s,a,l){for(let u in s)if(s.hasOwnProperty(u)){const f=s[u];(l=null===l?{}:l).hasOwnProperty(u)?l[u].push(a,f):l[u]=[a,f]}return l}function sA(s,a){const u=a.directiveEnd,f=s.data,g=a.attrs,v=[];let w=null,I=null;for(let M=a.directiveStart;M<u;M++){const O=f[M],V=O.inputs,X=null===g||SS(a)?null:wF(V,g);v.push(X),w=iA(V,M,w),I=iA(O.outputs,M,I)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=I}function oo(s,a,l,u,f,g,v,w){const I=pr(a,l);let O,M=a.inputs;!w&&null!=M&&(O=M[u])?(Cy(s,l,O,u,f),vo(a)&&oA(l,a.index)):3&a.type&&(u=function yF(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(u),f=null!=v?v(f,a.value||"",u):f,g.setProperty(I,u,f))}function oA(s,a){const l=gr(a,s);16&l[2]||(l[2]|=32)}function my(s,a,l,u){let f=!1;if(bs()){const g=function M0(s,a,l){const u=s.directiveRegistry;let f=null;if(u)for(let g=0;g<u.length;g++){const v=u[g];AS(l,v.selectors,!1)&&(f||(f=[]),Qa(Sr(l,a),s,v.type),si(v)?(_y(s,l),f.unshift(v)):f.push(v))}return f}(s,a,l),v=null===u?null:{"":-1};if(null!==g){f=!0,x0(l,s.data.length,g.length);for(let O=0;O<g.length;O++){const V=g[O];V.providersResolver&&V.providersResolver(V)}let w=!1,I=!1,M=gd(s,a,g.length,null);for(let O=0;O<g.length;O++){const V=g[O];l.mergedAttrs=Uc(l.mergedAttrs,V.hostAttrs),R0(s,l,a,M,V),hA(M,V,v),null!==V.contentQueries&&(l.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(l.flags|=128);const X=V.type.prototype;!w&&(X.ngOnChanges||X.ngOnInit||X.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),w=!0),!I&&(X.ngOnChanges||X.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),I=!0),M++}sA(s,l)}v&&function dA(s,a,l){if(a){const u=s.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Se(-301,!1);u.push(a[f],g)}}}(l,u,v)}return l.mergedAttrs=Uc(l.mergedAttrs,l.attrs),f}function S0(s,a,l,u,f,g){const v=g.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const I=~a.index;(function lA(s){let a=s.length;for(;a>0;){const l=s[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(u,f,v)}}function A0(s,a){null!==s.hostBindings&&s.hostBindings(1,a)}function _y(s,a){a.flags|=2,(s.components||(s.components=[])).push(a.index)}function hA(s,a,l){if(l){if(a.exportAs)for(let u=0;u<a.exportAs.length;u++)l[a.exportAs[u]]=s;si(a)&&(l[""]=s)}}function x0(s,a,l){s.flags|=1,s.directiveStart=a,s.directiveEnd=a+l,s.providerIndexes=a}function R0(s,a,l,u,f){s.data[u]=f;const g=f.factory||(f.factory=Fi(f.type)),v=new Ds(g,si(f),ef);s.blueprint[u]=v,l[u]=v,S0(s,a,0,u,gd(s,l,f.hostVars,zt),f)}function yy(s,a,l){const u=pr(a,s),f=rA(l),g=s[10],v=dg(s,fy(s,f,null,l.onPush?32:16,u,a,g,g.createRenderer(u,l),null,null,null));s[a.index]=v}function pl(s,a,l,u,f,g){const v=pr(s,a);!function k0(s,a,l,u,f,g,v){if(null==g)s.removeAttribute(a,f,l);else{const w=null==v?De(g):v(g,u||"",f);s.setAttribute(a,f,w,l)}}(a[11],v,g,s.value,l,u,f)}function bF(s,a,l,u,f,g){const v=g[a];if(null!==v){const w=u.setInput;for(let I=0;I<v.length;){const M=v[I++],O=v[I++],V=v[I++];null!==w?u.setInput(l,V,M,O):l[O]=V}}}function wF(s,a){let l=null,u=0;for(;u<a.length;){const f=a[u];if(0!==f)if(5!==f){if("number"==typeof f)break;s.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,s[f],a[u+1])),u+=2}else u+=2;else u+=4}return l}function fA(s,a,l,u){return new Array(s,!0,!1,a,null,0,u,l,null,null)}function pA(s,a){const l=gr(a,s);if(Qs(l)){const u=l[1];48&l[2]?tf(u,l,u.template,l[8]):l[5]>0&&vy(l)}}function vy(s){for(let u=Z_(s);null!==u;u=Q_(u))for(let f=10;f<u.length;f++){const g=u[f];if(512&g[2]){const v=g[1];tf(v,g,v.template,g[8])}else g[5]>0&&vy(g)}const l=s[1].components;if(null!==l)for(let u=0;u<l.length;u++){const f=gr(l[u],s);Qs(f)&&f[5]>0&&vy(f)}}function P0(s,a){const l=gr(a,s),u=l[1];(function md(s,a){for(let l=a.length;l<s.blueprint.length;l++)a.push(s.blueprint[l])})(u,l),lg(u,l,l[8])}function dg(s,a){return s[13]?s[14][4]=a:s[13]=a,s[14]=a,a}function F0(s){for(;s;){s[2]|=32;const a=ud(s);if(Al(s)&&!a)return s;s=a}return null}function _A(s){!function mA(s){for(let a=0;a<s.components.length;a++){const l=s.components[a],u=G_(l);if(null!==u){const f=u[1];tA(f,u,f.template,l)}}}(s[8])}function _d(s,a,l){So(0),a(s,l)}const V0=(()=>Promise.resolve(null))();function wy(s){return s[7]||(s[7]=[])}function hg(s){return s.cleanup||(s.cleanup=[])}function Ey(s,a,l){return(null===s||si(s))&&(l=function Oc(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(l[a.index])),l[11]}function B0(s,a){const l=s[9],u=l?l.get(cd,null):null;u&&u.handleError(a)}function Cy(s,a,l,u,f){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],I=a[v],M=s.data[v];null!==M.setInput?M.setInput(I,f,u,w):I[w]=f}}function fg(s,a,l){let u=l?s.styles:null,f=l?s.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?f=Ce(f,w):2==g&&(u=Ce(u,w+": "+a[++v]+";"))}l?s.styles=u:s.stylesWithoutHost=u,l?s.classes=f:s.classesWithoutHost=f}function pg(s,a,l,u,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&u.push(Bn(g)),Wr(g))for(let w=10;w<g.length;w++){const I=g[w],M=I[1].firstChild;null!==M&&pg(I[1],I,M,u)}const v=l.type;if(8&v)pg(s,a,l.child,u);else if(32&v){const w=Y_(l,a);let I;for(;I=w();)u.push(I)}else if(16&v){const w=CS(a,l);if(Array.isArray(w))u.push(...w);else{const I=ud(a[16]);pg(I[1],I,w,u,!0)}}l=f?l.projectionNext:l.next}return u}class lc{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return pg(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(Wr(a)){const l=a[8],u=l?l.indexOf(this):-1;u>-1&&(e0(a,u),fa(l,u))}this._attachedToViewContainer=!1}ru(this._lView[1],this._lView)}onDestroy(a){T0(this._lView[1],this._lView,null,a)}markForCheck(){F0(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function L0(s,a,l){const u=a[10];u.begin&&u.begin();try{tf(s,a,s.template,l)}catch(f){throw B0(a,f),f}finally{u.end&&u.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function TP(s,a){sg(s,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Se(902,!1);this._appRef=a}}class U0 extends lc{constructor(a){super(a),this._view=a}detectChanges(){_A(this._view)}checkNoChanges(){}get context(){return null}}class Iy extends eu{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=$(a);return new ml(l,this.ngModule)}}function H0(s){const a=[];for(let l in s)s.hasOwnProperty(l)&&a.push({propName:s[l],templateName:l});return a}class j0{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,u){const f=this.injector.get(a,tu,u);return f!==tu||l===tu?f:this.parentInjector.get(a,l,u)}}class ml extends Ow{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function UP(s){return s.map(BP).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return H0(this.componentDef.inputs)}get outputs(){return H0(this.componentDef.outputs)}create(a,l,u,f){let g=(f=f||this.ngModule)instanceof Jc?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new j0(a,g):a,w=v.get(Wh,null);if(null===w)throw new Se(407,!1);const I=v.get(Yp,null),M=w.createRenderer(null,this.componentDef),O=this.componentDef.selectors[0][0]||"div",V=u?function mF(s,a,l){return s.selectRootElement(a,l===Yt.ShadowDom)}(M,u,this.componentDef.encapsulation):ey(w.createRenderer(null,this.componentDef),O,function yA(s){const a=s.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(O)),X=this.componentDef.onPush?288:272,oe=function Dy(s,a){return{components:[],scheduler:s||qw,clean:V0,playerHandler:a||null,flags:0}}(),xe=ug(0,null,null,1,0,null,null,null,null,null),$e=fy(null,xe,oe,X,null,null,w,M,I,v,null);let Xe,ct;Vc($e);try{const xt=function IF(s,a,l,u,f,g){const v=l[1];l[22]=s;const I=iu(v,22,2,"#host",null),M=I.mergedAttrs=a.hostAttrs;null!==M&&(fg(I,M,!0),null!==s&&(Ka(f,s,M),null!==I.classes&&l0(f,s,I.classes),null!==I.styles&&IS(f,s,I.styles)));const O=u.createRenderer(s,a),V=fy(l,rA(a),null,a.onPush?32:16,l[22],I,u,O,g||null,null,null);return v.firstCreatePass&&(Qa(Sr(I,l),v,a.type),_y(v,I),x0(I,l.length,1)),dg(l,V),l[22]=V}(V,this.componentDef,$e,w,M);if(V)if(u)Ka(M,V,["ng-version",k_.full]);else{const{attrs:Be,classes:Ct}=function HP(s){const a=[],l=[];let u=1,f=2;for(;u<s.length;){let g=s[u];if("string"==typeof g)2===f?""!==g&&a.push(g,s[++u]):8===f&&l.push(g);else{if(!Ca(f))break;f=g}u++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);Be&&Ka(M,V,Be),Ct&&Ct.length>0&&l0(M,V,Ct.join(" "))}if(ct=wo(xe,22),void 0!==l){const Be=ct.projection=[];for(let Ct=0;Ct<this.ngContentSelectors.length;Ct++){const un=l[Ct];Be.push(null!=un?Array.from(un):null)}}Xe=function EA(s,a,l,u,f){const g=l[1],v=function aA(s,a,l){const u=Nn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),R0(s,u,a,gd(s,a,1,null),l),sA(s,u));const f=no(a,s,u.directiveStart,u);bi(f,a);const g=pr(u,a);return g&&bi(g,a),f}(g,l,a);if(u.components.push(v),s[8]=v,null!==f)for(const I of f)I(v,a);if(a.contentQueries){const I=Nn();a.contentQueries(1,v,I.directiveStart)}const w=Nn();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(Qr(w.index),S0(l[1],w,0,w.directiveStart,w.directiveEnd,a),A0(a,v)),v}(xt,this.componentDef,$e,oe,[gg]),lg(xe,$e,null)}finally{Bl()}return new wA(this.componentType,Xe,ld(ct,$e),$e,ct)}}class wA extends class XT{}{constructor(a,l,u,f,g){super(),this.location=u,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new U0(f),this.componentType=a}setInput(a,l){const u=this._tNode.inputs;let f;if(null!==u&&(f=u[a])){const g=this._rootLView;Cy(g[1],g,f,a,l),oA(g,this._tNode.index)}}get injector(){return new Vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function gg(){const s=Nn();Uu(ke()[1],s)}function z0(s){let a=function $0(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const u=[s];for(;a;){let f;if(si(s))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Se(903,!1);f=a.\u0275dir}if(f){if(l){u.push(f);const v=s;v.inputs=Ty(s.inputs),v.declaredInputs=Ty(s.declaredInputs),v.outputs=Ty(s.outputs);const w=f.hostBindings;w&&TA(s,w);const I=f.viewQuery,M=f.contentQueries;if(I&&mg(s,I),M&&DA(s,M),ce(s.inputs,f.inputs),ce(s.declaredInputs,f.declaredInputs),ce(s.outputs,f.outputs),si(f)&&f.data.animation){const O=s.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(s),w===z0&&(l=!1)}}a=Object.getPrototypeOf(a)}!function IA(s){let a=0,l=null;for(let u=s.length-1;u>=0;u--){const f=s[u];f.hostVars=a+=f.hostVars,f.hostAttrs=Uc(f.hostAttrs,l=Uc(l,f.hostAttrs))}}(u)}function Ty(s){return s===ur?{}:s===Ot?[]:s}function mg(s,a){const l=s.viewQuery;s.viewQuery=l?(u,f)=>{a(u,f),l(u,f)}:a}function DA(s,a){const l=s.contentQueries;s.contentQueries=l?(u,f,g)=>{a(u,f,g),l(u,f,g)}:a}function TA(s,a){const l=s.hostBindings;s.hostBindings=l?(u,f)=>{a(u,f),l(u,f)}:a}let _g=null;function su(){if(!_g){const s=Qe.Symbol;if(s&&s.iterator)_g=s.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const u=a[l];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(_g=u)}}}return _g}function yd(s){return!!Sy(s)&&(Array.isArray(s)||!(s instanceof Map)&&su()in s)}function Sy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Fs(s,a,l){return s[a]=l}function Br(s,a,l){return!Object.is(s[a],l)&&(s[a]=l,!0)}function G0(s,a,l,u){const f=ke();return Br(f,Cs(),a)&&(Kt(),pl(Pn(),f,s,a,l,u)),G0}function rf(s,a,l,u){return Br(s,Cs(),l)?a+De(l)+u:zt}function BA(s,a,l,u,f,g,v,w){const I=ke(),M=Kt(),O=s+22,V=M.firstCreatePass?function MF(s,a,l,u,f,g,v,w,I){const M=a.consts,O=iu(a,s,4,v||null,Li(M,w));my(a,l,O,Li(M,I)),Uu(a,O);const V=O.tViews=ug(2,O,u,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,O),V.queries=a.queries.embeddedTView(O)),O}(O,M,I,a,l,u,f,g,v):M.data[O];rs(V,!1);const X=I[11].createComment("");ny(M,I,X,V),bi(X,I),dg(I,I[O]=fA(X,I,X,V)),ea(V)&&cg(M,I,V),null!=v&&D0(I,V,w)}function cf(s,a,l){const u=ke();return Br(u,Cs(),a)&&oo(Kt(),Pn(),u,s,a,u[11],l,!1),cf}function uf(s,a,l,u,f){const v=f?"class":"style";Cy(s,l,a.inputs[v],v,u)}function vg(s,a,l,u){const f=ke(),g=Kt(),v=22+s,w=f[11],I=f[v]=ey(w,a,function Hl(){return lt.lFrame.currentNamespace}()),M=g.firstCreatePass?function W0(s,a,l,u,f,g,v){const w=a.consts,M=iu(a,s,2,f,Li(w,g));return my(a,l,M,Li(w,v)),null!==M.attrs&&fg(M,M.attrs,!1),null!==M.mergedAttrs&&fg(M,M.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,M),M}(v,g,f,0,a,l,u):g.data[v];rs(M,!0);const O=M.mergedAttrs;null!==O&&Ka(w,I,O);const V=M.classes;null!==V&&l0(w,I,V);const X=M.styles;return null!==X&&IS(w,I,X),64!=(64&M.flags)&&ny(g,f,I,M),0===function ku(){return lt.lFrame.elementDepthCount}()&&bi(I,f),function ja(){lt.lFrame.elementDepthCount++}(),ea(M)&&(cg(g,f,M),nA(g,M,f)),null!==u&&D0(f,M),vg}function Cd(){let s=Nn();Io()?za():(s=s.parent,rs(s,!1));const a=s;!function $a(){lt.lFrame.elementDepthCount--}();const l=Kt();return l.firstCreatePass&&(Uu(l,s),Mc(s)&&l.queries.elementEnd(s)),null!=a.classesWithoutHost&&function $u(s){return 0!=(16&s.flags)}(a)&&uf(l,a,ke(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Op(s){return 0!=(32&s.flags)}(a)&&uf(l,a,ke(),a.stylesWithoutHost,!1),Cd}function q0(s,a,l,u){return vg(s,a,l,u),Cd(),q0}function Ry(s,a,l){const u=ke(),f=Kt(),g=s+22,v=f.firstCreatePass?function UA(s,a,l,u,f){const g=a.consts,v=Li(g,u),w=iu(a,s,8,"ng-container",v);return null!==v&&fg(w,v,!0),my(a,l,w,Li(g,f)),null!==a.queries&&a.queries.elementStart(a,w),w}(g,f,u,a,l):f.data[g];rs(v,!0);const w=u[g]=u[11].createComment("");return ny(f,u,w,v),bi(w,u),ea(v)&&(cg(f,u,v),nA(f,v,u)),null!=l&&D0(u,v),Ry}function ky(){let s=Nn();const a=Kt();return Io()?za():(s=s.parent,rs(s,!1)),a.firstCreatePass&&(Uu(a,s),Mc(s)&&a.queries.elementEnd(s)),ky}function bg(){return ke()}function K0(s){return!!s&&"function"==typeof s.then}function df(s){return!!s&&"function"==typeof s.subscribe}const jA=df;function Id(s,a,l,u){const f=ke(),g=Kt(),v=Nn();return zA(g,f,f[11],v,s,a,0,u),Id}function wg(s,a){const l=Nn(),u=ke(),f=Kt();return zA(f,u,Ey(Xs(f.data),l,u),l,s,a),wg}function zA(s,a,l,u,f,g,v,w){const I=ea(u),O=s.firstCreatePass&&hg(s),V=a[8],X=wy(a);let oe=!0;if(3&u.type||w){const Xe=pr(u,a),ct=w?w(Xe):Xe,xt=X.length,Be=w?un=>w(Bn(un[u.index])):u.index;let Ct=null;if(!w&&I&&(Ct=function $A(s,a,l,u){const f=s.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===u){const w=a[7],I=f[g+2];return w.length>I?w[I]:null}"string"==typeof v&&(g+=2)}return null}(s,a,f,u.index)),null!==Ct)(Ct.__ngLastListenerFn__||Ct).__ngNextListenerFn__=g,Ct.__ngLastListenerFn__=g,oe=!1;else{g=Oy(u,a,V,g,!1);const un=l.listen(ct,f,g);X.push(g,un),O&&O.push(f,Be,xt,xt+1)}}else g=Oy(u,a,V,g,!1);const xe=u.outputs;let $e;if(oe&&null!==xe&&($e=xe[f])){const Xe=$e.length;if(Xe)for(let ct=0;ct<Xe;ct+=2){const qn=a[$e[ct]][$e[ct+1]].subscribe(g),uo=X.length;X.push(g,qn),O&&O.push(f,u.index,uo,-(uo+1))}}}function Y0(s,a,l,u){try{return!1!==l(u)}catch(f){return B0(s,f),!1}}function Oy(s,a,l,u,f){return function g(v){if(v===Function)return u;F0(2&s.flags?gr(s.index,a):a);let I=Y0(a,0,u,v),M=g.__ngNextListenerFn__;for(;M;)I=Y0(a,0,M,v)&&I,M=M.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Eg(s=1){return function Ul(s){return(lt.lFrame.contextLView=function Wa(s,a){for(;s>0;)a=a[15],s--;return a}(s,lt.lFrame.contextLView))[8]}(s)}function Z0(s,a){let l=null;const u=function PP(s){const a=s.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(s);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===u?AS(s,g,!0):VP(u,g))return f}else l=f}return l}function Q0(s){const a=ke()[16][6];if(!a.projection){const u=a.projection=io(s?s.length:1,null),f=u.slice();let g=a.child;for(;null!==g;){const v=s?Z0(g,s):0;null!==v&&(f[v]?f[v].projectionNext=g:u[v]=g,f[v]=g),g=g.next}}}function X0(s,a=0,l){const u=ke(),f=Kt(),g=iu(f,22+s,16,null,l||null);null===g.projection&&(g.projection=a),za(),64!=(64&g.flags)&&function AP(s,a,l){oy(a[11],0,a,l,n0(s,l,a),rg(l.parent||a[6],l,a))}(f,u,g)}function Py(s,a,l,u,f){const g=ke(),v=rf(g,a,l,u);return v!==zt&&oo(Kt(),Pn(),g,s,v,g[11],f,!1),Py}function rE(s,a,l,u,f){const g=s[l+1],v=null===a;let w=u?Ia(g):sc(g),I=!1;for(;0!==w&&(!1===I||v);){const O=s[w+1];au(s[w],a)&&(I=!0,s[w+1]=u?m0(O):p0(O)),w=u?Ia(O):sc(O)}I&&(s[l+1]=u?p0(g):m0(g))}function au(s,a){return null===s||null==a||(Array.isArray(s)?s[1]:s)===a||!(!Array.isArray(s)||"string"!=typeof a)&&Fo(s,a)>=0}function aE(s,a){return function Ls(s,a,l,u){const f=ke(),g=Kt(),v=function Is(s){const a=lt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+s,l}(2);g.firstUpdatePass&&function cE(s,a,l,u){const f=s.data;if(null===f[l+1]){const g=f[Tr()],v=function lE(s,a){return a>=s.expandoStartIndex}(s,l);(function iM(s,a){return 0!=(s.flags&(a?16:32))})(g,u)&&null===a&&!v&&(a=!1),a=function XA(s,a,l,u){const f=Xs(s);let g=u?a.residualClasses:a.residualStyles;if(null===f)0===(u?a.classBindings:a.styleBindings)&&(l=pf(l=ff(null,s,a,l,u),a.attrs,u),g=null);else{const v=a.directiveStylingLast;if(-1===v||s[v]!==f)if(l=ff(f,s,a,l,u),null===g){let I=function JA(s,a,l){const u=l?a.classBindings:a.styleBindings;if(0!==sc(u))return s[Ia(u)]}(s,a,u);void 0!==I&&Array.isArray(I)&&(I=ff(null,s,a,I[1],u),I=pf(I,a.attrs,u),function eM(s,a,l,u){s[Ia(l?a.classBindings:a.styleBindings)]=u}(s,a,u,I))}else g=function uE(s,a,l){let u;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)u=pf(u,s[g].hostAttrs,l);return pf(u,a.attrs,l)}(s,a,u)}return void 0!==g&&(u?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,u),function nE(s,a,l,u,f,g){let v=g?a.classBindings:a.styleBindings,w=Ia(v),I=sc(v);s[u]=l;let O,M=!1;if(Array.isArray(l)){const V=l;O=V[1],(null===O||Fo(V,O)>0)&&(M=!0)}else O=l;if(f)if(0!==I){const X=Ia(s[w+1]);s[u+1]=ly(X,w),0!==X&&(s[X+1]=g0(s[X+1],u)),s[w+1]=function oF(s,a){return 131071&s|a<<17}(s[w+1],u)}else s[u+1]=ly(w,0),0!==w&&(s[w+1]=g0(s[w+1],u)),w=u;else s[u+1]=ly(I,0),0===w?w=u:s[I+1]=g0(s[I+1],u),I=u;M&&(s[u+1]=p0(s[u+1])),rE(s,O,u,!0),rE(s,O,u,!1),function KA(s,a,l,u,f){const g=f?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof a&&Fo(g,a)>=0&&(l[u+1]=m0(l[u+1]))}(a,O,s,u,g),v=ly(w,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,u)}}(g,s,v,u),a!==zt&&Br(f,v,a)&&function nM(s,a,l,u,f,g,v,w){if(!(3&a.type))return;const I=s.data,M=I[w+1];Uy(function GS(s){return 1==(1&s)}(M)?rM(I,a,l,f,sc(M),v):void 0)||(Uy(g)||function zS(s){return 2==(2&s)}(M)&&(g=rM(I,null,l,f,w,v)),function xP(s,a,l,u,f){if(a)f?s.addClass(l,u):s.removeClass(l,u);else{let g=-1===u.indexOf("-")?void 0:wa.DashCase;null==f?s.removeStyle(l,u,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=wa.Important),s.setStyle(l,u,f,g))}}(u,v,Ha(Tr(),l),f,g))}(g,g.data[Tr()],f,f[11],s,f[v+1]=function hE(s,a){return null==s||("string"==typeof a?s+=a:"object"==typeof s&&(s=ge(Ns(s)))),s}(a,l),u,v)}(s,a,null,!0),aE}function ff(s,a,l,u,f){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=a[w],u=pf(u,g.hostAttrs,f),g!==s);)w++;return null!==s&&(l.directiveStylingLast=w),u}function pf(s,a,l){const u=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===u&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Un(s,v,!!l||a[++g]))}return void 0===s?null:s}function rM(s,a,l,u,f,g){const v=null===a;let w;for(;f>0;){const I=s[f],M=Array.isArray(I),O=M?I[1]:I,V=null===O;let X=l[f+1];X===zt&&(X=V?Ot:void 0);let oe=V?tl(X,u):O===u?X:void 0;if(M&&!Uy(oe)&&(oe=tl(I,u)),Uy(oe)&&(w=oe,v))return w;const xe=s[f+1];f=v?Ia(xe):sc(xe)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(w=tl(I,u))}return w}function Uy(s){return void 0!==s}function sM(s,a=""){const l=ke(),u=Kt(),f=s+22,g=u.firstCreatePass?iu(u,f,1,a,null):u.data[f],v=l[f]=function eg(s,a){return s.createText(a)}(l[11],a);ny(u,l,v,g),rs(g,!1)}function Hy(s){return Dg("",s,""),Hy}function Dg(s,a,l){const u=ke(),f=rf(u,s,a,l);return f!==zt&&function gl(s,a,l){const u=Ha(a,s);!function Xw(s,a,l){s.setValue(a,l)}(s[11],u,l)}(u,Tr(),f),Dg}function Ag(s,a,l){const u=ke();return Br(u,Cs(),a)&&oo(Kt(),Pn(),u,s,a,u[11],l,!0),Ag}function Gy(s,a,l){const u=ke();if(Br(u,Cs(),a)){const g=Kt(),v=Pn();oo(g,v,u,s,a,Ey(Xs(g.data),v,u),l,!0)}return Gy}const Dd=void 0;var e1=["en",[["a","p"],["AM","PM"],Dd],[["AM","PM"],Dd,Dd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dd,"{1} 'at' {0}",Dd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JF(s){const l=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===u?1:5}];let mf={};function wE(s){const a=function t1(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=fM(a);if(l)return l;const u=a.split("-")[0];if(l=fM(u),l)return l;if("en"===u)return e1;throw new Se(701,!1)}function hM(s){return wE(s)[Rt.PluralCase]}function fM(s){return s in mf||(mf[s]=Qe.ng&&Qe.ng.common&&Qe.ng.common.locales&&Qe.ng.common.locales[s]),mf[s]}var Rt=(()=>((Rt=Rt||{})[Rt.LocaleId=0]="LocaleId",Rt[Rt.DayPeriodsFormat=1]="DayPeriodsFormat",Rt[Rt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Rt[Rt.DaysFormat=3]="DaysFormat",Rt[Rt.DaysStandalone=4]="DaysStandalone",Rt[Rt.MonthsFormat=5]="MonthsFormat",Rt[Rt.MonthsStandalone=6]="MonthsStandalone",Rt[Rt.Eras=7]="Eras",Rt[Rt.FirstDayOfWeek=8]="FirstDayOfWeek",Rt[Rt.WeekendRange=9]="WeekendRange",Rt[Rt.DateFormat=10]="DateFormat",Rt[Rt.TimeFormat=11]="TimeFormat",Rt[Rt.DateTimeFormat=12]="DateTimeFormat",Rt[Rt.NumberSymbols=13]="NumberSymbols",Rt[Rt.NumberFormats=14]="NumberFormats",Rt[Rt.CurrencyCode=15]="CurrencyCode",Rt[Rt.CurrencySymbol=16]="CurrencySymbol",Rt[Rt.CurrencyName=17]="CurrencyName",Rt[Rt.Currencies=18]="Currencies",Rt[Rt.Directionality=19]="Directionality",Rt[Rt.PluralCase=20]="PluralCase",Rt[Rt.ExtraData=21]="ExtraData",Rt))();const _f="en-US";let Wy=_f;function di(s,a,l,u,f){if(s=re(s),Array.isArray(s))for(let g=0;g<s.length;g++)di(s[g],a,l,u,f);else{const g=Kt(),v=ke();let w=Bo(s)?s:re(s.provide),I=kw(s);const M=Nn(),O=1048575&M.providerIndexes,V=M.directiveStart,X=M.providerIndexes>>20;if(Bo(s)||!s.multi){const oe=new Ds(I,f,ef),xe=JE(w,a,f?O:O+X,V);-1===xe?(Qa(Sr(M,v),g,w),$o(g,s,a.length),a.push(w),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(oe),v.push(oe)):(l[xe]=oe,v[xe]=oe)}else{const oe=JE(w,a,O+X,V),xe=JE(w,a,O,O+X),$e=oe>=0&&l[oe],Xe=xe>=0&&l[xe];if(f&&!Xe||!f&&!$e){Qa(Sr(M,v),g,w);const ct=function lv(s,a,l,u,f){const g=new Ds(s,l,ef);return g.multi=[],g.index=a,g.componentProviders=0,ov(g,f,u&&!l),g}(f?eC:c1,l.length,f,u,I);!f&&Xe&&(l[xe].providerFactory=ct),$o(g,s,a.length,0),a.push(w),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),l.push(ct),v.push(ct)}else $o(g,s,oe>-1?oe:xe,ov(l[f?xe:oe],I,!f&&u));!f&&u&&Xe&&l[xe].componentProviders++}}}function $o(s,a,l,u){const f=Bo(a),g=function zh(s){return!!s.useClass}(a);if(f||g){const I=(g?re(a.useClass):a).prototype.ngOnDestroy;if(I){const M=s.destroyHooks||(s.destroyHooks=[]);if(!f&&a.multi){const O=M.indexOf(l);-1===O?M.push(l,[u,I]):M[O+1].push(u,I)}else M.push(l,I)}}}function ov(s,a,l){return l&&s.componentProviders++,s.multi.push(a)-1}function JE(s,a,l,u){for(let f=l;f<u;f++)if(a[f]===s)return f;return-1}function c1(s,a,l,u){return av(this.multi,[])}function eC(s,a,l,u){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=no(l,l[1],this.providerFactory.index,u);g=w.slice(0,v),av(f,g);for(let I=v;I<w.length;I++)g.push(w[I])}else g=[],av(f,g);return g}function av(s,a){for(let l=0;l<s.length;l++)a.push((0,s[l])());return a}function Ef(s,a=[]){return l=>{l.providersResolver=(u,f)=>function XE(s,a,l){const u=Kt();if(u.firstCreatePass){const f=si(s);di(l,u.data,u.blueprint,f,!0),di(a,u.data,u.blueprint,f,!1)}}(u,f?f(s):s,a)}}class xd{}class Vg{}function SM(s,a){return new AM(s,a??null)}class AM extends xd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Iy(this);const u=We(a);this._bootstrapComponents=dl(u.bootstrap),this._r3Injector=FS(a,l,[{provide:xd,useValue:this},{provide:eu,useValue:this.componentFactoryResolver}],ge(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class tC extends Vg{constructor(a){super(),this.moduleType=a}create(a){return new AM(this.moduleType,a)}}class u1 extends xd{constructor(a,l,u){super(),this.componentFactoryResolver=new Iy(this),this.instance=null;const f=new qT([...a,{provide:xd,useValue:this},{provide:eu,useValue:this.componentFactoryResolver}],l||Wp(),u,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function nC(s,a,l=null){return new u1(s,a,l).injector}function Ug(s,a,l){const u=Yn()+s,f=ke();return f[u]===zt?Fs(f,u,l?a.call(l):a()):function yg(s,a){return s[a]}(f,u)}function xM(s,a,l,u){return function Df(s,a,l,u,f,g){const v=a+l;return Br(s,v,f)?Fs(s,v+1,g?u.call(g,f):u(f)):function uu(s,a){const l=s[a];return l===zt?void 0:l}(s,v+1)}(ke(),Yn(),s,a,l,u)}function yv(s){return a=>{setTimeout(s,void 0,a)}}const yl=class _v extends d.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,u){let f=a,g=l||(()=>null),v=u;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=yv(g),f&&(f=yv(f)),v&&(v=yv(v)));const w=super.subscribe({next:f,error:g,complete:v});return a instanceof H.w0&&a.add(w),w}};function FM(){return this._results[su()]()}class du{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=su(),u=du.prototype;u[l]||(u[l]=FM)}get changes(){return this._changes||(this._changes=new yl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const u=this;u.dirty=!1;const f=_r(a);(this._changesDetected=!function Zl(s,a,l){if(s.length!==a.length)return!1;for(let u=0;u<s.length;u++){let f=s[u],g=a[u];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(u._results,f,l))&&(u._results=f,u.length=f.length,u.last=f[this.length-1],u.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dc=(()=>{class s{}return s.__NG_ELEMENT_ID__=_C,s})();const gC=dc,mC=class extends gC{constructor(a,l,u){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=u}createEmbeddedView(a,l){const u=this._declarationTContainer.tViews,f=fy(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(u)),lg(u,f,a),new lc(f)}};function _C(){return vv(Nn(),ke())}function vv(s,a){return 4&s.type?new mC(a,s,ld(s,a)):null}let zg=(()=>{class s{}return s.__NG_ELEMENT_ID__=yC,s})();function yC(){return bC(Nn(),ke())}const m1=zg,LM=class extends m1{constructor(a,l,u){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=u}get element(){return ld(this._hostTNode,this._hostLView)}get injector(){return new Vi(this._hostTNode,this._hostLView)}get parentInjector(){const a=ql(this._hostTNode,this._hostLView);if(xh(a)){const l=Gl(a,this._hostLView),u=zl(a);return new Vi(l[1].data[u+8],l)}return new Vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=VM(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,u){let f,g;"number"==typeof u?f=u:null!=u&&(f=u.index,g=u.injector);const v=a.createEmbeddedView(l||{},g);return this.insert(v,f),v}createComponent(a,l,u,f,g){const v=a&&!function An(s){return"function"==typeof s}(a);let w;if(v)w=l;else{const V=l||{};w=V.index,u=V.injector,f=V.projectableNodes,g=V.environmentInjector||V.ngModuleRef}const I=v?a:new ml($(a)),M=u||this.parentInjector;if(!g&&null==I.ngModule){const X=(v?M:this.parentInjector).get(Jc,null);X&&(g=X)}const O=I.create(M,f,void 0,g);return this.insert(O.hostView,w),O}insert(a,l){const u=a._lView,f=u[1];if(function Eo(s){return Wr(s[3])}(u)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const V=u[3],X=new LM(V,V[6],V[3]);X.detach(X.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function bS(s,a,l,u){const f=10+u,g=l.length;u>0&&(l[f-1][4]=a),u<g-10?(a[4]=l[f],$c(l,10+u,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function ty(s,a){const l=s[9];a[16]!==a[3][3][16]&&(s[2]=!0),null===l?s[9]=[a]:l.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(s),a[2]|=64}(f,u,v,g);const w=iy(g,v),I=u[11],M=ng(I,v[7]);return null!==M&&function vS(s,a,l,u,f,g){u[0]=f,u[6]=a,sg(s,u,l,1,f,g)}(f,v[6],I,u,M,w),a.attachToViewContainerRef(),$c(vC(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=VM(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),u=e0(this._lContainer,l);u&&(fa(vC(this._lContainer),l),ru(u[1],u))}detach(a){const l=this._adjustIndex(a,-1),u=e0(this._lContainer,l);return u&&null!=fa(vC(this._lContainer),l)?new lc(u):null}_adjustIndex(a,l=0){return a??this.length+l}};function VM(s){return s[8]}function vC(s){return s[8]||(s[8]=[])}function bC(s,a){let l;const u=a[s.index];if(Wr(u))l=u;else{let f;if(8&s.type)f=Bn(u);else{const g=a[11];f=g.createComment("");const v=pr(s,a);Ea(g,ng(g,v),f,function wS(s,a){return s.nextSibling(a)}(g,v),!1)}a[s.index]=l=fA(u,a,f,s),dg(a,l)}return new LM(l,s,a)}class Tf{constructor(a){this.queryList=a,this.matches=null}clone(){return new Tf(this.queryList)}setDirty(){this.queryList.setDirty()}}class bv{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const u=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<u;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new bv(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Yg(a,l).matches&&this.queries[l].setDirty()}}class EC{constructor(a,l,u=null){this.predicate=a,this.flags=l,this.read=u}}class Gg{constructor(a=[]){this.queries=a}elementStart(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let u=0;u<this.length;u++){const f=null!==l?l.length:0,g=this.getByIndex(u).embeddedTView(a,f);g&&(g.indexInDeclarationView=u,null!==l?l.push(g):l=[g])}return null!==l?new Gg(l):null}template(a,l){for(let u=0;u<this.queries.length;u++)this.queries[u].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class wv{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new wv(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let u=a.parent;for(;null!==u&&8&u.type&&u.index!==l;)u=u.parent;return l===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const u=this.metadata.predicate;if(Array.isArray(u))for(let f=0;f<u.length;f++){const g=u[f];this.matchTNodeWithReadOption(a,l,_1(l,g)),this.matchTNodeWithReadOption(a,l,to(l,a,g,!1,!1))}else u===dc?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,to(l,a,u,!1,!1))}matchTNodeWithReadOption(a,l,u){if(null!==u){const f=this.metadata.read;if(null!==f)if(f===Gh||f===zg||f===dc&&4&l.type)this.addMatch(l.index,-2);else{const g=to(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,u)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function _1(s,a){const l=s.localNames;if(null!==l)for(let u=0;u<l.length;u+=2)if(l[u]===a)return l[u+1];return null}function HM(s,a,l,u){return-1===l?function CC(s,a){return 11&s.type?ld(s,a):4&s.type?vv(s,a):null}(a,s):-2===l?function IC(s,a,l){return l===Gh?ld(a,s):l===dc?vv(a,s):l===zg?bC(a,s):void 0}(s,a,u):no(s,s[1],l,a)}function DC(s,a,l,u){const f=a[19].queries[u];if(null===f.matches){const g=s.data,v=l.matches,w=[];for(let I=0;I<v.length;I+=2){const M=v[I];w.push(M<0?null:HM(a,g[M],v[I+1],l.metadata.read))}f.matches=w}return f.matches}function Wg(s,a,l,u){const f=s.queries.getByIndex(l),g=f.matches;if(null!==g){const v=DC(s,a,f,l);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)u.push(v[w/2]);else{const M=g[w+1],O=a[-I];for(let V=10;V<O.length;V++){const X=O[V];X[17]===X[3]&&Wg(X[1],X,M,u)}if(null!==O[9]){const V=O[9];for(let X=0;X<V.length;X++){const oe=V[X];Wg(oe[1],oe,M,u)}}}}}return u}function Ev(s){const a=ke(),l=Kt(),u=Pu();So(u+1);const f=Yg(l,u);if(s.dirty&&sa(a)===(2==(2&f.metadata.flags))){if(null===f.matches)s.reset([]);else{const g=f.crossesNgTemplate?Wg(l,a,u,[]):DC(l,a,f,u);s.reset(g,JT),s.notifyOnChanges()}return!0}return!1}function TC(s,a,l){const u=Kt();u.firstCreatePass&&(Kg(u,new EC(s,a,l),-1),2==(2&a)&&(u.staticViewQueries=!0)),AC(u,ke(),a)}function Cv(s,a,l,u){const f=Kt();if(f.firstCreatePass){const g=Nn();Kg(f,new EC(a,l,u),g.index),function jM(s,a){const l=s.contentQueries||(s.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,a)}(f,s),2==(2&l)&&(f.staticContentQueries=!0)}AC(f,ke(),l)}function SC(){return function qg(s,a){return s[19].queries[a].queryList}(ke(),Pu())}function AC(s,a,l){const u=new du(4==(4&l));T0(s,a,u,u.destroy),null===a[19]&&(a[19]=new bv),a[19].queries.push(new Tf(u))}function Kg(s,a,l){null===s.queries&&(s.queries=new Gg),s.queries.track(new wv(a,l))}function Yg(s,a){return s.queries.getByIndex(a)}function co(s){const a=$(s)||z(s)||Ie(s);return null!==a&&a.standalone}function Jg(...s){}const WC=new Nt("Application Initializer");let em=(()=>{class s{constructor(l){this.appInits=l,this.resolve=Jg,this.reject=Jg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,f)=>{this.resolve=u,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(K0(g))l.push(g);else if(jA(g)){const v=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});l.push(v)}}Promise.all(l).then(()=>{u()}).catch(f=>{this.reject(f)}),0===l.length&&u(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Hn(WC,8))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const qC=new Nt("AppId",{providedIn:"root",factory:function KC(){return`${xv()}${xv()}${xv()}`}});function xv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const YC=new Nt("Platform Initializer"),rx=new Nt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),ix=new Nt("appBootstrapListener"),F1=new Nt("AnimationModuleType");let sx=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const kv=new Nt("LocaleId",{providedIn:"root",factory:()=>Jl(kv,yt.Optional|yt.SkipSelf)||function Rv(){return typeof $localize<"u"&&$localize.locale||_f}()}),L1=new Nt("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class B1{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Ov=(()=>{class s{compileModuleSync(l){return new tC(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const u=this.compileModuleSync(l),g=dl(We(l).declarations).reduce((v,w)=>{const I=$(w);return I&&v.push(new ml(I)),v},[]);return new B1(u,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const QC=(()=>Promise.resolve(0))();function Nv(s){typeof Zone>"u"?QC.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class cs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yl(!1),this.onMicrotaskEmpty=new yl(!1),this.onStable=new yl(!1),this.onError=new yl(!1),typeof Zone>"u")throw new Se(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!u&&l,f.shouldCoalesceRunChangeDetection=u,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function cx(){let s=Qe.requestAnimationFrame,a=Qe.cancelAnimationFrame;if(typeof Zone<"u"&&s&&a){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function dx(s){const a=()=>{!function XC(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Qe,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,JC(s),s.isCheckStableRunning=!0,tm(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),JC(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,u,f,g,v,w)=>{try{return hx(s),l.invokeTask(f,g,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&a(),Pv(s)}},onInvoke:(l,u,f,g,v,w,I)=>{try{return hx(s),l.invoke(f,g,v,w,I)}finally{s.shouldCoalesceRunChangeDetection&&a(),Pv(s)}},onHasTask:(l,u,f,g)=>{l.hasTask(f,g),u===f&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,JC(s),tm(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,u,f,g)=>(l.handleError(f,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!cs.isInAngularZone())throw new Se(909,!1)}static assertNotInAngularZone(){if(cs.isInAngularZone())throw new Se(909,!1)}run(a,l,u){return this._inner.run(a,l,u)}runTask(a,l,u,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,ux,Jg,Jg);try{return g.runTask(v,l,u)}finally{g.cancelTask(v)}}runGuarded(a,l,u){return this._inner.runGuarded(a,l,u)}runOutsideAngular(a){return this._outer.run(a)}}const ux={};function tm(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function JC(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function hx(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Pv(s){s._nesting--,tm(s)}class j1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yl,this.onMicrotaskEmpty=new yl,this.onStable=new yl,this.onError=new yl}run(a,l,u){return a.apply(l,u)}runGuarded(a,l,u){return a.apply(l,u)}runOutsideAngular(a){return a()}runTask(a,l,u,f){return a.apply(l,u)}}const eI=new Nt(""),tI=new Nt("");let Fv,fx=(()=>{class s{constructor(l,u,f){this._ngZone=l,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Fv||(function px(s){Fv=s}(f),f.addToWindow(u)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{cs.assertNotInAngularZone(),Nv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Nv(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(l)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,u,f){let g=-1;u&&u>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,u,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,u,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,u,f){return[]}}return s.\u0275fac=function(l){return new(l||s)(Hn(cs),Hn(nI),Hn(tI))},s.\u0275prov=rn({token:s,factory:s.\u0275fac}),s})(),nI=(()=>{class s{constructor(){this._applications=new Map}registerApplication(l,u){this._applications.set(l,u)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,u=!0){return Fv?.findTestabilityInTree(this,l,u)??null}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),hc=null;const cn=new Nt("AllowMultipleToken"),Sf=new Nt("PlatformDestroyListeners");class Wi{constructor(a,l){this.name=a,this.token=l}}function Aa(s,a,l=[]){const u=`Platform: ${a}`,f=new Nt(u);return(g=[])=>{let v=Fd();if(!v||v.injector.get(cn,!1)){const w=[...l,...g,{provide:f,useValue:!0}];s?s(w):function Af(s){if(hc&&!hc.get(cn,!1))throw new Se(400,!1);hc=s;const a=s.get(rm);(function ne(s){const a=s.get(YC,null);a&&a.forEach(l=>l())})(s)}(function nm(s=[],a){return hd.create({name:a,providers:[{provide:A_,useValue:"platform"},{provide:Sf,useValue:new Set([()=>hc=null])},...s]})}(w,u))}return function pt(s){const a=Fd();if(!a)throw new Se(401,!1);return a}()}}function Fd(){return hc?.get(rm)??null}let rm=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,u){const f=function gx(s,a){let l;return l="noop"===s?new j1:("zone.js"===s?void 0:s)||new cs(a),l}(u?.ngZone,function Ld(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(u)),g=[{provide:cs,useValue:f}];return f.run(()=>{const v=hd.create({providers:g,parent:this.injector,name:l.moduleType.name}),w=l.create(v),I=w.injector.get(cd,null);if(!I)throw new Se(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:O=>{I.handleError(O)}});w.onDestroy(()=>{om(this._modules,w),M.unsubscribe()})}),function im(s,a,l){try{const u=l();return K0(u)?u.catch(f=>{throw a.runOutsideAngular(()=>s.handleError(f)),f}):u}catch(u){throw a.runOutsideAngular(()=>s.handleError(u)),u}}(I,f,()=>{const M=w.injector.get(em);return M.runInitializers(),M.donePromise.then(()=>(function qy(s){Wt(s,"Expected localeId to be defined"),"string"==typeof s&&(Wy=s.toLowerCase().replace(/_/g,"-"))}(w.injector.get(kv,_f)||_f),this._moduleDoBootstrap(w),w))})})}bootstrapModule(l,u=[]){const f=rI({},u);return function $1(s,a,l){const u=new tC(l);return Promise.resolve(u)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const u=l.injector.get(sm);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>u.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Se(403,!1);l.instance.ngDoBootstrap(u)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Se(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const l=this._injector.get(Sf,null);l&&(l.forEach(u=>u()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Hn(hd))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function rI(s,a){return Array.isArray(a)?a.reduce(rI,s):{...s,...a}}let sm=(()=>{class s{constructor(l,u,f){this._zone=l,this._injector=u,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new N.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),v=new N.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{cs.assertNotInAngularZone(),Nv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{cs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ue.T)(g,v.pipe((0,fe.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,u){const f=l instanceof Ow;if(!this._injector.get(em).done)throw!f&&co(l),new Se(405,false);let v;v=f?l:this._injector.get(eu).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const w=function Ae(s){return s.isBoundToModule}(v)?void 0:this._injector.get(xd),M=v.create(hd.NULL,[],u||v.selector,w),O=M.location.nativeElement,V=M.injector.get(eI,null);return V?.registerApplication(O),M.onDestroy(()=>{this.detachView(M.hostView),om(this.components,M),V?.unregisterApplication(O)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new Se(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const u=l;this._views.push(u),u.attachToAppRef(this)}detachView(l){const u=l;om(this._views,u),u.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(ix,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>om(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new Se(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(l){return new(l||s)(Hn(cs),Hn(Jc),Hn(cd))},s.\u0275prov=rn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function om(s,a){const l=s.indexOf(a);l>-1&&s.splice(l,1)}let ei=!0,vl=!1;function mx(){return vl=!0,ei}function _x(){if(vl)throw new Error("Cannot enable prod mode after platform setup.");ei=!1}let sI=(()=>{class s{}return s.__NG_ELEMENT_ID__=Lv,s})();function Lv(s){return function lm(s,a,l){if(vo(s)&&!l){const u=gr(s.index,a);return new lc(u,u)}return 47&s.type?new lc(a[16],a):null}(Nn(),ke(),16==(16&s))}class dm{constructor(){}supports(a){return yd(a)}create(a){return new Ix(a)}}const Cx=(s,a)=>a;class Ix{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Cx}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,u=this._removalsHead,f=0,g=null;for(;l||u;){const v=!u||l&&l.currentIndex<mI(u,f,g)?l:u,w=mI(v,f,g),I=v.currentIndex;if(v===u)f--,u=u._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const M=w-f,O=I-f;if(M!=O){for(let X=0;X<M;X++){const oe=X<g.length?g[X]:g[X]=0,xe=oe+X;O<=xe&&xe<M&&(g[X]=oe+1)}g[v.previousIndex]=O-M}}w!==I&&a(v,w,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!yd(a))throw new Se(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,u=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),u=!0),l=l._next}else f=0,function xA(s,a){if(Array.isArray(s))for(let l=0;l<s.length;l++)a(s[l]);else{const l=s[su()]();let u;for(;!(u=l.next()).done;)a(u.value)}}(a,w=>{v=this._trackByFn(f,w),null!==l&&Object.is(l.trackById,v)?(u&&(l=this._verifyReinsertion(l,w,v,f)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,f),u=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,u,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(u,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new Hv(l,u),g,f),a}_verifyReinsertion(a,l,u,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,u),this._addToMoves(a,u),a}_moveAfter(a,l,u){return this._unlink(a),this._insertAfter(a,l,u),this._addToMoves(a,u),a}_addAfter(a,l,u){return this._insertAfter(a,l,u),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,u){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new gI),this._linkedRecords.put(a),a.currentIndex=u,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,u=a._next;return null===l?this._itHead=u:l._next=u,null===u?this._itTail=l:u._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gI),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Hv{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class pI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===l||l<=u.currentIndex)&&Object.is(u.trackById,a))return u;return null}remove(a){const l=a._prevDup,u=a._nextDup;return null===l?this._head=u:l._nextDup=u,null===u?this._tail=l:u._prevDup=l,null===this._head}}class gI{constructor(){this.map=new Map}put(a){const l=a.trackById;let u=this.map.get(l);u||(u=new pI,this.map.set(l,u)),u.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mI(s,a,l){const u=s.previousIndex;if(null===u)return u;let f=0;return l&&u<l.length&&(f=l[u]),u+a+f}class hi{constructor(){}supports(a){return a instanceof Map||Sy(a)}create(){return new xf}}class xf{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Sy(a)))throw new Se(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(u,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,u),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,u);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let u=l;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const u=a._prev;return l._next=a,l._prev=u,a._prev=l,u&&(u._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const u=new Dx(a);return this._records.set(a,u),u.currentValue=l,this._addToAdditions(u),u}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(u=>l(a[u],u))}}class Dx{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bd(){return new jv([new dm])}let jv=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(null!=u){const f=u.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||Bd()),deps:[[s,new qe,new he]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(null!=u)return u;throw new Se(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Bd}),s})();function Rf(){return new Ud([new hi])}let Ud=(()=>{class s{constructor(l){this.factories=l}static create(l,u){if(u){const f=u.factories.slice();l=l.concat(f)}return new s(l)}static extend(l){return{provide:s,useFactory:u=>s.create(l,u||Rf()),deps:[[s,new qe,new he]]}}find(l){const u=this.factories.find(f=>f.supports(l));if(u)return u;throw new Se(901,!1)}}return s.\u0275prov=rn({token:s,providedIn:"root",factory:Rf}),s})();const vI=Aa(null,"core",[]);let bI=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Hn(sm))},s.\u0275mod=Dt({type:s}),s.\u0275inj=sn({}),s})();function Tx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(gt,Oe,F)=>{F.d(Oe,{Z:()=>Se});var d=F(2090),H=F(4859),N=F(9681),ue=F(1877);class fe{constructor(De,_e){this._delegate=De,this.firebase=_e,(0,N._addComponent)(De,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=De.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this._delegate.automaticDataCollectionEnabled=De}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(De=>{this._delegate.checkDestroyed(),De()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(De,_e=N._DEFAULT_ENTRY_NAME){var rt;this._delegate.checkDestroyed();const et=this._delegate.container.getProvider(De);return!et.isInitialized()&&"EXPLICIT"===(null===(rt=et.getComponent())||void 0===rt?void 0:rt.instantiationMode)&&et.initialize(),et.getImmediate({identifier:_e})}_removeServiceInstance(De,_e=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(De).clearInstance(_e)}_addComponent(De){(0,N._addComponent)(this._delegate,De)}_addOrOverwriteComponent(De){(0,N._addOrOverwriteComponent)(this._delegate,De)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),K=function Ce(){const at=function ge(at){const De={},_e={__esModule:!0,initializeApp:function Ue(ae,ve={}){const Te=N.initializeApp(ae,ve);if((0,d.r3)(De,Te.name))return De[Te.name];const te=new at(Te,_e);return De[Te.name]=te,te},app:et,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function Me(ae){const ve=ae.name,Te=ve.replace("-compat","");if(N._registerComponent(ae)&&"PUBLIC"===ae.type){const te=(le=et())=>{if("function"!=typeof le[Te])throw ce.create("invalid-app-argument",{appName:ve});return le[Te]()};void 0!==ae.serviceProps&&(0,d.ZB)(te,ae.serviceProps),_e[Te]=te,at.prototype[Te]=function(...le){return this._getService.bind(this,ve).apply(this,ae.multipleInstances?le:[])}}return"PUBLIC"===ae.type?_e[Te]:null},removeApp:function rt(ae){delete De[ae]},useAsService:function Ye(ae,ve){return"serverAuth"===ve?null:ve},modularAPIs:N}};function et(ae){if(!(0,d.r3)(De,ae=ae||N._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:ae});return De[ae]}return _e.default=_e,Object.defineProperty(_e,"apps",{get:function Ne(){return Object.keys(De).map(ae=>De[ae])}}),et.App=at,_e}(fe);return at.INTERNAL=Object.assign(Object.assign({},at.INTERNAL),{createFirebaseNamespace:Ce,extendNamespace:function De(_e){(0,d.ZB)(at,_e)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),at}(),W=new ue.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const at=self.firebase.SDK_VERSION;at&&at.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Se=K;!function Ve(at){(0,N.registerVersion)("@firebase/app-compat","0.1.30",at)}()},9681:(gt,Oe,F)=>{F.r(Oe),F.d(Oe,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>mi,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>_n,_addOrOverwriteComponent:()=>rn,_apps:()=>mn,_clearComponents:()=>Oi,_components:()=>$n,_getProvider:()=>sn,_registerComponent:()=>qt,_removeServiceInstance:()=>Mn,deleteApp:()=>yt,getApp:()=>zn,getApps:()=>Qi,initializeApp:()=>Ni,onLog:()=>nn,registerVersion:()=>xn,setLogLevel:()=>lr});var d=F(5861),H=F(4859),N=F(1877),ue=F(2090),fe=F(8766);class ye{constructor(Y){this.container=Y}getPlatformInfoString(){return this.container.getProviders().map(Q=>{if(function ce(j){return"VERSION"===j.getComponent()?.type}(Q)){const Fe=Q.getImmediate();return`${Fe.library}/${Fe.version}`}return null}).filter(Q=>Q).join(" ")}}const ge="@firebase/app",K=new N.Yd("@firebase/app"),Wt="[DEFAULT]",Ze={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},mn=new Map,$n=new Map;function _n(j,Y){try{j.container.addComponent(Y)}catch(Q){K.debug(`Component ${Y.name} failed to register with FirebaseApp ${j.name}`,Q)}}function rn(j,Y){j.container.addOrOverwriteComponent(Y)}function qt(j){const Y=j.name;if($n.has(Y))return K.debug(`There were multiple attempts to register component ${Y}.`),!1;$n.set(Y,j);for(const Q of mn.values())_n(Q,j);return!0}function sn(j,Y){const Q=j.container.getProvider("heartbeat").getImmediate({optional:!0});return Q&&Q.triggerHeartbeat(),j.container.getProvider(Y)}function Mn(j,Y,Q=Wt){sn(j,Y).clearInstance(Q)}function Oi(){$n.clear()}const Vn=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class gs{constructor(Y,Q,Fe){this._isDeleted=!1,this._options=Object.assign({},Y),this._config=Object.assign({},Q),this._name=Q.name,this._automaticDataCollectionEnabled=Q.automaticDataCollectionEnabled,this._container=Fe,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Y){this.checkDestroyed(),this._automaticDataCollectionEnabled=Y}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Y){this._isDeleted=Y}checkDestroyed(){if(this.isDeleted)throw Vn.create("app-deleted",{appName:this._name})}}const mi="9.9.1";function Ni(j,Y={}){"object"!=typeof Y&&(Y={name:Y});const Q=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},Y),Fe=Q.name;if("string"!=typeof Fe||!Fe)throw Vn.create("bad-app-name",{appName:String(Fe)});const Ke=mn.get(Fe);if(Ke){if((0,ue.vZ)(j,Ke.options)&&(0,ue.vZ)(Q,Ke.config))return Ke;throw Vn.create("duplicate-app",{appName:Fe})}const Dt=new H.H0(Fe);for(const on of $n.values())Dt.addComponent(on);const fn=new gs(j,Q,Dt);return mn.set(Fe,fn),fn}function zn(j=Wt){const Y=mn.get(j);if(!Y)throw Vn.create("no-app",{appName:j});return Y}function Qi(){return Array.from(mn.values())}function yt(j){return zr.apply(this,arguments)}function zr(){return(zr=(0,d.Z)(function*(j){const Y=j.name;mn.has(Y)&&(mn.delete(Y),yield Promise.all(j.container.getProviders().map(Q=>Q.delete())),j.isDeleted=!0)})).apply(this,arguments)}function xn(j,Y,Q){var Fe;let Ke=null!==(Fe=Ze[j])&&void 0!==Fe?Fe:j;Q&&(Ke+=`-${Q}`);const Dt=Ke.match(/\s|\//),fn=Y.match(/\s|\//);if(Dt||fn){const on=[`Unable to register library "${Ke}" with version "${Y}":`];return Dt&&on.push(`library name "${Ke}" contains illegal characters (whitespace or "/")`),Dt&&fn&&on.push("and"),fn&&on.push(`version name "${Y}" contains illegal characters (whitespace or "/")`),void K.warn(on.join(" "))}qt(new H.wA(`${Ke}-version`,()=>({library:Ke,version:Y}),"VERSION"))}function nn(j,Y){if(null!==j&&"function"!=typeof j)throw Vn.create("invalid-log-argument");(0,N.Am)(j,Y)}function lr(j){(0,N.Ub)(j)}const Rn="firebase-heartbeat-store";let Cr=null;function zs(){return Cr||(Cr=(0,fe.X3)("firebase-heartbeat-database",1,{upgrade:(j,Y)=>{0===Y&&j.createObjectStore(Rn)}}).catch(j=>{throw Vn.create("storage-open",{originalErrorMessage:j.message})})),Cr}function Qe(){return(Qe=(0,d.Z)(function*(j){var Y;try{return(yield zs()).transaction(Rn).objectStore(Rn).get(ur(j))}catch(Q){throw Vn.create("storage-get",{originalErrorMessage:null===(Y=Q)||void 0===Y?void 0:Y.message})}})).apply(this,arguments)}function dt(j,Y){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,d.Z)(function*(j,Y){var Q;try{const Ke=(yield zs()).transaction(Rn,"readwrite");return yield Ke.objectStore(Rn).put(Y,ur(j)),Ke.done}catch(Fe){throw Vn.create("storage-set",{originalErrorMessage:null===(Q=Fe)||void 0===Q?void 0:Q.message})}})).apply(this,arguments)}function ur(j){return`${j.name}!${j.options.appId}`}class kn{constructor(Y){this.container=Y,this._heartbeatsCache=null;const Q=this.container.getProvider("app").getImmediate();this._storage=new er(Q),this._heartbeatsCachePromise=this._storage.read().then(Fe=>(this._heartbeatsCache=Fe,Fe))}triggerHeartbeat(){var Y=this;return(0,d.Z)(function*(){const Fe=Y.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ke=On();if(null===Y._heartbeatsCache&&(Y._heartbeatsCache=yield Y._heartbeatsCachePromise),Y._heartbeatsCache.lastSentHeartbeatDate!==Ke&&!Y._heartbeatsCache.heartbeats.some(Dt=>Dt.date===Ke))return Y._heartbeatsCache.heartbeats.push({date:Ke,agent:Fe}),Y._heartbeatsCache.heartbeats=Y._heartbeatsCache.heartbeats.filter(Dt=>{const fn=new Date(Dt.date).valueOf();return Date.now()-fn<=2592e6}),Y._storage.overwrite(Y._heartbeatsCache)})()}getHeartbeatsHeader(){var Y=this;return(0,d.Z)(function*(){if(null===Y._heartbeatsCache&&(yield Y._heartbeatsCachePromise),null===Y._heartbeatsCache||0===Y._heartbeatsCache.heartbeats.length)return"";const Q=On(),{heartbeatsToSend:Fe,unsentEntries:Ke}=function hn(j,Y=1024){const Q=[];let Fe=j.slice();for(const Ke of j){const Dt=Q.find(fn=>fn.agent===Ke.agent);if(Dt){if(Dt.dates.push(Ke.date),G(Q)>Y){Dt.dates.pop();break}}else if(Q.push({agent:Ke.agent,dates:[Ke.date]}),G(Q)>Y){Q.pop();break}Fe=Fe.slice(1)}return{heartbeatsToSend:Q,unsentEntries:Fe}}(Y._heartbeatsCache.heartbeats),Dt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Fe}));return Y._heartbeatsCache.lastSentHeartbeatDate=Q,Ke.length>0?(Y._heartbeatsCache.heartbeats=Ke,yield Y._storage.overwrite(Y._heartbeatsCache)):(Y._heartbeatsCache.heartbeats=[],Y._storage.overwrite(Y._heartbeatsCache)),Dt})()}}function On(){return(new Date).toISOString().substring(0,10)}class er{constructor(Y){this.app=Y,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,d.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Y=this;return(0,d.Z)(function*(){return(yield Y._canUseIndexedDBPromise)&&(yield function Yt(j){return Qe.apply(this,arguments)}(Y.app))||{heartbeats:[]}})()}overwrite(Y){var Q=this;return(0,d.Z)(function*(){var Fe;if(yield Q._canUseIndexedDBPromise){const Dt=yield Q.read();return dt(Q.app,{lastSentHeartbeatDate:null!==(Fe=Y.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Dt.lastSentHeartbeatDate,heartbeats:Y.heartbeats})}})()}add(Y){var Q=this;return(0,d.Z)(function*(){var Fe;if(yield Q._canUseIndexedDBPromise){const Dt=yield Q.read();return dt(Q.app,{lastSentHeartbeatDate:null!==(Fe=Y.lastSentHeartbeatDate)&&void 0!==Fe?Fe:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...Y.heartbeats]})}})()}}function G(j){return(0,ue.L)(JSON.stringify({version:2,heartbeats:j})).length}!function q(j){qt(new H.wA("platform-logger",Y=>new ye(Y),"PRIVATE")),qt(new H.wA("heartbeat",Y=>new kn(Y),"PRIVATE")),xn(ge,"0.7.29",j),xn(ge,"0.7.29","esm2017"),xn("fire-js","")}("")},4859:(gt,Oe,F)=>{F.d(Oe,{H0:()=>ge,wA:()=>N});var d=F(5861),H=F(2090);class N{constructor(K,W,re){this.name=K,this.instanceFactory=W,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(K){return this.instantiationMode=K,this}setMultipleInstances(K){return this.multipleInstances=K,this}setServiceProps(K){return this.serviceProps=K,this}setInstanceCreatedCallback(K){return this.onInstanceCreated=K,this}}const ue="[DEFAULT]";class fe{constructor(K,W){this.name=K,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(K){const W=this.normalizeInstanceIdentifier(K);if(!this.instancesDeferred.has(W)){const re=new H.BH;if(this.instancesDeferred.set(W,re),this.isInitialized(W)||this.shouldAutoInitialize())try{const Ge=this.getOrInitializeService({instanceIdentifier:W});Ge&&re.resolve(Ge)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(K){var W;const re=this.normalizeInstanceIdentifier(K?.identifier),Ge=null!==(W=K?.optional)&&void 0!==W&&W;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(Ge)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Ve){if(Ge)return null;throw Ve}}getComponent(){return this.component}setComponent(K){if(K.name!==this.name)throw Error(`Mismatching Component ${K.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=K,this.shouldAutoInitialize()){if(function ce(Ce){return"EAGER"===Ce.instantiationMode}(K))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[W,re]of this.instancesDeferred.entries()){const Ge=this.normalizeInstanceIdentifier(W);try{const Ve=this.getOrInitializeService({instanceIdentifier:Ge});re.resolve(Ve)}catch{}}}}clearInstance(K=ue){this.instancesDeferred.delete(K),this.instancesOptions.delete(K),this.instances.delete(K)}delete(){var K=this;return(0,d.Z)(function*(){const W=Array.from(K.instances.values());yield Promise.all([...W.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...W.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(K=ue){return this.instances.has(K)}getOptions(K=ue){return this.instancesOptions.get(K)||{}}initialize(K={}){const{options:W={}}=K,re=this.normalizeInstanceIdentifier(K.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ge=this.getOrInitializeService({instanceIdentifier:re,options:W});for(const[Ve,Se]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Ve)&&Se.resolve(Ge);return Ge}onInit(K,W){var re;const Ge=this.normalizeInstanceIdentifier(W),Ve=null!==(re=this.onInitCallbacks.get(Ge))&&void 0!==re?re:new Set;Ve.add(K),this.onInitCallbacks.set(Ge,Ve);const Se=this.instances.get(Ge);return Se&&K(Se,Ge),()=>{Ve.delete(K)}}invokeOnInitCallbacks(K,W){const re=this.onInitCallbacks.get(W);if(re)for(const Ge of re)try{Ge(K,W)}catch{}}getOrInitializeService({instanceIdentifier:K,options:W={}}){let re=this.instances.get(K);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(Ce=K,Ce===ue?void 0:Ce),options:W}),this.instances.set(K,re),this.instancesOptions.set(K,W),this.invokeOnInitCallbacks(re,K),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,K,re)}catch{}var Ce;return re||null}normalizeInstanceIdentifier(K=ue){return this.component?this.component.multipleInstances?K:ue:K}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(K){this.name=K,this.providers=new Map}addComponent(K){const W=this.getProvider(K.name);if(W.isComponentSet())throw new Error(`Component ${K.name} has already been registered with ${this.name}`);W.setComponent(K)}addOrOverwriteComponent(K){this.getProvider(K.name).isComponentSet()&&this.providers.delete(K.name),this.addComponent(K)}getProvider(K){if(this.providers.has(K))return this.providers.get(K);const W=new fe(K,this);return this.providers.set(K,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(gt,Oe,F)=>{F.d(Oe,{Am:()=>Ce,Ub:()=>ge,Yd:()=>ce,in:()=>H});const d=[];var H=(()=>{return(K=H||(H={}))[K.DEBUG=0]="DEBUG",K[K.VERBOSE=1]="VERBOSE",K[K.INFO=2]="INFO",K[K.WARN=3]="WARN",K[K.ERROR=4]="ERROR",K[K.SILENT=5]="SILENT",H;var K})();const N={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ue=H.INFO,fe={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},ye=(K,W,...re)=>{if(W<K.logLevel)return;const Ge=(new Date).toISOString(),Ve=fe[W];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Ve](`[${Ge}]  ${K.name}:`,...re)};class ce{constructor(W){this.name=W,this._logLevel=ue,this._logHandler=ye,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in H))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?N[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...W),this._logHandler(this,H.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...W),this._logHandler(this,H.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,H.INFO,...W),this._logHandler(this,H.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,H.WARN,...W),this._logHandler(this,H.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...W),this._logHandler(this,H.ERROR,...W)}}function ge(K){d.forEach(W=>{W.setLogLevel(K)})}function Ce(K,W){for(const re of d){let Ge=null;W&&W.level&&(Ge=N[W.level]),re.userLogHandler=null===K?null:(Ve,Se,...at)=>{const De=at.map(_e=>{if(null==_e)return null;if("string"==typeof _e)return _e;if("number"==typeof _e||"boolean"==typeof _e)return _e.toString();if(_e instanceof Error)return _e.message;try{return JSON.stringify(_e)}catch{return null}}).filter(_e=>_e).join(" ");Se>=(Ge??Ve.logLevel)&&K({level:H[Se].toLowerCase(),message:De,args:at,type:Ve.name})}}}},8766:(gt,Oe,F)=>{F.d(Oe,{Lj:()=>Ue,X3:()=>et});var d=F(5861);let N,ue;const ce=new WeakMap,ge=new WeakMap,Ce=new WeakMap,K=new WeakMap,W=new WeakMap;let Ve={get(ve,Te,te){if(ve instanceof IDBTransaction){if("done"===Te)return ge.get(ve);if("objectStoreNames"===Te)return ve.objectStoreNames||Ce.get(ve);if("store"===Te)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return _e(ve[Te])},set:(ve,Te,te)=>(ve[Te]=te,!0),has:(ve,Te)=>ve instanceof IDBTransaction&&("done"===Te||"store"===Te)||Te in ve};function De(ve){return"function"==typeof ve?function at(ve){return ve!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ve)?function(...Te){return ve.apply(rt(this),Te),_e(ce.get(this))}:function(...Te){return _e(ve.apply(rt(this),Te))}:function(Te,...te){const le=ve.call(rt(this),Te,...te);return Ce.set(le,Te.sort?Te.sort():[Te]),_e(le)}}(ve):(ve instanceof IDBTransaction&&function Ge(ve){if(ge.has(ve))return;const Te=new Promise((te,le)=>{const de=()=>{ve.removeEventListener("complete",Ee),ve.removeEventListener("error",pe),ve.removeEventListener("abort",pe)},Ee=()=>{te(),de()},pe=()=>{le(ve.error||new DOMException("AbortError","AbortError")),de()};ve.addEventListener("complete",Ee),ve.addEventListener("error",pe),ve.addEventListener("abort",pe)});ge.set(ve,Te)}(ve),((ve,Te)=>Te.some(te=>ve instanceof te))(ve,function fe(){return N||(N=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ve,Ve):ve)}function _e(ve){if(ve instanceof IDBRequest)return function re(ve){const Te=new Promise((te,le)=>{const de=()=>{ve.removeEventListener("success",Ee),ve.removeEventListener("error",pe)},Ee=()=>{te(_e(ve.result)),de()},pe=()=>{le(ve.error),de()};ve.addEventListener("success",Ee),ve.addEventListener("error",pe)});return Te.then(te=>{te instanceof IDBCursor&&ce.set(te,ve)}).catch(()=>{}),W.set(Te,ve),Te}(ve);if(K.has(ve))return K.get(ve);const Te=De(ve);return Te!==ve&&(K.set(ve,Te),W.set(Te,ve)),Te}const rt=ve=>W.get(ve);function et(ve,Te,{blocked:te,upgrade:le,blocking:de,terminated:Ee}={}){const pe=indexedDB.open(ve,Te),je=_e(pe);return le&&pe.addEventListener("upgradeneeded",wt=>{le(_e(pe.result),wt.oldVersion,wt.newVersion,_e(pe.transaction))}),te&&pe.addEventListener("blocked",()=>te()),je.then(wt=>{Ee&&wt.addEventListener("close",()=>Ee()),de&&wt.addEventListener("versionchange",()=>de())}).catch(()=>{}),je}function Ue(ve,{blocked:Te}={}){const te=indexedDB.deleteDatabase(ve);return Te&&te.addEventListener("blocked",()=>Te()),_e(te).then(()=>{})}const Ne=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],Ye=new Map;function ae(ve,Te){if(!(ve instanceof IDBDatabase)||Te in ve||"string"!=typeof Te)return;if(Ye.get(Te))return Ye.get(Te);const te=Te.replace(/FromIndex$/,""),le=Te!==te,de=Me.includes(te);if(!(te in(le?IDBIndex:IDBObjectStore).prototype)||!de&&!Ne.includes(te))return;const Ee=function(){var pe=(0,d.Z)(function*(je,...wt){const tn=this.transaction(je,de?"readwrite":"readonly");let Wt=tn.store;return le&&(Wt=Wt.index(wt.shift())),(yield Promise.all([Wt[te](...wt),de&&tn.done]))[0]});return function(wt){return pe.apply(this,arguments)}}();return Ye.set(Te,Ee),Ee}!function Se(ve){Ve=ve(Ve)}(ve=>({...ve,get:(Te,te,le)=>ae(Te,te)||ve.get(Te,te,le),has:(Te,te)=>!!ae(Te,te)||ve.has(Te,te)}))},5861:(gt,Oe,F)=>{function d(N,ue,fe,ye,ce,ge,Ce){try{var K=N[ge](Ce),W=K.value}catch(re){return void fe(re)}K.done?ue(W):Promise.resolve(W).then(ye,ce)}function H(N){return function(){var ue=this,fe=arguments;return new Promise(function(ye,ce){var ge=N.apply(ue,fe);function Ce(W){d(ge,ye,ce,Ce,K,"next",W)}function K(W){d(ge,ye,ce,Ce,K,"throw",W)}Ce(void 0)})}}F.d(Oe,{Z:()=>H})}},gt=>{gt(gt.s=3009)}]);